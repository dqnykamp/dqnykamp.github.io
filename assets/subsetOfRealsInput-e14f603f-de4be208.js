import{s as E,_ as I,u as T,r as g,j as t,J as L,V as z,L as F}from"./index.js";import{j as U}from"./ActionButtonGroup-15a59f70-09eeb520.js";import{y as C}from"./ToggleButton-5c945175-33da6417.js";const q=E.div`
  display: ${o=>o.vertical?"static":"flex"};
  width: ${o=>o.width=="menu"?"var(--menuWidth)":""};
  // height: 'fit-content';
  // margin: 2px 0px 2px 0px ;
  /* flex-wrap: wrap; */
  overflow: clip;
`,B={margin:"0px -2px 0px -2px",borderRadius:"0",padding:"0px 12px 0px 10px"},G={margin:"-2px 4px -2px 4px",borderRadius:"0",padding:"0px 10px 0px 10px"},J=o=>{const[R,j]=g.useState(0),u=h=>{j(h),o.onClick&&o.onClick(h)};let r=o.vertical?"first_vert":"first",s=o.vertical?"last_vert":"last",x=I.Children.toArray(o.children),f=x.map((h,n)=>{let v={index:n,isSelected:n===R,onClick:u};return n===0?v.num=r:n===x.length-1&&(v.num=s),I.cloneElement(h,v)});return t.jsx(q,{style:{height:"fit-content"},vertical:o.vertical,width:o.width,role:"group",children:t.jsx(F,{theme:o.vertical?G:B,children:f})})},N=E.text`
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
`,O=I.memo(function(o){let{name:R,id:j,SVs:u,actions:r,callAction:s}=T(o,!1),[x,f]=g.useState("add remove points"),h=g.useRef(null),n=g.useRef(null),v=e=>{s({action:r.recordVisibilityChange,args:{isVisible:e}})};if(g.useEffect(()=>()=>{s({action:r.recordVisibilityChange,args:{isVisible:!1}})},[]),u.hidden)return null;function _(e){e===0?(console.log(e),f("add remove points")):e===1?(console.log(e),f("toggle")):e===2&&(console.log(e),f("move points"))}let W=null;u.fixed||(W=t.jsxs(t.Fragment,{children:[t.jsxs(J,{onClick:_,children:[t.jsx(C,{value:"Add/Remove points"}),t.jsx(C,{value:"Toggle points and intervals"}),t.jsx(C,{value:"Move Points"})]}),t.jsxs(U,{children:[t.jsx(L,{onClick:()=>s({action:r.clear}),value:"Clear"}),t.jsx(L,{onClick:()=>s({action:r.setToR}),value:"R"})]})]}));let b=40,w=36,V=[],$=[];for(let e=-10;e<=10;e++)$.push(e);let S=[];for(let e=b;e<780;e=e+w){V.push(t.jsx("line",{x1:e,y1:"35",x2:e,y2:"45",style:{stroke:"black",strokeWidth:"1"},shapeRendering:"geometricPrecision"},"hash"+e));let l=$.shift();S.push(t.jsx(N,{x:e,y:"66",textAnchor:"middle",children:l},"label"+e))}let m=[];for(let e of u.points){let l=e.inSubset,a=P(e.value),i="var(--mainPurple)";l||(i="white");let p=`point-${a}`;m.push(t.jsx("circle",{cx:a,cy:"40",r:"6",stroke:"black",strokeWidth:"1",fill:i},p))}let M=[];for(let e of u.intervals){if(e.right<e.left||!e.inSubset)continue;let l=P(e.left),a=P(e.right);const i=`lowerIntervalPoint${l}`,p=`higherIntervalPoint${a}`,c=`line${l}-${a}`;let d="var(--mainPurple)",y=l,A=a;l<38&&(y=20,m.push(t.jsx("polygon",{points:"5,40 20,46 20,34",style:{fill:d,stroke:d,strokeWidth:"1"}},i))),a>778&&(A=782,m.push(t.jsx("polygon",{points:"795,40 780,46 780,34",style:{fill:d,stroke:d,strokeWidth:"1"}},p))),M.push(t.jsx("line",{x1:y,y1:"40",x2:A,y2:"40",style:{stroke:d,strokeWidth:"8"}},c))}function P(e){let l=10,a=1,i=e+l;return b+i/a*w}function D(e){let l=e-b,a=10,i=1,p=l/w*i;return p=p-a,p}async function k(e,l){let a=e.clientX-h.current.offsetLeft,i=D(a),p=.2;if(l==="up"){if(x==="move points"&&n.current!==null&&(s({action:r.movePoint,args:{pointInd:n.current,value:i,transient:!1}}),n.current=null),x==="add remove points")n.current!==null?s({action:r.deletePoint,args:{pointInd:n.current}}):u.points.map(c=>c.value).includes(i)||s({action:r.addPoint,args:{value:i}});else if(x==="toggle")if(n.current!==null)s({action:r.togglePoint,args:{pointInd:n.current}});else{let c=0;for(let d of u.points)d.value<i&&c++;s({action:r.toggleInterval,args:{intervalInd:c}})}}else if(l==="down"){let c=null;for(let[d,y]of u.points.entries())if(Math.abs(y.value-i)<p){c=d;break}c!==null?n.current=c:n.current=null}else l==="move"?x==="move points"&&n.current!==null&&s({action:r.movePoint,args:{pointInd:n.current,value:i,transient:!0}}):l=="leave"&&x==="move points"&&n.current!==null&&(s({action:r.movePoint,args:{pointInd:n.current,value:i,transient:!1}}),n.current=null)}return t.jsx(z,{partialVisibility:!0,onChange:v,children:t.jsxs(t.Fragment,{children:[t.jsx("a",{name:j}),t.jsx("div",{ref:h,style:{display:"flex",gap:"12px"},children:W}),t.jsxs("svg",{width:"808",height:"80",style:{backgroundColor:"white"},onMouseDown:e=>{k(e,"down")},onMouseUp:e=>{k(e,"up")},onMouseMove:e=>{k(e,"move")},onMouseLeave:e=>{k(e,"leave")},children:[t.jsx("polygon",{points:"5,40 20,50 20,30",style:{fill:"black",stroke:"black",strokeWidth:"1"}}),t.jsx("polygon",{points:"795,40 780,50 780,30",style:{fill:"black",stroke:"black",strokeWidth:"1"}}),M,V,t.jsx("line",{x1:"20",y1:"40",x2:"780",y2:"40",style:{stroke:"black",strokeWidth:"2"}}),m,S]})]})})});export{O as default};
