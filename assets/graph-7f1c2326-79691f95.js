import{r as reactExports,_,u as useDoenetRenderer,j as jsxRuntimeExports,V as VisibilitySensor,C as Context,l as cesc}from"./doenetml.js";import{i}from"./css-ab4d83ca-d016d639.js";var __webpack_modules__={351:(u,N,x)=>{x.d(N,{Z:()=>R});var a,X=x(765),B="1.5.1-dev";a={version:B,licenseText:"JSXGraph v"+B+" Copyright (C) see https://jsxgraph.org",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_TYPE_VIEW3D:32,OBJECT_TYPE_POINT3D:33,OBJECT_TYPE_LINE3D:34,OBJECT_TYPE_PLANE3D:35,OBJECT_TYPE_CURVE3D:36,OBJECT_TYPE_SURFACE3D:37,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,OBJECT_CLASS_3D:8,GENTYPE_ABC:1,GENTYPE_AXIS:2,GENTYPE_MID:3,GENTYPE_REFLECTION:4,GENTYPE_MIRRORELEMENT:5,GENTYPE_REFLECTION_ON_LINE:4,GENTYPE_REFLECTION_ON_POINT:5,GENTYPE_TANGENT:6,GENTYPE_PARALLEL:7,GENTYPE_BISECTORLINES:8,GENTYPE_BOARDIMG:9,GENTYPE_BISECTOR:10,GENTYPE_NORMAL:11,GENTYPE_POINT:12,GENTYPE_GLIDER:13,GENTYPE_INTERSECTION:14,GENTYPE_CIRCLE:15,GENTYPE_CIRCLE2POINTS:16,GENTYPE_LINE:17,GENTYPE_TRIANGLE:18,GENTYPE_QUADRILATERAL:19,GENTYPE_TEXT:20,GENTYPE_POLYGON:21,GENTYPE_REGULARPOLYGON:22,GENTYPE_SECTOR:23,GENTYPE_ANGLE:24,GENTYPE_PLOT:25,GENTYPE_SLIDER:26,GENTYPE_TRUNCATE:27,GENTYPE_JCODE:28,GENTYPE_MOVEMENT:29,GENTYPE_COMBINED:30,GENTYPE_RULER:31,GENTYPE_SLOPETRIANGLE:32,GENTYPE_PERPSEGMENT:33,GENTYPE_LABELMOVEMENT:34,GENTYPE_VECTOR:35,GENTYPE_NONREFLEXANGLE:36,GENTYPE_REFLEXANGLE:37,GENTYPE_PATH:38,GENTYPE_DERIVATIVE:39,GENTYPE_DELETE:41,GENTYPE_COPY:42,GENTYPE_MIRROR:43,GENTYPE_ROTATE:44,GENTYPE_ABLATION:45,GENTYPE_MIGRATE:46,GENTYPE_VECTORCOPY:47,GENTYPE_POLYGONCOPY:48,GENTYPE_CTX_TYPE_G:51,GENTYPE_CTX_TYPE_P:52,GENTYPE_CTX_TRACE:53,GENTYPE_CTX_VISIBILITY:54,GENTYPE_CTX_CCVISIBILITY:55,GENTYPE_CTX_MPVISIBILITY:56,GENTYPE_CTX_WITHLABEL:57,GENTYPE_CTX_LABEL:58,GENTYPE_CTX_FIXED:59,GENTYPE_CTX_STROKEWIDTH:60,GENTYPE_CTX_LABELSIZE:61,GENTYPE_CTX_SIZE:62,GENTYPE_CTX_FACE:63,GENTYPE_CTX_STRAIGHT:64,GENTYPE_CTX_ARROW:65,GENTYPE_CTX_COLOR:66,GENTYPE_CTX_RADIUS:67,GENTYPE_CTX_COORDS:68,GENTYPE_CTX_TEXT:69,GENTYPE_CTX_ANGLERADIUS:70,GENTYPE_CTX_DOTVISIBILITY:71,GENTYPE_CTX_FILLOPACITY:72,GENTYPE_CTX_PLOT:73,GENTYPE_CTX_SCALE:74,GENTYPE_CTX_INTVAL:75,GENTYPE_CTX_POINT1:76,GENTYPE_CTX_POINT2:77,GENTYPE_CTX_LABELSTICKY:78,GENTYPE_CTX_TYPE_I:79,GENTYPE_CTX_HASINNERPOINTS:80,GENTYPE_CTX_SNAPWIDTH:81,GENTYPE_CTX_SNAPTOGRID:82},X.Z.extendConstants(X.Z,a);const R=a},705:(u,N,x)=>{x.d(N,{Z:()=>O});var a=x(765),X=x(351),B=x(88),R=x(109),A=x(275);a.Z.Coords=function(c,b,m,g){this.board=m,this.usrCoords=[],this.scrCoords=[],this.emitter=!R.Z.exists(g)||g,this.emitter&&B.Z.eventify(this),this.setCoordinates(c,b,!1,!0)},a.Z.extend(a.Z.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>A.Z.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(c){var b=Math.round,m=this.board,g=this.usrCoords,f=m.origin.scrCoords;c===!0?(this.scrCoords[0]=b(g[0]),this.scrCoords[1]=b(g[0]*f[1]+g[1]*m.unitX),this.scrCoords[2]=b(g[0]*f[2]-g[2]*m.unitY)):(this.scrCoords[0]=g[0],this.scrCoords[1]=g[0]*f[1]+g[1]*m.unitX,this.scrCoords[2]=g[0]*f[2]-g[2]*m.unitY)},screen2usr:function(){var c=this.board.origin.scrCoords,b=this.scrCoords,m=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(b[1]-c[1])/m.unitX,this.usrCoords[2]=(c[2]-b[2])/m.unitY},distance:function(c,b){var m,g,f=0,v=this.usrCoords,y=this.scrCoords;if(c===X.Z.COORDS_BY_USER){if(m=b.usrCoords,(f=(g=v[0]-m[0])*g)>A.Z.eps*A.Z.eps)return Number.POSITIVE_INFINITY;f+=(g=v[1]-m[1])*g,f+=(g=v[2]-m[2])*g}else m=b.scrCoords,f+=(g=y[1]-m[1])*g,f+=(g=y[2]-m[2])*g;return Math.sqrt(f)},setCoordinates:function(c,b,m,g){var f=this.usrCoords,v=this.scrCoords,y=[f[0],f[1],f[2]],E=[v[0],v[1],v[2]];return c===X.Z.COORDS_BY_USER?(b.length===2?(f[0]=1,f[1]=b[0],f[2]=b[1]):(f[0]=b[0],f[1]=b[1],f[2]=b[2],this.normalizeUsrCoords()),this.usr2screen(m)):(b.length===2?(v[1]=b[0],v[2]=b[1]):(v[1]=b[1],v[2]=b[2]),this.screen2usr()),!this.emitter||g||E[1]===v[1]&&E[2]===v[2]||this.triggerEventHandlers(["update"],[y,E]),this},copy:function(c,b){return b===void 0&&(b=0),this[c].slice(b)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>A.Z.eps},__evt__update:function(c,b){},__evt:function(){}});const O=a.Z.Coords},218:(u,N,x)=>{x.d(N,{Z:()=>m});var a=x(765),X=x(275),B=x(922),R=x(336),A=x(309),O=x(705),c=x(351),b=x(109);a.Z.CoordsElement=function(g,f){var v;for(b.Z.exists(g)||(g=[1,0,0]),v=0;v<g.length;++v)g[v]=parseFloat(g[v]);this.coords=new O.Z(c.Z.COORDS_BY_USER,g,this.board),this.initialCoords=new O.Z(c.Z.COORDS_BY_USER,g,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=b.Z.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",onPolygon:"onPolygon"}),b.Z.exists(this.element)&&this.addAnchor(g,f),this.isDraggable=!0},a.Z.extend(a.Z.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(g){return this.needsUpdate?(b.Z.exists(g)||(g=!1),b.Z.evaluate(this.visProp.frozen)||this.updateConstraint(),this.type===c.Z.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(g=!1),g?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(g),this):this},updateGlider:function(){var g,f,v,y,E,T,M,L,Y,j,F,G,H,q,K,at,tt,Q,it,rt=2*Math.PI,dt=!1,ht=this.slideObject,ut=[];if(this.needsUpdateFromParent=!1,ht.elementClass===c.Z.OBJECT_CLASS_CIRCLE)b.Z.evaluate(this.visProp.isgeonext)&&(rt=1),q=B.Z.projectPointToCircle(this,ht,this.board),K=B.Z.rad([ht.center.X()+1,ht.center.Y()],ht.center,this)/rt;else if(ht.elementClass===c.Z.OBJECT_CLASS_LINE){if(this.onPolygon){if(f=ht.point1.coords.usrCoords,y=(v=ht.point2.coords.usrCoords)[g=1]-f[g],Math.abs(y)<X.Z.eps&&(y=v[g=2]-f[g]),M=(B.Z.projectPointToLine(this,ht,this.board).usrCoords[g]-f[g])/y,T=ht.parentPolygon,M<0){for(g=0;g<T.borders.length;g++)if(ht===T.borders[g]){ht=T.borders[(g-1+T.borders.length)%T.borders.length];break}}else if(M>1){for(g=0;g<T.borders.length;g++)if(ht===T.borders[g]){ht=T.borders[(g+1+T.borders.length)%T.borders.length];break}}ht.id!==this.slideObject.id&&(this.slideObject=ht)}f=ht.point1.coords,v=ht.point2.coords,(y=f.distance(c.Z.COORDS_BY_USER,v))<X.Z.eps?(q=f,dt=!0,K=0):(q=B.Z.projectPointToLine(this,ht,this.board),f=f.usrCoords.slice(0),v=v.usrCoords.slice(0),Math.abs(v[0])<X.Z.eps?(y=v[g=1],Math.abs(y)<X.Z.eps&&(y=v[g=2]),K=((y=(q.usrCoords[g]-f[g])/y)>=0?1:-1)*(y=Math.abs(y))/(y+1)):Math.abs(f[0])<X.Z.eps?(y=f[g=1],Math.abs(y)<X.Z.eps&&(y=f[g=2]),K=(y=(q.usrCoords[g]-v[g])/y)<0?(1-2*y)/(1-y):1/(y+1)):(y=v[g=1]-f[g],Math.abs(y)<X.Z.eps&&(y=v[g=2]-f[g]),K=(q.usrCoords[g]-f[g])/y)),at=b.Z.evaluate(this.visProp.snapwidth),b.Z.evaluate(at)>0&&Math.abs(this._smax-this._smin)>=X.Z.eps&&(E=(K=Math.max(Math.min(K,1),0))*(this._smax-this._smin)+this._smin,K=((E=Math.round(E/at)*at)-this._smin)/(this._smax-this._smin),this.update(!0)),f=ht.point1.coords,!b.Z.evaluate(ht.visProp.straightfirst)&&Math.abs(f.usrCoords[0])>X.Z.eps&&K<0&&(q=f,dt=!0,K=0),v=ht.point2.coords,!b.Z.evaluate(ht.visProp.straightlast)&&Math.abs(v.usrCoords[0])>X.Z.eps&&K>1&&(q=v,dt=!0,K=1)}else if(ht.type===c.Z.OBJECT_TYPE_TURTLE)this.updateConstraint(),q=(tt=B.Z.projectPointToTurtle(this,ht,this.board))[0],K=tt[1];else if(ht.elementClass===c.Z.OBJECT_CLASS_CURVE)if(ht.type===c.Z.OBJECT_TYPE_ARC||ht.type===c.Z.OBJECT_TYPE_SECTOR)q=B.Z.projectPointToCircle(this,ht,this.board),j=B.Z.rad(ht.radiuspoint,ht.center,this),L=0,Y=B.Z.rad(ht.radiuspoint,ht.center,ht.anglepoint),K=j,((at=b.Z.evaluate(ht.visProp.selection))==="minor"&&Y>Math.PI||at==="major"&&Y<Math.PI)&&(L=Y,Y=2*Math.PI),(j<L||j>Y)&&(K=Y,(j<L&&j>.5*L||j>Y&&j>.5*Y+Math.PI)&&(K=L),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),rt=Y-L,this.visProp.isgeonext&&(rt=1),Math.abs(rt)>X.Z.eps&&(K/=rt);else if(this.updateConstraint(),ht.transformations.length>0){for(it=!1,(tt=ht.getTransformationSource())[0]&&(it=tt[0],ut.push(ht),ut.push(tt[1]));tt[0]&&b.Z.exists(tt[1]._transformationSource);)tt=tt[1].getTransformationSource(),ut.push(tt[1]);if(Q=this.coords.usrCoords,it){for(g=0;g<ut.length;g++)ut[g].updateTransformMatrix(),H=X.Z.inverse(ut[g].transformMat),Q=X.Z.matVecMult(H,Q);for(F=new O.Z(c.Z.COORDS_BY_USER,Q,this.board).usrCoords,Q=(G=B.Z.projectCoordsToCurve(F[1],F[2],this.position||0,ut[ut.length-1],this.board))[0].usrCoords,g=ut.length-2;g>=0;g--)Q=X.Z.matVecMult(ut[g].transformMat,Q);G[0]=new O.Z(c.Z.COORDS_BY_USER,Q,this.board)}else ht.updateTransformMatrix(),H=X.Z.inverse(ht.transformMat),Q=X.Z.matVecMult(H,Q),F=new O.Z(c.Z.COORDS_BY_USER,Q,this.board).usrCoords,G=B.Z.projectCoordsToCurve(F[1],F[2],this.position||0,ht,this.board);q=G[0],K=G[1]}else q=(tt=B.Z.projectPointToCurve(this,ht,this.board))[0],K=tt[1];else b.Z.isPoint(ht)&&(q=B.Z.projectPointToPoint(this,ht,this.board),K=this.position);this.coords.setCoordinates(c.Z.COORDS_BY_USER,q.usrCoords,dt),this.position=K},updateGliderFromParent:function(){var g,f,v,y,E,T,M,L,Y,j,F,G,H=this.slideObject,q=[],K=2*Math.PI;if(this.needsUpdateFromParent){if(H.elementClass===c.Z.OBJECT_CLASS_CIRCLE)v=H.Radius(),b.Z.evaluate(this.visProp.isgeonext)&&(K=1),E=[H.center.X()+v*Math.cos(this.position*K),H.center.Y()+v*Math.sin(this.position*K)];else if(H.elementClass===c.Z.OBJECT_CLASS_LINE)g=H.point1.coords.usrCoords,f=H.point2.coords.usrCoords,g[0]===0&&g[1]===0&&g[2]===0||f[0]===0&&f[1]===0&&f[2]===0?E=[0,0,0]:Math.abs(f[0])<X.Z.eps?(y=Math.min(Math.abs(this.position),1-X.Z.eps),y/=1-y,this.position<0&&(y=-y),E=[g[0]+y*f[0],g[1]+y*f[1],g[2]+y*f[2]]):Math.abs(g[0])<X.Z.eps?(y=Math.max(this.position,X.Z.eps),y=(y=Math.min(y,2-X.Z.eps))>1?(y-1)/(y-2):(1-y)/y,E=[f[0]+y*g[0],f[1]+y*g[1],f[2]+y*g[2]]):(y=this.position,E=[g[0]+y*(f[0]-g[0]),g[1]+y*(f[1]-g[1]),g[2]+y*(f[2]-g[2])]);else if(H.type===c.Z.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(c.Z.COORDS_BY_USER,[H.Z(this.position),H.X(this.position),H.Y(this.position)]),this.updateConstraint(),E=B.Z.projectPointToTurtle(this,H,this.board)[0].usrCoords;else if(H.elementClass===c.Z.OBJECT_CLASS_CURVE){for(L=!1,(T=H.getTransformationSource())[0]&&(L=T[0],q.push(H),q.push(T[1]));T[0]&&b.Z.exists(T[1]._transformationSource);)T=T[1].getTransformationSource(),q.push(T[1]);if(L?this.coords.setCoordinates(c.Z.COORDS_BY_USER,[q[q.length-1].Z(this.position),q[q.length-1].X(this.position),q[q.length-1].Y(this.position)]):this.coords.setCoordinates(c.Z.COORDS_BY_USER,[H.Z(this.position),H.X(this.position),H.Y(this.position)]),H.type===c.Z.OBJECT_TYPE_ARC||H.type===c.Z.OBJECT_TYPE_SECTOR)Y=B.Z.rad([H.center.X()+1,H.center.Y()],H.center,H.radiuspoint),j=0,G=B.Z.rad(H.radiuspoint,H.center,H.anglepoint),(H.visProp.selection==="minor"&&G>Math.PI||H.visProp.selection==="major"&&G<Math.PI)&&(j=G,G=2*Math.PI),K=G-j,b.Z.evaluate(this.visProp.isgeonext)&&(K=1),((F=this.position*K)<j||F>G)&&(((F=G)<j&&F>.5*j||F>G&&F>.5*G+Math.PI)&&(F=j),this.position=F,Math.abs(K)>X.Z.eps&&(this.position/=K)),v=H.Radius(),E=[H.center.X()+v*Math.cos(this.position*K+Y),H.center.Y()+v*Math.sin(this.position*K+Y)];else if(this.updateConstraint(),L)for(E=B.Z.projectPointToCurve(this,q[q.length-1],this.board)[0].usrCoords,M=q.length-2;M>=0;M--)E=new O.Z(c.Z.COORDS_BY_USER,X.Z.matVecMult(q[M].transformMat,E),this.board).usrCoords;else E=B.Z.projectPointToCurve(this,H,this.board)[0].usrCoords}else b.Z.isPoint(H)&&(E=B.Z.projectPointToPoint(this,H,this.board).usrCoords);this.coords.setCoordinates(c.Z.COORDS_BY_USER,E,!1)}else this.needsUpdateFromParent=!0},updateRendererGeneric:function(g){return this.needsUpdate&&this.board.renderer?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>X.Z.eps&&this.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[g](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(g){return this.isReal&&g.isReal?this.coords.distance(c.Z.COORDS_BY_USER,g.coords):NaN},snapToGrid:function(g){return this.handleSnapToGrid(g)},handleSnapToPoints:function(g){var f,v,y,E,T,M,L,Y,j=0,F=1/0,G=null,H=b.Z.evaluate(this.visProp.ignoredsnaptopoints),q=!1;if(E=this.board.objectsList.length,H&&(L=H.length),b.Z.evaluate(this.visProp.snaptopoints)||g){for(T=b.Z.evaluate(this.visProp.attractorunit),M=b.Z.evaluate(this.visProp.attractordistance),f=0;f<E;f++){if(v=this.board.objectsList[f],H){for(q=!1,Y=0;Y<L;Y++)if(v===this.board.select(H[Y])){q=!0;break}if(q)continue}b.Z.isPoint(v)&&v!==this&&v.visPropCalc.visible&&(y=B.Z.projectPointToPoint(this,v,this.board),(j=T==="screen"?y.distance(c.Z.COORDS_BY_SCREEN,this.coords):y.distance(c.Z.COORDS_BY_USER,this.coords))<M&&j<F&&(F=j,G=y))}G!==null&&this.coords.setCoordinates(c.Z.COORDS_BY_USER,G.usrCoords)}return this},snapToPoints:function(g){return this.handleSnapToPoints(g)},handleAttractors:function(){var g,f,v,y,E=0,T=b.Z.evaluate(this.visProp.attractorunit),M=b.Z.evaluate(this.visProp.attractordistance),L=b.Z.evaluate(this.visProp.snatchdistance),Y=b.Z.evaluate(this.visProp.attractors),j=Y.length;if(M!==0){for(g=0;g<j;g++)if(f=this.board.select(Y[g]),b.Z.exists(f)&&f!==this){if(b.Z.isPoint(f)?v=B.Z.projectPointToPoint(this,f,this.board):f.elementClass===c.Z.OBJECT_CLASS_LINE?(y=B.Z.projectCoordsToSegment(this.coords.usrCoords,f.point1.coords.usrCoords,f.point2.coords.usrCoords),v=!b.Z.evaluate(f.visProp.straightfirst)&&y[1]<0?f.point1.coords:!b.Z.evaluate(f.visProp.straightlast)&&y[1]>1?f.point2.coords:new O.Z(c.Z.COORDS_BY_USER,y[0],this.board)):f.elementClass===c.Z.OBJECT_CLASS_CIRCLE?v=B.Z.projectPointToCircle(this,f,this.board):f.elementClass===c.Z.OBJECT_CLASS_CURVE?v=B.Z.projectPointToCurve(this,f,this.board)[0]:f.type===c.Z.OBJECT_TYPE_TURTLE?v=B.Z.projectPointToTurtle(this,f,this.board)[0]:f.type===c.Z.OBJECT_TYPE_POLYGON&&(v=new O.Z(c.Z.COORDS_BY_USER,B.Z.projectCoordsToPolygon(this.coords.usrCoords,f),this.board)),(E=T==="screen"?v.distance(c.Z.COORDS_BY_SCREEN,this.coords):v.distance(c.Z.COORDS_BY_USER,this.coords))<M){this.type===c.Z.OBJECT_TYPE_GLIDER&&(f===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===f)||this.makeGlider(f);break}E>=L&&(f===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===f)&&this.popSlideObject()}return this}},setPositionDirectly:function(g,f){var v,y,E,T,M=this.coords;if(this.relativeCoords)return y=new O.Z(g,f,this.board),b.Z.evaluate(this.visProp.islabel)?(E=A.Z.subtract(y.scrCoords,M.scrCoords),this.relativeCoords.scrCoords[1]+=E[1],this.relativeCoords.scrCoords[2]+=E[2]):(E=A.Z.subtract(y.usrCoords,M.usrCoords),this.relativeCoords.usrCoords[1]+=E[1],this.relativeCoords.usrCoords[2]+=E[2]),this;for(this.coords.setCoordinates(g,f),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),v=this.transformations.length-1;v>=0;v--)g===c.Z.COORDS_BY_SCREEN?T=new O.Z(g,f,this.board).usrCoords:(f.length===2&&(f=[1].concat(f)),T=f),this.initialCoords.setCoordinates(c.Z.COORDS_BY_USER,X.Z.matVecMult(X.Z.inverse(this.transformations[v].matrix),T));return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===c.Z.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(g,f){var v;return f=new O.Z(g,f,this.board),v=this.board.create("transform",f.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(v):this.addTransform(this,v),this.prepareUpdate().update(),this},setPosition:function(g,f){return this.setPositionDirectly(g,f)},setGliderPosition:function(g){return this.type===c.Z.OBJECT_TYPE_GLIDER&&(this.position=g,this.board.update()),this},makeGlider:function(g){var f,v,y,E=this.board.select(g),T=!1;if(E.type===c.Z.OBJECT_TYPE_POLYGON){for(f=Number.MAX_VALUE,v=0;v<E.borders.length;v++)(y=a.Z.Math.Geometry.distPointLine(this.coords.usrCoords,E.borders[v].stdform))<f&&(f=y,g=E.borders[v]);E=this.board.select(g),T=!0}if(!b.Z.exists(E))throw new Error("JSXGraph: slide object undefined.");if(E.type===c.Z.OBJECT_TYPE_TICKS)throw new Error("JSXGraph: gliders on ticks are not possible.");return this.slideObject=this.board.select(g),this.slideObjects.push(this.slideObject),this.addParents(g),this.type=c.Z.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=T,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),this.slideObjects.length===0?(this.type=this._org_type,this.type===c.Z.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===c.Z.OBJECT_CLASS_TEXT?this.elType="text":this.type===c.Z.OBJECT_TYPE_IMAGE?this.elType="image":this.type===c.Z.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var g,f;if(this.type!==c.Z.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,this.isDraggable)return;this.isDraggable=!0,this.elementClass===c.Z.OBJECT_CLASS_POINT&&(this.type=c.Z.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null}for(g in this.board.objects)this.board.objects.hasOwnProperty(g)&&(f=this.board.objects[g]).descendants&&(delete f.descendants[this.id],delete f.childElements[this.id],this.hasLabel&&(delete f.descendants[this.label.id],delete f.childElements[this.label.id]));this.ancestors={},this.slideObject=null,this.slideObjects=[],this.elementClass===c.Z.OBJECT_CLASS_POINT?(this.type=c.Z.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===c.Z.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===c.Z.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(g){var f,v,y=[],E=["X","Y"],T=function(L){return function(){return L}},M=function(L){return function(){return L.Value()}};for(this.elementClass===c.Z.OBJECT_CLASS_POINT&&(this.type=c.Z.OBJECT_TYPE_CAS),this.isDraggable=!1,f=0;f<g.length;f++)v=g[f],b.Z.isString(v)?(y[f]=this.board.jc.snippet(v,!0,null,!0),this.addParentsFromJCFunctions([y[f]]),g.length===2&&(this[E[f]+"jc"]=g[f])):b.Z.isFunction(v)?y[f]=v:b.Z.isNumber(v)?y[f]=T(v):b.Z.isObject(v)&&b.Z.isFunction(v.Value)&&(y[f]=M(v)),y[f].origin=v;return g.length===1?this.updateConstraint=function(){var L=y[0]();return b.Z.isArray(L)?this.coords.setCoordinates(c.Z.COORDS_BY_USER,L):this.coords=L,this}:g.length===2?(this.XEval=y[0],this.YEval=y[1],this.addParents([y[0].origin,y[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(c.Z.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=y[0],this.XEval=y[1],this.YEval=y[2],this.addParents([y[0].origin,y[1].origin,y[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(c.Z.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),this.board.isSuspendedUpdate||(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(g,f){this.relativeCoords=f?new O.Z(c.Z.COORDS_BY_SCREEN,g.slice(0,2),this.board):new O.Z(c.Z.COORDS_BY_USER,g,this.board),this.element.addChild(this),f&&this.addParents(this.element),this.XEval=function(){var v,y,E;return b.Z.evaluate(this.visProp.islabel)?(E=b.Z.evaluate(this.visProp.offset),v=parseFloat(E[0]),y=this.element.getLabelAnchor(),new O.Z(c.Z.COORDS_BY_SCREEN,[v+this.relativeCoords.scrCoords[1]+y.scrCoords[1],0],this.board).usrCoords[1]):(y=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+y.usrCoords[1])},this.YEval=function(){var v,y,E;return b.Z.evaluate(this.visProp.islabel)?(E=b.Z.evaluate(this.visProp.offset),v=-parseFloat(E[1]),y=this.element.getLabelAnchor(),new O.Z(c.Z.COORDS_BY_SCREEN,[0,v+this.relativeCoords.scrCoords[2]+y.scrCoords[2]],this.board).usrCoords[2]):(y=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+y.usrCoords[2])},this.ZEval=b.Z.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(c.Z.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(g){var f;if(this.transformations.length===0)return this;for(f=0;f<this.transformations.length;f++)this.transformations[f].update();return this},addTransform:function(g,f){var v,y=b.Z.isArray(f)?f:[f],E=y.length;for(this.transformations.length===0&&(this.baseElement=g),v=0;v<E;v++)this.transformations.push(y[v]);return this},startAnimation:function(g,f,v){var y=b.Z.evaluate(g),E=b.Z.evaluate(f),T=this;return v=b.Z.evaluate(v)||250,this.type!==c.Z.OBJECT_TYPE_GLIDER||b.Z.exists(this.intervalCode)||(this.intervalCode=window.setInterval(function(){T._anim(y,E)},v),b.Z.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return b.Z.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(g,f,v){v=v||{};var y,E,T,M,L,Y=[],j=[],F=f/this.board.attr.animationdelay,G=function(H,q){return function(){return g[H][q]}};if(b.Z.isArray(g)){for(T=g.length,y=0;y<T;y++)b.Z.isPoint(g[y])?j[y]=g[y]:j[y]={elementClass:c.Z.OBJECT_CLASS_POINT,X:G(y,0),Y:G(y,1)};if((f=f||0)===0)return this.setPosition(c.Z.COORDS_BY_USER,[j[j.length-1].X(),j[j.length-1].Y()]),this.board.update(this);if(!b.Z.exists(v.interpolate)||v.interpolate)for(E=R.Z.Neville(j),y=0;y<F;y++)Y[y]=[],Y[y][0]=E[0]((F-y)/F*E[3]()),Y[y][1]=E[1]((F-y)/F*E[3]());else{for(T=g.length-1,y=0;y<F;++y)L=y/F*T-(M=Math.floor(y/F*T)),Y[y]=[],Y[y][0]=(1-L)*j[M].X()+L*j[M+1].X(),Y[y][1]=(1-L)*j[M].Y()+L*j[M+1].Y();Y.push([j[T].X(),j[T].Y()]),Y.reverse()}this.animationPath=Y}else b.Z.isFunction(g)&&(this.animationPath=g,this.animationStart=new Date().getTime());return this.animationCallback=v.callback,this.board.addAnimation(this),this},moveTo:function(g,f,v){v=v||{},g=new O.Z(c.Z.COORDS_BY_USER,g,this.board);var y,E=this.board.attr.animationdelay,T=Math.ceil(f/E),M=[],L=this.coords.usrCoords[1],Y=this.coords.usrCoords[2],j=g.usrCoords[1]-L,F=g.usrCoords[2]-Y,G=function(H){return v.effect&&v.effect==="<>"?Math.pow(Math.sin(H/T*Math.PI/2),2):H/T};if(!b.Z.exists(f)||f===0||Math.abs(g.usrCoords[0]-this.coords.usrCoords[0])>X.Z.eps)return this.setPosition(c.Z.COORDS_BY_USER,g.usrCoords),this.board.update(this);if(!b.Z.exists(v.callback)&&Math.abs(j)<X.Z.eps&&Math.abs(F)<X.Z.eps)return this;for(y=T;y>=0;y--)M[T-y]=[g.usrCoords[0],L+j*G(y),Y+F*G(y)];return this.animationPath=M,this.animationCallback=v.callback,this.board.addAnimation(this),this},visit:function(g,f,v){g=new O.Z(c.Z.COORDS_BY_USER,g,this.board);var y,E,T,M=this.board.attr.animationdelay,L=[],Y=this.coords.usrCoords[1],j=this.coords.usrCoords[2],F=g.usrCoords[1]-Y,G=g.usrCoords[2]-j,H=function(q){var K=q<T/2?2*q/T:2*(T-q)/T;return v.effect&&v.effect==="<>"?Math.pow(Math.sin(K*Math.PI/2),2):K};for(b.Z.isNumber(v)?v={repeat:v}:(v=v||{},b.Z.exists(v.repeat)||(v.repeat=1)),T=Math.ceil(f/(M*v.repeat)),E=0;E<v.repeat;E++)for(y=T;y>=0;y--)L[E*(T+1)+T-y]=[g.usrCoords[0],Y+F*H(y),j+G*H(y)];return this.animationPath=L,this.animationCallback=v.callback,this.board.addAnimation(this),this},_anim:function(g,f){var v,y,E,T,M,L,Y,j,F;return this.intervalCount+=1,this.intervalCount>f&&(this.intervalCount=0),this.slideObject.elementClass===c.Z.OBJECT_CLASS_LINE?(Y=this.slideObject.point1.coords.scrCoords,j=this.slideObject.point2.coords.scrCoords,v=Math.round((j[1]-Y[1])*this.intervalCount/f),y=Math.round((j[2]-Y[2])*this.intervalCount/f),g>0?T=this.slideObject.point1:(T=this.slideObject.point2,v*=-1,y*=-1),this.coords.setCoordinates(c.Z.COORDS_BY_SCREEN,[T.coords.scrCoords[1]+v,T.coords.scrCoords[2]+y])):this.slideObject.elementClass===c.Z.OBJECT_CLASS_CURVE?(M=g>0?Math.round(this.intervalCount/f*this.board.canvasWidth):Math.round((f-this.intervalCount)/f*this.board.canvasWidth),this.coords.setCoordinates(c.Z.COORDS_BY_SCREEN,[M,0]),F=B.Z.projectPointToCurve(this,this.slideObject,this.board),this.coords=F[0],this.position=F[1]):this.slideObject.elementClass===c.Z.OBJECT_CLASS_CIRCLE&&(E=2*Math.PI,E*=g<0?this.intervalCount/f:(f-this.intervalCount)/f,L=this.slideObject.Radius(),this.coords.setCoordinates(c.Z.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+L*Math.cos(E),this.slideObject.center.coords.usrCoords[2]+L*Math.sin(E)])),this.board.update(this),this},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var g=[this.Z(),this.X(),this.Y()];return this.parents.length!==0&&(g=this.parents),this.type===c.Z.OBJECT_TYPE_GLIDER&&(g=[this.X(),this.Y(),this.slideObject.id]),g}}),a.Z.CoordsElement.create=function(g,f,v,y,E,T){var M,L,Y=!1;for(L=0;L<v.length;L++)(b.Z.isFunction(v[L])||b.Z.isString(v[L]))&&(Y=!0);if(Y)(M=new g(f,[0,0],y,E,T)).addConstraint(v);else if(b.Z.isNumber(v[0])&&b.Z.isNumber(v[1]))M=new g(f,v,y,E,T),b.Z.exists(y.slideobject)?M.makeGlider(y.slideobject):M.baseElement=M,M.isDraggable=!0;else{if(!b.Z.isObject(v[0])||!b.Z.isTransformationOrArray(v[1]))return!1;(M=new g(f,[0,0],y,E,T)).addTransform(v[0],v[1]),M.isDraggable=!1}return M.handleSnapToGrid(),M.handleSnapToPoints(),M.handleAttractors(),M.addParents(v),M};const m=a.Z.CoordsElement},958:(u,N,x)=>{x.d(N,{Z:()=>g});var a=x(765),X=x(351),B=x(705),R=x(275),A=x(309),O=x(766),c=x(88),b=x(327),m=x(109);a.Z.GeometryElement=function(f,v,y,E){var T,M,L;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},c.Z.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,arguments.length>0){for(M in this.board=f,this.type=y,this._org_type=y,this.elementClass=E||X.Z.OBJECT_CLASS_OTHER,this.id=v.id,T=v.name,m.Z.exists(T)||(T=this.board.generateName(this)),T!==""&&(this.board.elementsByName[T]=this),this.name=T,this.needsRegularUpdate=v.needsregularupdate,m.Z.clearVisPropOld(this),L=this.resolveShortcuts(v))L.hasOwnProperty(M)&&this._set(M,L[M]);this.visProp.draft=L.draft&&L.draft.draft}},a.Z.extend(a.Z.GeometryElement.prototype,{addChild:function(f){var v,y;for(v in this.childElements[f.id]=f,this.addDescendants(f),f.ancestors[this.id]=this,this.descendants)if(this.descendants.hasOwnProperty(v))for(y in this.descendants[v].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(y)&&(this.descendants[v].ancestors[this.ancestors[y].id]=this.ancestors[y]);for(v in this.ancestors)if(this.ancestors.hasOwnProperty(v))for(y in this.descendants)this.descendants.hasOwnProperty(y)&&(this.ancestors[v].descendants[this.descendants[y].id]=this.descendants[y]);return this},addDescendants:function(f){var v;for(v in this.descendants[f.id]=f,f.childElements)f.childElements.hasOwnProperty(v)&&this.addDescendants(f.childElements[v]);return this},addParents:function(f){var v,y,E;for(y=(E=m.Z.isArray(f)?f:arguments).length,v=0;v<y;++v)m.Z.exists(E[v])&&(m.Z.isId(this.board,E[v])?this.parents.push(E[v]):m.Z.exists(E[v].id)&&this.parents.push(E[v].id));this.parents=m.Z.uniqueArray(this.parents)},setParents:function(f){this.parents=[],this.addParents(f)},addParentsFromJCFunctions:function(f){var v,y,E;for(v=0;v<f.length;v++)for(y in f[v].deps)E=f[v].deps[y],this.addParents(E),E.addChild(this);return this},removeChild:function(f){return delete this.childElements[f.id],this.removeDescendants(f),delete f.ancestors[this.id],this},removeDescendants:function(f){var v;for(v in delete this.descendants[f.id],f.childElements)f.childElements.hasOwnProperty(v)&&this.removeDescendants(f.childElements[v]);return this},countChildren:function(){var f,v,y=0;for(f in v=this.childElements)v.hasOwnProperty(f)&&f.indexOf("Label")<0&&y++;return y},getName:function(){return this.name},addTransform:function(f){return this},draggable:function(){return this.isDraggable&&!m.Z.evaluate(this.visProp.fixed)&&this.type!==X.Z.OBJECT_TYPE_GLIDER},setPosition:function(f,v){var y,E,T,M,L=[];if(!m.Z.exists(this.parents))return this;for(T=this.parents.length,E=0;E<T;++E)if(y=this.board.select(this.parents[E]),m.Z.isPoint(y)){if(!y.draggable())return this;L.push(y)}for(v.length===3&&(v=v.slice(1)),M=this.board.create("transform",v,{type:"translate"}),(T=L.length)>0?M.applyOnce(L):this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(M):this.addTransform(M),E=0;E<T;++E)L[E].type===X.Z.OBJECT_TYPE_GLIDER&&L[E].updateGlider();return this},setPositionDirectly:function(f,v,y){var E=new B.Z(f,v,this.board,!1),T=new B.Z(f,y,this.board,!1),M=A.Z.subtract(E.usrCoords,T.usrCoords);return this.setPosition(X.Z.COORDS_BY_USER,M),this},generatePolynomial:function(){return[]},animate:function(f,v,y){y=y||{};var E,T,M,L=this.board.attr.animationdelay,Y=Math.ceil(v/L),j=this,F=function(H,q,K){var at,tt,Q,it,rt;for(at=b.Z.rgb2hsv(H),Q=((tt=b.Z.rgb2hsv(q))[0]-at[0])/Y,it=(tt[1]-at[1])/Y,rt=(tt[2]-at[2])/Y,j.animationData[K]=[],M=0;M<Y;M++)j.animationData[K][Y-M-1]=b.Z.hsv2rgb(at[0]+(M+1)*Q,at[1]+(M+1)*it,at[2]+(M+1)*rt)},G=function(H,q,K,at){var tt,Q;if(H=parseFloat(H),q=parseFloat(q),!isNaN(H)&&!isNaN(q))for(Q=(q-H)/Y,j.animationData[K]=[],M=0;M<Y;M++)tt=H+(M+1)*Q,j.animationData[K][Y-M-1]=at?Math.floor(tt):tt};for(E in this.animationData={},f)if(f.hasOwnProperty(E))switch(T=E.toLowerCase()){case"strokecolor":case"fillcolor":F(this.visProp[T],f[E],T);break;case"size":if(!m.Z.isPoint(this))break;G(this.visProp[T],f[E],T,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":G(this.visProp[T],f[E],T,!1)}return this.animationCallback=y.callback,this.board.addAnimation(this),this},update:function(){return m.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(f){return this.prepareUpdate().update().updateVisibility(f).updateRenderer()},setDisplayRendNode:function(f){var v,y,E,T,M;if(f===void 0&&(f=this.visPropCalc.visible),f===this.visPropOld.visible)return this;for(this.board.renderer.display(this,f),y=this.inherits.length,E=0;E<y;E++)if(M=this.inherits[E],m.Z.isArray(M))for(T=M.length,v=0;v<T;v++)m.Z.exists(M[v])&&m.Z.exists(M[v].rendNode)&&m.Z.evaluate(M[v].visProp.visible)==="inherit"&&M[v].setDisplayRendNode(f);else m.Z.exists(M)&&m.Z.exists(M.rendNode)&&m.Z.evaluate(M.visProp.visible)==="inherit"&&M.setDisplayRendNode(f);return this.hasLabel&&m.Z.exists(this.label)&&m.Z.exists(this.label.rendNode)&&m.Z.evaluate(this.label.visProp.visible)==="inherit"&&this.label.setDisplayRendNode(f),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(f){var v,y,E,T,M,L;if(this.needsUpdate){for(f!==void 0?this.visPropCalc.visible=f:(L=m.Z.evaluate(this.visProp.visible),m.Z.exists(this.hiddenByParent)&&this.hiddenByParent&&(L=!1),L!=="inherit"&&(this.visPropCalc.visible=L)),y=this.inherits.length,E=0;E<y;E++)if(M=this.inherits[E],m.Z.isArray(M))for(T=M.length,v=0;v<T;v++)m.Z.exists(M[v])&&m.Z.evaluate(M[v].visProp.visible)==="inherit"&&M[v].prepareUpdate().updateVisibility(this.visPropCalc.visible);else m.Z.exists(M)&&m.Z.evaluate(M.visProp.visible)==="inherit"&&M.prepareUpdate().updateVisibility(this.visPropCalc.visible);m.Z.exists(this.label)&&m.Z.exists(this.label.visProp)&&m.Z.evaluate(this.label.visProp.visible)&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(f,v){var y;if(f=f.toLocaleLowerCase(),this.visProp.hasOwnProperty(f)&&f.indexOf("color")>=0&&m.Z.isString(v)&&v.length===9&&v.charAt(0)==="#")v=b.Z.rgba2rgbo(v),this.visProp[f]=v[0],this.visProp[f.replace("color","opacity")]=v[1];else if(v===null||!m.Z.isObject(v)||m.Z.exists(v.id)||m.Z.exists(v.name))this.visProp[f]=v;else for(y in this.visProp[f]={},v)v.hasOwnProperty(y)&&(this.visProp[f][y.toLocaleLowerCase()]=v[y])},resolveShortcuts:function(f){var v,y,E,T=["traceattributes","traceAttributes"];for(v in O.Z.shortcuts)if(O.Z.shortcuts.hasOwnProperty(v)){if(m.Z.exists(f[v]))for(y=0;y<O.Z.shortcuts[v].length;y++)m.Z.exists(f[O.Z.shortcuts[v][y]])||(f[O.Z.shortcuts[v][y]]=f[v]);for(E=0;E<T.length;E++)m.Z.isObject(f[T[E]])&&(f[T[E]]=this.resolveShortcuts(f[T[E]]))}return f},setLabel:function(f){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(f)},setLabelText:function(f){return m.Z.exists(this.label)&&(f=f.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(f)),this},setName:function(f){f=f.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.elType!=="slider"&&this.setLabelText(f),this.setAttribute({name:f})},setProperty:function(){a.Z.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(f){var v,y,E,T,M,L,Y,j,F,G={};for(v=0;v<arguments.length;v++)L=arguments[v],m.Z.isString(L)?(j=L.split(":"),G[m.Z.trim(j[0])]=m.Z.trim(j[1])):m.Z.isArray(L)?G[L[0]]=L[1]:a.Z.extend(G,L);for(v in G=this.resolveShortcuts(G))if(G.hasOwnProperty(v)){if(T=v.replace(/\s+/g,"").toLowerCase(),M=G[v],m.Z.isObject(M)&&m.Z.exists(this.visProp[T])){if(this.visProp[T]=m.Z.merge(this.visProp[T],M),this.type===X.Z.OBJECT_TYPE_TICKS&&m.Z.exists(this.labels))for(E=this.labels.length,y=0;y<E;y++)this.labels[y].setAttribute(M);else if(m.Z.exists(this[T]))if(m.Z.isArray(this[T]))for(y=0;y<this[T].length;y++)this[T][y].setAttribute(M);else this[T].setAttribute(M);continue}switch(F=this.visProp[T],T){case"name":F=this.name,delete this.board.elementsByName[this.name],this.name=M,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!(M==="false"||M===!1),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"labelcolor":Y=(M=b.Z.rgba2rgbo(M))[1],M=M[0],Y===0&&m.Z.exists(this.label)&&this.hasLabel&&this.label.hideElement(),m.Z.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=M,this.board.renderer.setObjectStrokeColor(this.label,M,Y)),this.elementClass===X.Z.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=M,this.visProp.strokeopacity=Y,this.board.renderer.setObjectStrokeColor(this,M,Y));break;case"infoboxtext":m.Z.isString(M)?this.infoboxText=M:this.infoboxText=!1;break;case"visible":this.visProp.visible=M!=="false"&&(M==="true"||M),this.setDisplayRendNode(m.Z.evaluate(this.visProp.visible)),m.Z.evaluate(this.visProp.visible)&&m.Z.exists(this.updateSize)&&this.updateSize();break;case"face":m.Z.isPoint(this)&&(this.visProp.face=M,this.board.renderer.changePointStyle(this));break;case"trace":M==="false"||M===!1?(this.clearTrace(),this.visProp.trace=!1):this.visProp.trace=M!=="pause";break;case"gradient":this.visProp.gradient=M,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":M=b.Z.rgba2rgbo(M),this.visProp.gradientsecondcolor=M[0],this.visProp.gradientsecondopacity=M[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=M,this.board.renderer.updateGradient(this);break;case"withlabel":this.visProp.withlabel=M,m.Z.evaluate(M)?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=M;break;case"radius":this.type!==X.Z.OBJECT_TYPE_ANGLE&&this.type!==X.Z.OBJECT_TYPE_SECTOR||this.setRadius(M);break;case"rotate":(this.elementClass===X.Z.OBJECT_CLASS_TEXT&&m.Z.evaluate(this.visProp.display)==="internal"||this.type===X.Z.OBJECT_TYPE_IMAGE)&&this.addRotation(M);break;case"ticksdistance":this.type===X.Z.OBJECT_TYPE_TICKS&&m.Z.isNumber(M)&&(this.ticksFunction=this.makeTicksFunction(M));break;case"generatelabelvalue":this.type===X.Z.OBJECT_TYPE_TICKS&&m.Z.isFunction(M)&&(this.generateLabelValue=M);break;case"onpolygon":this.type===X.Z.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!M);break;case"disabled":m.Z.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!M);break;case"checked":m.Z.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!M);break;case"maxlength":m.Z.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!M);break;case"layer":this.board.renderer.setLayer(this,m.Z.evaluate(M)),this._set(T,M);break;case"tabindex":m.Z.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",M),this._set(T,M));break;default:m.Z.exists(this.visProp[T])&&(!a.Z.Validator[T]||a.Z.Validator[T]&&a.Z.Validator[T](M)||a.Z.Validator[T]&&m.Z.isFunction(M)&&a.Z.Validator[T](M()))&&(M=(!M.toLowerCase||M.toLowerCase()!=="false")&&M,this._set(T,M))}this.triggerEventHandlers(["attribute:"+T],[F,M,this])}return this.triggerEventHandlers(["attribute"],[G,this]),m.Z.evaluate(this.visProp.needsregularupdate)?this.board.update(this):this.board.fullUpdate(),this},getProperty:function(){a.Z.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(f){var v;switch(f=f.toLowerCase()){case"needsregularupdate":v=this.needsRegularUpdate;break;case"labelcolor":v=this.label.visProp.strokecolor;break;case"infoboxtext":v=this.infoboxText;break;case"withlabel":v=this.hasLabel;break;default:v=this.visProp[f]}return v},setDash:function(f){return this.setAttribute({dash:f}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.board.renderer.getElementById(this.id)),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new B.Z(X.Z.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new B.Z(X.Z.COORDS_BY_USER,[0,0],this.board)},setArrow:function(f,v){return this.visProp.firstarrow=f,this.visProp.lastarrow=v,v&&(this.type=X.Z.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var f=m.Z.evaluate(this.visProp.gradient);f!=="linear"&&f!=="radial"||this.board.renderer.setGradient(this)},createLabel:function(){var f,v=this;return a.Z.elements.text?((f=m.Z.deepCopy(this.visProp.label,null)).id=this.id+"Label",f.isLabel=!0,f.anchor=this,f.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=a.Z.elements.text(this.board,[0,0,function(){return m.Z.isFunction(v.name)?v.name():v.name}],f),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):a.Z.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(f){return f=m.Z.def(f,!1),!m.Z.evaluate(this.visProp.highlight)||this.highlighted&&!f||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var f;for(f in this.traces)this.traces.hasOwnProperty(f)&&this.board.renderer.remove(this.traces[f]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=R.Z.normalize(this.stdform),this},toJSON:function(){var f,v,y=['{"name":',this.name];for(v in y.push(', "id":'+this.id),f=[],this.visProp)this.visProp.hasOwnProperty(v)&&m.Z.exists(this.visProp[v])&&f.push('"'+v+'":'+this.visProp[v]);return y.push(', "visProp":{'+f.toString()+"}"),y.push("}"),y.join("")},addRotation:function(f){var v,y,E,T,M,L=this;return(this.elementClass===X.Z.OBJECT_CLASS_TEXT&&m.Z.evaluate(this.visProp.display)==="internal"||this.type===X.Z.OBJECT_TYPE_IMAGE)&&f!==0&&(v=this.board.create("transform",[function(){return-L.X()},function(){return-L.Y()}],{type:"translate"}),y=this.board.create("transform",[function(){return L.X()},function(){return L.Y()}],{type:"translate"}),E=this.board.create("transform",[function(){return L.board.unitX/L.board.unitY},function(){return 1}],{type:"scale"}),T=this.board.create("transform",[function(){return L.board.unitY/L.board.unitX},function(){return 1}],{type:"scale"}),M=this.board.create("transform",[function(){return m.Z.evaluate(f)*Math.PI/180}],{type:"rotate"}),v.bindTo(this),E.bindTo(this),M.bindTo(this),T.bindTo(this),y.bindTo(this)),this},highlightStrokeColor:function(f){return a.Z.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:f}),this},strokeColor:function(f){return a.Z.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:f}),this},strokeWidth:function(f){return a.Z.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:f}),this},fillColor:function(f){return a.Z.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:f}),this},highlightFillColor:function(f){return a.Z.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:f}),this},labelColor:function(f){return a.Z.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:f}),this},dash:function(f){return a.Z.deprecated("dash()","setAttribute()"),this.setAttribute({dash:f}),this},visible:function(f){return a.Z.deprecated("visible()","setAttribute()"),this.setAttribute({visible:f}),this},shadow:function(f){return a.Z.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:f}),this},getType:function(){return this.elType},getParents:function(){return m.Z.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var f,v=m.Z.deepCopy(this.visProp),y=[],E=y.length;for(v.id=this.id,v.name=this.name,f=0;f<E;f++)delete v[y[f]];return v},hasPoint:function(f,v){return!1},addTicks:function(f){return f.id!==""&&m.Z.exists(f.id)||(f.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(f),this.ticks.push(f),f.id},removeAllTicks:function(){var f;if(m.Z.exists(this.ticks)){for(f=this.ticks.length-1;f>=0;f--)this.removeTicks(this.ticks[f]);this.ticks=[],this.board.update()}},removeTicks:function(f){var v,y;if(m.Z.exists(this.defaultTicks)&&this.defaultTicks===f&&(this.defaultTicks=null),m.Z.exists(this.ticks)){for(v=this.ticks.length-1;v>=0;v--)if(this.ticks[v]===f){if(this.board.removeObject(this.ticks[v]),this.ticks[v].ticks)for(y=0;y<this.ticks[v].ticks.length;y++)m.Z.exists(this.ticks[v].labels[y])&&this.board.removeObject(this.ticks[v].labels[y]);delete this.ticks[v];break}}},getSnapSizes:function(){var f,v,y;return f=m.Z.evaluate(this.visProp.snapsizex),v=m.Z.evaluate(this.visProp.snapsizey),f<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(f=(y=this.board.defaultAxes.x.defaultTicks).ticksDelta*(m.Z.evaluate(y.visProp.minorticks)+1)),v<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(v=(y=this.board.defaultAxes.y.defaultTicks).ticksDelta*(m.Z.evaluate(y.visProp.minorticks)+1)),[f,v]},handleSnapToGrid:function(f,v){var y,E,T,M,L,Y,j,F,G,H,q,K=m.Z.evaluate(this.visProp.attracttogrid),at=m.Z.evaluate(this.visProp.attractorunit),tt=m.Z.evaluate(this.visProp.attractordistance);return!m.Z.exists(this.coords)||m.Z.evaluate(this.visProp.fixed)||(m.Z.evaluate(this.visProp.snaptogrid)||K||f===!0)&&(y=this.coords.usrCoords[1],E=this.coords.usrCoords[2],H=(G=this.getSnapSizes())[0],q=G[1],H>0&&q>0&&(F=this.board.getBoundingBox(),T=Math.round(y/H)*H,M=Math.round(E/q)*q,L=new a.Z.Coords(X.Z.COORDS_BY_USER,[T,M],this.board),(!K||L.distance(at==="screen"?X.Z.COORDS_BY_SCREEN:X.Z.COORDS_BY_USER,this.coords)<tt)&&(y=T,E=M,v||(Y=Math.min(F[0],F[2]),j=Math.max(F[0],F[2]),y<Y?y+=H:y>j&&(y-=H),Y=Math.min(F[1],F[3]),j=Math.max(F[1],F[3]),E<Y?E+=q:E>j&&(E-=q)),this.coords.setCoordinates(X.Z.COORDS_BY_USER,[y,E])))),this},getBoundingBox:function(){var f,v,y,E,T,M=[1/0,1/0,-1/0,-1/0];if(this.type===X.Z.OBJECT_TYPE_POLYGON){if((v=this.vertices.length-1)<=0)return M;for(f=0;f<v;f++)y=this.vertices[f].X(),M[0]=y<M[0]?y:M[0],M[2]=y>M[2]?y:M[2],y=this.vertices[f].Y(),M[1]=y<M[1]?y:M[1],M[3]=y>M[3]?y:M[3]}else if(this.elementClass===X.Z.OBJECT_CLASS_CIRCLE)E=this.center.X(),T=this.center.Y(),M=[E-this.radius,T+this.radius,E+this.radius,T-this.radius];else if(this.elementClass===X.Z.OBJECT_CLASS_CURVE){if((v=this.vertices.length)===0)return M;for(f=0;f<v;f++)y=this.points[f].coords.usrCoords[1],M[0]=y<M[0]?y:M[0],M[2]=y>M[2]?y:M[2],y=this.points[f].coords.usrCoords[1],M[1]=y<M[1]?y:M[1],M[3]=y>M[3]?y:M[3]}return M},addEvent:a.Z.shortcut(a.Z.GeometryElement.prototype,"on"),removeEvent:a.Z.shortcut(a.Z.GeometryElement.prototype,"off"),__evt__over:function(f){},__evt__mouseover:function(f){},__evt__out:function(f){},__evt__mouseout:function(f){},__evt__move:function(f){},__evt__mousemove:function(f){},__evt__drag:function(f){},__evt__mousedrag:function(f){},__evt__pendrag:function(f){},__evt__touchdrag:function(f){},__evt__keydrag:function(f){},__evt__down:function(f){},__evt__mousedown:function(f){},__evt__pendown:function(f){},__evt__touchdown:function(f){},__evt__up:function(f){},__evt__mouseup:function(f){},__evt__penup:function(f){},__evt__touchup:function(f){},__evt__attribute:function(f,v){},__evt__attribute_:function(f,v,y){},__evt:function(){}});const g=a.Z.GeometryElement},573:(u,N,x)=>{x.d(N,{Z:()=>g});var a=x(765),X=x(351),B=x(958),R=x(632),A=x(503),O=x(109),c=x(275),b=x(218),m=function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()};a.Z.Text=function(f,v,y,E){var T;this.constructor(f,y,X.Z.OBJECT_TYPE_TEXT,X.Z.OBJECT_CLASS_TEXT),this.element=this.board.select(y.anchor),this.coordsConstructor(v,O.Z.evaluate(this.visProp.islabel)),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),T=this.visProp.visible,this.visProp.visible=!0,this.setText(E),this.visProp.visible=T,O.Z.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=O.Z.deepCopy(this.methodMap,{setText:"setTextJessieCode",move:"setCoords"})},a.Z.Text.prototype=new B.Z,O.Z.copyPrototypeMethods(a.Z.Text,b.Z,"coordsConstructor"),a.Z.extend(a.Z.Text.prototype,{hasPoint:function(f,v){var y,E,T,M,L,Y,j,F;return O.Z.isObject(O.Z.evaluate(this.visProp.precision))?(j=this.board._inputDevice,F=O.Z.evaluate(this.visProp.precision[j])):F=this.board.options.precision.hasPoint,this.transformations.length>0&&(f=(y=c.Z.matVecMult(c.Z.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,f,v]))[1],v=y[2]),E=(y=(L=this.getAnchorX())==="right"?this.coords.scrCoords[1]-this.size[0]:L==="middle"?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1])+this.size[0],T=(M=(Y=this.getAnchorY())==="top"?this.coords.scrCoords[2]+this.size[1]:Y==="middle"?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2])-this.size[1],O.Z.evaluate(this.visProp.dragarea)==="all"?f>=y-F&&f<E+F&&v>=T-F&&v<=M+F:v>=T-F&&v<=M+F&&(f>=y-F&&f<=y+2*F||f>=E-2*F&&f<=E+F)},_createFctUpdateText:function(f){var v,y,E,T=O.Z.evaluate(this.visProp.parse),M=O.Z.evaluate(this.visProp.usemathjax),L=O.Z.evaluate(this.visProp.usekatex),Y=!1;if(this.orgText=f,O.Z.isFunction(f))this.updateText=function(){E=f().toString(),this.plaintext=!T||M||L?E:this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(E,!1)))};else if(O.Z.isNumber(f)?this.content=O.Z.toFixed(f,O.Z.evaluate(this.visProp.digits)):O.Z.isString(f)&&T&&(O.Z.evaluate(this.visProp.useasciimathml)?this.content="'`"+f+"`'":M||L?(this.content=this.valueTagToJessieCode(f),this.content=this.content.replace(/\\/g,"\\\\")):this.content=this.poorMansTeX(this.valueTagToJessieCode(f)),Y=!0),Y){for(y in(v=this.board.jc.snippet(this.content,!0,"",!1)).deps)this.addParents(v.deps[y]),v.deps[y].addChild(this);this.updateText=function(){this.plaintext=this.unescapeTicks(v())}}else this.updateText=function(){this.plaintext=f}},_setText:function(f){return this._createFctUpdateText(f),this.updateText(),this.fullUpdate(),this.board.infobox&&this.id===this.board.infobox.id||this.updateSize(),this},setTextJessieCode:function(f){var v;return this.visProp.castext=f,v=O.Z.isFunction(f)?function(){return O.Z.sanitizeHTML(f())}:O.Z.isNumber(f)?f:O.Z.sanitizeHTML(f),this._setText(v)},setText:function(f){return this._setText(f)},updateSize:function(){var f,v,y,E=O.Z.evaluate(this.visProp.display);return A.Z.isBrowser&&this.board.renderer.type!=="no"?(y=this.rendNode,E==="html"||this.board.renderer.type==="vml"?O.Z.exists(y.offsetWidth)?(v=this,window.setTimeout(function(){v.size=[y.offsetWidth,y.offsetHeight],v.needsUpdate=!0,v.updateRenderer()},0)):this.size=this.crudeSizeEstimate():E==="internal"&&(this.board.renderer.type==="svg"?(v=this,window.setTimeout(function(){try{f=y.getBBox(),v.size=[f.width,f.height],v.needsUpdate=!0,v.updateRenderer()}catch{}},0)):this.board.renderer.type==="canvas"&&(this.size=this.crudeSizeEstimate())),this):this},crudeSizeEstimate:function(){var f=parseFloat(O.Z.evaluate(this.visProp.fontsize));return[f*this.plaintext.length*.45,.9*f]},utf8_decode:function(f){return f.replace(/&#x(\w+);/g,function(v,y){return String.fromCharCode(parseInt(y,16))})},replaceSub:function(f){if(!f.indexOf)return f;for(var v,y=f.indexOf("_{");y>=0;)(v=(f=f.substr(0,y)+f.substr(y).replace(/_\{/,"<sub>")).substr(y).indexOf("}"))>=0&&(f=f.substr(0,v)+f.substr(v).replace(/\}/,"</sub>")),y=f.indexOf("_{");for(y=f.indexOf("_");y>=0;)y=(f=f.substr(0,y)+f.substr(y).replace(/_(.?)/,"<sub>$1</sub>")).indexOf("_");return f},replaceSup:function(f){if(!f.indexOf)return f;for(var v,y=f.indexOf("^{");y>=0;)(v=(f=f.substr(0,y)+f.substr(y).replace(/\^\{/,"<sup>")).substr(y).indexOf("}"))>=0&&(f=f.substr(0,v)+f.substr(v).replace(/\}/,"</sup>")),y=f.indexOf("^{");for(y=f.indexOf("^");y>=0;)y=(f=f.substr(0,y)+f.substr(y).replace(/\^(.?)/,"<sup>$1</sup>")).indexOf("^");return f},getSize:function(){return this.size},setCoords:function(f,v){var y,E,T;return O.Z.isArray(f)&&f.length>1&&(v=f[1],f=f[0]),O.Z.evaluate(this.visProp.islabel)&&O.Z.exists(this.element)?(E=(f-(y=this.element.getLabelAnchor()).usrCoords[1])*this.board.unitX,T=-(v-y.usrCoords[2])*this.board.unitY,this.relativeCoords.setCoordinates(X.Z.COORDS_BY_SCREEN,[E,T])):this.coords.setCoordinates(X.Z.COORDS_BY_USER,[f,v]),this.fullUpdate(),this},update:function(f){return this.needsUpdate?(this.updateCoords(f),this.updateText(),O.Z.evaluate(this.visProp.display)==="internal"&&O.Z.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this):this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return O.Z.evaluate(this.visProp.autoposition)&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(f){return f.replace(/([)0-9.])\s*([(a-zA-Z_])/g,"$1*$2")},generateTerm:function(f,v,y){var E,T,M,L,Y='""';if(M=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=(f=f||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/"/g,"'")).replace(/'/g,"\\'")).replace(/&amp;arc;/g,"&ang;")).replace(/<arc\s*\/>/g,"&ang;")).replace(/&lt;arc\s*\/&gt;/g,"&ang;")).replace(/&lt;sqrt\s*\/&gt;/g,"&radic;")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),L=f.indexOf("</value>"),M>=0)for(;M>=0;)Y+=' + "'+this.replaceSub(this.replaceSup(f.slice(0,M)))+'"',T=(T=f.slice(M+7,L)).replace(/\s+/g,""),v===!0&&(T=this.expandShortMath(T)),(E=(E=(E=y?T:R.Z.geonext2JS(T,this.board)).replace(/\\"/g,"'")).replace(/\\'/g,"'")).indexOf("toFixed")<0&&O.Z.isNumber(O.Z.bind(this.board.jc.snippet(E,!0,"",!1),this)())?Y+="+("+E+").toFixed("+O.Z.evaluate(this.visProp.digits)+")":Y+="+("+E+")",M=(f=f.slice(L+8)).indexOf("<value>"),L=f.indexOf("</value>");return Y+=' + "'+this.replaceSub(this.replaceSup(f))+'"',Y=(Y=(Y=this.convertGeonextAndSketchometry2CSS(Y)).replace(/&amp;/g,"&")).replace(/"/g,"'")},valueTagToJessieCode:function(f){var v,y,E,T,M=[],L='"';if(E=(f=(f=(f=(f=(f=f||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),T=f.indexOf("</value>"),E>=0)for(;E>=0;)M.push(L+this.escapeTicks(f.slice(0,E))+L),y=(y=f.slice(E+7,T)).replace(/\s+/g,""),(v=(v=y=this.expandShortMath(y)).replace(/\\"/g,"'").replace(/\\'/g,"'")).indexOf("toFixed")<0&&O.Z.isNumber(O.Z.bind(this.board.jc.snippet(v,!0,"",!1),this)())?M.push("("+v+").toFixed("+O.Z.evaluate(this.visProp.digits)+")"):M.push("("+v+")"),E=(f=f.slice(T+8)).indexOf("<value>"),T=f.indexOf("</value>");return M.push(L+this.escapeTicks(f)+L),M.join(" + ").replace(/&amp;/g,"&")},poorMansTeX:function(f){return f=f.replace(/<arc\s*\/*>/g,"&ang;").replace(/&lt;arc\s*\/*&gt;/g,"&ang;").replace(/<sqrt\s*\/*>/g,"&radic;").replace(/&lt;sqrt\s*\/*&gt;/g,"&radic;"),this.convertGeonextAndSketchometry2CSS(this.replaceSub(this.replaceSup(f)),!0)},escapeTicks:function(f){return f.replace(/"/g,"%22").replace(/'/g,"%27")},unescapeTicks:function(f){return f.replace(/%22/g,'"').replace(/%27/g,"'")},convertGeonext2CSS:function(f){return O.Z.isString(f)&&(f=(f=(f=(f=f.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>")).replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),f},convertSketchometry2CSS:function(f,v){var y='<span class="sketcho sketcho-inherit sketcho-',E='"></span>';return O.Z.isString(f)&&(v&&(y=this.escapeTicks(y),E=this.escapeTicks(E)),f=(f=f.replace(/(<|&lt;)sketchofont(>|&gt;)/g,y)).replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,E)),f},convertGeonextAndSketchometry2CSS:function(f,v){return f=this.convertGeonext2CSS(f),f=this.convertSketchometry2CSS(f,v)},notifyParents:function(f){var v,y=null;f=(f=f.replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>");do(y=(v=/<value>([\w\s*/^\-+()[\],<>=!]+)<\/value>/).exec(f))!==null&&(R.Z.findDependencies(this,y[1],this.board),f=(f=f.substr(y.index)).replace(v,""));while(y!==null);return this},getParents:function(){var f;return f=this.relativeCoords!==void 0?[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:[this.Z(),this.X(),this.Y(),this.orgText],this.parents.length!==0&&(f=this.parents),f},bounds:function(){var f=this.coords.usrCoords;return O.Z.evaluate(this.visProp.islabel)||this.board.unitY===0||this.board.unitX===0?[0,0,0,0]:[f[1],f[2]+this.size[1]/this.board.unitY,f[1]+this.size[0]/this.board.unitX,f[2]]},getAnchorX:function(){var f=O.Z.evaluate(this.visProp.anchorx);if(f==="auto")switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";default:return"right"}return f},getAnchorY:function(){var f=O.Z.evaluate(this.visProp.anchory);if(f==="auto")switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";default:return"middle"}return f},getNumberofConflicts:function(f,v,y,E){var T,M,L,Y,j=0;for(Y=this.board.options.precision.hasPoint,this.board.options.precision.hasPoint=.25*(y+E),T=0,L=this.board.objectsList.length;T<L;T++)(M=this.board.objectsList[T]).visPropCalc.visible&&M.elType!=="axis"&&M.elType!=="ticks"&&M!==this.board.infobox&&M!==this&&M.hasPoint(f,v)&&j++;return this.board.options.precision.hasPoint=Y,j},setAutoPosition:function(){var f,v,y,E,T,M,L,Y,j,F,G,H,q,K,at,tt,Q=this.size[0],it=this.size[1],rt={conflicts:1/0,angle:0,r:0},dt=2*Math.PI/12;if(this===this.board.infobox||!this.visPropCalc.visible||!O.Z.evaluate(this.visProp.islabel)||!this.element)return this;if(F=O.Z.evaluate(this.visProp.offset),y=(T=this.element.getLabelAnchor()).scrCoords[1],E=T.scrCoords[2],q=F[0],K=F[1],(j=this.getNumberofConflicts(y+q,E-K,Q,it))===0)return this;for(Y=.2*(G=12),M=Math.atan2(K,q),rt.conflicts=j,rt.angle=M,rt.r=G;rt.conflicts>0&&G<28;){for(H=1,L=M+dt;H<12&&rt.conflicts>0&&(f=y+G*(at=Math.cos(L)),v=E-G*(tt=Math.sin(L)),(j=this.getNumberofConflicts(f,v,Q,it))<rt.conflicts&&(rt.conflicts=j,rt.angle=L,rt.r=G),rt.conflicts!==0);H++)L+=dt;G+=Y}return G=rt.r,at=Math.cos(rt.angle),tt=Math.sin(rt.angle),this.visProp.offset=[G*at,G*tt],this.visProp.anchorx=at<-.2?"right":at>.2?"left":"middle",this}}),a.Z.createText=function(f,v,y){var E,T=O.Z.copyAttributes(y,f.options,"text"),M=v.slice(0,-1),L=v[v.length-1];if(T.anchor=T.parent||T.anchor,!(E=b.Z.create(a.Z.Text,f,M,T,L)))throw new Error("JSXGraph: Can't create text with parent types '"+typeof v[0]+"' and '"+typeof v[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return T.rotate!==0&&T.display==="internal"&&E.addRotation(T.rotate),E},a.Z.registerElement("text",a.Z.createText),a.Z.createHTMLSlider=function(f,v,y){var E,T,M=O.Z.copyAttributes(y,f.options,"htmlslider");if(v.length!==2||v[0].length!==2||v[1].length!==3)throw new Error("JSXGraph: Can't create htmlslider with parent types '"+typeof v[0]+"' and '"+typeof v[1]+`'.
Possible parents are: [[x,y], [min, start, max]]`);M.anchor=M.parent||M.anchor,M.fixed=M.fixed||!0,T=[v[0][0],v[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],(E=a.Z.createText(f,T,M)).type=O.Z.OBJECT_TYPE_HTMLSLIDER,E.rendNodeForm=E.rendNode.childNodes[0],E.rendNodeRange=E.rendNodeForm.childNodes[0],E.rendNodeRange.min=v[1][0],E.rendNodeRange.max=v[1][2],E.rendNodeRange.step=M.step,E.rendNodeRange.value=v[1][1],E.rendNodeLabel=E.rendNodeForm.childNodes[1],E.rendNodeLabel.id=E.rendNode.id+"_label",M.withlabel&&(E.rendNodeLabel.innerHTML=E.name+"="),E.rendNodeOut=E.rendNodeForm.childNodes[2],E.rendNodeOut.value=v[1][1];try{E.rendNodeForm.id=E.rendNode.id+"_form",E.rendNodeRange.id=E.rendNode.id+"_range",E.rendNodeOut.id=E.rendNode.id+"_out"}catch(L){a.Z.debug(L)}return E.rendNodeRange.style.width=M.widthrange+"px",E.rendNodeRange.style.verticalAlign="middle",E.rendNodeOut.style.width=M.widthout+"px",E._val=v[1][1],a.Z.supportsVML()?A.Z.addEvent(E.rendNodeForm,"change",m,E):A.Z.addEvent(E.rendNodeForm,"input",m,E),E.Value=function(){return this._val},E},a.Z.registerElement("htmlslider",a.Z.createHTMLSlider);const g=a.Z.Text},765:(u,N,x)=>{x.d(N,{Z:()=>X});var a={};typeof JXG!="object"||JXG.extend||(a=JXG),a.extend=function(B,R,A,O){var c;for(c in A=A||!1,O=O||!1,R)(!A||A&&R.hasOwnProperty(c))&&(B[O?c.toLowerCase():c]=R[c])},a.defineConstant=function(B,R,A,O){(O=O||!1)&&a.exists(B[R])||Object.defineProperty(B,R,{value:A,writable:!1,enumerable:!0,configurable:!1})},a.extendConstants=function(B,R,A,O){var c,b;for(c in A=A||!1,O=O||!1,R)(!A||A&&R.hasOwnProperty(c))&&(b=O?c.toUpperCase():c,this.defineConstant(B,b,R[c]))},a.extend(a,{boards:{},readers:{},elements:{},registerElement:function(B,R){B=B.toLowerCase(),this.elements[B]=R},registerReader:function(B,R){var A,O;for(A=0;A<R.length;A++)O=R[A].toLowerCase(),typeof this.readers[O]!="function"&&(this.readers[O]=B)},shortcut:function(B,R){return function(){return B[R].apply(this,arguments)}},getRef:function(B,R){return a.deprecated("JXG.getRef()","Board.select()"),B.select(R)},getReference:function(B,R){return a.deprecated("JXG.getReference()","Board.select()"),B.select(R)},getBoardByContainerId:function(B){var R;for(R in JXG.boards)if(JXG.boards.hasOwnProperty(R)&&JXG.boards[R].container===B)return JXG.boards[R];return null},deprecated:function(B,R){var A=B+" is deprecated.";R&&(A+=" Please use "+R+" instead."),a.warn(A)},warn:function(B){typeof window=="object"&&window.console&&console.warn?console.warn("WARNING:",B):typeof document=="object"&&document.getElementById("warning")&&(document.getElementById("debug").innerHTML+="WARNING: "+B+"<br />")},debugInt:function(B){var R,A;for(R=0;R<arguments.length;R++)A=arguments[R],typeof window=="object"&&window.console&&console.log?console.log(A):typeof document=="object"&&document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=A+"<br/>")},debugWST:function(B){var R=new Error;a.debugInt.apply(this,arguments),R&&R.stack&&(a.debugInt("stacktrace"),a.debugInt(R.stack.split(`
`).slice(1).join(`
`)))},debugLine:function(B){var R=new Error;a.debugInt.apply(this,arguments),R&&R.stack&&a.debugInt("Called from",R.stack.split(`
`).slice(2,3).join(`
`))},debug:function(B){a.debugInt.apply(this,arguments)}});const X=a},922:(u,N,x)=>{x.d(N,{Z:()=>b});var a=x(765),X=x(351),B=x(705),R=x(275),A=x(336),O=x(109),c=x(421);R.Z.Geometry={},a.Z.extend(R.Z.Geometry,{angle:function(m,g,f){var v,y,E,T,M=[],L=[],Y=[];return a.Z.deprecated("Geometry.angle()","Geometry.rad()"),m.coords?(M[0]=m.coords.usrCoords[1],M[1]=m.coords.usrCoords[2]):(M[0]=m[0],M[1]=m[1]),g.coords?(L[0]=g.coords.usrCoords[1],L[1]=g.coords.usrCoords[2]):(L[0]=g[0],L[1]=g[1]),f.coords?(Y[0]=f.coords.usrCoords[1],Y[1]=f.coords.usrCoords[2]):(Y[0]=f[0],Y[1]=f[1]),v=M[0]-L[0],y=M[1]-L[1],E=Y[0]-L[0],T=Y[1]-L[1],Math.atan2(v*T-y*E,v*E+y*T)},trueAngle:function(m,g,f){return 57.29577951308232*this.rad(m,g,f)},rad:function(m,g,f){var v,y,E,T,M,L,Y;return m.coords?(v=m.coords.usrCoords[1],y=m.coords.usrCoords[2]):(v=m[0],y=m[1]),g.coords?(E=g.coords.usrCoords[1],T=g.coords.usrCoords[2]):(E=g[0],T=g[1]),f.coords?(M=f.coords.usrCoords[1],L=f.coords.usrCoords[2]):(M=f[0],L=f[1]),(Y=Math.atan2(L-T,M-E)-Math.atan2(y-T,v-E))<0&&(Y+=6.283185307179586),Y},angleBisector:function(m,g,f,v){var y,E,T,M,L,Y=m.coords.usrCoords,j=g.coords.usrCoords,F=f.coords.usrCoords;return O.Z.exists(v)||(v=m.board),j[0]===0?new B.Z(X.Z.COORDS_BY_USER,[1,.5*(Y[1]+F[1]),.5*(Y[2]+F[2])],v):(M=Y[1]-j[1],L=Y[2]-j[2],y=Math.atan2(L,M),M=F[1]-j[1],L=F[2]-j[2],T=.5*(y+(E=Math.atan2(L,M))),y>E&&(T+=Math.PI),M=Math.cos(T)+j[1],L=Math.sin(T)+j[2],new B.Z(X.Z.COORDS_BY_USER,[1,M,L],v))},reflection:function(m,g,f){var v,y,E,T,M,L,Y=g.coords.usrCoords,j=m.point1.coords.usrCoords,F=m.point2.coords.usrCoords;return O.Z.exists(f)||(f=g.board),T=F[1]-j[1],M=F[2]-j[2],v=Y[1]-j[1],L=(T*(Y[2]-j[2])-M*v)/(T*T+M*M),y=Y[1]+2*L*M,E=Y[2]-2*L*T,new B.Z(X.Z.COORDS_BY_USER,[y,E],f)},rotation:function(m,g,f,v){var y,E,T,M,L,Y,j=g.coords.usrCoords,F=m.coords.usrCoords;return O.Z.exists(v)||(v=g.board),y=j[1]-F[1],E=j[2]-F[2],L=y*(T=Math.cos(f))-E*(M=Math.sin(f))+F[1],Y=y*M+E*T+F[2],new B.Z(X.Z.COORDS_BY_USER,[L,Y],v)},perpendicular:function(m,g,f){var v,y,E,T,M,L=m.point1.coords.usrCoords,Y=m.point2.coords.usrCoords,j=g.coords.usrCoords;return O.Z.exists(f)||(f=g.board),g===m.point1?(v=L[1]+Y[2]-L[2],y=L[2]-Y[1]+L[1],M=L[0]*Y[0],Math.abs(M)<R.Z.eps&&(v=Y[2],y=-Y[1]),T=[M,v,y],E=!0):g===m.point2?(v=Y[1]+L[2]-Y[2],y=Y[2]-L[1]+Y[1],M=L[0]*Y[0],Math.abs(M)<R.Z.eps&&(v=L[2],y=-L[1]),T=[M,v,y],E=!1):Math.abs(R.Z.innerProduct(j,m.stdform,3))<R.Z.eps?(v=j[1]+Y[2]-j[2],y=j[2]-Y[1]+j[1],M=Y[0],Math.abs(M)<R.Z.eps&&(v=Y[2],y=-Y[1]),E=!0,Math.abs(M)>R.Z.eps&&Math.abs(v-j[1])<R.Z.eps&&Math.abs(y-j[2])<R.Z.eps&&(v=j[1]+L[2]-j[2],y=j[2]-L[1]+j[1],E=!1),T=[M,v,y]):(T=[0,m.stdform[1],m.stdform[2]],T=R.Z.crossProduct(T,j),T=R.Z.crossProduct(T,m.stdform),E=!0),[new B.Z(X.Z.COORDS_BY_USER,T,f),E]},circumcenterMidpoint:function(){a.Z.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(m,g,f,v){var y,E,T,M,L=m.coords.usrCoords,Y=g.coords.usrCoords,j=f.coords.usrCoords;return O.Z.exists(v)||(v=m.board),y=[Y[0]-L[0],-Y[2]+L[2],Y[1]-L[1]],E=[.5*(L[0]+Y[0]),.5*(L[1]+Y[1]),.5*(L[2]+Y[2])],T=R.Z.crossProduct(y,E),y=[j[0]-Y[0],-j[2]+Y[2],j[1]-Y[1]],E=[.5*(Y[0]+j[0]),.5*(Y[1]+j[1]),.5*(Y[2]+j[2])],M=R.Z.crossProduct(y,E),new B.Z(X.Z.COORDS_BY_USER,R.Z.crossProduct(T,M),v)},distance:function(m,g,f){var v,y=0;for(f||(f=Math.min(m.length,g.length)),v=0;v<f;v++)y+=(m[v]-g[v])*(m[v]-g[v]);return Math.sqrt(y)},affineDistance:function(m,g,f){var v;return(v=this.distance(m,g,f))>R.Z.eps&&(Math.abs(m[0])<R.Z.eps||Math.abs(g[0])<R.Z.eps)?1/0:v},affineRatio:function(m,g,f){var v;return O.Z.exists(m.usrCoords)&&(m=m.usrCoords),O.Z.exists(g.usrCoords)&&(g=g.usrCoords),O.Z.exists(f.usrCoords)&&(f=f.usrCoords),v=g[1]-m[1],Math.abs(v)>R.Z.eps?(f[1]-m[1])/v:(f[2]-m[2])/(g[2]-m[2])},sortVertices:function(m){for(var g,f=c.Z.each(m,c.Z.coordsArray),v=f.length,y=null;f[0][0]===f[v-1][0]&&f[0][1]===f[v-1][1]&&f[0][2]===f[v-1][2];)y=f.pop(),v--;return g=f[0],f.sort(function(E,T){return(E[2]===g[2]&&E[1]===g[1]?-1/0:Math.atan2(E[2]-g[2],E[1]-g[1]))-(T[2]===g[2]&&T[1]===g[1]?-1/0:Math.atan2(T[2]-g[2],T[1]-g[1]))}),y!==null&&f.push(y),f},signedTriangle:function(m,g,f){var v=c.Z.coordsArray(m),y=c.Z.coordsArray(g),E=c.Z.coordsArray(f);return .5*((y[1]-v[1])*(E[2]-v[2])-(y[2]-v[2])*(E[1]-v[1]))},signedPolygon:function(m,g){var f,v,y=0,E=c.Z.each(m,c.Z.coordsArray);for(g===void 0&&(g=!0),g?E.unshift(E[E.length-1]):E=this.sortVertices(E),v=E.length,f=1;f<v;f++)y+=E[f-1][1]*E[f][2]-E[f][1]*E[f-1][2];return .5*y},GrahamScan:function(m){var g,f=1,v=c.Z.each(m,c.Z.coordsArray),y=v.length;for(y=(v=this.sortVertices(v)).length,g=2;g<y;g++){for(;this.signedTriangle(v[f-1],v[f],v[g])<=0;){if(f>1)f-=1;else if(g===y-1)break;g+=1}f+=1,v=O.Z.swap(v,f,g)}return v.slice(0,f)},calcStraight:function(m,g,f,v){var y,E,T,M,L,Y,j,F,G,H;if(O.Z.exists(v)||(v=10),Y=O.Z.evaluate(m.visProp.straightfirst),j=O.Z.evaluate(m.visProp.straightlast),Math.abs(g.scrCoords[0])<R.Z.eps&&(Y=!0),Math.abs(f.scrCoords[0])<R.Z.eps&&(j=!0),(Y||j)&&((F=[])[0]=m.stdform[0]-m.stdform[1]*m.board.origin.scrCoords[1]/m.board.unitX+m.stdform[2]*m.board.origin.scrCoords[2]/m.board.unitY,F[1]=m.stdform[1]/m.board.unitX,F[2]=-m.stdform[2]/m.board.unitY,!isNaN(F[0]+F[1]+F[2]))){if(y=!Y&&Math.abs(g.usrCoords[0])>=R.Z.eps&&g.scrCoords[1]>=0&&g.scrCoords[1]<=m.board.canvasWidth&&g.scrCoords[2]>=0&&g.scrCoords[2]<=m.board.canvasHeight,E=!j&&Math.abs(f.usrCoords[0])>=R.Z.eps&&f.scrCoords[1]>=0&&f.scrCoords[1]<=m.board.canvasWidth&&f.scrCoords[2]>=0&&f.scrCoords[2]<=m.board.canvasHeight,M=(T=this.meetLineBoard(F,m.board,v))[0],L=T[1],!y&&!E&&(!Y&&j&&!this.isSameDirection(g,f,M)&&!this.isSameDirection(g,f,L)||Y&&!j&&!this.isSameDirection(f,g,M)&&!this.isSameDirection(f,g,L)))return;y?E||(H=this.isSameDir(g,f,M,L)?L:M):E?G=this.isSameDir(g,f,M,L)?M:L:this.isSameDir(g,f,M,L)?(G=M,H=L):(H=M,G=L),G&&g.setCoordinates(X.Z.COORDS_BY_USER,G.usrCoords),H&&f.setCoordinates(X.Z.COORDS_BY_USER,H.usrCoords)}},calcLineDelimitingPoints:function(m,g,f){var v,y,E,T,M,L,Y,j,F,G,H;if(M=O.Z.evaluate(m.visProp.straightfirst),L=O.Z.evaluate(m.visProp.straightlast),Math.abs(g.scrCoords[0])<R.Z.eps&&(M=!0),Math.abs(f.scrCoords[0])<R.Z.eps&&(L=!0),(Y=[])[0]=m.stdform[0]-m.stdform[1]*m.board.origin.scrCoords[1]/m.board.unitX+m.stdform[2]*m.board.origin.scrCoords[2]/m.board.unitY,Y[1]=m.stdform[1]/m.board.unitX,Y[2]=-m.stdform[2]/m.board.unitY,!isNaN(Y[0]+Y[1]+Y[2])){if(G=!M,H=!L,y=m.board.getBoundingBox(),m.getSlope()>=0?(E=this.projectPointToLine({coords:{usrCoords:[1,y[2],y[1]]}},m,m.board),T=this.projectPointToLine({coords:{usrCoords:[1,y[0],y[3]]}},m,m.board)):(E=this.projectPointToLine({coords:{usrCoords:[1,y[0],y[1]]}},m,m.board),T=this.projectPointToLine({coords:{usrCoords:[1,y[2],y[3]]}},m,m.board)),!G&&!H&&(!M&&!L&&(v=g.distance(X.Z.COORDS_BY_USER,f),Math.abs(g.distance(X.Z.COORDS_BY_USER,E)+E.distance(X.Z.COORDS_BY_USER,f)-v)>R.Z.eps||Math.abs(g.distance(X.Z.COORDS_BY_USER,T)+T.distance(X.Z.COORDS_BY_USER,f)-v)>R.Z.eps)||!M&&L&&!this.isSameDirection(g,f,E)&&!this.isSameDirection(g,f,T)||M&&!L&&!this.isSameDirection(f,g,E)&&!this.isSameDirection(f,g,T)))return;G?H||(F=this.isSameDir(g,f,E,T)?T:E):H?j=this.isSameDir(g,f,E,T)?E:T:this.isSameDir(g,f,E,T)?(j=E,F=T):(F=E,j=T),j&&g.setCoordinates(X.Z.COORDS_BY_USER,j.usrCoords),F&&f.setCoordinates(X.Z.COORDS_BY_USER,F.usrCoords)}},calcLabelQuadrant:function(m){return m<0&&(m+=2*Math.PI),["rt","urt","top","ulft","lft","llft","lrt"][Math.floor((m+Math.PI/8)/(Math.PI/4))%8]},isSameDir:function(m,g,f,v){var y=g.usrCoords[1]-m.usrCoords[1],E=g.usrCoords[2]-m.usrCoords[2],T=v.usrCoords[1]-f.usrCoords[1],M=v.usrCoords[2]-f.usrCoords[2];return Math.abs(g.usrCoords[0])<R.Z.eps&&(y=g.usrCoords[1],E=g.usrCoords[2]),Math.abs(m.usrCoords[0])<R.Z.eps&&(y=-m.usrCoords[1],E=-m.usrCoords[2]),y*T+E*M>=0},isSameDirection:function(m,g,f){var v,y,E,T,M=!1;return v=g.usrCoords[1]-m.usrCoords[1],y=g.usrCoords[2]-m.usrCoords[2],E=f.usrCoords[1]-m.usrCoords[1],T=f.usrCoords[2]-m.usrCoords[2],Math.abs(v)<R.Z.eps&&(v=0),Math.abs(y)<R.Z.eps&&(y=0),Math.abs(E)<R.Z.eps&&(E=0),Math.abs(T)<R.Z.eps&&(T=0),(v>=0&&E>=0||v<=0&&E<=0)&&(M=y>=0&&T>=0||y<=0&&T<=0),M},det3p:function(m,g,f){return(m[1]-f[1])*(g[2]-f[2])-(g[1]-f[1])*(m[2]-f[2])},windingNumber:function(m,g,f){var v,y,E,T,M,L,Y=0,j=g.length,F=m[1],G=m[2],H=0;if(j===0)return 0;if((f=f||!1)&&(H=1),isNaN(F)||isNaN(G)||(O.Z.exists(g[0].coords)?(v=g[0].coords,y=g[j-1].coords):(v=g[0],y=g[j-1]),v.usrCoords[1]===F&&v.usrCoords[2]===G))return 1;for(L=0;L<j-H;L++)if(O.Z.exists(g[L].coords)?(y=g[L].coords.usrCoords,E=g[(L+1)%j].coords.usrCoords):(y=g[L].usrCoords,E=g[(L+1)%j].usrCoords),!(y[0]===0||E[0]===0||isNaN(y[1])||isNaN(E[1])||isNaN(y[2])||isNaN(E[2]))){if(E[2]===G){if(E[1]===F)return 1;if(y[2]===G&&E[1]>F==y[1]<F)return 0}if(y[2]<G!=E[2]<G)if(M=2*(E[2]>y[2]?1:0)-1,y[1]>=F)if(E[1]>F)Y+=M;else{if((T=this.det3p(y,E,m))===0)return 0;T>0+R.Z.eps==E[2]>y[2]&&(Y+=M)}else E[1]>F&&(T=this.det3p(y,E,m))>0+R.Z.eps==E[2]>y[2]&&(Y+=M)}return Y},pnpoly:function(m,g,f,v){var y,E,T,M,L,Y,j,F,G=f,H=!1;for(v===X.Z.COORDS_BY_USER?(M=(Y=new B.Z(X.Z.COORDS_BY_USER,[m,g],this.board)).scrCoords[1],L=Y.scrCoords[2]):(M=m,L=g),y=0,E=(T=f.length)-2;y<T-1;E=y++)j=O.Z.exists(G[y].coords)?G[y].coords:G[y],F=O.Z.exists(G[E].coords)?G[E].coords:G[E],j.scrCoords[2]>L!=F.scrCoords[2]>L&&M<(F.scrCoords[1]-j.scrCoords[1])*(L-j.scrCoords[2])/(F.scrCoords[2]-j.scrCoords[2])+j.scrCoords[1]&&(H=!H);return H},intersectionFunction:function(m,g,f,v,y,E){var T,M,L=this;return T=g.elementClass===X.Z.OBJECT_CLASS_CURVE&&(g.type===X.Z.OBJECT_TYPE_ARC||g.type===X.Z.OBJECT_TYPE_SECTOR),M=f.elementClass===X.Z.OBJECT_CLASS_CURVE&&(f.type===X.Z.OBJECT_TYPE_ARC||f.type===X.Z.OBJECT_TYPE_SECTOR),g.elementClass!==X.Z.OBJECT_CLASS_CURVE&&f.elementClass!==X.Z.OBJECT_CLASS_CURVE||g.elementClass!==X.Z.OBJECT_CLASS_CURVE&&g.elementClass!==X.Z.OBJECT_CLASS_CIRCLE||f.elementClass!==X.Z.OBJECT_CLASS_CURVE&&f.elementClass!==X.Z.OBJECT_CLASS_CIRCLE?g.elementClass===X.Z.OBJECT_CLASS_CURVE&&!T&&f.elementClass===X.Z.OBJECT_CLASS_LINE||f.elementClass===X.Z.OBJECT_CLASS_CURVE&&!M&&g.elementClass===X.Z.OBJECT_CLASS_LINE?function(){return L.meetCurveLine(g,f,v,g.board,O.Z.evaluate(E))}:g.type===X.Z.OBJECT_TYPE_POLYGON||f.type===X.Z.OBJECT_TYPE_POLYGON?g.elementClass===X.Z.OBJECT_CLASS_LINE?function(){var Y,j=O.Z.evaluate(g.visProp.straightfirst),F=O.Z.evaluate(g.visProp.straightlast),G=O.Z.evaluate(f.visProp.straightfirst),H=O.Z.evaluate(f.visProp.straightlast);return Y=!(O.Z.evaluate(E)||j&&F&&G&&H),L.meetPolygonLine(f,g,v,g.board,Y)}:f.elementClass===X.Z.OBJECT_CLASS_LINE?function(){var Y,j=O.Z.evaluate(g.visProp.straightfirst),F=O.Z.evaluate(g.visProp.straightlast),G=O.Z.evaluate(f.visProp.straightfirst),H=O.Z.evaluate(f.visProp.straightlast);return Y=!(O.Z.evaluate(E)||j&&F&&G&&H),L.meetPolygonLine(g,f,v,g.board,Y)}:function(){return L.meetPathPath(g,f,v,g.board)}:g.elementClass===X.Z.OBJECT_CLASS_LINE&&f.elementClass===X.Z.OBJECT_CLASS_LINE?function(){var Y,j,F=O.Z.evaluate(g.visProp.straightfirst),G=O.Z.evaluate(g.visProp.straightlast),H=O.Z.evaluate(f.visProp.straightfirst),q=O.Z.evaluate(f.visProp.straightlast);return O.Z.evaluate(E)||F&&G&&H&&q?L.meet(g.stdform,f.stdform,v,g.board):(Y=L.meetSegmentSegment(g.point1.coords.usrCoords,g.point2.coords.usrCoords,f.point1.coords.usrCoords,f.point2.coords.usrCoords),j=!F&&Y[1]<0||!G&&Y[1]>1||!H&&Y[2]<0||!q&&Y[2]>1?[0,NaN,NaN]:Y[0],new B.Z(X.Z.COORDS_BY_USER,j,g.board))}:function(){var Y,j,F,G=L.meet(g.stdform,f.stdform,v,g.board),H=!0;return O.Z.evaluate(E)?G:(g.elementClass!==X.Z.OBJECT_CLASS_LINE||(Y=O.Z.evaluate(g.visProp.straightfirst),j=O.Z.evaluate(g.visProp.straightlast),Y&&j||(F=L.affineRatio(g.point1.coords,g.point2.coords,G),!(!j&&F>1+R.Z.eps||!Y&&F<0-R.Z.eps))))&&(f.elementClass!==X.Z.OBJECT_CLASS_LINE||(Y=O.Z.evaluate(f.visProp.straightfirst),j=O.Z.evaluate(f.visProp.straightlast),Y&&j||(F=L.affineRatio(f.point1.coords,f.point2.coords,G),!(!j&&F>1+R.Z.eps||!Y&&F<0-R.Z.eps))))?T&&((H=L.coordsOnArc(g,G))&&M&&(H=L.coordsOnArc(f,G)),!H)?new B.Z(a.Z.COORDS_BY_USER,[0,NaN,NaN],g.board):G:new B.Z(a.Z.COORDS_BY_USER,[0,NaN,NaN],g.board)}:function(){return L.meetCurveCurve(g,f,v,y,g.board)}},coordsOnArc:function(m,g){var f=this.rad(m.radiuspoint,m.center,g.usrCoords.slice(1)),v=0,y=this.rad(m.radiuspoint,m.center,m.anglepoint),E=O.Z.evaluate(m.visProp.selection);return(E==="minor"&&y>Math.PI||E==="major"&&y<Math.PI)&&(v=y,y=2*Math.PI),!(f<v||f>y)},meet:function(m,g,f,v){var y=R.Z.eps;return Math.abs(m[3])<y&&Math.abs(g[3])<y?this.meetLineLine(m,g,f,v):Math.abs(m[3])>=y&&Math.abs(g[3])<y?this.meetLineCircle(g,m,f,v):Math.abs(m[3])<y&&Math.abs(g[3])>=y?this.meetLineCircle(m,g,f,v):this.meetCircleCircle(m,g,f,v)},meetLineBoard:function(m,g,f){var v,y,E,T,M=[];for(O.Z.exists(f)||(f=0),M[0]=R.Z.crossProduct(m,[f,0,1]),M[1]=R.Z.crossProduct(m,[f,1,0]),M[2]=R.Z.crossProduct(m,[-f-g.canvasHeight,0,1]),M[3]=R.Z.crossProduct(m,[-f-g.canvasWidth,1,0]),E=0;E<4;E++)if(Math.abs(M[E][0])>R.Z.eps){for(T=2;T>0;T--)M[E][T]/=M[E][0];M[E][0]=1}return Math.abs(M[1][0])<R.Z.eps?(v=M[0],y=M[2]):Math.abs(M[0][0])<R.Z.eps?(v=M[1],y=M[3]):M[1][2]<0?(v=M[0],y=M[3][2]>g.canvasHeight?M[2]:M[3]):M[1][2]>g.canvasHeight?(v=M[2],y=M[3][2]<0?M[0]:M[3]):(v=M[1],y=M[3][2]<0?M[0]:M[3][2]>g.canvasHeight?M[2]:M[3]),[v=new B.Z(X.Z.COORDS_BY_SCREEN,v.slice(1),g),y=new B.Z(X.Z.COORDS_BY_SCREEN,y.slice(1),g)]},meetLineLine:function(m,g,f,v){var y=isNaN(m[5]+g[5])?[0,0,0]:R.Z.crossProduct(m,g);return new B.Z(X.Z.COORDS_BY_USER,y,v)},meetLineCircle:function(m,g,f,v){var y,E,T,M,L,Y,j,F,G;return g[4]<R.Z.eps?Math.abs(R.Z.innerProduct([1,g[6],g[7]],m,3))<R.Z.eps?new B.Z(X.Z.COORDS_BY_USER,g.slice(6,8),v):new B.Z(X.Z.COORDS_BY_USER,[NaN,NaN],v):(T=g[0],E=g.slice(1,3),y=g[3],M=m[0],L=m.slice(1,3),Y=y,(F=(j=E[0]*L[1]-E[1]*L[0])*j-4*Y*(y*M*M-(E[0]*L[0]+E[1]*L[1])*M+T))>-R.Z.eps*R.Z.eps?(G=[(-j+(F=Math.sqrt(Math.abs(F))))/(2*Y),(-j-F)/(2*Y)],O.Z.evaluate(f)===0?new B.Z(X.Z.COORDS_BY_USER,[-G[0]*-L[1]-M*L[0],-G[0]*L[0]-M*L[1]],v):new B.Z(X.Z.COORDS_BY_USER,[-G[1]*-L[1]-M*L[0],-G[1]*L[0]-M*L[1]],v)):new B.Z(X.Z.COORDS_BY_USER,[0,0,0],v))},meetCircleCircle:function(m,g,f,v){var y;return m[4]<R.Z.eps?Math.abs(this.distance(m.slice(6,2),g.slice(6,8))-g[4])<R.Z.eps?new B.Z(X.Z.COORDS_BY_USER,m.slice(6,8),v):new B.Z(X.Z.COORDS_BY_USER,[0,0,0],v):g[4]<R.Z.eps?Math.abs(this.distance(g.slice(6,2),m.slice(6,8))-m[4])<R.Z.eps?new B.Z(X.Z.COORDS_BY_USER,g.slice(6,8),v):new B.Z(X.Z.COORDS_BY_USER,[0,0,0],v):(y=[g[3]*m[0]-m[3]*g[0],g[3]*m[1]-m[3]*g[1],g[3]*m[2]-m[3]*g[2],0,1,1/0,1/0,1/0],y=R.Z.normalize(y),this.meetLineCircle(y,m,f,v))},meetCurveCurve:function(m,g,f,v,y,E){var T;return T=O.Z.exists(E)&&E==="newton"?A.Z.generalizedNewton(m,g,O.Z.evaluate(f),v):m.bezierDegree===3||g.bezierDegree===3?this.meetBezierCurveRedBlueSegments(m,g,f):this.meetCurveRedBlueSegments(m,g,f),new B.Z(X.Z.COORDS_BY_USER,T,y)},meetCurveLine:function(m,g,f,v,y){var E,T;return O.Z.exists(v)||(v=m.board),m.elementClass===X.Z.OBJECT_CLASS_CURVE?(E=m,T=g):(E=g,T=m),this.meetCurveLineDiscrete(E,T,f,v,!y)},meetCurveLineContinuous:function(m,g,f,v,y){var E,T,M,L,Y,j,F,G,H,q,K,at,tt,Q=R.Z.eps,it=R.Z.eps;for(L=this.meetCurveLineDiscrete(m,g,f,v,y),Y=L.usrCoords[1],j=L.usrCoords[2],T=function(rt){var dt,ht;return rt>m.maxX()||rt<m.minX()?1/0:(dt=Y-m.X(rt))*dt+(ht=j-m.Y(rt))*ht},M=function(rt){var dt=g.stdform[0]+g.stdform[1]*m.X(rt)+g.stdform[2]*m.Y(rt);return dt*dt},G=(m.maxX()-m.minX())/50,H=m.minX(),at=1e-4,K=NaN,q=0;q<50&&(E=A.Z.root(T,[Math.max(H,m.minX()),Math.min(H+G,m.maxX())]),!((tt=Math.abs(T(E)))<=at&&(K=E,(at=tt)<Q)));q++)H+=G;return E=K,tt=M(E=A.Z.root(M,[Math.max(E-G,m.minX()),Math.min(E+G,m.maxX())])),F=isNaN(tt)||Math.abs(tt)>it?0:1,new B.Z(X.Z.COORDS_BY_USER,[F,m.X(E),m.Y(E)],v)},meetCurveLineDiscrete:function(m,g,f,v,y){var E,T,M,L,Y,j,F,G=O.Z.evaluate(f),H=g.point1.coords.usrCoords,q=g.point2.coords.usrCoords,K=0,at=m.numberPoints,tt=O.Z.evaluate(g.visProp.straightfirst),Q=O.Z.evaluate(g.visProp.straightlast);for(j=new B.Z(X.Z.COORDS_BY_USER,[0,NaN,NaN],v),H[0]===0?H=[1,q[1]+g.stdform[2],q[2]-g.stdform[1]]:q[0]===0&&(q=[1,H[1]+g.stdform[2],H[2]-g.stdform[1]]),L=m.points[0].usrCoords,E=1;E<at;E+=m.bezierDegree)if(M=L.slice(0),L=m.points[E].usrCoords,this.distance(M,L)>R.Z.eps){for(F=m.bezierDegree===3?this.meetBeziersegmentBeziersegment([m.points[E-1].usrCoords.slice(1),m.points[E].usrCoords.slice(1),m.points[E+1].usrCoords.slice(1),m.points[E+2].usrCoords.slice(1)],[H.slice(1),q.slice(1)],y):[this.meetSegmentSegment(M,L,H,q)],T=0;T<F.length;T++)if(0<=(Y=F[T])[1]&&Y[1]<=1){if(K===G)return y&&(!tt&&Y[2]<0||!Q&&Y[2]>1)?j:j=new B.Z(X.Z.COORDS_BY_USER,Y[0],v);K+=1}}return j},meetCurveRedBlueSegments:function(m,g,f){var v,y,E,T,M,L,Y,j,F,G=O.Z.evaluate(f),H=0,q=g.numberPoints,K=m.numberPoints;if(q<=1||K<=1)return[0,NaN,NaN];for(v=1;v<K;v++)for(E=m.points[v-1].usrCoords,T=m.points[v].usrCoords,j=Math.min(E[1],T[1]),F=Math.max(E[1],T[1]),L=g.points[0].usrCoords,y=1;y<q;y++)if(M=L,L=g.points[y].usrCoords,Math.min(M[1],L[1])<F&&Math.max(M[1],L[1])>j&&(Y=this.meetSegmentSegment(E,T,M,L))[1]>=0&&Y[2]>=0&&(Y[1]<1&&Y[2]<1||v===K-1&&Y[1]===1||y===q-1&&Y[2]===1)){if(H===G)return Y[0];H++}return[0,NaN,NaN]},meetSegmentSegment:function(m,g,f,v){var y,E,T,M=R.Z.crossProduct(m,g),L=R.Z.crossProduct(f,v),Y=R.Z.crossProduct(M,L);return Math.abs(Y[0])<R.Z.eps?[Y,1/0,1/0]:(Y[1]/=Y[0],Y[2]/=Y[0],Y[0]/=Y[0],T=m[E=Math.abs(g[1]-g[0]*m[1])<R.Z.eps?2:1]/m[0],y=(Y[E]-T)/(g[0]!==0?g[E]/g[0]-T:g[E]),T=f[E=Math.abs(v[1]-v[0]*f[1])<R.Z.eps?2:1]/f[0],[Y,y,(Y[E]-T)/(v[0]!==0?v[E]/v[0]-T:v[E])])},meetPathPath:function(m,g,f,v){var y,E,T,M,L=O.Z.evaluate(f);return(T=(y=a.Z.Math.Clip._getPath(m,v)).length)>0&&this.distance(y[0].coords.usrCoords,y[T-1].coords.usrCoords,3)<R.Z.eps&&y.pop(),(T=(E=a.Z.Math.Clip._getPath(g,v)).length)>0&&this.distance(E[0].coords.usrCoords,E[T-1].coords.usrCoords,3)<R.Z.eps*R.Z.eps&&E.pop(),f<0||a.Z.Math.Clip.isEmptyCase(y,E,"intersection")?new B.Z(X.Z.COORDS_BY_USER,[0,0,0],v):(a.Z.Math.Clip.makeDoublyLinkedList(y),a.Z.Math.Clip.makeDoublyLinkedList(E),L<(M=a.Z.Math.Clip.findIntersections(y,E,v)[0]).length?M[L].coords:new B.Z(X.Z.COORDS_BY_USER,[0,0,0],v))},meetPolygonLine:function(m,g,f,v,y){var E,T,M,L=O.Z.evaluate(f),Y=[0,0,0],j=m.borders.length,F=[];for(E=0;E<j;E++)M=m.borders[E],T=this.meetSegmentSegment(M.point1.coords.usrCoords,M.point2.coords.usrCoords,g.point1.coords.usrCoords,g.point2.coords.usrCoords),(!y||T[2]>=0&&T[2]<1)&&T[1]>=0&&T[1]<1&&F.push(T[0]);return L>=0&&L<F.length&&(Y=F[L]),new B.Z(X.Z.COORDS_BY_USER,Y,v)},_bezierSplit:function(m){var g,f,v,y,E,T;return g=[.5*(m[0][0]+m[1][0]),.5*(m[0][1]+m[1][1])],f=[.5*(m[1][0]+m[2][0]),.5*(m[1][1]+m[2][1])],v=[.5*(m[2][0]+m[3][0]),.5*(m[2][1]+m[3][1])],T=[.5*((y=[.5*(g[0]+f[0]),.5*(g[1]+f[1])])[0]+(E=[.5*(f[0]+v[0]),.5*(f[1]+v[1])])[0]),.5*(y[1]+E[1])],[[m[0],g,y,T],[T,E,v,m[3]]]},_bezierBbox:function(m){var g=[];return m.length===4?(g[0]=Math.min(m[0][0],m[1][0],m[2][0],m[3][0]),g[1]=Math.max(m[0][1],m[1][1],m[2][1],m[3][1]),g[2]=Math.max(m[0][0],m[1][0],m[2][0],m[3][0]),g[3]=Math.min(m[0][1],m[1][1],m[2][1],m[3][1])):(g[0]=Math.min(m[0][0],m[1][0]),g[1]=Math.max(m[0][1],m[1][1]),g[2]=Math.max(m[0][0],m[1][0]),g[3]=Math.min(m[0][1],m[1][1])),g},_bezierOverlap:function(m,g){return m[2]>=g[0]&&m[0]<=g[2]&&m[1]>=g[3]&&m[3]<=g[1]},_bezierListConcat:function(m,g,f,v){var y,E=O.Z.exists(v),T=0,M=g.length,L=m.length;for(L>0&&M>0&&(m[L-1][1]===1&&g[0][1]===0||E&&m[L-1][2]===1&&g[0][2]===0)&&(T=1),y=T;y<M;y++)E&&(g[y][2]*=.5,g[y][2]+=v),g[y][1]*=.5,g[y][1]+=f,m.push(g[y])},_bezierMeetSubdivision:function(m,g,f){var v,y,E,T,M,L,Y,j,F,G,H,q,K=[];return y=this._bezierBbox(g),v=this._bezierBbox(m),this._bezierOverlap(y,v)?f<5?(L=(E=this._bezierSplit(m))[0],Y=E[1],T=(E=this._bezierSplit(g))[0],M=E[1],this._bezierListConcat(K,this._bezierMeetSubdivision(L,T,f+1),0,0),this._bezierListConcat(K,this._bezierMeetSubdivision(L,M,f+1),0,.5),this._bezierListConcat(K,this._bezierMeetSubdivision(Y,T,f+1),.5,0),this._bezierListConcat(K,this._bezierMeetSubdivision(Y,M,f+1),.5,.5),K):(H=[1].concat(m[0]),q=[1].concat(m[3]),F=[1].concat(g[0]),G=[1].concat(g[3]),(j=this.meetSegmentSegment(H,q,F,G))[1]>=0&&j[2]>=0&&j[1]<=1&&j[2]<=1?[j]:[]):[]},_bezierLineMeetSubdivision:function(m,g,f,v){var y,E,T,M,L,Y,j,F,G,H,q=[];return y=this._bezierBbox(g),E=this._bezierBbox(m),v&&!this._bezierOverlap(E,y)?[]:f<5?(M=(T=this._bezierSplit(m))[0],L=T[1],this._bezierListConcat(q,this._bezierLineMeetSubdivision(M,g,f+1),0),this._bezierListConcat(q,this._bezierLineMeetSubdivision(L,g,f+1),.5),q):(G=[1].concat(m[0]),H=[1].concat(m[3]),j=[1].concat(g[0]),F=[1].concat(g[1]),(Y=this.meetSegmentSegment(G,H,j,F))[1]>=0&&Y[1]<=1&&(!v||Y[2]>=0&&Y[2]<=1)?[Y]:[])},meetBeziersegmentBeziersegment:function(m,g,f){var v,y,E;for((v=m.length===4&&g.length===4?this._bezierMeetSubdivision(m,g,0):this._bezierLineMeetSubdivision(m,g,0,f)).sort(function(T,M){return 1e7*(T[1]-M[1])+(T[2]-M[2])}),y=[],E=0;E<v.length;E++)E!==0&&v[E][1]===v[E-1][1]&&v[E][2]===v[E-1][2]||y.push(v[E]);return y},meetBezierCurveRedBlueSegments:function(m,g,f){var v,y,E,T,M,L,Y,j,F,G,H=O.Z.evaluate(f),q=0,K=0,at=g.numberPoints,tt=m.numberPoints,Q=[];if(at<g.bezierDegree+1||tt<m.bezierDegree+1)return[0,NaN,NaN];for(at-=g.bezierDegree,tt-=m.bezierDegree,m.type===X.Z.OBJECT_TYPE_SECTOR&&(q=3,tt-=3),g.type===X.Z.OBJECT_TYPE_SECTOR&&(K=3,at-=3),y=q;y<tt;y+=m.bezierDegree)for(L=[(v=m.points)[y].usrCoords.slice(1),v[y+1].usrCoords.slice(1)],m.bezierDegree===3&&(L[2]=v[y+2].usrCoords.slice(1),L[3]=v[y+3].usrCoords.slice(1)),j=this._bezierBbox(L),E=K;E<at;E+=g.bezierDegree)if(Y=[(v=g.points)[E].usrCoords.slice(1),v[E+1].usrCoords.slice(1)],g.bezierDegree===3&&(Y[2]=v[E+2].usrCoords.slice(1),Y[3]=v[E+3].usrCoords.slice(1)),F=this._bezierBbox(Y),this._bezierOverlap(j,F)){if((G=this.meetBeziersegmentBeziersegment(L,Y)).length===0)continue;for(T=0;T<G.length;T++)(M=G[T])[1]<-R.Z.eps||M[1]>1+R.Z.eps||M[2]<-R.Z.eps||M[2]>1+R.Z.eps||Q.push(M);if(Q.length>H)return Q[H][0]}return Q.length>H?Q[H][0]:[0,NaN,NaN]},bezierSegmentEval:function(m,g){var f,v,y,E=1-m;return v=0,y=0,v+=(f=E*E*E)*g[0][0],y+=f*g[0][1],v+=(f=3*m*E*E)*g[1][0],y+=f*g[1][1],v+=(f=3*m*m*E)*g[2][0],y+=f*g[2][1],[1,v+=(f=m*m*m)*g[3][0],y+=f*g[3][1]]},bezierArc:function(m,g,f,v,y){var E,T,M,L,Y,j,F,G,H,q,K,at,tt,Q,it,rt,dt,ht=.5*Math.PI,ut=g[1],_t=g[2],Dt=g[0],Bt=[],Xt=[];for(Y=this.distance(g,m),ut/=Dt,_t/=Dt,j=this.rad(m.slice(1),g.slice(1),f.slice(1)),y===-1&&(j=2*Math.PI-j),(E=m)[1]/=E[0],E[2]/=E[0],E[0]/=E[0],L=E.slice(0),v?(Bt=[ut,ut+.333*(E[1]-ut),ut+.666*(E[1]-ut),E[1]],Xt=[_t,_t+.333*(E[2]-_t),_t+.666*(E[2]-_t),E[2]]):(Bt=[E[1]],Xt=[E[2]]);j>R.Z.eps;)j>ht?(F=ht,j-=ht):(F=j,j=0),dt=[[1,0,0],[ut*(1-(G=Math.cos(y*F)))+_t*(H=Math.sin(y*F)),G,-H],[_t*(1-G)-ut*H,H,G]],L=[(it=R.Z.matVecMult(dt,E))[0]/it[0],it[1]/it[0],it[2]/it[0]],q=E[1]-ut,K=E[2]-_t,at=L[1]-ut,tt=L[2]-_t,rt=Math.sqrt((q+at)*(q+at)+(K+tt)*(K+tt)),Q=Math.abs(tt-K)>R.Z.eps?(q+at)*(Y/rt-.5)/(tt-K)*8/3:(K+tt)*(Y/rt-.5)/(q-at)*8/3,T=[1,E[1]-Q*K,E[2]+Q*q],M=[1,L[1]+Q*tt,L[2]-Q*at],Bt=Bt.concat([T[1],M[1],L[1]]),Xt=Xt.concat([T[2],M[2],L[2]]),E=L.slice(0);return v&&(Bt=Bt.concat([L[1]+.333*(ut-L[1]),L[1]+.666*(ut-L[1]),ut]),Xt=Xt.concat([L[2]+.333*(_t-L[2]),L[2]+.666*(_t-L[2]),_t])),[Bt,Xt]},projectPointToCircle:function(m,g,f){var v,y,E,T,M,L=g.center.coords.usrCoords;return O.Z.exists(f)||(f=m.board),O.Z.isPoint(m)?(v=m.coords.distance(X.Z.COORDS_BY_USER,g.center.coords),y=m.coords.usrCoords):(v=m.distance(X.Z.COORDS_BY_USER,g.center.coords),y=m.usrCoords),Math.abs(v)<R.Z.eps&&(v=R.Z.eps),M=g.Radius()/v,E=L[1]+M*(y[1]-L[1]),T=L[2]+M*(y[2]-L[2]),new B.Z(X.Z.COORDS_BY_USER,[E,T],f)},projectPointToLine:function(m,g,f){var v,y=[0,g.stdform[1],g.stdform[2]];return O.Z.exists(f)||(f=O.Z.exists(m.coords)?m.board:g.board),v=O.Z.exists(m.coords)?m.coords.usrCoords:m.usrCoords,y=R.Z.crossProduct(y,v),new B.Z(X.Z.COORDS_BY_USER,R.Z.crossProduct(y,g.stdform),f)},projectCoordsToSegment:function(m,g,f){var v,y=[f[1]-g[1],f[2]-g[2]],E=[m[1]-g[1],m[2]-g[2]];return Math.abs(y[0])<R.Z.eps&&Math.abs(y[1])<R.Z.eps?[g,0]:(v=R.Z.innerProduct(E,y),[[1,(v/=R.Z.innerProduct(y,y))*y[0]+g[1],v*y[1]+g[2]],v])},projectCoordsToBeziersegment:function(m,g,f){var v;return v=a.Z.Math.Numerics.fminbr(function(y){var E=[1,g.X(f+y),g.Y(f+y)];return E[1]-=m[1],E[2]-=m[2],E[1]*E[1]+E[2]*E[2]},[0,1]),[[1,g.X(v+f),g.Y(v+f)],v]},projectPointToCurve:function(m,g,f){O.Z.exists(f)||(f=m.board);var v=m.X(),y=m.Y(),E=m.position||0;return this.projectCoordsToCurve(v,y,E,g,f)},projectCoordsToCurve:function(m,g,f,v,y){var E,T,M,L,Y,j,F,G,H,q,K,at,tt,Q,it,rt,dt,ht,ut,_t,Dt=Number.POSITIVE_INFINITY;if(O.Z.exists(y)||(y=v.board),O.Z.evaluate(v.visProp.curvetype)==="plot"){if(f=0,Y=Dt,E=v.numberPoints===0?[0,1,1]:[v.Z(0),v.X(0),v.Y(0)],v.numberPoints>1)for(G=[1,m,g],v.bezierDegree===3?L=0:K=[v.Z(0),v.X(0),v.Y(0)],M=0;M<v.numberPoints-1;M++)v.bezierDegree===3?tt=this.projectCoordsToBeziersegment(G,v,L):(at=[v.Z(M+1),v.X(M+1),v.Y(M+1)],tt=this.projectCoordsToSegment(G,K,at)),F=tt[1],H=tt[0],0<=F&&F<=1?(j=this.distance(H,G),q=M+F):F<0?(H=K,j=this.distance(K,G),q=M):F>1&&M===v.numberPoints-2&&(H=at,j=this.distance(H,G),q=v.numberPoints-1),j<Y&&(Y=j,f=q,E=H),v.bezierDegree===3?(L++,M+=2):K=at;T=new B.Z(X.Z.COORDS_BY_USER,E,y)}else{for(Q=function(Bt){var Xt,$t;return Bt<v.minX()||Bt>v.maxX()?1/0:(Xt=m-v.X(Bt))*Xt+($t=g-v.Y(Bt))*$t},dt=Q(f),ut=v.minX(),ht=((_t=v.maxX())-ut)/50,it=ut,M=0;M<50;M++)((rt=Q(it))<dt||dt===1/0||isNaN(dt))&&(f=it,dt=rt),it+=ht;f=(f=(f=A.Z.fminbr(Q,[Math.max(f-ht,ut),Math.min(f+ht,_t)]))<ut?ut:f)>_t?_t:f,T=new B.Z(X.Z.COORDS_BY_USER,[v.X(f),v.Y(f)],y)}return[v.updateTransform(T),f]},projectCoordsToPolygon:function(m,g){var f,v,y,E,T,M=g.vertices.length,L=1/0;for(f=0;f<M-1;f++)0<=(y=a.Z.Math.Geometry.projectCoordsToSegment(m,g.vertices[f].coords.usrCoords,g.vertices[f+1].coords.usrCoords))[1]&&y[1]<=1?(v=a.Z.Math.Geometry.distance(y[0],m,3),E=y[0]):y[1]<0?(v=a.Z.Math.Geometry.distance(g.vertices[f].coords.usrCoords,m,3),E=g.vertices[f].coords.usrCoords):(v=a.Z.Math.Geometry.distance(g.vertices[f+1].coords.usrCoords,m,3),E=g.vertices[f+1].coords.usrCoords),v<L&&(T=E.slice(0),L=v);return T},projectPointToTurtle:function(m,g,f){var v,y,E,T,M,L,Y,j,F,G,H=0,q=0,K=Number.POSITIVE_INFINITY,at=g.objects.length;for(O.Z.exists(f)||(f=m.board),M=0;M<at;M++)(Y=g.objects[M]).elementClass===X.Z.OBJECT_CLASS_CURVE&&(v=(F=this.projectPointToCurve(m,Y))[0],G=F[1],(L=this.distance(v.usrCoords,m.coords.usrCoords))<K&&(E=v.usrCoords[1],T=v.usrCoords[2],y=G,K=L,j=Y,q=H),H+=Y.numberPoints);return v=new B.Z(X.Z.COORDS_BY_USER,[E,T],f),[j.updateTransform(v),y+q]},projectPointToPoint:function(m,g){return g.coords},projectPointToBoard:function(m,g){var f,v,y,E=g||m.board,T=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],M=m.coords||m,L=E.getBoundingBox();for(f=0;f<4;f++)(y=T[f])[0]*M.usrCoords[y[1]]<y[0]*L[y[2]]&&((v=R.Z.crossProduct([1,L[y[3]],L[y[4]]],[1,L[y[5]],L[y[6]]]))[3]=0,v=R.Z.normalize(v),M=this.projectPointToLine({coords:M},{stdform:v},E));return M},distPointLine:function(m,g){var f,v=g[1],y=g[2],E=g[0];return Math.abs(v)+Math.abs(y)<R.Z.eps?Number.POSITIVE_INFINITY:(f=v*m[1]+y*m[2]+E,v*=v,y*=y,Math.abs(f)/Math.sqrt(v+y))},reuleauxPolygon:function(m,g){var f,v=2*Math.PI,y=v/g,E=(g-1)/2,T=0,M=function(L,Y){return function(j,F){var G=(j%v+v)%v,H=Math.floor(G/y)%g;return F||(T=m[0].Dist(m[E]),f=R.Z.Geometry.rad([m[0].X()+1,m[0].Y()],m[0],m[E%g])),isNaN(H)?H:(G=.5*G+H*y*.5+f,m[H][L]()+T*Math[Y](G))}};return[M("X","cos"),M("Y","sin"),0,v]},meet3Planes:function(m,g,f,v,y,E){var T,M,L,Y,j,F=[0,0,0];for(T=R.Z.crossProduct(y,m),M=R.Z.crossProduct(m,f),L=R.Z.crossProduct(f,y),Y=R.Z.innerProduct(m,L,3),j=0;j<3;j++)F[j]=(g*L[j]+v*T[j]+E*M[j])/Y;return F},meetPlanePlane:function(m,g,f,v){var y,E,T,M=[0,0,0],L=[0,0,0];for(y=0;y<3;y++)M[y]=O.Z.evaluate(m[y]),L[y]=O.Z.evaluate(g[y]);for(E=R.Z.crossProduct(M,L),y=0;y<3;y++)M[y]=O.Z.evaluate(f[y]),L[y]=O.Z.evaluate(v[y]);return T=R.Z.crossProduct(M,L),R.Z.crossProduct(E,T)},project3DTo3DPlane:function(m,g,f){var v,y;return f=f||[0,0,0],v=R.Z.norm(g),y=(R.Z.innerProduct(m,g,3)-R.Z.innerProduct(f,g,3))/v,R.Z.axpy(-y,g,m)},getPlaneBounds:function(m,g,f,v,y){var E,T,M,L,Y;return m[2]+g[0]!==0?(M=[[m[0],g[0]],[m[1],g[1]]],L=[v-f[0],v-f[1]],E=(Y=A.Z.Gauss(M,L))[0],T=Y[1],L=[y-f[0],y-f[1]],[E,(Y=A.Z.Gauss(M,L))[0],T,Y[1]]):null}});const b=R.Z.Geometry},785:(u,N,x)=>{x.d(N,{Z:()=>O});var a=x(765),X=x(275),B=x(109);a.Z.Math.DoubleBits=function(){var c,b,m,g,f,v,y,E,T=new Float64Array(1),M=new Uint32Array(T.buffer);Float64Array!==void 0&&(T[0]=1,M[1]===1072693248?(c=function(L){return T[0]=L,[M[0],M[1]]},b=function(L,Y){return M[0]=L,M[1]=Y,T[0]},m=function(L){return T[0]=L,M[0]},g=function(L){return T[0]=L,M[1]},this.doubleBits=c,this.pack=b,this.lo=m,this.hi=g):M[0]===1072693248&&(f=function(L){return T[0]=L,[M[1],M[0]]},v=function(L,Y){return M[1]=L,M[0]=Y,T[0]},y=function(L){return T[0]=L,M[1]},E=function(L){return T[0]=L,M[0]},this.doubleBits=f,this.pack=v,this.lo=y,this.hi=E))},a.Z.extend(a.Z.Math.DoubleBits.prototype,{sign:function(c){return this.hi(c)>>>31},exponent:function(c){return(this.hi(c)<<1>>>21)-1023},fraction:function(c){var b=this.lo(c),m=this.hi(c),g=1048575&m;return 2146435072&m&&(g+=1<<20),[b,g]},denormalized:function(c){return!(2146435072&this.hi(c))}});var R=new a.Z.Math.DoubleBits,A=function(c,b){if(c!==void 0&&b!==void 0){if(X.Z.IntervalArithmetic.isInterval(c)){if(!X.Z.IntervalArithmetic.isSingleton(c))throw new TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=c.lo}else this.lo=c;if(X.Z.IntervalArithmetic.isInterval(b)){if(!X.Z.IntervalArithmetic.isSingleton(b))throw new TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=b.hi}else this.hi=b}else{if(c!==void 0)return Array.isArray(c)?new A(c[0],c[1]):new A(c,c);this.lo=this.hi=0}};a.Z.extend(A.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(c,b){return this.lo=c,this.hi=b,this},bounded:function(c,b){return this.set(X.Z.IntervalArithmetic.prev(c),X.Z.IntervalArithmetic.next(b))},boundedSingleton:function(c){return this.bounded(c,c)},assign:function(c,b){if(typeof c!="number"||typeof b!="number")throw new TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(c)||isNaN(b)||c>b?this.setEmpty():this.set(c,b)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(c,b){return this.assign(X.Z.IntervalArithmetic.next(c),X.Z.IntervalArithmetic.prev(b))},halfOpenLeft:function(c,b){return this.assign(X.Z.IntervalArithmetic.next(c),b)},halfOpenRight:function(c,b){return this.assign(c,X.Z.IntervalArithmetic.prev(b))},toArray:function(){return[this.lo,this.hi]},clone:function(){return new A().set(this.lo,this.hi)}}),a.Z.Math.IntervalArithmetic={Interval:function(c,b){return new A(c,b)},isInterval:function(c){return c!==null&&typeof c=="object"&&typeof c.lo=="number"&&typeof c.hi=="number"},isSingleton:function(c){return c.lo===c.hi},add:function(c,b){return B.Z.isNumber(c)&&(c=this.Interval(c)),B.Z.isNumber(b)&&(b=this.Interval(b)),new A(this.addLo(c.lo,b.lo),this.addHi(c.hi,b.hi))},sub:function(c,b){return B.Z.isNumber(c)&&(c=this.Interval(c)),B.Z.isNumber(b)&&(b=this.Interval(b)),new A(this.subLo(c.lo,b.hi),this.subHi(c.hi,b.lo))},mul:function(c,b){var m,g,f,v,y;return B.Z.isNumber(c)&&(c=this.Interval(c)),B.Z.isNumber(b)&&(b=this.Interval(b)),this.isEmpty(c)||this.isEmpty(b)?this.EMPTY.clone():(m=c.lo,g=c.hi,f=b.lo,v=b.hi,y=new A,m<0?g>0?f<0?v>0?(y.lo=Math.min(this.mulLo(m,v),this.mulLo(g,f)),y.hi=Math.max(this.mulHi(m,f),this.mulHi(g,v))):(y.lo=this.mulLo(g,f),y.hi=this.mulHi(m,f)):v>0?(y.lo=this.mulLo(m,v),y.hi=this.mulHi(g,v)):(y.lo=0,y.hi=0):f<0?v>0?(y.lo=this.mulLo(m,v),y.hi=this.mulHi(m,f)):(y.lo=this.mulLo(g,v),y.hi=this.mulHi(m,f)):v>0?(y.lo=this.mulLo(m,v),y.hi=this.mulHi(g,f)):(y.lo=0,y.hi=0):g>0?f<0?v>0?(y.lo=this.mulLo(g,f),y.hi=this.mulHi(g,v)):(y.lo=this.mulLo(g,f),y.hi=this.mulHi(m,v)):v>0?(y.lo=this.mulLo(m,f),y.hi=this.mulHi(g,v)):(y.lo=0,y.hi=0):(y.lo=0,y.hi=0),y)},div:function(c,b){return B.Z.isNumber(c)&&(c=this.Interval(c)),B.Z.isNumber(b)&&(b=this.Interval(b)),this.isEmpty(c)||this.isEmpty(b)?this.EMPTY.clone():this.zeroIn(b)?b.lo!==0?b.hi!==0?this.divZero(c):this.divNegative(c,b.lo):b.hi!==0?this.divPositive(c,b.hi):this.EMPTY.clone():this.divNonZero(c,b)},positive:function(c){return new A(c.lo,c.hi)},negative:function(c){return B.Z.isNumber(c)?new A(-c):new A(-c.hi,-c.lo)},isEmpty:function(c){return c.lo>c.hi},isWhole:function(c){return c.lo===-1/0&&c.hi===1/0},zeroIn:function(c){return this.hasValue(c,0)},hasValue:function(c,b){return!this.isEmpty(c)&&c.lo<=b&&b<=c.hi},hasInterval:function(c,b){return!!this.isEmpty(c)||!this.isEmpty(b)&&b.lo<=c.lo&&c.hi<=b.hi},intervalsOverlap:function(c,b){return!this.isEmpty(c)&&!this.isEmpty(b)&&(c.lo<=b.lo&&b.lo<=c.hi||b.lo<=c.lo&&c.lo<=b.hi)},divNonZero:function(c,b){var m=c.lo,g=c.hi,f=b.lo,v=b.hi,y=new A;return g<0?v<0?(y.lo=this.divLo(g,f),y.hi=this.divHi(m,v)):(y.lo=this.divLo(m,f),y.hi=this.divHi(g,v)):m<0?v<0?(y.lo=this.divLo(g,v),y.hi=this.divHi(m,v)):(y.lo=this.divLo(m,f),y.hi=this.divHi(g,f)):v<0?(y.lo=this.divLo(g,v),y.hi=this.divHi(m,f)):(y.lo=this.divLo(m,v),y.hi=this.divHi(g,f)),y},divPositive:function(c,b){return c.lo===0&&c.hi===0?c:this.zeroIn(c)?this.WHOLE:c.hi<0?new A(Number.NEGATIVE_INFINITY,this.divHi(c.hi,b)):new A(this.divLo(c.lo,b),Number.POSITIVE_INFINITY)},divNegative:function(c,b){return c.lo===0&&c.hi===0?c:this.zeroIn(c)?this.WHOLE:c.hi<0?new A(this.divLo(c.hi,b),Number.POSITIVE_INFINITY):new A(Number.NEGATIVE_INFINITY,this.divHi(c.lo,b))},divZero:function(c){return c.lo===0&&c.hi===0?c:this.WHOLE},fmod:function(c,b){var m,g;return B.Z.isNumber(c)&&(c=this.Interval(c)),B.Z.isNumber(b)&&(b=this.Interval(b)),this.isEmpty(c)||this.isEmpty(b)?this.EMPTY.clone():(m=c.lo<0?b.lo:b.hi,g=(g=c.lo/m)<0?Math.ceil(g):Math.floor(g),this.sub(c,this.mul(b,new A(g))))},multiplicativeInverse:function(c){return B.Z.isNumber(c)&&(c=this.Interval(c)),this.isEmpty(c)?this.EMPTY.clone():this.zeroIn(c)?c.lo!==0?c.hi!==0?this.WHOLE:new A(Number.NEGATIVE_INFINITY,this.divHi(1,c.lo)):c.hi!==0?new A(this.divLo(1,c.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new A(this.divLo(1,c.hi),this.divHi(1,c.lo))},pow:function(c,b){var m,g;if(B.Z.isNumber(c)&&(c=this.Interval(c)),this.isEmpty(c))return this.EMPTY.clone();if(this.isInterval(b)){if(!this.isSingleton(b))return this.EMPTY.clone();b=b.lo}return b===0?c.lo===0&&c.hi===0?this.EMPTY.clone():this.ONE.clone():b<0?this.pow(this.multiplicativeInverse(c),-b):b%1==0?c.hi<0?(m=this.powLo(-c.hi,b),g=this.powHi(-c.lo,b),(1&b)==1?new A(-g,-m):new A(m,g)):c.lo<0?(1&b)==1?new A(-this.powLo(-c.lo,b),this.powHi(c.hi,b)):new A(0,this.powHi(Math.max(-c.lo,c.hi),b)):new A(this.powLo(c.lo,b),this.powHi(c.hi,b)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(c){return B.Z.isNumber(c)&&(c=this.Interval(c)),this.nthRoot(c,2)},nthRoot:function(c,b){var m,g,f,v,y;if(B.Z.isNumber(c)&&(c=this.Interval(c)),this.isEmpty(c)||b<0)return this.EMPTY.clone();if(this.isInterval(b)){if(!this.isSingleton(b))return this.EMPTY.clone();b=b.lo}return m=1/b,c.hi<0?b%1==0&&(1&b)==1?(g=this.powHi(-c.lo,m),f=this.powLo(-c.hi,m),new A(-g,-f)):this.EMPTY.clone():c.lo<0?(v=this.powHi(c.hi,m),b%1==0&&(1&b)==1?(y=-this.powHi(-c.lo,m),new A(y,v)):new A(0,v)):new A(this.powLo(c.lo,m),this.powHi(c.hi,m))},exp:function(c){return B.Z.isNumber(c)&&(c=this.Interval(c)),this.isEmpty(c)?this.EMPTY.clone():new A(this.expLo(c.lo),this.expHi(c.hi))},log:function(c){var b;return B.Z.isNumber(c)&&(c=this.Interval(c)),this.isEmpty(c)?this.EMPTY.clone():(b=c.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(c.lo),new A(b,this.logHi(c.hi)))},ln:function(c){return this.log(c)},log10:function(c){return this.isEmpty(c)?this.EMPTY.clone():this.div(this.log(c),this.log(new A(10,10)))},log2:function(c){return this.isEmpty(c)?this.EMPTY.clone():this.div(this.log(c),this.log(new A(2,2)))},hull:function(c,b){var m=this.isEmpty(c),g=this.isEmpty(b);return m&&g?this.EMPTY.clone():m?b.clone():g?c.clone():new A(Math.min(c.lo,b.lo),Math.max(c.hi,b.hi))},intersection:function(c,b){var m,g;return this.isEmpty(c)||this.isEmpty(b)?this.EMPTY.clone():(m=Math.max(c.lo,b.lo))<=(g=Math.min(c.hi,b.hi))?new A(m,g):this.EMPTY.clone()},union:function(c,b){if(!this.intervalsOverlap(c,b))throw new Error("Interval#unions do not overlap");return new A(Math.min(c.lo,b.lo),Math.max(c.hi,b.hi))},difference:function(c,b){if(this.isEmpty(c)||this.isWhole(b))return this.EMPTY.clone();if(this.intervalsOverlap(c,b)){if(c.lo<b.lo&&b.hi<c.hi)throw new Error("Interval.difference: difference creates multiple intervals");return b.lo<=c.lo&&b.hi===1/0||b.hi>=c.hi&&b.lo===-1/0?this.EMPTY.clone():b.lo<=c.lo?new A().halfOpenLeft(b.hi,c.hi):new A().halfOpenRight(c.lo,b.lo)}return c.clone()},width:function(c){return this.isEmpty(c)?0:this.subHi(c.hi,c.lo)},abs:function(c){return B.Z.isNumber(c)&&(c=this.Interval(c)),this.isEmpty(c)?this.EMPTY.clone():c.lo>=0?c.clone():c.hi<=0?this.negative(c):new A(0,Math.max(-c.lo,c.hi))},max:function(c,b){var m=this.isEmpty(c),g=this.isEmpty(b);return m&&g?this.EMPTY.clone():m?b.clone():g?c.clone():new A(Math.max(c.lo,b.lo),Math.max(c.hi,b.hi))},min:function(c,b){var m=this.isEmpty(c),g=this.isEmpty(b);return m&&g?this.EMPTY.clone():m?b.clone():g?c.clone():new A(Math.min(c.lo,b.lo),Math.min(c.hi,b.hi))},onlyInfinity:function(c){return!isFinite(c.lo)&&c.lo===c.hi},_handleNegative:function(c){var b;return c.lo<0&&(c.lo===-1/0?(c.lo=0,c.hi=1/0):(b=Math.ceil(-c.lo/this.piTwiceLow),c.lo+=this.piTwiceLow*b,c.hi+=this.piTwiceLow*b)),c},cos:function(c){var b,m,g,f,v,y,E,T;return this.isEmpty(c)||this.onlyInfinity(c)?this.EMPTY.clone():(b=new A().set(c.lo,c.hi),this._handleNegative(b),m=this.PI_TWICE,g=this.fmod(b,m),this.width(g)>=m.lo?new A(-1,1):g.lo>=this.piHigh?(f=this.cos(this.sub(g,this.PI)),this.negative(f)):(v=g.lo,y=g.hi,E=this.cosLo(y),T=this.cosHi(v),y<=this.piLow?new A(E,T):y<=m.lo?new A(-1,Math.max(E,T)):new A(-1,1)))},sin:function(c){return this.isEmpty(c)||this.onlyInfinity(c)?this.EMPTY.clone():this.cos(this.sub(c,this.PI_HALF))},tan:function(c){var b,m,g;return this.isEmpty(c)||this.onlyInfinity(c)?this.EMPTY.clone():(b=new A().set(c.lo,c.hi),this._handleNegative(b),g=this.PI,(m=this.fmod(b,g)).lo>=this.piHalfLow&&(m=this.sub(m,g)),m.lo<=-this.piHalfLow||m.hi>=this.piHalfLow?this.WHOLE.clone():new A(this.tanLo(m.lo),this.tanHi(m.hi)))},asin:function(c){var b,m;return this.isEmpty(c)||c.hi<-1||c.lo>1?this.EMPTY.clone():(b=c.lo<=-1?-this.piHalfHigh:this.asinLo(c.lo),m=c.hi>=1?this.piHalfHigh:this.asinHi(c.hi),new A(b,m))},acos:function(c){var b,m;return this.isEmpty(c)||c.hi<-1||c.lo>1?this.EMPTY.clone():(b=c.hi>=1?0:this.acosLo(c.hi),m=c.lo<=-1?this.piHigh:this.acosHi(c.lo),new A(b,m))},atan:function(c){return this.isEmpty(c)?this.EMPTY.clone():new A(this.atanLo(c.lo),this.atanHi(c.hi))},sinh:function(c){return this.isEmpty(c)?this.EMPTY.clone():new A(this.sinhLo(c.lo),this.sinhHi(c.hi))},cosh:function(c){return this.isEmpty(c)?this.EMPTY.clone():c.hi<0?new A(this.coshLo(c.hi),this.coshHi(c.lo)):c.lo>=0?new A(this.coshLo(c.lo),this.coshHi(c.hi)):new A(1,this.coshHi(-c.lo>c.hi?c.lo:c.hi))},tanh:function(c){return this.isEmpty(c)?this.EMPTY.clone():new A(this.tanhLo(c.lo),this.tanhHi(c.hi))},equal:function(c,b){return this.isEmpty(c)?this.isEmpty(b):!this.isEmpty(b)&&c.lo===b.lo&&c.hi===b.hi},notEqual:function(c,b){return this.isEmpty(c)?!this.isEmpty(b):this.isEmpty(b)||c.hi<b.lo||c.lo>b.hi},lt:function(c,b){return B.Z.isNumber(c)&&(c=this.Interval(c)),B.Z.isNumber(b)&&(b=this.Interval(b)),!this.isEmpty(c)&&!this.isEmpty(b)&&c.hi<b.lo},gt:function(c,b){return B.Z.isNumber(c)&&(c=this.Interval(c)),B.Z.isNumber(b)&&(b=this.Interval(b)),!this.isEmpty(c)&&!this.isEmpty(b)&&c.lo>b.hi},leq:function(c,b){return B.Z.isNumber(c)&&(c=this.Interval(c)),B.Z.isNumber(b)&&(b=this.Interval(b)),!this.isEmpty(c)&&!this.isEmpty(b)&&c.hi<=b.lo},geq:function(c,b){return B.Z.isNumber(c)&&(c=this.Interval(c)),B.Z.isNumber(b)&&(b=this.Interval(b)),!this.isEmpty(c)&&!this.isEmpty(b)&&c.lo>=b.hi},piLow:3.141592653589793,piHigh:3.1415926535897936,piHalfLow:1.5707963267948966,piHalfHigh:1.5707963267948968,piTwiceLow:6.283185307179586,piTwiceHigh:6.283185307179587,identity:function(c){return c},_prev:function(c){return c===1/0?c:this.nextafter(c,-1/0)},_next:function(c){return c===-1/0?c:this.nextafter(c,1/0)},prev:function(c){return this._prev(c)},next:function(c){return this._next(c)},toInteger:function(c){return c<0?Math.ceil(c):Math.floor(c)},addLo:function(c,b){return this.prev(c+b)},addHi:function(c,b){return this.next(c+b)},subLo:function(c,b){return this.prev(c-b)},subHi:function(c,b){return this.next(c-b)},mulLo:function(c,b){return this.prev(c*b)},mulHi:function(c,b){return this.next(c*b)},divLo:function(c,b){return this.prev(c/b)},divHi:function(c,b){return this.next(c/b)},intLo:function(c){return this.toInteger(this.prev(c))},intHi:function(c){return this.toInteger(this.next(c))},logLo:function(c){return this.prev(Math.log(c))},logHi:function(c){return this.next(Math.log(c))},expLo:function(c){return this.prev(Math.exp(c))},expHi:function(c){return this.next(Math.exp(c))},sinLo:function(c){return this.prev(Math.sin(c))},sinHi:function(c){return this.next(Math.sin(c))},cosLo:function(c){return this.prev(Math.cos(c))},cosHi:function(c){return this.next(Math.cos(c))},tanLo:function(c){return this.prev(Math.tan(c))},tanHi:function(c){return this.next(Math.tan(c))},asinLo:function(c){return this.prev(Math.asin(c))},asinHi:function(c){return this.next(Math.asin(c))},acosLo:function(c){return this.prev(Math.acos(c))},acosHi:function(c){return this.next(Math.acos(c))},atanLo:function(c){return this.prev(Math.atan(c))},atanHi:function(c){return this.next(Math.atan(c))},sinhLo:function(c){return this.prev(X.Z.sinh(c))},sinhHi:function(c){return this.next(X.Z.sinh(c))},coshLo:function(c){return this.prev(X.Z.cosh(c))},coshHi:function(c){return this.next(X.Z.cosh(c))},tanhLo:function(c){return this.prev(X.Z.tanh(c))},tanhHi:function(c){return this.next(X.Z.tanh(c))},sqrtLo:function(c){return this.prev(Math.sqrt(c))},sqrtHi:function(c){return this.next(Math.sqrt(c))},powLo:function(c,b){var m;if(b%1!=0)return this.prev(Math.pow(c,b));for(m=(1&b)==1?c:1,b>>=1;b>0;)c=this.mulLo(c,c),(1&b)==1&&(m=this.mulLo(c,m)),b>>=1;return m},powHi:function(c,b){var m;if(b%1!=0)return this.next(Math.pow(c,b));for(m=(1&b)==1?c:1,b>>=1;b>0;)c=this.mulHi(c,c),(1&b)==1&&(m=this.mulHi(c,m)),b>>=1;return m},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(c){return this._prev(c)},this.next=function(c){return this._next(c)}},SMALLEST_DENORM:Math.pow(2,-1074),UINT_MAX:-1>>>0,nextafter:function(c,b){var m,g;return isNaN(c)||isNaN(b)?NaN:c===b?c:c===0?b<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(g=R.hi(c),m=R.lo(c),b>c==c>0?m===this.UINT_MAX?(g+=1,m=0):m+=1:m===0?(m=this.UINT_MAX,g-=1):m-=1,R.pack(m,g))}},a.Z.Math.IntervalArithmetic.PI=new A(X.Z.IntervalArithmetic.piLow,X.Z.IntervalArithmetic.piHigh),a.Z.Math.IntervalArithmetic.PI_HALF=new A(X.Z.IntervalArithmetic.piHalfLow,X.Z.IntervalArithmetic.piHalfHigh),a.Z.Math.IntervalArithmetic.PI_TWICE=new A(X.Z.IntervalArithmetic.piTwiceLow,X.Z.IntervalArithmetic.piTwiceHigh),a.Z.Math.IntervalArithmetic.ZERO=new A(0),a.Z.Math.IntervalArithmetic.ONE=new A(1),a.Z.Math.IntervalArithmetic.WHOLE=new A().setWhole(),a.Z.Math.IntervalArithmetic.EMPTY=new A().setEmpty();const O=a.Z.Math.IntervalArithmetic},275:(u,N,x)=>{x.d(N,{Z:()=>A});var a,X=x(765),B=x(109),R=function(O){var c,b;return O.memo||(c={},b=Array.prototype.join,O.memo=function(){var m=b.call(arguments);return c[m]!==a?c[m]:c[m]=O.apply(this,arguments)}),O.memo};X.Z.Math={eps:1e-6,relDif:function(O,c){var b=Math.abs(O),m=Math.abs(c);return(m=Math.max(b,m))===0?0:Math.abs(O-c)/m},mod:function(O,c){return O-Math.floor(O/c)*c},vector:function(O,c){var b,m;for(c=c||0,b=[],m=0;m<O;m++)b[m]=c;return b},matrix:function(O,c,b){var m,g,f;for(b=b||0,c=c||O,m=[],g=0;g<O;g++)for(m[g]=[],f=0;f<c;f++)m[g][f]=b;return m},identity:function(O,c){var b,m;for(c===a&&typeof c!="number"&&(c=O),b=this.matrix(O,c),m=0;m<Math.min(O,c);m++)b[m][m]=1;return b},frustum:function(O,c,b,m,g,f){var v=this.matrix(4,4);return v[0][0]=2*g/(c-O),v[0][1]=0,v[0][2]=(c+O)/(c-O),v[0][3]=0,v[1][0]=0,v[1][1]=2*g/(m-b),v[1][2]=(m+b)/(m-b),v[1][3]=0,v[2][0]=0,v[2][1]=0,v[2][2]=-(f+g)/(f-g),v[2][3]=-f*g*2/(f-g),v[3][0]=0,v[3][1]=0,v[3][2]=-1,v[3][3]=0,v},projection:function(O,c,b,m){var g=b*Math.tan(O/2),f=g*c;return this.frustum(-f,f,-g,g,b,m)},matVecMult:function(O,c){var b,m,g,f=O.length,v=c.length,y=[];if(v===3)for(b=0;b<f;b++)y[b]=O[b][0]*c[0]+O[b][1]*c[1]+O[b][2]*c[2];else for(b=0;b<f;b++){for(m=0,g=0;g<v;g++)m+=O[b][g]*c[g];y[b]=m}return y},matMatMult:function(O,c){var b,m,g,f,v=O.length,y=v>0?c[0].length:0,E=c.length,T=this.matrix(v,y);for(b=0;b<v;b++)for(m=0;m<y;m++){for(g=0,f=0;f<E;f++)g+=O[b][f]*c[f][m];T[b][m]=g}return T},transpose:function(O){var c,b,m,g,f;for(g=O.length,f=O.length>0?O[0].length:0,c=this.matrix(f,g),b=0;b<f;b++)for(m=0;m<g;m++)c[b][m]=O[m][b];return c},inverse:function(O){var c,b,m,g,f,v,y,E=O.length,T=[],M=[],L=[];for(c=0;c<E;c++){for(T[c]=[],b=0;b<E;b++)T[c][b]=O[c][b];M[c]=c}for(b=0;b<E;b++){for(f=Math.abs(T[b][b]),v=b,c=b+1;c<E;c++)Math.abs(T[c][b])>f&&(f=Math.abs(T[c][b]),v=c);if(f<=this.eps)return[];if(v>b){for(m=0;m<E;m++)y=T[b][m],T[b][m]=T[v][m],T[v][m]=y;y=M[b],M[b]=M[v],M[v]=y}for(g=1/T[b][b],c=0;c<E;c++)T[c][b]*=g;for(T[b][b]=g,m=0;m<E;m++)if(m!==b){for(c=0;c<E;c++)c!==b&&(T[c][m]-=T[c][b]*T[b][m]);T[b][m]=-g*T[b][m]}}for(c=0;c<E;c++){for(m=0;m<E;m++)L[M[m]]=T[c][m];for(m=0;m<E;m++)T[c][m]=L[m]}return T},innerProduct:function(O,c,b){var m,g=0;for(b!==a&&B.Z.isNumber(b)||(b=O.length),m=0;m<b;m++)g+=O[m]*c[m];return g},crossProduct:function(O,c){return[O[1]*c[2]-O[2]*c[1],O[2]*c[0]-O[0]*c[2],O[0]*c[1]-O[1]*c[0]]},norm:function(O,c){var b,m=0;for(c!==a&&B.Z.isNumber(c)||(c=O.length),b=0;b<c;b++)m+=O[b]*O[b];return Math.sqrt(m)},axpy:function(O,c,b){var m,g=c.length,f=[];for(m=0;m<g;m++)f[m]=O*c[m]+b[m];return f},factorial:R(function(O){return O<0?NaN:(O=Math.floor(O))===0||O===1?1:O*this.factorial(O-1)}),binomial:R(function(O,c){var b,m;if(c>O||c<0)return NaN;if(c=Math.round(c),O=Math.round(O),c===0||c===O)return 1;for(b=1,m=0;m<c;m++)b*=O-m,b/=m+1;return b}),cosh:Math.cosh||function(O){return .5*(Math.exp(O)+Math.exp(-O))},sinh:Math.sinh||function(O){return .5*(Math.exp(O)-Math.exp(-O))},acosh:Math.acosh||function(O){return Math.log(O+Math.sqrt(O*O-1))},asinh:Math.asinh||function(O){return O===-1/0?O:Math.log(O+Math.sqrt(O*O+1))},cot:function(O){return 1/Math.tan(O)},acot:function(O){return(O>=0?.5:-.5)*Math.PI-Math.atan(O)},nthroot:function(O,c){var b=1/c;return c<=0||Math.floor(c)!==c?NaN:O===0?0:O>0?Math.exp(b*Math.log(O)):c%2==1?-Math.exp(b*Math.log(-O)):NaN},cbrt:Math.cbrt||function(O){return this.nthroot(O,3)},pow:function(O,c){return O===0?c===0?1:0:Math.floor(c)===c?Math.pow(O,c):O>0?Math.exp(c*Math.log(O)):NaN},ratpow:function(O,c,b){var m;return c===0?1:b===0?NaN:(m=this.gcd(c,b),this.nthroot(this.pow(O,c/m),b/m))},log10:function(O){return Math.log(O)/Math.log(10)},log2:function(O){return Math.log(O)/Math.log(2)},log:function(O,c){return c!==void 0&&B.Z.isNumber(c)?Math.log(O)/Math.log(c):Math.log(O)},sign:Math.sign||function(O){return(O=+O)==0||isNaN(O)?O:O>0?1:-1},squampow:function(O,c){var b;if(Math.floor(c)===c){for(b=1,c<0&&(O=1/O,c*=-1);c!==0;)1&c&&(b*=O),c>>=1,O*=O;return b}return this.pow(O,c)},gcd:function(O,c){var b;if(O=Math.abs(O),c=Math.abs(c),!B.Z.isNumber(O)||!B.Z.isNumber(c))return NaN;for(c>O&&(b=O,O=c,c=b);;){if((O%=c)===0)return c;if((c%=O)===0)return O}},lcm:function(O,c){var b;return B.Z.isNumber(O)&&B.Z.isNumber(c)?(b=O*c)!==0?b/this.gcd(O,c):0:NaN},erf:function(O){return this.ProbFuncs.erf(O)},erfc:function(O){return this.ProbFuncs.erfc(O)},erfi:function(O){return this.ProbFuncs.erfi(O)},ndtr:function(O){return this.ProbFuncs.ndtr(O)},ndtri:function(O){return this.ProbFuncs.ndtri(O)},lt:function(O,c){return O<c},leq:function(O,c){return O<=c},gt:function(O,c){return O>c},geq:function(O,c){return O>=c},eq:function(O,c){return O===c},neq:function(O,c){return O!==c},and:function(O,c){return O&&c},not:function(O){return!O},or:function(O,c){return O||c},xor:function(O,c){return(O||c)&&!(O&&c)},normalize:function(O){var c,b,m=2*O[3],g=O[4]/m;return O[5]=g,O[6]=-O[1]/m,O[7]=-O[2]/m,isFinite(g)?Math.abs(g)>=1?(O[0]=(O[6]*O[6]+O[7]*O[7]-g*g)/(2*g),O[1]=-O[6]/g,O[2]=-O[7]/g,O[3]=1/(2*g),O[4]=1):(b=g<=0?-1:1,O[0]=b*(O[6]*O[6]+O[7]*O[7]-g*g)*.5,O[1]=-b*O[6],O[2]=-b*O[7],O[3]=b/2,O[4]=b*g):(c=Math.sqrt(O[1]*O[1]+O[2]*O[2]),O[0]/=c,O[1]/=c,O[2]/=c,O[3]=0,O[4]=1),O},toGL:function(O){var c,b,m;if(c=typeof Float32Array=="function"?new Float32Array(16):new Array(16),O.length!==4&&O[0].length!==4)return c;for(b=0;b<4;b++)for(m=0;m<4;m++)c[b+4*m]=O[b][m];return c},Vieta:function(O){var c,b,m,g=O.length,f=[];for(f=O.slice(),c=1;c<g;++c){for(m=f[c],f[c]*=f[c-1],b=c-1;b>=1;--b)f[b]+=f[b-1]*m;f[0]+=m}return f}};const A=X.Z.Math},336:(u,N,x)=>{x.d(N,{Z:()=>O});var a=x(765),X=x(109),B=x(503),R=x(275),A={rk4:{s:4,A:[[0,0,0,0],[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[1/6,1/3,1/3,1/6],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};R.Z.Numerics={Gauss:function(c,b){var m,g,f,v,y,E=R.Z.eps,T=c.length>0?c[0].length:0;if(T!==b.length||T!==c.length)throw new Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");for(v=[],y=b.slice(0,T),m=0;m<T;m++)v[m]=c[m].slice(0,T);for(g=0;g<T;g++){for(m=T-1;m>g;m--)if(Math.abs(v[m][g])>E)if(Math.abs(v[g][g])<E)X.Z.swap(v,m,g),X.Z.swap(y,m,g);else for(v[m][g]/=v[g][g],y[m]-=v[m][g]*y[g],f=g+1;f<T;f++)v[m][f]-=v[m][g]*v[g][f];if(Math.abs(v[g][g])<E)throw new Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.")}return this.backwardSolve(v,y,!0),y},backwardSolve:function(c,b,m){var g,f,v,y,E;for(g=m?b:b.slice(0,b.length),f=c.length,v=c.length>0?c[0].length:0,y=f-1;y>=0;y--){for(E=v-1;E>y;E--)g[y]-=c[y][E]*g[E];g[y]/=c[y][y]}return g},gaussBareiss:function(c){var b,m,g,f,v,y,E,T,M,L=R.Z.eps;if((E=c.length)<=0)return 0;for(c[0].length<E&&(E=c[0].length),T=[],f=0;f<E;f++)T[f]=c[f].slice(0,E);for(m=1,g=1,b=0;b<E-1;b++){if(y=T[b][b],Math.abs(y)<L){for(f=b+1;f<E&&!(Math.abs(T[f][b])>=L);f++);if(f===E)return 0;for(v=b;v<E;v++)M=T[f][v],T[f][v]=T[b][v],T[b][v]=M;g=-g,y=T[b][b]}for(f=b+1;f<E;f++)for(v=b+1;v<E;v++)M=y*T[f][v]-T[f][b]*T[b][v],T[f][v]=M/m;m=y}return g*T[E-1][E-1]},det:function(c){return c.length===2&&c[0].length===2?c[0][0]*c[1][1]-c[1][0]*c[0][1]:this.gaussBareiss(c)},Jacobi:function(c){var b,m,g,f,v,y,E,T,M,L=R.Z.eps*R.Z.eps,Y=0,j=c.length,F=[[0,0,0],[0,0,0],[0,0,0]],G=[[0,0,0],[0,0,0],[0,0,0]],H=0;for(b=0;b<j;b++){for(m=0;m<j;m++)F[b][m]=0,G[b][m]=c[b][m],Y+=Math.abs(G[b][m]);F[b][b]=1}if(j===1)return[G,F];if(Y<=0)return[G,F];Y/=j*j;do{for(T=0,M=0,m=1;m<j;m++)for(b=0;b<m;b++)if((f=Math.abs(G[b][m]))>M&&(M=f),T+=f,f>=L){for(f=.5*Math.atan2(2*G[b][m],G[b][b]-G[m][m]),v=Math.sin(f),y=Math.cos(f),g=0;g<j;g++)E=G[g][b],G[g][b]=y*E+v*G[g][m],G[g][m]=-v*E+y*G[g][m],E=F[g][b],F[g][b]=y*E+v*F[g][m],F[g][m]=-v*E+y*F[g][m];for(G[b][b]=y*G[b][b]+v*G[m][b],G[m][m]=-v*G[b][m]+y*G[m][m],G[b][m]=0,g=0;g<j;g++)G[b][g]=G[g][b],G[m][g]=G[g][m]}H+=1}while(Math.abs(T)/Y>L&&H<2e3);return[G,F]},NewtonCotes:function(c,b,m){var g,f,v,y=0,E=m&&X.Z.isNumber(m.number_of_nodes)?m.number_of_nodes:28,T={trapez:!0,simpson:!0,milne:!0},M=m&&m.integration_type&&T.hasOwnProperty(m.integration_type)&&T[m.integration_type]?m.integration_type:"milne",L=(c[1]-c[0])/E;switch(M){case"trapez":for(y=.5*(b(c[0])+b(c[1])),g=c[0],f=0;f<E-1;f++)y+=b(g+=L);y*=L;break;case"simpson":if(E%2>0)throw new Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");for(v=E/2,y=b(c[0])+b(c[1]),g=c[0],f=0;f<v-1;f++)y+=2*b(g+=2*L);for(g=c[0]-L,f=0;f<v;f++)y+=4*b(g+=2*L);y*=L/3;break;default:if(E%4>0)throw new Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");for(v=.25*E,y=7*(b(c[0])+b(c[1])),g=c[0],f=0;f<v-1;f++)y+=14*b(g+=4*L);for(g=c[0]-3*L,f=0;f<v;f++)y+=32*(b(g+=4*L)+b(g+2*L));for(g=c[0]-2*L,f=0;f<v;f++)y+=12*b(g+=4*L);y*=2*L/45}return y},Romberg:function(c,b,m){var g,f,v,y,E,T,M,L,Y=[],j=0,F=1/0,G=m&&X.Z.isNumber(m.max_iterations)?m.max_iterations:20,H=m&&X.Z.isNumber(m.eps)?m.eps:m.eps||1e-7;for(g=c[0],v=(f=c[1])-g,E=1,Y[0]=.5*v*(b(g)+b(f)),T=0;T<G;++T){for(y=0,v*=.5,E*=2,L=1,M=1;M<E;M+=2)y+=b(g+M*v);for(Y[T+1]=.5*Y[T]+y*v,j=Y[T+1],M=T-1;M>=0;--M)L*=4,Y[M]=Y[M+1]+(Y[M+1]-Y[M])/(L-1),j=Y[M];if(Math.abs(j-F)<H*Math.abs(j))break;F=j}return j},GaussLegendre:function(c,b,m){var g,f,v,y,E,T,M,L,Y=0,j=[],F=[],G=m&&X.Z.isNumber(m.n)?m.n:12;if(G>18&&(G=18),j[2]=[.5773502691896257],F[2]=[1],j[4]=[.33998104358485626,.8611363115940526],F[4]=[.6521451548625461,.34785484513745385],j[6]=[.2386191860831969,.6612093864662645,.932469514203152],F[6]=[.46791393457269104,.3607615730481386,.17132449237917036],j[8]=[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],F[8]=[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],j[10]=[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],F[10]=[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],j[12]=[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],F[12]=[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],j[14]=[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],F[14]=[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],j[16]=[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],F[16]=[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],j[18]=[.0847750130417353,.2518862256915055,.41175116146284263,.5597708310739475,.6916870430603532,.8037049589725231,.8926024664975557,.9558239495713977,.9915651684209309],F[18]=[.1691423829631436,.16427648374583273,.15468467512626524,.14064291467065065,.12255520671147846,.10094204410628717,.07642573025488905,.0497145488949698,.02161601352648331],j[3]=[0,.7745966692414834],F[3]=[.8888888888888888,.5555555555555556],j[5]=[0,.5384693101056831,.906179845938664],F[5]=[.5688888888888889,.47862867049936647,.23692688505618908],j[7]=[0,.4058451513773972,.7415311855993945,.9491079123427585],F[7]=[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],j[9]=[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],F[9]=[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],j[11]=[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],F[11]=[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],j[13]=[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],F[13]=[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],j[15]=[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],F[15]=[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],j[17]=[0,.17848418149584785,.3512317634538763,.5126905370864769,.6576711592166907,.7815140038968014,.8802391537269859,.9506755217687678,.9905754753144174],F[17]=[.17944647035620653,.17656270536699264,.16800410215645004,.15404576107681028,.13513636846852548,.11188384719340397,.08503614831717918,.0554595293739872,.02414830286854793],g=c[0],f=c[1],y=G+1>>1,M=j[G],L=F[G],T=.5*(f-g),E=.5*(f+g),!0&G)for(Y=L[0]*b(E),v=1;v<y;++v)Y+=L[v]*(b(E+T*M[v])+b(E-T*M[v]));else for(Y=0,v=0;v<y;++v)Y+=L[v]*(b(E+T*M[v])+b(E-T*M[v]));return T*Y},_rescale_error:function(c,b,m){var g,f,v=2220446049250313e-31;return c=Math.abs(c),m!==0&&c!==0&&(c=(g=Math.pow(200*c/m,1.5))<1?m*g:m),b>20041683600089728e-310&&(f=50*v*b)>c&&(c=f),c},_gaussKronrod:function(c,b,m,g,f,v,y){var E,T,M,L,Y,j,F,G,H,q,K,at=c[0],tt=c[1],Q=.5*(at+tt),it=.5*(tt-at),rt=Math.abs(it),dt=b(Q),ht=0,ut=dt*v[m-1],_t=Math.abs(ut),Dt=0,Bt=[],Xt=[];for(m%2==0&&(ht=dt*f[m/2-1]),E=Math.floor((m-1)/2),Y=0;Y<E;Y++)q=(G=b(Q-(F=it*g[j=2*Y+1])))+(H=b(Q+F)),Bt[j]=G,Xt[j]=H,ht+=f[Y]*q,ut+=v[j]*q,_t+=v[j]*(Math.abs(G)+Math.abs(H));for(E=Math.floor(m/2),Y=0;Y<E;Y++)G=b(Q-(F=it*g[K=2*Y])),H=b(Q+F),Bt[K]=G,Xt[K]=H,ut+=v[K]*(G+H),_t+=v[K]*(Math.abs(G)+Math.abs(H));for(M=.5*ut,Dt=v[m-1]*Math.abs(dt-M),Y=0;Y<m-1;Y++)Dt+=v[Y]*(Math.abs(Bt[Y]-M)+Math.abs(Xt[Y]-M));return L=(ut-ht)*it,_t*=rt,Dt*=rt,T=ut*=it,y.abserr=this._rescale_error(L,_t,Dt),y.resabs=_t,y.resasc=Dt,T},GaussKronrod15:function(c,b,m){return this._gaussKronrod(c,b,8,[.9914553711208126,.9491079123427585,.8648644233597691,.7415311855993945,.5860872354676911,.4058451513773972,.20778495500789848,0],[.1294849661688697,.27970539148927664,.3818300505051189,.4179591836734694],[.022935322010529224,.06309209262997856,.10479001032225019,.14065325971552592,.1690047266392679,.19035057806478542,.20443294007529889,.20948214108472782],m)},GaussKronrod21:function(c,b,m){return this._gaussKronrod(c,b,11,[.9956571630258081,.9739065285171717,.9301574913557082,.8650633666889845,.7808177265864169,.6794095682990244,.5627571346686047,.4333953941292472,.2943928627014602,.14887433898163122,0],[.06667134430868814,.1494513491505806,.21908636251598204,.26926671930999635,.29552422471475287],[.011694638867371874,.032558162307964725,.054755896574351995,.07503967481091996,.0931254545836976,.10938715880229764,.12349197626206584,.13470921731147334,.14277593857706009,.14773910490133849,.1494455540029169],m)},GaussKronrod31:function(c,b,m){return this._gaussKronrod(c,b,16,[.9980022986933971,.9879925180204854,.9677390756791391,.937273392400706,.8972645323440819,.8482065834104272,.790418501442466,.7244177313601701,.650996741297417,.5709721726085388,.4850818636402397,.3941513470775634,.29918000715316884,.20119409399743451,.1011420669187175,0],[.03075324199611727,.07036604748810812,.10715922046717194,.13957067792615432,.16626920581699392,.1861610000155622,.19843148532711158,.2025782419255613],[.005377479872923349,.015007947329316122,.02546084732671532,.03534636079137585,.04458975132476488,.05348152469092809,.06200956780067064,.06985412131872826,.07684968075772038,.08308050282313302,.08856444305621176,.09312659817082532,.09664272698362368,.09917359872179196,.10076984552387559,.10133000701479154],m)},_workspace:function(c,b){return{limit:b,size:0,nrmax:0,i:0,alist:[c[0]],blist:[c[1]],rlist:[0],elist:[0],order:[0],level:[0],qpsrt:function(){var m,g,f,v,y,E=this.size-1,T=this.limit,M=this.nrmax,L=this.order[M];if(E<2)return this.order[0]=0,this.order[1]=1,void(this.i=L);for(m=this.elist[L];M>0&&m>this.elist[this.order[M-1]];)this.order[M]=this.order[M-1],M--;for(y=E<T/2+2?E:T-E+1,f=M+1;f<y&&m<this.elist[this.order[f]];)this.order[f-1]=this.order[f],f++;for(this.order[f-1]=L,g=this.elist[E],v=y-1;v>f-2&&g>=this.elist[this.order[v]];)this.order[v+1]=this.order[v],v--;this.order[v+1]=E,L=this.order[M],this.i=L,this.nrmax=M},set_initial_result:function(m,g){this.size=1,this.rlist[0]=m,this.elist[0]=g},update:function(m,g,f,v,y,E,T,M){var L=this.i,Y=this.size,j=this.level[this.i]+1;M>v?(this.alist[L]=y,this.rlist[L]=T,this.elist[L]=M,this.level[L]=j,this.alist[Y]=m,this.blist[Y]=g,this.rlist[Y]=f,this.elist[Y]=v,this.level[Y]=j):(this.blist[L]=g,this.rlist[L]=f,this.elist[L]=v,this.level[L]=j,this.alist[Y]=y,this.blist[Y]=E,this.rlist[Y]=T,this.elist[Y]=M,this.level[Y]=j),this.size++,j>this.maximum_level&&(this.maximum_level=j),this.qpsrt()},retrieve:function(){var m=this.i;return{a:this.alist[m],b:this.blist[m],r:this.rlist[m],e:this.elist[m]}},sum_results:function(){var m,g=this.size,f=0;for(m=0;m<g;m++)f+=this.rlist[m];return f},subinterval_too_small:function(m,g,f){var v=1.0000000000000222*(Math.abs(g)+22250738585072014e-321);return Math.abs(m)<=v&&Math.abs(f)<=v}}},Qag:function(c,b,m){var g,f,v,y,E,T,M,L,Y,j,F,G,H,q,K,at,tt,Q,it=this._workspace(c,1e3),rt=m&&X.Z.isNumber(m.limit)?m.limit:15,dt=m&&X.Z.isNumber(m.epsrel)?m.epsrel:1e-7,ht=m&&X.Z.isNumber(m.epsabs)?m.epsabs:1e-7,ut=m&&X.Z.isFunction(m.q)?m.q:this.GaussKronrod15,_t={},Dt=0,Bt=0,Xt=0,$t=0,se=0,ae=0,le=0,he=0,Gt=0,oe=0;if(rt>it.limit&&a.Z.warn("iteration limit exceeds available workspace"),ht<=0&&(dt<50*R.Z.eps||dt<5e-29)&&a.Z.warn("tolerance cannot be acheived with given epsabs and epsrel"),v=ut.apply(this,[c,b,_t]),y=_t.abserr,E=_t.resabs,T=_t.resasc,it.set_initial_result(v,y),M=Math.max(ht,dt*Math.abs(v)),y<=11102230246251565e-30*E&&y>M)return a.Z.warn("cannot reach tolerance because of roundoff error on first attempt"),-1/0;if(y<=M&&y!==T||y===0)return v;if(rt===1)return a.Z.warn("a maximum of one iteration was insufficient"),-1/0;g=v,f=y,Dt=1;do se=0,ae=0,le=0,he=0,Gt=0,oe=0,G=(tt=it.retrieve()).a,H=tt.b,q=tt.r,K=tt.e,L=G,j=Y=.5*(G+H),F=H,se=ut.apply(this,[[L,Y],b,_t]),he=_t.abserr,at=_t.resasc,ae=ut.apply(this,[[j,F],b,_t]),f+=(oe=he+(Gt=_t.abserr))-K,g+=(le=se+ae)-q,at!==he&&_t.resasc!==Gt&&(Q=q-le,Math.abs(Q)<=1e-5*Math.abs(le)&&oe>=.99*K&&Bt++,Dt>=10&&oe>K&&Xt++),f>(M=Math.max(ht,dt*Math.abs(g)))&&((Bt>=6||Xt>=20)&&($t=2),it.subinterval_too_small(L,j,F)&&($t=3)),it.update(L,Y,se,he,j,F,ae,Gt),G=(tt=it.retrieve()).a_i,H=tt.b_i,q=tt.r_i,K=tt.e_i,Dt++;while(Dt<rt&&!$t&&f>M);return it.sum_results()},I:function(c,b){return this.Qag(c,b,{q:this.GaussKronrod15,limit:15,epsrel:1e-7,epsabs:1e-7})},Newton:function(c,b,m){var g,f=0,v=R.Z.eps,y=c.apply(m,[b]);for(X.Z.isArray(b)&&(b=b[0]);f<50&&Math.abs(y)>v;)g=this.D(c,m)(b),Math.abs(g)>v?b-=y/g:b+=.2*Math.random()-1,y=c.apply(m,[b]),f+=1;return b},root:function(c,b,m){return this.chandrupatla(c,b,m)},generalizedNewton:function(c,b,m,g){var f,v,y,E,T,M,L,Y,j,F,G,H,q,K,at=0;for(this.generalizedNewton.t1memo?(f=this.generalizedNewton.t1memo,v=this.generalizedNewton.t2memo):(f=m,v=g),F=(Y=c.X(f)-b.X(v))*Y+(j=c.Y(f)-b.Y(v))*j,G=this.D(c.X,c),H=this.D(b.X,b),q=this.D(c.Y,c),K=this.D(b.Y,b);F>R.Z.eps&&at<10;)y=G(f),E=-H(v),T=q(f),f-=((M=-K(v))*Y-E*j)/(L=y*M-E*T),v-=(y*j-T*Y)/L,F=(Y=c.X(f)-b.X(v))*Y+(j=c.Y(f)-b.Y(v))*j,at+=1;return this.generalizedNewton.t1memo=f,this.generalizedNewton.t2memo=v,Math.abs(f)<Math.abs(v)?[c.X(f),c.Y(f)]:[b.X(v),b.Y(v)]},Neville:function(c){var b=[],m=function(g){return function(f,v){var y,E,T,M=R.Z.binomial,L=c.length,Y=L-1,j=0,F=0;if(!v)for(T=1,y=0;y<L;y++)b[y]=M(Y,y)*T,T*=-1;for(E=f,y=0;y<L;y++){if(E===0)return c[y][g]();T=b[y]/E,E-=1,j+=c[y][g]()*T,F+=T}return j/F}};return[m("X"),m("Y"),0,function(){return c.length-1}]},splineDef:function(c,b){var m,g,f,v=Math.min(c.length,b.length),y=[],E=[],T=[],M=[],L=[],Y=[];if(v===2)return[0,0];for(g=0;g<v;g++)m={X:c[g],Y:b[g]},T.push(m);for(T.sort(function(j,F){return j.X-F.X}),g=0;g<v;g++)c[g]=T[g].X,b[g]=T[g].Y;for(g=0;g<v-1;g++)M.push(c[g+1]-c[g]);for(g=0;g<v-2;g++)L.push(6*(b[g+2]-b[g+1])/M[g+1]-6*(b[g+1]-b[g])/M[g]);for(y.push(2*(M[0]+M[1])),E.push(L[0]),g=0;g<v-3;g++)f=M[g+1]/y[g],y.push(2*(M[g+1]+M[g+2])-f*M[g+1]),E.push(L[g+1]-f*E[g]);for(Y[v-3]=E[v-3]/y[v-3],g=v-4;g>=0;g--)Y[g]=(E[g]-M[g+1]*Y[g+1])/y[g];for(g=v-3;g>=0;g--)Y[g+1]=Y[g];return Y[0]=0,Y[v-1]=0,Y},splineEval:function(c,b,m,g){var f,v,y,E,T,M,L,Y=Math.min(b.length,m.length),j=1,F=!1,G=[];for(X.Z.isArray(c)?(j=c.length,F=!0):c=[c],f=0;f<j;f++){if(c[f]<b[0]||b[f]>b[Y-1])return NaN;for(v=1;v<Y&&!(c[f]<=b[v]);v++);y=m[v-=1],E=(m[v+1]-m[v])/(b[v+1]-b[v])-(b[v+1]-b[v])/6*(g[v+1]+2*g[v]),T=g[v]/2,M=(g[v+1]-g[v])/(6*(b[v+1]-b[v])),L=c[f]-b[v],G.push(y+(E+(T+M*L)*L)*L)}return F?G:G[0]},generatePolynomialTerm:function(c,b,m,g){var f,v=[];for(f=b;f>=0;f--)v=v.concat(["(",c[f].toPrecision(g),")"]),f>1?v=v.concat(["*",m,"<sup>",f,"<","/sup> + "]):f===1&&(v=v.concat(["*",m," + "]));return v.join("")},lagrangePolynomial:function(c){var b=[],m=this,g=function(f,v){var y,E,T,M,L=c.length,Y=0,j=0;if(!v)for(y=0;y<L;y++){for(b[y]=1,T=c[y].X(),E=0;E<L;E++)E!==y&&(b[y]*=T-c[E].X());b[y]=1/b[y]}for(y=0;y<L;y++){if(f===(T=c[y].X()))return c[y].Y();j+=M=b[y]/(f-T),Y+=M*c[y].Y()}return Y/j};return g.getTerm=function(f,v,y){return m.lagrangePolynomialTerm(c,f,v,y)()},g},lagrangePolynomialTerm:function(c,b,m,g){return function(){var f,v,y,E,T,M,L=c.length,Y=[],j=[],F=[],G=!0;for(m=m||"x",g===void 0&&(g=" * "),f=L-1,E=0;E<L;E++)F[E]=0;for(y=0;y<L;y++){for(T=c[y].Y(),M=c[y].X(),Y=[],E=0;E<L;E++)E!==y&&(T/=M-c[E].X(),Y.push(c[E].X()));for(j=[1].concat(R.Z.Vieta(Y)),E=0;E<j.length;E++)F[E]+=(E%2==1?-1:1)*j[E]*T}for(v="",E=0;E<F.length;E++)T=F[E],Math.abs(T)<R.Z.eps||(a.Z.exists(b)&&(T=B.Z._round10(T,-b)),G?(v+=T>0?T:"-"+-T,G=!1):v+=T>0?" + "+T:" - "+-T,f-E>1?v+=g+m+"^"+(f-E):f-E==1&&(v+=g+m));return v}},_initCubicPoly:function(c,b,m,g){return[c,m,-3*c+3*b-2*m-g,2*c-2*b+m+g]},CardinalSpline:function(c,b,m){var g,f,v,y,E=[],T=this;return y=X.Z.isFunction(b)?b:function(){return b},m===void 0&&(m="uniform"),f=function(M){return function(L,Y){var j,F,G,H,q,K,at,tt,Q,it;if(c.length<2)return NaN;if(!Y)for(v=y(),G={X:function(){return 2*c[0].X()-c[1].X()},Y:function(){return 2*c[0].Y()-c[1].Y()},Dist:function(rt){var dt=this.X()-rt.X(),ht=this.Y()-rt.Y();return Math.sqrt(dt*dt+ht*ht)}},H={X:function(){return 2*c[c.length-1].X()-c[c.length-2].X()},Y:function(){return 2*c[c.length-1].Y()-c[c.length-2].Y()},Dist:function(rt){var dt=this.X()-rt.X(),ht=this.Y()-rt.Y();return Math.sqrt(dt*dt+ht*ht)}},it=(g=[G].concat(c,[H])).length,E[M]=[],j=0;j<it-3;j++)m==="centripetal"?(at=g[j].Dist(g[j+1]),tt=g[j+2].Dist(g[j+1]),Q=g[j+3].Dist(g[j+2]),at=Math.sqrt(at),tt=Math.sqrt(tt),Q=Math.sqrt(Q),tt<R.Z.eps&&(tt=1),at<R.Z.eps&&(at=tt),Q<R.Z.eps&&(Q=tt),q=(g[j+1][M]()-g[j][M]())/at-(g[j+2][M]()-g[j][M]())/(tt+at)+(g[j+2][M]()-g[j+1][M]())/tt,K=(g[j+2][M]()-g[j+1][M]())/tt-(g[j+3][M]()-g[j+1][M]())/(Q+tt)+(g[j+3][M]()-g[j+2][M]())/Q,q*=tt,K*=tt,E[M][j]=T._initCubicPoly(g[j+1][M](),g[j+2][M](),v*q,v*K)):E[M][j]=T._initCubicPoly(g[j+1][M](),g[j+2][M](),v*(g[j+2][M]()-g[j][M]()),v*(g[j+3][M]()-g[j+1][M]()));return isNaN(L)?NaN:(it=c.length,L<=0?c[0][M]():L>=it?c[it-1][M]():(j=Math.floor(L))===L?c[j][M]():(L-=j,(F=E[M][j])===void 0?NaN:((F[3]*L+F[2])*L+F[1])*L+F[0]))}},[f("X"),f("Y"),0,function(){return c.length-1}]},CatmullRomSpline:function(c,b){return this.CardinalSpline(c,.5,b)},regressionPolynomial:function(c,b,m){var g,f,v,y,E,T,M="";if(X.Z.isPoint(c)&&X.Z.isFunction(c.Value))f=function(){return c.Value()};else if(X.Z.isFunction(c))f=c;else{if(!X.Z.isNumber(c))throw new Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof c+"'.");f=function(){return c}}if(arguments.length===3&&X.Z.isArray(b)&&X.Z.isArray(m))E=0;else if(arguments.length===2&&X.Z.isArray(b)&&b.length>0&&X.Z.isPoint(b[0]))E=1;else{if(!(arguments.length===2&&X.Z.isArray(b)&&b.length>0&&b[0].usrCoords&&b[0].scrCoords))throw new Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");E=2}return(T=function(L,Y){var j,F,G,H,q,K,at,tt,Q,it=b.length;if(Q=Math.floor(f()),!Y){if(E===1)for(v=[],y=[],j=0;j<it;j++)v[j]=b[j].X(),y[j]=b[j].Y();if(E===2)for(v=[],y=[],j=0;j<it;j++)v[j]=b[j].usrCoords[1],y[j]=b[j].usrCoords[2];if(E===0)for(v=[],y=[],j=0;j<it;j++)X.Z.isFunction(b[j])?v.push(b[j]()):v.push(b[j]),X.Z.isFunction(m[j])?y.push(m[j]()):y.push(m[j]);for(G=[],F=0;F<it;F++)G.push([1]);for(j=1;j<=Q;j++)for(F=0;F<it;F++)G[F][j]=G[F][j-1]*v[F];q=y,H=R.Z.transpose(G),K=R.Z.matMatMult(H,G),at=R.Z.matVecMult(H,q),g=R.Z.Numerics.Gauss(K,at),M=R.Z.Numerics.generatePolynomialTerm(g,Q,"x",3)}for(tt=g[Q],j=Q-1;j>=0;j--)tt=tt*L+g[j];return tt}).getTerm=function(){return M},T},bezier:function(c){var b,m,g=function(f){return function(v,y){var E=3*Math.floor(v),T=v%1,M=1-T;return y||(m=3*Math.floor((c.length-1)/3),b=Math.floor(m/3)),v<0?c[0][f]():v>=b?c[m][f]():isNaN(v)?NaN:M*M*(M*c[E][f]()+3*T*c[E+1][f]())+(3*M*c[E+2][f]()+T*c[E+3][f]())*T*T}};return[g("X"),g("Y"),0,function(){return Math.floor(c.length/3)}]},bspline:function(c,b){var m,g=function(f){return function(v,y){var E,T,M,L,Y=c.length,j=Y-1,F=b;if(j<=0)return NaN;if(j+2<=F&&(F=j+1),v<=0)return c[0][f]();if(v>=j-F+2)return c[j][f]();for(M=Math.floor(v)+F-1,m=function(G,H){var q,K=[];for(q=0;q<G+H+1;q++)K[q]=q<H?0:q<=G?q-H+1:G-H+2;return K}(j,F),L=function(G,H,q,K){var at,tt,Q,it,rt,dt=[];for(H[K]<=G&&G<H[K+1]?dt[K]=1:dt[K]=0,at=2;at<=q;at++)for(tt=K-at+1;tt<=K;tt++)Q=tt<=K-at+1||tt<0?0:dt[tt],it=tt>=K?0:dt[tt+1],rt=H[tt+at-1]-H[tt],dt[tt]=rt===0?0:(G-H[tt])/rt*Q,(rt=H[tt+at]-H[tt+1])!=0&&(dt[tt]+=(H[tt+at]-G)/rt*it);return dt}(v,m,F,M),E=0,T=M-F+1;T<=M;T++)T<Y&&T>=0&&(E+=c[T][f]()*L[T]);return E}};return[g("X"),g("Y"),0,function(){return c.length-1}]},D:function(c,b){return X.Z.exists(b)?function(m,g){var f=1e-5;return(c.apply(b,[m+f,g])-c.apply(b,[m-f,g]))/2e-5}:function(m,g){var f=1e-5;return(c(m+f,g)-c(m-f,g))/2e-5}},_riemannValue:function(c,b,m,g){var f,v,y,E;if(g<0&&(m!=="trapezoidal"&&(c+=g),g*=-1,m==="lower"?m="upper":m==="upper"&&(m="lower")),E=.01*g,m==="right")f=b(c+g);else if(m==="middle")f=b(c+.5*g);else if(m==="left"||m==="trapezoidal")f=b(c);else if(m==="lower"){for(f=b(c),y=c+E;y<=c+g;y+=E)(v=b(y))<f&&(f=v);(v=b(c+g))<f&&(f=v)}else if(m==="upper"){for(f=b(c),y=c+E;y<=c+g;y+=E)(v=b(y))>f&&(f=v);(v=b(c+g))>f&&(f=v)}else f=m==="random"?b(c+g*Math.random()):m==="simpson"?(b(c)+4*b(c+.5*g)+b(c+g))/6:b(c);return f},riemann:function(c,b,m,g,f){var v,y,E,T,M,L,Y,j=[],F=[],G=0,H=g,q=0;if(X.Z.isArray(c)?(M=c[0],T=c[1]):T=c,(b=Math.floor(b))<=0)return[j,F,q];for(y=(f-g)/b,v=0;v<b;v++)E=this._riemannValue(H,T,m,y),j[G]=H,F[G]=E,G+=1,H+=y,m==="trapezoidal"&&(E=T(H)),j[G]=H,F[G]=E,G+=1;for(v=0;v<b;v++)E=M?this._riemannValue(H,M,m,-y):0,j[G]=H,F[G]=E,G+=1,H-=y,m==="trapezoidal"&&M&&(E=M(H)),j[G]=H,F[G]=E,m!=="trapezoidal"?(L=E,Y=F[2*(b-1)-2*v]):(Y=.5*(T(H+y)+T(H)),L=M?.5*(M(H+y)+M(H)):0),q+=(Y-L)*y,j[G+=1]=H,F[G]=F[2*(b-1)-2*v],G+=1;return[j,F,q]},riemannsum:function(c,b,m,g,f){return a.Z.deprecated("Numerics.riemannsum()","Numerics.riemann()"),this.riemann(c,b,m,g,f)[2]},rungeKutta:function(c,b,m,g,f){var v,y,E,T,M,L,Y=[],j=[],F=(m[1]-m[0])/g,G=m[0],H=b.length,q=[],K=0;for(X.Z.isString(c)&&(c=A[c]||A.euler),L=c.s,v=0;v<H;v++)Y[v]=b[v];for(y=0;y<g;y++){for(q[K]=[],v=0;v<H;v++)q[K][v]=Y[v];for(K+=1,T=[],E=0;E<L;E++){for(v=0;v<H;v++)j[v]=0;for(M=0;M<E;M++)for(v=0;v<H;v++)j[v]+=c.A[E][M]*F*T[M][v];for(v=0;v<H;v++)j[v]+=Y[v];T.push(f(G+c.c[E]*F,j))}for(v=0;v<H;v++)j[v]=0;for(M=0;M<L;M++)for(v=0;v<H;v++)j[v]+=c.b[M]*T[M][v];for(v=0;v<H;v++)Y[v]=Y[v]+F*j[v];G+=F}return q},maxIterationsRoot:80,maxIterationsMinimize:500,findBracket:function(c,b,m){var g,f,v,y,E,T,M,L,Y,j;if(X.Z.isArray(b))return b;for(g=b,v=c.call(m,g),j=(y=[g-.1*(f=g===0?1:g),g+.1*f,g-1,g+1,g-.5*f,g+.5*f,g-.6*f,g+.6*f,g-1*f,g+1*f,g-2*f,g+2*f,g-5*f,g+5*f,g-10*f,g+10*f,g-50*f,g+50*f,g-100*f,g+100*f]).length,Y=0;Y<j&&(E=y[Y],!(v*(T=c.call(m,E))<=0));Y++);return E<g&&(M=g,g=E,E=M,L=v,v=T,T=L),[g,v,E,T]},fzero:function(c,b,m){var g,f,v,y,E,T,M,L,Y,j,F,G,H,q,K,at=R.Z.eps,tt=this.maxIterationsRoot,Q=0;if(X.Z.isArray(b)){if(b.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");g=b[0],y=c.call(m,g),f=b[1],E=c.call(m,f)}else g=(M=this.findBracket(c,b,m))[0],y=M[1],f=M[2],E=M[3];if(Math.abs(y)<=at)return g;if(Math.abs(E)<=at)return f;if(y*E>0)return X.Z.isArray(b)?this.fminbr(c,[g,f],m):this.Newton(c,g,m);for(v=g,T=y;Q<tt;){if(L=f-g,Math.abs(T)<Math.abs(E)&&(g=f,f=v,v=g,y=E,E=T,T=y),G=2*at*Math.abs(f)+.5*at,K=.5*(v-f),Math.abs(K)<=G||Math.abs(E)<=at)return f;Math.abs(L)>=G&&Math.abs(y)>Math.abs(E)&&(j=v-f,g===v?(H=j*(Y=E/y),q=1-Y):(H=(F=E/y)*(j*(q=y/T)*(q-(Y=E/T))-(f-g)*(Y-1)),q=(q-1)*(Y-1)*(F-1)),H>0?q=-q:H=-H,H<.75*j*q-.5*Math.abs(G*q)&&H<Math.abs(L*q*.5)&&(K=H/q)),Math.abs(K)<G&&(K=K>0?G:-G),g=f,y=E,f+=K,((E=c.call(m,f))>0&&T>0||E<0&&T<0)&&(v=g,T=y),Q++}return f},chandrupatla:function(c,b,m){var g,f,v,y,E,T,M,L,Y,j,F,G,H,q,K,at,tt,Q,it,rt,dt=0,ht=this.maxIterationsRoot,ut=1+.001*Math.random(),_t=.5*ut,Dt=R.Z.eps;if(X.Z.isArray(b)){if(b.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");g=b[0],f=c.call(m,g),v=b[1],y=c.call(m,v)}else g=(E=this.findBracket(c,b,m))[0],f=E[1],v=E[2],y=E[3];if(f*y>0)return X.Z.isArray(b)?this.fminbr(c,[g,v],m):this.Newton(c,g,m);T=g,M=v,j=f,F=y;do{if(Y=T+_t*(M-T),H=c.call(m,Y),Math.sign(H)===Math.sign(j)?(L=T,T=Y,G=j,j=H):(L=M,M=T,G=F,F=j),q=T=Y,K=j=H,Math.abs(F)<Math.abs(j)&&(q=M,K=F),(at=(2*Dt*Math.abs(q)+5e-6)/Math.abs(M-T))>.5||K===0)break;tt=(T-M)/(L-M),Q=(j-F)/(G-F),it=1-Math.sqrt(1-tt),rt=Math.sqrt(tt),(_t=it<Q&&Q<rt?j/(F-j)*(G/(F-G))+j/(G-j)*(F/(G-F))*((L-T)/(M-T)):.5*ut)<at&&(_t=at),_t>1-at&&(_t=1-at),dt++}while(dt<=ht);return q},fminbr:function(c,b,m){var g,f,v,y,E,T,M,L,Y,j,F,G,H,q,K,at,tt=.5*(3-Math.sqrt(5)),Q=R.Z.eps,it=R.Z.eps,rt=this.maxIterationsMinimize,dt=0;if(!X.Z.isArray(b)||b.length<2)throw new Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");for(v=y=(g=b[0])+tt*((f=b[1])-g),E=y,T=M=c.call(m,y),L=M;dt<rt;){if(Y=f-g,j=.5*(g+f),F=it*Math.abs(v)+Q/3,Math.abs(v-j)+.5*Y<=2*F)return v;G=tt*(v<j?f-v:g-v),Math.abs(v-E)>=F&&(H=(v-y)*(q=(v-y)*(T-L))-(v-E)*(K=(v-E)*(T-M)),(q=2*(q-K))>0?H=-H:q=-q,Math.abs(H)<Math.abs(G*q)&&H>q*(g-v+2*F)&&H<q*(f-v-2*F)&&(G=H/q)),Math.abs(G)<F&&(G=G>0?F:-F),K=v+G,(at=c.call(m,K))<=T?(K<v?f=v:g=v,y=E,E=v,v=K,M=L,L=T,T=at):(K<v?g=K:f=K,at<=L||E===v?(y=E,E=K,M=L,L=at):(at<=M||y===v||y===E)&&(y=K,M=at)),dt+=1}return v},RamerDouglasPeucker:function(c,b){var m,g,f,v=[],y=[],E=function(T,M,L,Y,j){var F=function(H,q,K){var at,tt,Q,it,rt,dt,ht,ut,_t,Dt,Bt,Xt=1e4,$t=0,se=q;if(K-q<2)return[-1,0];if(Q=H[q].scrCoords,it=H[K].scrCoords,isNaN(Q[1])||isNaN(Q[2]))return[NaN,q];if(isNaN(it[1])||isNaN(it[2]))return[NaN,K];for(tt=q+1;tt<K;tt++){if(rt=H[tt].scrCoords,isNaN(rt[1])||isNaN(rt[2]))return[NaN,tt];dt=(dt=(dt=rt[1]-Q[1])==1/0?Xt:dt)===-1/0?-Xt:dt,ht=(ht=(ht=rt[2]-Q[2])==1/0?Xt:ht)===-1/0?-Xt:ht,(Dt=(ut=(ut=(ut=it[1]-Q[1])==1/0?Xt:ut)===-1/0?-Xt:ut)*ut+(_t=(_t=(_t=it[2]-Q[2])==1/0?Xt:_t)===-1/0?-Xt:_t)*_t)>=R.Z.eps?((Bt=(dt*ut+ht*_t)/Dt)<0?Bt=0:Bt>1&&(Bt=1),at=(dt-=Bt*ut)*dt+(ht-=Bt*_t)*ht):(Bt=0,at=dt*dt+ht*ht),at>$t&&($t=at,se=tt)}return[Math.sqrt($t),se]}(T,M,L),G=F[1];if(isNaN(F[0])){E(T,M,G-1,Y,j),j.push(T[G]);do++G;while(G<=L&&isNaN(T[G].scrCoords[1]+T[G].scrCoords[2]));G<=L&&j.push(T[G]),E(T,G+1,L,Y,j)}else F[0]>Y?(E(T,M,G,Y,j),E(T,G,L,Y,j)):j.push(T[L])};for(f=c.length,m=0;;){for(;m<f&&isNaN(c[m].scrCoords[1]+c[m].scrCoords[2]);)m+=1;for(g=m+1;g<f&&!isNaN(c[g].scrCoords[1]+c[g].scrCoords[2]);)g+=1;if(g--,m<f&&g>m&&((y=[])[0]=c[m],E(c,m,g,b,y),v=v.concat(y)),m>=f)break;g<f-1&&v.push(c[g+1]),m=g+1}return v},RamerDouglasPeuker:function(c,b){return a.Z.deprecated("Numerics.RamerDouglasPeuker()","Numerics.RamerDouglasPeucker()"),this.RamerDouglasPeucker(c,b)},Visvalingam:function(c,b){var m,g,f,v,y,E,T,M,L,Y=[],j=[],F=[];if((g=c.length)<=2)return c;for(Y[0]={used:!0,lft:null,node:null},y=0,m=1;m<g-1;m++)f=Math.abs(a.Z.Math.Numerics.det([c[m-1].usrCoords,c[m].usrCoords,c[m+1].usrCoords])),isNaN(f)||(L={v:f,idx:m},j.push(L),Y[m]={used:!0,lft:y,node:L},Y[y].rt=m,y=m);for(Y[g-1]={used:!0,rt:null,lft:y,node:null},Y[y].rt=g-1,v=-1/0;j.length>b;)j.sort(function(G,H){return H.v-G.v}),Y[m=j.pop().idx].used=!1,v=Y[m].node.v,y=Y[m].lft,E=Y[m].rt,Y[y].rt=E,Y[E].lft=y,(T=Y[y].lft)!==null&&(f=Math.abs(a.Z.Math.Numerics.det([c[T].usrCoords,c[y].usrCoords,c[E].usrCoords])),Y[y].node.v=f>=v?f:v),(M=Y[E].rt)!==null&&(f=Math.abs(a.Z.Math.Numerics.det([c[y].usrCoords,c[E].usrCoords,c[M].usrCoords])),Y[E].node.v=f>=v?f:v);F=[c[m=0]];do m=Y[m].rt,F.push(c[m]);while(Y[m].rt!==null);return F}};const O=R.Z.Numerics},309:(u,N,x)=>{x.d(N,{Z:()=>R});var a=x(765),X=x(275),B=x(109);X.Z.Statistics={sum:function(A){var O,c=A.length,b=0;for(O=0;O<c;O++)b+=A[O];return b},prod:function(A){var O,c=A.length,b=1;for(O=0;O<c;O++)b*=A[O];return b},mean:function(A){return A.length>0?this.sum(A)/A.length:0},median:function(A){var O,c;return A.length>0?(ArrayBuffer.isView(A)?(O=new Float64Array(A)).sort():(O=A.slice(0)).sort(function(b,m){return b-m}),1&(c=O.length)?O[parseInt(.5*c,10)]:.5*(O[.5*c-1]+O[.5*c])):0},percentile:function(A,O){var c,b,m,g,f,v=[];if(A.length>0){for(ArrayBuffer.isView(A)?(c=new Float64Array(A)).sort():(c=A.slice(0)).sort(function(y,E){return y-E}),b=c.length,g=B.Z.isArray(O)?O:[O],m=0;m<g.length;m++)f=b*g[m]*.01,parseInt(f,10)===f?v.push(.5*(c[f-1]+c[f])):v.push(c[parseInt(f,10)]);return B.Z.isArray(O)?v:v[0]}return 0},variance:function(A){var O,c,b,m=A.length;if(m>1){for(O=this.mean(A),c=0,b=0;b<m;b++)c+=(A[b]-O)*(A[b]-O);return c/(A.length-1)}return 0},sd:function(A){return Math.sqrt(this.variance(A))},weightedMean:function(A,O){if(A.length!==O.length)throw new Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return A.length>0?this.mean(this.multiply(A,O)):0},max:function(A){return Math.max.apply(this,A)},min:function(A){return Math.min.apply(this,A)},range:function(A){return[this.min(A),this.max(A)]},abs:function(A){var O,c,b;if(B.Z.isArray(A))if(A.map)b=A.map(Math.abs);else for(c=A.length,b=[],O=0;O<c;O++)b[O]=Math.abs(A[O]);else b=ArrayBuffer.isView(A)?A.map(Math.abs):Math.abs(A);return b},add:function(A,O){var c,b,m=[];if(A=B.Z.evalSlider(A),O=B.Z.evalSlider(O),B.Z.isArray(A)&&B.Z.isNumber(O))for(b=A.length,c=0;c<b;c++)m[c]=A[c]+O;else if(B.Z.isNumber(A)&&B.Z.isArray(O))for(b=O.length,c=0;c<b;c++)m[c]=A+O[c];else if(B.Z.isArray(A)&&B.Z.isArray(O))for(b=Math.min(A.length,O.length),c=0;c<b;c++)m[c]=A[c]+O[c];else m=A+O;return m},div:function(A,O){var c,b,m=[];if(A=B.Z.evalSlider(A),O=B.Z.evalSlider(O),B.Z.isArray(A)&&B.Z.isNumber(O))for(b=A.length,c=0;c<b;c++)m[c]=A[c]/O;else if(B.Z.isNumber(A)&&B.Z.isArray(O))for(b=O.length,c=0;c<b;c++)m[c]=A/O[c];else if(B.Z.isArray(A)&&B.Z.isArray(O))for(b=Math.min(A.length,O.length),c=0;c<b;c++)m[c]=A[c]/O[c];else m=A/O;return m},divide:function(){a.Z.deprecated("Statistics.divide()","Statistics.div()"),X.Z.Statistics.div.apply(X.Z.Statistics,arguments)},mod:function(A,O,c){var b,m,g=[],f=function(v,y){return v%y};if((c=B.Z.def(c,!1))&&(f=X.Z.mod),A=B.Z.evalSlider(A),O=B.Z.evalSlider(O),B.Z.isArray(A)&&B.Z.isNumber(O))for(m=A.length,b=0;b<m;b++)g[b]=f(A[b],O);else if(B.Z.isNumber(A)&&B.Z.isArray(O))for(m=O.length,b=0;b<m;b++)g[b]=f(A,O[b]);else if(B.Z.isArray(A)&&B.Z.isArray(O))for(m=Math.min(A.length,O.length),b=0;b<m;b++)g[b]=f(A[b],O[b]);else g=f(A,O);return g},multiply:function(A,O){var c,b,m=[];if(A=B.Z.evalSlider(A),O=B.Z.evalSlider(O),B.Z.isArray(A)&&B.Z.isNumber(O))for(b=A.length,c=0;c<b;c++)m[c]=A[c]*O;else if(B.Z.isNumber(A)&&B.Z.isArray(O))for(b=O.length,c=0;c<b;c++)m[c]=A*O[c];else if(B.Z.isArray(A)&&B.Z.isArray(O))for(b=Math.min(A.length,O.length),c=0;c<b;c++)m[c]=A[c]*O[c];else m=A*O;return m},subtract:function(A,O){var c,b,m=[];if(A=B.Z.evalSlider(A),O=B.Z.evalSlider(O),B.Z.isArray(A)&&B.Z.isNumber(O))for(b=A.length,c=0;c<b;c++)m[c]=A[c]-O;else if(B.Z.isNumber(A)&&B.Z.isArray(O))for(b=O.length,c=0;c<b;c++)m[c]=A-O[c];else if(B.Z.isArray(A)&&B.Z.isArray(O))for(b=Math.min(A.length,O.length),c=0;c<b;c++)m[c]=A[c]-O[c];else m=A-O;return m},TheilSenRegression:function(A){var O,c,b=[],m=[],g=[];for(O=0;O<A.length;O++){for(m.length=0,c=0;c<A.length;c++)Math.abs(A[c].usrCoords[1]-A[O].usrCoords[1])>X.Z.eps&&(m[c]=(A[c].usrCoords[2]-A[O].usrCoords[2])/(A[c].usrCoords[1]-A[O].usrCoords[1]));b[O]=this.median(m),g.push(A[O].usrCoords[2]-b[O]*A[O].usrCoords[1])}return[this.median(g),this.median(b),-1]},generateGaussian:function(A,O){var c,b,m;if(this.hasSpare)return this.hasSpare=!1,this.spare*O+A;do m=(c=2*Math.random()-1)*c+(b=2*Math.random()-1)*b;while(m>=1||m===0);return m=Math.sqrt(-2*Math.log(m)/m),this.spare=b*m,this.hasSpare=!0,A+O*c*m}};const R=X.Z.Statistics},766:(u,N,x)=>{x.d(N,{Z:()=>O});var a=x(765),X=x(351),B=x(275),R=x(327),A=x(109);a.Z.Options={jc:{enabled:!0,compile:!0},board:{boundingBox:[-5,5,5,-5],maxBoundingBox:[-1/0,1/0,1/0,-1/0],zoomFactor:1,zoomX:1,zoomY:1,title:"",description:"",showCopyright:!0,axis:!1,defaultAxes:{x:{name:"x",fixed:!0,ticks:{label:{visible:"inherit",anchorX:"middle",anchorY:"top",fontSize:12,offset:[0,-3]},tickEndings:[0,1],majorTickEndings:[1,1],drawZero:!1,needsRegularUpdate:!1,visible:"inherit"}},y:{name:"y",fixed:!0,ticks:{label:{visible:"inherit",anchorX:"right",anchorY:"middle",fontSize:12,offset:[-6,0]},tickEndings:[1,0],majorTickEndings:[1,1],drawZero:!1,needsRegularUpdate:!1,visible:"inherit"}}},showNavigation:!0,showZoom:!0,showReload:!1,showScreenshot:!1,screenshot:{scale:1,type:"png",symbol:"⌘",css:"background-color:#eeeeee; opacity:1.0; border:2px solid black; border-radius:10px; text-align:center",cssButton:"padding: 4px 10px; border: solid #356AA0 1px; border-radius: 5px; position: absolute; right: 2ex; top: 2ex; background-color: rgba(255, 255, 255, 0.3);"},showFullscreen:!1,fullscreen:{symbol:'<svg height="1em" width="1em" version="1.1" viewBox="10 10 18 18"><path fill="#666" d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path><path fill="#666" d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path><path fill="#666" d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path><path fill="#666" d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',scale:.85,id:null},showClearTraces:!1,keepAspectRatio:!1,ignoreLabels:!0,maxNameLength:1,document:!1,takeFirst:!1,takeSizeFromFile:!1,renderer:"auto",animationDelay:35,maxFrameRate:40,registerEvents:!0,registerResizeEvent:!0,registerFullscreenEvent:!0,minimizeReflow:"none",offsetX:0,offsetY:0,zoom:{enabled:!0,factorX:1.25,factorY:1.25,wheel:!0,needShift:!0,min:1e-4,max:1e4,pinchHorizontal:!0,pinchVertical:!0,pinchSensitivity:7},pan:{enabled:!0,needShift:!0,needTwoFingers:!1},browserPan:!1,drag:{enabled:!0},keyboard:{enabled:!0,dx:10,dy:10,panShift:!0,panCtrl:!1},resize:{enabled:!0,throttle:10},moveTarget:null,selection:{enabled:!1,name:"selectionPolygon",needShift:!1,needCtrl:!0,withLines:!1,vertices:{visible:!1},fillColor:"#ffff00",visible:!1},showInfobox:!0,logging:{enabled:!1}},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{strokeColor:R.Z.palette.blue,highlightStrokeColor:"#c3d9ff",fillColor:R.Z.palette.red,highlightFillColor:"none",strokeOpacity:1,highlightStrokeOpacity:1,fillOpacity:1,highlightFillOpacity:1,gradient:null,gradientSecondColor:"#ffffff",gradientSecondOpacity:1,gradientStartOffset:0,gradientEndOffset:1,gradientAngle:0,gradientCX:.5,gradientCY:.5,gradientR:.5,gradientFX:.5,gradientFY:.5,gradientFR:0,transitionDuration:100,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width"],strokeWidth:2,highlightStrokeWidth:2,fixed:!1,frozen:!1,withLabel:!1,visible:!0,priv:!1,layer:0,dash:0,shadow:{enabled:!1,color:[0,0,0],opacity:1,blur:3,blend:.1,offset:[5,5]},trace:!1,traceAttributes:{},highlight:!0,needsRegularUpdate:!0,snapToGrid:!1,scalable:!0,rotatable:!0,dragToTopOfLayer:!1,precision:"inherit",draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},isLabel:!1,tabindex:0},ticks:{generateLabelText:null,generateLabelValue:null,drawLabels:!1,label:{},beautifulScientificTickLabels:!1,useUnicodeMinus:!0,anchor:"left",drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],majorTickEndings:[1,1],ignoreInfiniteTickEndings:!0,minorTicks:4,ticksPerLabel:!1,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,digits:3,ticksDistance:1,face:"|",strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"none",highlightFillColor:"none",visible:"inherit",includeBoundaries:!1,type:"linear"},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",face:"|",strokeWidth:2,strokeColor:R.Z.palette.blue,ticksDistance:.2},precision:{touch:30,touchMax:100,mouse:4,pen:4,epsilon:1e-4,hasPoint:4},layer:{numlayers:20,unused9:19,unused8:18,unused7:17,unused6:16,unused5:15,unused4:14,unused3:13,unused2:12,unused1:11,unused0:10,text:9,point:9,glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,ticks:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:"auto",type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:R.Z.palette.orange,highlightFillColor:R.Z.palette.orange,strokeColor:R.Z.palette.orange,fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"#000000",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",offset:[0,0],strokeColor:R.Z.palette.blue},arc:{visible:!1,fillColor:"none"}},arc:{selection:"auto",hasInnerPoints:!1,label:{anchorX:"auto",anchorY:"auto"},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:R.Z.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!1,center:{},radiusPoint:{},anglePoint:{}},arrow:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,lastArrow:{type:1,highlightSize:8,size:8},strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",withTicks:!0,straightFirst:!0,straightLast:!0,margin:-4,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1,needsRegularUpdate:!1,display:"internal",visible:"inherit",layer:9},visible:"inherit",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:5,minorHeight:10,majorHeight:-1,tickEndings:[0,1],majorTickEndings:[1,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1,visible:!1},point2:{needsRegularUpdate:!1,visible:!1},tabindex:-1,label:{position:"lft",offset:[10,10]}},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"#000000"},line2:{strokeColor:"#000000"}},boxplot:{dir:"vertical",smallWidth:.5,strokeWidth:2,strokeColor:R.Z.palette.blue,fillColor:R.Z.palette.blue,fillOpacity:.2,highlightStrokeWidth:2,highlightStrokeColor:R.Z.palette.blue,highlightFillColor:R.Z.palette.blue,highlightFillOpacity:.1},button:{disabled:!1,display:"html"},cardinalspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},chart:{chartStyle:"line",colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,fillOpacity:.6,withLines:!1,label:{}},checkbox:{disabled:!1,checked:!1,display:"html"},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:R.Z.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,fillColor:R.Z.palette.red,strokeColor:R.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:R.Z.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:R.Z.palette.red,strokeColor:R.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",strokeColor:R.Z.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:R.Z.palette.yellow,highlightFillColor:R.Z.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,strokeColor:R.Z.palette.blue,highlightStrokeColor:"#c3d9ff",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:R.Z.palette.blue,highlightStrokeColor:"#c3d9ff",foci:{fixed:!1,visible:!1,withLabel:!1,name:""},center:{visible:!1,withLabel:!1,name:""},point:{withLabel:!1,name:""},line:{visible:!1}},curve:{strokeWidth:1,strokeColor:R.Z.palette.blue,fillColor:"none",fixed:!0,useQDT:!1,handDrawing:!1,curveType:null,RDPsmoothing:!1,numberPointsHigh:1600,numberPointsLow:400,doAdvancedPlot:!0,recursionDepthHigh:17,recursionDepthLow:15,doAdvancedPlotOld:!1,plotVersion:2,label:{position:"lft"},firstArrow:!1,lastArrow:!1},foreignobject:{attractors:[],fixed:!0,visible:!0},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,gridX:1,gridY:1,strokeColor:"#c0c0c0",strokeOpacity:.5,strokeWidth:1,dash:0,snapToGrid:!1,snapSizeX:10,snapSizeY:10},group:{needsRegularUpdate:!0},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"#000000",display:"html",anchorX:"left",anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,highlightFillOpacity:.6,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1,attractors:[]},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:R.Z.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:R.Z.palette.red,strokeColor:R.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},inequality:{fillColor:R.Z.palette.red,fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{distanceX:-20,distanceY:25,fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",rotate:0,visible:!0,parse:!1,transitionDuration:0,needsRegularUpdate:!1,tabindex:null},integral:{axis:"x",withLabel:!0,fixed:!0,strokeWidth:0,strokeOpacity:0,fillColor:R.Z.palette.red,fillOpacity:.3,highlightFillColor:R.Z.palette.red,highlightFillOpacity:.2,curveLeft:{visible:!0,withLabel:!1,color:R.Z.palette.red,fillOpacity:.8,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,color:R.Z.palette.red,fillOpacity:.8,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20}},input:{disabled:!1,maxlength:524288,display:"html"},intersection:{alwaysIntersect:!0},label:{visible:"inherit",strokeColor:"#000000",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"#000000",fixed:!0,position:"urt",offset:[10,10],autoPosition:!1},legend:{style:"vertical",labels:["1","2","3","4","5","6","7","8"],colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],rowHeight:20,strokeWidth:5},line:{firstArrow:!1,lastArrow:!1,margin:0,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:R.Z.palette.blue,highlightStrokeColor:"#c3d9ff",withTicks:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,minTicksDistance:50,minorHeight:4,majorHeight:-1,minorTicks:4,defaultDistance:1,strokeOpacity:.3,visible:"inherit"},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1,touchFirstPoint:!1,touchLastPoint:!1,lineCap:"butt"},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},metapostspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.5,fillOpacity:.5,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},mirrorelement:{fixed:!0,point:{},center:{},type:"Euclidean"},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,sizeUnit:"screen",strokeWidth:2,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width","width","height","rx","ry"],fillColor:R.Z.palette.red,strokeColor:R.Z.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",zoom:!1,showInfobox:"inherit",infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,attractToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1,ignoredSnapToPoints:[]},polygon:{hasInnerPoints:!1,fillColor:R.Z.palette.yellow,highlightFillColor:R.Z.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"},visible:"inherit"},vertices:{layer:9,withLabel:!1,name:"",strokeColor:R.Z.palette.red,fillColor:R.Z.palette.red,fixed:!1,visible:"inherit"},label:{offset:[0,0]}},polygonalchain:{fillColor:"none",highlightFillColor:"none"},prescribedangle:{anglePoint:{size:2,visible:!1,withLabel:!1}},reflection:{fixed:!0,center:{},type:"Euclidean"},regularpolygon:{hasInnerPoints:!1,fillColor:R.Z.palette.yellow,highlightFillColor:R.Z.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{layer:9,withLabel:!0,strokeColor:R.Z.palette.red,fillColor:R.Z.palette.red,fixed:!1},label:{offset:[0,0]}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:R.Z.palette.yellow},sector:{fillColor:R.Z.palette.yellow,highlightFillColor:R.Z.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,highlightStrokeWidth:0,selection:"auto",arc:{visible:!1,fillColor:"none"},radiusPoint:{visible:!1,withLabel:!1},center:{visible:!1,withLabel:!1},anglePoint:{visible:!1,withLabel:!1},label:{offset:[0,0],anchorX:"auto",anchorY:"auto"}},segment:{label:{position:"top"}},semicircle:{center:{visible:!1,withLabel:!1,fixed:!1,fillColor:R.Z.palette.red,strokeColor:R.Z.palette.red,highlightFillColor:"#eeeeee",highlightStrokeColor:R.Z.palette.red,name:""}},slider:{snapWidth:-1,precision:2,digits:2,firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,suffixLabel:null,unitLabel:null,postLabel:null,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},baseline:{needsRegularUpdate:!1,visible:"inherit",fixed:!0,scalable:!1,tabindex:null,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,digits:2,includeBoundaries:1,drawZero:!0,label:{offset:[-4,-14],display:"internal"},minTicksDistance:30,insertTicks:!0,minorHeight:4,majorHeight:5,minorTicks:0,defaultDistance:1,strokeOpacity:1,strokeWidth:1,tickEndings:[0,1],majortickEndings:[0,1],strokeColor:"#000000",visible:"inherit"},highline:{strokeWidth:3,visible:"inherit",fixed:!0,tabindex:null,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},label:{visible:"inherit",strokeColor:"#000000"},moveOnUp:!0},comb:{frequency:.2,width:.4,angle:Math.PI/3,reverse:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},curve:{strokeWidth:1,strokeColor:"#000000",fillColor:"none"}},slopetriangle:{fillColor:R.Z.palette.red,fillOpacity:.4,highlightFillColor:R.Z.palette.red,highlightFillOpacity:.3,borders:{lastArrow:{type:1,size:6}},glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},tangent:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0}},stepfunction:{},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,precision:2,digits:2,point1:{visible:"inherit",strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{visible:"inherit",strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],majorTickEndings:[0,1],defaultDistance:.1,strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",visible:"inherit"},label:{position:"top"}},text:{fontSize:12,fontUnit:"px",digits:2,parse:!0,useCaja:!1,isLabel:!1,strokeColor:"#000000",highlightStrokeColor:"#000000",highlightStrokeOpacity:.666666,cssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",highlightCssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",cssStyle:"",highlightCssStyle:"",transitionProperties:["color","opacity"],useASCIIMathML:!1,useMathJax:!1,useKatex:!1,katexMacros:{},display:"html",anchor:null,anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1,attractors:[]},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,withLabel:!1,strokeColor:R.Z.palette.red,lastArrow:!0}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}},a.Z.Validator=function(){var c,b=function(T){return A.Z.isString(T)},m=function(T){return Math.abs(T-Math.round(T))<B.Z.eps},g=function(T){return m(T)&&T>0},f=function(T){return T>0},v=function(T){return T>=0},y={},E={attractorDistance:v,color:b,defaultDistance:A.Z.isNumber,display:function(T){return T==="html"||T==="internal"},doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:function(T){return A.Z.exists(a.Z.normalizePointFace(T))},factor:A.Z.isNumber,fillColor:b,fillOpacity:A.Z.isNumber,firstArrow:!1,fontSize:m,dash:m,gridX:A.Z.isNumber,gridY:A.Z.isNumber,hasGrid:!1,highlightFillColor:b,highlightFillOpacity:A.Z.isNumber,highlightStrokeColor:b,highlightStrokeOpacity:A.Z.isNumber,insertTicks:!1,lastArrow:!1,layer:function(T){return m(T)&&T>=0},majorHeight:m,minorHeight:m,minorTicks:v,minTicksDistance:g,numberPointsHigh:g,numberPointsLow:g,opacity:A.Z.isNumber,radius:A.Z.isNumber,RDPsmoothing:!1,renderer:function(T){return T==="vml"||T==="svg"||T==="canvas"||T==="no"},right:function(T){return/^[0-9]+px$/.test(T)},showCopyright:!1,showInfobox:!1,showNavigation:!1,size:v,snapSizeX:f,snapSizeY:f,snapWidth:A.Z.isNumber,snapToGrid:!1,snatchDistance:v,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:b,strokeOpacity:A.Z.isNumber,strokeWidth:v,takeFirst:!1,takeSizeFromFile:!1,to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(c in E)E.hasOwnProperty(c)&&(y[c.toLowerCase()]=E[c]);return y}(),a.Z.normalizePointFace=function(c){return{cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",divide:"|","|":"|",minus:"-","-":"-",diamond:"<>","<>":"<>",triangleup:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"}[c]},a.Z.useStandardOptions=function(c){var b,m,g,f,v=a.Z.Options,y=c.hasGrid;for(b in c.options.grid.hasGrid=v.grid.hasGrid,c.options.grid.gridX=v.grid.gridX,c.options.grid.gridY=v.grid.gridY,c.options.grid.gridColor=v.grid.gridColor,c.options.grid.gridOpacity=v.grid.gridOpacity,c.options.grid.gridDash=v.grid.gridDash,c.options.grid.snapToGrid=v.grid.snapToGrid,c.options.grid.snapSizeX=v.grid.SnapSizeX,c.options.grid.snapSizeY=v.grid.SnapSizeY,c.takeSizeFromFile=v.takeSizeFromFile,f=function(E,T){E.visProp.fillcolor=T.fillColor,E.visProp.highlightfillcolor=T.highlightFillColor,E.visProp.strokecolor=T.strokeColor,E.visProp.highlightstrokecolor=T.highlightStrokeColor},c.objects)if(c.objects.hasOwnProperty(b))if((g=c.objects[b]).elementClass===X.Z.OBJECT_CLASS_POINT)f(g,v.point);else if(g.elementClass===X.Z.OBJECT_CLASS_LINE)for(f(g,v.line),m=0;m<g.ticks.length;m++)g.ticks[m].majorTicks=v.line.ticks.majorTicks,g.ticks[m].minTicksDistance=v.line.ticks.minTicksDistance,g.ticks[m].visProp.minorheight=v.line.ticks.minorHeight,g.ticks[m].visProp.majorheight=v.line.ticks.majorHeight;else g.elementClass===X.Z.OBJECT_CLASS_CIRCLE?f(g,v.circle):g.type===X.Z.OBJECT_TYPE_ANGLE?f(g,v.angle):g.type===X.Z.OBJECT_TYPE_ARC?f(g,v.arc):g.type===X.Z.OBJECT_TYPE_POLYGON?f(g,v.polygon):g.type===X.Z.OBJECT_TYPE_CONIC?f(g,v.conic):g.type===X.Z.OBJECT_TYPE_CURVE?f(g,v.curve):g.type===X.Z.OBJECT_TYPE_SECTOR&&(g.arc.visProp.fillcolor=v.sector.fillColor,g.arc.visProp.highlightfillcolor=v.sector.highlightFillColor,g.arc.visProp.fillopacity=v.sector.fillOpacity,g.arc.visProp.highlightfillopacity=v.sector.highlightFillOpacity);c.fullUpdate(),y&&!c.hasGrid?c.removeGrids(c):!y&&c.hasGrid&&c.create("grid",[])},a.Z.useBlackWhiteOptions=function(c){var b=a.Z.Options;b.point.fillColor=R.Z.rgb2bw(b.point.fillColor),b.point.highlightFillColor=R.Z.rgb2bw(b.point.highlightFillColor),b.point.strokeColor=R.Z.rgb2bw(b.point.strokeColor),b.point.highlightStrokeColor=R.Z.rgb2bw(b.point.highlightStrokeColor),b.line.fillColor=R.Z.rgb2bw(b.line.fillColor),b.line.highlightFillColor=R.Z.rgb2bw(b.line.highlightFillColor),b.line.strokeColor=R.Z.rgb2bw(b.line.strokeColor),b.line.highlightStrokeColor=R.Z.rgb2bw(b.line.highlightStrokeColor),b.circle.fillColor=R.Z.rgb2bw(b.circle.fillColor),b.circle.highlightFillColor=R.Z.rgb2bw(b.circle.highlightFillColor),b.circle.strokeColor=R.Z.rgb2bw(b.circle.strokeColor),b.circle.highlightStrokeColor=R.Z.rgb2bw(b.circle.highlightStrokeColor),b.arc.fillColor=R.Z.rgb2bw(b.arc.fillColor),b.arc.highlightFillColor=R.Z.rgb2bw(b.arc.highlightFillColor),b.arc.strokeColor=R.Z.rgb2bw(b.arc.strokeColor),b.arc.highlightStrokeColor=R.Z.rgb2bw(b.arc.highlightStrokeColor),b.polygon.fillColor=R.Z.rgb2bw(b.polygon.fillColor),b.polygon.highlightFillColor=R.Z.rgb2bw(b.polygon.highlightFillColor),b.sector.fillColor=R.Z.rgb2bw(b.sector.fillColor),b.sector.highlightFillColor=R.Z.rgb2bw(b.sector.highlightFillColor),b.curve.strokeColor=R.Z.rgb2bw(b.curve.strokeColor),b.grid.gridColor=R.Z.rgb2bw(b.grid.gridColor),a.Z.useStandardOptions(c)},a.Z.Options.normalizePointFace=a.Z.normalizePointFace;const O=a.Z.Options},632:(u,N,x)=>{x.d(N,{Z:()=>R});var a=x(765),X=x(351),B=x(109);a.Z.GeonextParser={replacePow:function(A){var O,c,b,m,g,f,v,y,E,T,M,L;for(T=(A=A.replace(/(\s*)\^(\s*)/g,"^")).indexOf("^"),m=-1;T>=0&&T<A.length-1;){if(m===T)throw new Error("JSXGraph: Error while parsing expression '"+A+"'");if(m=T,E=A.slice(0,T),M=A.slice(T+1),E.charAt(E.length-1)===")"){for(O=1,c=E.length-2;c>=0&&O>0;)(b=E.charAt(c))===")"?O++:b==="("&&(O-=1),c-=1;if(O!==0)throw new Error("JSXGraph: Missing '(' in expression");for(g="",v=E.substring(0,c+1),y=c;y>=0&&v.substr(y,1).match(/([\w.]+)/);)g=RegExp.$1+g,y-=1;g=(g+=E.substring(c+1,E.length)).replace(/([()+*%^\-/\][])/g,"\\$1")}else g="[\\w\\.]+";if(M.match(/^([\w.]*\()/)){for(O=1,c=RegExp.$1.length;c<M.length&&O>0;)(b=M.charAt(c))===")"?O-=1:b==="("&&(O+=1),c+=1;if(O!==0)throw new Error("JSXGraph: Missing ')' in expression");f=(f=M.substring(0,c)).replace(/([()+*%^\-/[\]])/g,"\\$1")}else f="[\\w\\.]+";L=new RegExp("("+g+")\\^("+f+")"),T=(A=A.replace(L,"pow($1,$2)")).indexOf("^")}return A},replaceIf:function(A){var O,c,b,m,g,f,v,y,E,T="",M=null,L=null,Y=null;if((b=A.indexOf("If("))<0)return A;for(A=A.replace(/""/g,"0");b>=0;){for(O=A.slice(0,b),c=A.slice(b+3),g=1,m=0,f=-1,v=-1;m<c.length&&g>0;)(y=c.charAt(m))===")"?g-=1:y==="("?g+=1:y===","&&g===1&&(f<0?f=m:v=m),m+=1;if(E=c.slice(0,m-1),c=c.slice(m),f<0||v<0)return"";M=E.slice(0,f),L=E.slice(f+1,v),Y=E.slice(v+1),T+=O+"(("+(M=this.replaceIf(M))+")?("+(L=this.replaceIf(L))+"):("+(Y=this.replaceIf(Y))+"))",M=null,L=null,b=(A=c).indexOf("If(")}return T+=c},replaceNameById:function(A,O,c){var b,m,g,f,v=0,y=["X","Y","L","V"],E=function(T){return c?"$('"+T+"')":T};for(f=0;f<y.length;f++)for(v=A.indexOf(y[f]+"(");v>=0;)v>=0&&(b=A.indexOf(")",v+2))>=0&&(m=(m=A.slice(v+2,b)).replace(/\\(['"])?/g,"$1"),(g=O.elementsByName[m])&&(A=A.slice(0,v+2)+(c?"$('":"")+E(g.id)+A.slice(b))),b=A.indexOf(")",v+2),v=A.indexOf(y[f]+"(",b);for(v=A.indexOf("Dist(");v>=0;)v>=0&&(b=A.indexOf(",",v+5))>=0&&(m=(m=A.slice(v+5,b)).replace(/\\(['"])?/g,"$1"),(g=O.elementsByName[m])&&(A=A.slice(0,v+5)+E(g.id)+A.slice(b))),b=A.indexOf(",",v+5),v=A.indexOf(",",b),(b=A.indexOf(")",v+1))>=0&&(m=(m=A.slice(v+1,b)).replace(/\\(['"])?/g,"$1"),(g=O.elementsByName[m])&&(A=A.slice(0,v+1)+E(g.id)+A.slice(b))),b=A.indexOf(")",v+1),v=A.indexOf("Dist(",b);for(y=["Deg","Rad"],f=0;f<y.length;f++)for(v=A.indexOf(y[f]+"(");v>=0;)v>=0&&(b=A.indexOf(",",v+4))>=0&&(m=(m=A.slice(v+4,b)).replace(/\\(['"])?/g,"$1"),(g=O.elementsByName[m])&&(A=A.slice(0,v+4)+E(g.id)+A.slice(b))),b=A.indexOf(",",v+4),v=A.indexOf(",",b),(b=A.indexOf(",",v+1))>=0&&(m=(m=A.slice(v+1,b)).replace(/\\(['"])?/g,"$1"),(g=O.elementsByName[m])&&(A=A.slice(0,v+1)+E(g.id)+A.slice(b))),b=A.indexOf(",",v+1),v=A.indexOf(",",b),(b=A.indexOf(")",v+1))>=0&&(m=(m=A.slice(v+1,b)).replace(/\\(['"])?/g,"$1"),(g=O.elementsByName[m])&&(A=A.slice(0,v+1)+E(g.id)+A.slice(b))),b=A.indexOf(")",v+1),v=A.indexOf(y[f]+"(",b);return A},replaceIdByObj:function(A){var O=/(X|Y|L)\(([\w_]+)\)/g;return A=A.replace(O,"$('$2').$1()"),O=/(V)\(([\w_]+)\)/g,A=A.replace(O,"$('$2').Value()"),O=/(Dist)\(([\w_]+),([\w_]+)\)/g,A=A.replace(O,"dist($('$2'), $('$3'))"),O=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g,A=A.replace(O,"deg($('$2'),$('$3'),$('$4'))"),O=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,A=A.replace(O,"rad($('$1'),$('$2'),$('$3'))"),O=/N\((.+)\)/g,A=A.replace(O,"($1)")},geonext2JS:function(A,O){var c,b,m,g=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],f=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(b=A=(A=(A=A.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),b=this.replaceNameById(b,O),b=this.replaceIf(b),b=this.replacePow(b),b=this.replaceIdByObj(b),m=0;m<g.length;m++)c=new RegExp(["(\\W|^)(",g[m],")"].join(""),"ig"),b=b.replace(c,["$1",f[m]].join(""));return b=(b=(b=(b=(b=b.replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")).replace(/Pi/g,"PI")).replace(/"/g,"'")},findDependencies:function(A,O,c){var b,m,g,f;for(m in B.Z.exists(c)||(c=A.board),b=c.elementsByName)b.hasOwnProperty(m)&&m!==A.name&&(b[m].elementClass===X.Z.OBJECT_CLASS_TEXT&&B.Z.evaluate(b[m].visProp.islabel)||(f=(f=m.replace(/\[/g,"\\[")).replace(/\]/g,"\\]"),g=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+f+")(,[\\w\\[\\]'_ ]+)*\\)","g"),O.search(g)>=0&&b[m].addChild(A)))},gxt2jc:function(A,O){var c;return c=A=(A=(A=A.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),c=(c=(c=(c=this.replaceNameById(c,O,!0)).replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")}};const R=a.Z.GeonextParser},254:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _jxg__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(765),_base_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(351),_base_text__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(573),_math_math__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(275),_math_ia__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(785),_math_geometry__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(922),_math_statistics__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(309),_utils_type__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(109),_utils_env__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(503);Object.create||(Object.create=function(u,N){if(typeof u!="object"&&typeof u!="function")throw new TypeError("Object prototype may only be an Object: "+u);if(u===null)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(N!==void 0)throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function x(){}return x.prototype=u,new x});var priv={modules:{math:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z,"math/geometry":_math_geometry__WEBPACK_IMPORTED_MODULE_5__.Z,"math/statistics":_math_statistics__WEBPACK_IMPORTED_MODULE_6__.Z,"math/numerics":_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.Numerics}},r,_ccache;_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.JessieCode=function(u,N){this.scope={id:0,hasChild:!0,args:[],locals:{},context:null,previous:null},this.scopes=[],this.scopes.push(this.scope),this.dpstack=[[]],this.pscope=0,this.propstack=[{}],this.propscope=0,this.lhs=[],this.isLHS=!1,this.warnLog="jcwarn",this.$log=[],this.builtIn=this.defineBuiltIn(),this.operands=this.getPossibleOperands(),this.board=null,this.lineToElement={},this.parCurLine=1,this.parCurColumn=0,this.line=1,this.col=1,_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.CA&&(this.CA=new _jxg__WEBPACK_IMPORTED_MODULE_0__.Z.CA(this.node,this.createNode,this)),this.code="",typeof u=="string"&&this.parse(u,N)},_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.extend(_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.JessieCode.prototype,{node:function(u,N,x){return{type:u,value:N,children:x}},createNode:function(u,N,x){var a,X=this.node(u,N,[]);for(a=2;a<arguments.length;a++)X.children.push(arguments[a]);return X.type=="node_const"&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(X.value)&&(X.isMath=!0),X.line=this.parCurLine,X.col=this.parCurColumn,X},pushScope:function(u){var N={args:u,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=N,N.id=this.scopes.push(N)-1,N},popScope:function(){var u=this.scope.previous;return this.scope=u!==null?u:this.scope,this.scope},getElementById:function(u){return this.board.objects[u]},log:function(){this.$log.push(arguments),typeof console=="object"&&console.log&&console.log.apply(console,arguments)},creator:(_ccache={},(r=function(u){var N,x;return typeof _ccache[this.board.id+u]=="function"?N=_ccache[this.board.id+u]:(x=this,(N=function(a,X){var B;return(B=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(X)?X:{}).name===void 0&&B.id===void 0&&(B.name=x.lhs[x.scope.id]!==0?x.lhs[x.scope.id]:""),x.board.create(u,a,B)}).creator=!0,_ccache[this.board.id+u]=N),N}).clearCache=function(){_ccache={}},r),letvar:function(u,N){this.builtIn[u]&&this._warn('"'+u+'" is a predefined value.'),this.scope.locals[u]=N},isLocalVariable:function(u){for(var N=this.scope;N!==null;){if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(N.locals[u]))return N;N=N.previous}return null},isParameter:function(u){for(var N=this.scope;N!==null;){if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.indexOf(N.args,u)>-1)return N;N=N.previous}return null},isCreator:function(u){return!!_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.elements[u]},isMathMethod:function(u){return u!=="E"&&!!Math[u]},isBuiltIn:function(u){return!!this.builtIn[u]},getvar:function(u,N,x){var a;if(N=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(N,!1),(a=this.isLocalVariable(u))!==null)return a.locals[u];if(u==="$board"||u==="EULER"||u==="PI")return this.builtIn[u];if(x){if(this.isBuiltIn(u))return this.builtIn[u];if(this.isMathMethod(u))return Math[u];if(this.isCreator(u))return this.creator(u)}return N||(a=this.board.select(u))===u?void 0:a},resolve:function(u){for(var N=this.scope;N!==null;){if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(N.locals[u]))return N.locals[u];N=N.previous}},getvarJS:function(u,N,x){var a,X="";return N=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(N,!1),x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(x,!1),this.isParameter(u)!==null?u:this.isLocalVariable(u)===null||x?this.isCreator(u)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+(x?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+u+"'].concat([a, props])); })":(x&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(u)?(X=this.builtIn[u].src||this.builtIn[u],_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(X)||X.match(/board\.select/)?X:(u=X.split(".").pop(),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this.board.mathLib)&&(a=new RegExp("^Math."+u)).exec(X)!==null?X.replace(a,"$jc$.board.mathLib."+u):_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this.board.mathLibJXG)&&(a=new RegExp("^JXG.Math.")).exec(X)!==null?X.replace(a,"$jc$.board.mathLibJXG."):X)):this.isMathMethod(u)?"$jc$.board.mathLib."+u:N?"":(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isId(this.board,u)?(X="$jc$.board.objects['"+u+"']",this.board.objects[u].elType==="slider"&&(X+=".Value()")):_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isName(this.board,u)?(X="$jc$.board.elementsByName['"+u+"']",this.board.elementsByName[u].elType==="slider"&&(X+=".Value()")):_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isGroup(this.board,u)&&(X="$jc$.board.groups['"+u+"']"),X)):"$jc$.resolve('"+u+"')"},makeMap:function(u){return u.isMap=!0,u},functionCodeJS:function(u){var N=u.children[0].join(", "),x="",a="";return u.value==="op_map"&&(x="{ return  ",a=" }"),"function ("+N+`) {
var $oldscope$ = $jc$.scope;
$jc$.scope = $jc$.scopes[`+this.scope.id+`];
var r = (function () `+x+this.compile(u.children[1],!0)+a+`)();
$jc$.scope = $oldscope$;
return r;
}`},defineFunction:function(node){var fun,i,that=this,list=node.children[0],scope=this.pushScope(list),_that;if(this.board.options.jc.compile){for(this.isLHS=!1,i=0;i<list.length;i++)scope.locals[list[i]]=list[i];this.replaceNames(node.children[1]),fun=function(jc){var fun,str="var f = function($jc$) { return "+jc.functionCodeJS(node)+"}; f;";try{for(fun=eval(str)(jc),scope.argtypes=[],i=0;i<list.length;i++)scope.argtypes.push(that.resolveType(list[i],node));return fun}catch(u){return jc._warn(`error compiling function

`+str+`

`+u.toString()),function(){}}}(this),this.popScope()}else fun=function(u,N,x){return function(){var a,X;for(X=N.scope,N.scope=N.scopes[x],a=0;a<u.length;a++)N.scope.locals[u[a]]=arguments[a];return a=N.execute(node.children[1]),N.scope=X,a}}(list,this,scope.id);return fun.node=node,fun.scope=scope,fun.toJS=fun.toString,fun.toString=(_that=this,function(){return _that.compile(_that.replaceIDs(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.deepCopy(node)))}),fun.deps={},this.collectDependencies(node.children[1],fun.deps),fun},mergeAttributes:function(u){var N,x={};for(N=0;N<arguments.length;N++)x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.deepCopy(x,arguments[N],!0);return x},setProp:function(u,N,x){var a,X,B={};u.elementClass!==_base_constants__WEBPACK_IMPORTED_MODULE_1__.Z.OBJECT_CLASS_POINT||N!=="X"&&N!=="Y"?u.elementClass!==_base_constants__WEBPACK_IMPORTED_MODULE_1__.Z.OBJECT_CLASS_TEXT||N!=="X"&&N!=="Y"?u.type&&u.elementClass&&u.visProp?_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u[u.methodMap[N]])&&typeof u[u.methodMap[N]]!="function"?u[u.methodMap[N]]=x:(B[N]=x,u.setAttribute(B)):u[N]=x:(typeof x=="number"?u[N]=function(){return x}:typeof x=="function"?(u.isDraggable=!1,u[N]=x):typeof x=="string"&&(u.isDraggable=!1,u[N]=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.createFunction(x,this.board,null,!0),u[N+"jc"]=x),u[N].origin=x,this.board.update()):(N=N.toLowerCase(),u.isDraggable&&typeof x=="number"?(a=N==="x"?x:u.X(),X=N==="y"?x:u.Y(),u.setPosition(_base_constants__WEBPACK_IMPORTED_MODULE_1__.Z.COORDS_BY_USER,[a,X])):!u.isDraggable||typeof x!="function"&&typeof x!="string"?u.isDraggable||(a=N==="x"?x:u.XEval.origin,X=N==="y"?x:u.YEval.origin,u.addConstraint([a,X])):(a=N==="x"?x:u.coords.usrCoords[1],X=N==="y"?x:u.coords.usrCoords[2],u.addConstraint([a,X])),this.board.update())},_genericParse:function(u,N,x,a){var X,B,R,A,O=u.replace(/\r\n/g,`
`).split(`
`),c=[];a||(this.code+=u+`
`),_base_text__WEBPACK_IMPORTED_MODULE_2__.Z&&(B=_base_text__WEBPACK_IMPORTED_MODULE_2__.Z.prototype.setText,_base_text__WEBPACK_IMPORTED_MODULE_2__.Z.prototype.setText=_base_text__WEBPACK_IMPORTED_MODULE_2__.Z.prototype.setTextJessieCode);try{for(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x)||(x=!1),X=0;X<O.length;X++)x&&(O[X]=_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.GeonextParser.geonext2JS(O[X],this.board)),c.push(O[X]);switch(u=c.join(`
`),R=parser.parse(u),this.CA&&(R=this.CA.expandDerivatives(R,null,R),R=this.CA.removeTrivialNodes(R)),N){case"parse":A=this.execute(R);break;case"manipulate":A=this.compile(R);break;case"getAst":A=R;break;default:A=!1}}catch(b){throw b}finally{_base_text__WEBPACK_IMPORTED_MODULE_2__.Z&&(_base_text__WEBPACK_IMPORTED_MODULE_2__.Z.prototype.setText=B)}return A},parse:function(u,N,x){return this._genericParse(u,"parse",N,x)},manipulate:function(u,N,x){return this._genericParse(u,"manipulate",N,x)},getAST:function(u,N,x){return this._genericParse(u,"getAst",N,x)},snippet:function(u,N,x,a){var X;return N=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(N,!0),x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(x,""),a=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(a,!1),X=(N?" function ("+x+") { return ":"")+u+(N?"; }":"")+";",this.parse(X,a,!0)},replaceIDs:function(u){var N,x;if(u.replaced&&(x=this.board.objects[u.children[1][0].value],_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x)&&x.name!==""&&(u.type="node_var",u.value=x.name,u.children.length=0,delete u.replaced)),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(u))for(N=0;N<u.length;N++)u[N]=this.replaceIDs(u[N]);if(u.children)for(N=u.children.length;N>0;N--)_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.children[N-1])&&(u.children[N-1]=this.replaceIDs(u.children[N-1]));return u},replaceNames:function(u){var N,x;if(x=u.value,u.type==="node_op"&&x==="op_lhs"&&u.children.length===1?this.isLHS=!0:u.type==="node_var"&&(this.isLHS?this.letvar(x,!0):!_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this.getvar(x,!0))&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(this.board.elementsByName[x])&&(u=this.createReplacementNode(u))),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(u))for(N=0;N<u.length;N++)u[N]=this.replaceNames(u[N]);if(u.children)for(N=u.children.length;N>0;N--)_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.children[N-1])&&(u.children[N-1]=this.replaceNames(u.children[N-1]));return u.type==="node_op"&&u.value==="op_lhs"&&u.children.length===1&&(this.isLHS=!1),u},createReplacementNode:function(u){var N=u.value,x=this.board.elementsByName[N];return(u=this.createNode("node_op","op_execfun",this.createNode("node_var","$"),[this.createNode("node_str",x.id)])).replaced=!0,u},collectDependencies:function(u,N){var x,a,X,B;if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(u))for(B=u.length,x=0;x<B;x++)this.collectDependencies(u[x],N);else if(a=u.value,u.type==="node_var"&&(X=this.getvar(a))&&X.visProp&&X.type&&X.elementClass&&X.id&&(N[X.id]=X),u.type==="node_op"&&u.value==="op_execfun"&&u.children.length>1&&u.children[0].value==="$"&&u.children[1].length>0&&(N[X=u.children[1][0].value]=this.board.objects[X]),u.children)for(x=u.children.length;x>0;x--)_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.children[x-1])&&this.collectDependencies(u.children[x-1],N)},resolveProperty:function(u,N,x){return x=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(x,!1),u&&u.methodMap&&(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.subs)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.subs[N])?u=u.subs:_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.methodMap[N])?N=u.methodMap[N]:(u=u.visProp,N=N.toLowerCase())),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isFunction(u)&&this._error("Accessing function properties is not allowed."),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u)||this._error(u+" is not an object"),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u[N])||this._error("unknown property "+N),x&&typeof u[N]=="function"?function(){return u[N].apply(u,arguments)}:u[N]},resolveType:function(u,N){var x,a;if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(N)){for(x=0;x<N.length;x++)if((a=this.resolveType(u,N[x]))!=="any")return a}if(N.type==="node_op"&&N.value==="op_execfun"&&N.children[0].type==="node_var"&&N.children[0].value===u)return"function";if(N.type==="node_op"){for(x=0;x<N.children.length;x++)if(N.children[0].type==="node_var"&&N.children[0].value===u&&(N.value==="op_add"||N.value==="op_sub"||N.value==="op_mul"||N.value==="op_div"||N.value==="op_mod"||N.value==="op_exp"||N.value==="op_neg"))return"any";for(x=0;x<N.children.length;x++)if((a=this.resolveType(u,N.children[x]))!=="any")return a}return"any"},getLHS:function(u){var N;if(u.type==="node_var")N={o:this.scope.locals,what:u.value};else if(u.type==="node_op"&&u.value==="op_property")N={o:this.execute(u.children[0]),what:u.children[1]};else{if(u.type!=="node_op"||u.value!=="op_extvalue")throw new Error("Syntax error: Invalid left-hand side of assignment.");N={o:this.execute(u.children[0]),what:this.execute(u.children[1])}}return N},getLHSCompiler:function(u,N){var x;if(u.type==="node_var")x=u.value;else if(u.type==="node_op"&&u.value==="op_property")x=[this.compile(u.children[0],N),"'"+u.children[1]+"'"];else{if(u.type!=="node_op"||u.value!=="op_extvalue")throw new Error("Syntax error: Invalid left-hand side of assignment.");x=[this.compile(u.children[0],N),u.children[1].type==="node_const"?u.children[1].value:this.compile(u.children[1],N)]}return x},execute:function(u){var N,x,a,X,B,R,A,O,c,b,m=[];if(N=0,!u)return N;switch(this.line=u.line,this.col=u.col,u.type){case"node_op":switch(u.value){case"op_none":u.children[0]&&this.execute(u.children[0]),u.children[1]&&(N=this.execute(u.children[1]));break;case"op_assign":x=this.getLHS(u.children[0]),this.lhs[this.scope.id]=x.what,x.o.type&&x.o.elementClass&&x.o.methodMap&&x.what==="label"&&this._error("Left-hand side of assignment is read-only."),N=this.execute(u.children[1]),x.o!==this.scope.locals||_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x.o)&&typeof x.what=="number"?this.setProp(x.o,x.what,N):this.letvar(x.what,N),this.lhs[this.scope.id]=0;break;case"op_if":this.execute(u.children[0])&&(N=this.execute(u.children[1]));break;case"op_conditional":case"op_if_else":N=this.execute(u.children[0])?this.execute(u.children[1]):this.execute(u.children[2]);break;case"op_while":for(;this.execute(u.children[0]);)this.execute(u.children[1]);break;case"op_do":do this.execute(u.children[0]);while(this.execute(u.children[1]));break;case"op_for":for(this.execute(u.children[0]);this.execute(u.children[1]);this.execute(u.children[2]))this.execute(u.children[3]);break;case"op_proplst":u.children[0]&&this.execute(u.children[0]),u.children[1]&&this.execute(u.children[1]);break;case"op_emptyobject":N={};break;case"op_proplst_val":this.propstack.push({}),this.propscope++,this.execute(u.children[0]),N=this.propstack[this.propscope],this.propstack.pop(),this.propscope--;break;case"op_prop":this.propstack[this.propscope][u.children[0]]=this.execute(u.children[1]);break;case"op_array":for(N=[],B=u.children[0].length,a=0;a<B;a++)N.push(this.execute(u.children[0][a]));break;case"op_extvalue":N=this.execute(u.children[0]),N=typeof(a=this.execute(u.children[1]))=="number"&&Math.abs(Math.round(a)-a)<_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.eps?N[a]:void 0;break;case"op_return":if(this.scope!==0)return this.execute(u.children[0]);this._error("Unexpected return.");break;case"op_map":u.children[1].isMath||u.children[1].type==="node_var"||this._error("execute: In a map only function calls and mathematical expressions are allowed."),(O=this.defineFunction(u)).isMap=!0,N=O;break;case"op_function":(O=this.defineFunction(u)).isMap=!1,N=O;break;case"op_execfun":if(this.dpstack.push([]),this.pscope++,R=u.children[1],_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.children[2]))if(u.children[3])for(A=u.children[2],c={},a=0;a<A.length;a++)c=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.deepCopy(c,this.execute(A[a]),!0);else c=this.execute(u.children[2]);for(u.children[0]._isFunctionName=!0,O=this.execute(u.children[0]),delete u.children[0]._isFunctionName,b=O&&O.sc?O.sc:this,!O.creator&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.children[2])&&this._error("Unexpected value. Only element creators are allowed to have a value after the function call."),a=0;a<R.length;a++)_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(O.scope)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(O.scope.argtypes)&&O.scope.argtypes[a]==="function"?(R[a]._isFunctionName=!0,m[a]=this.execute(R[a]),delete R[a]._isFunctionName):m[a]=this.execute(R[a]),this.dpstack[this.pscope].push({line:u.children[1][a].line,col:u.children[1][a].ecol});if(typeof O!="function"||O.creator)if(typeof O=="function"&&O.creator){X=this.line;try{for((N=O(m,c)).jcLineStart=X,N.jcLineEnd=u.eline,a=X;a<=u.line;a++)this.lineToElement[a]=N;N.debugParents=this.dpstack[this.pscope]}catch(g){this._error(g.toString())}}else this._error("Function '"+O+"' is undefined.");else N=O.apply(b,m);this.dpstack.pop(),this.pscope--;break;case"op_property":X=this.execute(u.children[0]),x=u.children[1],N=this.resolveProperty(X,x,!1),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(N)&&(N.sc=X);break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),this.use(u.children[0].toString());break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),x=this.getvar(u.children[0]),N=this.del(x);break;case"op_eq":N=this.execute(u.children[0])==this.execute(u.children[1]);break;case"op_neq":N=this.execute(u.children[0])!=this.execute(u.children[1]);break;case"op_approx":N=Math.abs(this.execute(u.children[0])-this.execute(u.children[1]))<_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.eps;break;case"op_gt":N=this.execute(u.children[0])>this.execute(u.children[1]);break;case"op_lt":N=this.execute(u.children[0])<this.execute(u.children[1]);break;case"op_geq":N=this.execute(u.children[0])>=this.execute(u.children[1]);break;case"op_leq":N=this.execute(u.children[0])<=this.execute(u.children[1]);break;case"op_or":N=this.execute(u.children[0])||this.execute(u.children[1]);break;case"op_and":N=this.execute(u.children[0])&&this.execute(u.children[1]);break;case"op_not":N=!this.execute(u.children[0]);break;case"op_add":N=this.add(this.execute(u.children[0]),this.execute(u.children[1]));break;case"op_sub":N=this.sub(this.execute(u.children[0]),this.execute(u.children[1]));break;case"op_div":N=this.div(this.execute(u.children[0]),this.execute(u.children[1]));break;case"op_mod":N=this.mod(this.execute(u.children[0]),this.execute(u.children[1]),!0);break;case"op_mul":N=this.mul(this.execute(u.children[0]),this.execute(u.children[1]));break;case"op_exp":N=this.pow(this.execute(u.children[0]),this.execute(u.children[1]));break;case"op_neg":N=this.neg(this.execute(u.children[0]))}break;case"node_var":N=this.getvar(u.value,!1,u._isFunctionName);break;case"node_const":N=u.value===null?null:Number(u.value);break;case"node_const_bool":N=u.value;break;case"node_str":N=u.value.replace(/\\(.)/g,"$1")}return N},compile:function(u,N){var x,a,X,B="";if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(N)||(N=!1),!u)return B;switch(u.type){case"node_op":switch(u.value){case"op_none":u.children[0]&&(B=this.compile(u.children[0],N)),u.children[1]&&(B+=this.compile(u.children[1],N));break;case"op_assign":N?(x=this.getLHSCompiler(u.children[0],N),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(x)?B="$jc$.setProp("+x[0]+", "+x[1]+", "+this.compile(u.children[1],N)+`);
`:(this.isLocalVariable(x)!==this.scope&&(this.scope.locals[x]=!0),B="$jc$.scopes["+this.scope.id+"].locals['"+x+"'] = "+this.compile(u.children[1],N)+`;
`)):B=(x=this.compile(u.children[0]))+" = "+this.compile(u.children[1],N)+`;
`;break;case"op_if":B=" if ("+this.compile(u.children[0],N)+") "+this.compile(u.children[1],N);break;case"op_if_else":B=" if ("+this.compile(u.children[0],N)+")"+this.compile(u.children[1],N),B+=" else "+this.compile(u.children[2],N);break;case"op_conditional":B="(("+this.compile(u.children[0],N)+")?("+this.compile(u.children[1],N),B+="):("+this.compile(u.children[2],N)+"))";break;case"op_while":B=" while ("+this.compile(u.children[0],N)+`) {
`+this.compile(u.children[1],N)+`}
`;break;case"op_do":B=` do {
`+this.compile(u.children[0],N)+"} while ("+this.compile(u.children[1],N)+`);
`;break;case"op_for":B=" for ("+this.compile(u.children[0],N)+this.compile(u.children[1],N)+"; "+this.compile(u.children[2],N).slice(0,-2)+`) {
`+this.compile(u.children[3],N)+`
}
`;break;case"op_proplst":u.children[0]&&(B=this.compile(u.children[0],N)+", "),B+=this.compile(u.children[1],N);break;case"op_prop":B=u.children[0]+": "+this.compile(u.children[1],N);break;case"op_emptyobject":B=N?"{}":"<< >>";break;case"op_proplst_val":B=this.compile(u.children[0],N);break;case"op_array":for(X=[],a=0;a<u.children[0].length;a++)X.push(this.compile(u.children[0][a],N));B="["+X.join(", ")+"]";break;case"op_extvalue":B=this.compile(u.children[0],N)+"["+this.compile(u.children[1],N)+"]";break;case"op_return":B=" return "+this.compile(u.children[0],N)+`;
`;break;case"op_map":u.children[1].isMath||u.children[1].type==="node_var"||this._error("compile: In a map only function calls and mathematical expressions are allowed."),X=u.children[0],B=N?" $jc$.makeMap(function ("+X.join(", ")+") { return "+this.compile(u.children[1],N)+"; })":"map ("+X.join(", ")+") -> "+this.compile(u.children[1],N);break;case"op_function":X=u.children[0],this.pushScope(X),B=N?this.functionCodeJS(u):" function ("+X.join(", ")+") "+this.compile(u.children[1],N),this.popScope();break;case"op_execfunmath":console.log("op_execfunmath: TODO"),B="-1";break;case"op_execfun":if(u.children[2]){for(X=[],a=0;a<u.children[2].length;a++)X.push(this.compile(u.children[2][a],N));x=N?"$jc$.mergeAttributes("+X.join(", ")+")":X.join(", ")}for(u.children[0].withProps=!!u.children[2],X=[],a=0;a<u.children[1].length;a++)X.push(this.compile(u.children[1][a],N));B=this.compile(u.children[0],N)+"("+X.join(", ")+(u.children[2]&&N?", "+x:"")+")"+(u.children[2]&&!N?" "+x:""),N&&(B+=`
`),N&&u.children[0].value==="$"&&(B="$jc$.board.objects["+this.compile(u.children[1][0],N)+"]");break;case"op_property":B=N&&u.children[1]!=="X"&&u.children[1]!=="Y"?"$jc$.resolveProperty("+this.compile(u.children[0],N)+", '"+u.children[1]+"', true)":this.compile(u.children[0],N)+"."+u.children[1];break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),B=N?"$jc$.use('":"use('",B+=u.children[0].toString()+"');";break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),B=N?"$jc$.del(":"remove(",B+=this.compile(u.children[0],N)+")";break;case"op_eq":B="("+this.compile(u.children[0],N)+" === "+this.compile(u.children[1],N)+")";break;case"op_neq":B="("+this.compile(u.children[0],N)+" !== "+this.compile(u.children[1],N)+")";break;case"op_approx":B="("+this.compile(u.children[0],N)+" ~= "+this.compile(u.children[1],N)+")";break;case"op_gt":B=N?"$jc$.gt("+this.compile(u.children[0],N)+", "+this.compile(u.children[1],N)+")":"("+this.compile(u.children[0],N)+" > "+this.compile(u.children[1],N)+")";break;case"op_lt":B=N?"$jc$.lt("+this.compile(u.children[0],N)+", "+this.compile(u.children[1],N)+")":"("+this.compile(u.children[0],N)+" < "+this.compile(u.children[1],N)+")";break;case"op_geq":B=N?"$jc$.geq("+this.compile(u.children[0],N)+", "+this.compile(u.children[1],N)+")":"("+this.compile(u.children[0],N)+" >= "+this.compile(u.children[1],N)+")";break;case"op_leq":B=N?"$jc$.leq("+this.compile(u.children[0],N)+", "+this.compile(u.children[1],N)+")":"("+this.compile(u.children[0],N)+" <= "+this.compile(u.children[1],N)+")";break;case"op_or":B="("+this.compile(u.children[0],N)+" || "+this.compile(u.children[1],N)+")";break;case"op_and":B="("+this.compile(u.children[0],N)+" && "+this.compile(u.children[1],N)+")";break;case"op_not":B="!("+this.compile(u.children[0],N)+")";break;case"op_add":B=N?"$jc$.add("+this.compile(u.children[0],N)+", "+this.compile(u.children[1],N)+")":"("+this.compile(u.children[0],N)+" + "+this.compile(u.children[1],N)+")";break;case"op_sub":B=N?"$jc$.sub("+this.compile(u.children[0],N)+", "+this.compile(u.children[1],N)+")":"("+this.compile(u.children[0],N)+" - "+this.compile(u.children[1],N)+")";break;case"op_div":B=N?"$jc$.div("+this.compile(u.children[0],N)+", "+this.compile(u.children[1],N)+")":"("+this.compile(u.children[0],N)+" / "+this.compile(u.children[1],N)+")";break;case"op_mod":B=N?"$jc$.mod("+this.compile(u.children[0],N)+", "+this.compile(u.children[1],N)+", true)":"("+this.compile(u.children[0],N)+" % "+this.compile(u.children[1],N)+")";break;case"op_mul":B=N?"$jc$.mul("+this.compile(u.children[0],N)+", "+this.compile(u.children[1],N)+")":"("+this.compile(u.children[0],N)+" * "+this.compile(u.children[1],N)+")";break;case"op_exp":B=N?"$jc$.pow("+this.compile(u.children[0],N)+", "+this.compile(u.children[1],N)+")":"("+this.compile(u.children[0],N)+"^"+this.compile(u.children[1],N)+")";break;case"op_neg":B=N?"$jc$.neg("+this.compile(u.children[0],N)+")":"(-"+this.compile(u.children[0],N)+")"}break;case"node_var":B=N?this.getvarJS(u.value,!1,u.withProps):u.value;break;case"node_const":case"node_const_bool":B=u.value;break;case"node_str":B="'"+u.value+"'"}return u.needsBrackets&&(B=N?`{
`+B+`
}
`:"<< "+B+" >>"),B},getName:function(u,N){var x="";return _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.getName)?(x=u.getName(),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x)&&x!==""||!N||(x=u.id)):N&&(x=u.id),x},X:function(u){return u.X()},Y:function(u){return u.Y()},V:function(u){return u.Value()},L:function(u){return u.L()},area:function(u){return _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.Area)||this._error("Error: Can't calculate area."),u.Area()},dist:function(u,N){return _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.Dist)||this._error("Error: Can't calculate distance."),u.Dist(N)},radius:function(u){return _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(u.Radius)||this._error("Error: Can't calculate radius."),u.Radius()},add:function(u,N){var x,a,X;if(u=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(u),N=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(N),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(N))X=_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.add(u,N);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(N))for(a=Math.min(u.length,N.length),X=[],x=0;x<a;x++)X[x]=u[x]+N[x];else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(N)?X=u+N:_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isString(u)||_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isString(N)?X=u.toString()+N.toString():this._error("Operation + not defined on operands "+typeof u+" and "+typeof N);return X},sub:function(u,N){var x,a,X;if(u=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(u),N=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(N),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(N))X=_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.sub(u,N);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(N))for(a=Math.min(u.length,N.length),X=[],x=0;x<a;x++)X[x]=u[x]-N[x];else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(N)?X=u-N:this._error("Operation - not defined on operands "+typeof u+" and "+typeof N);return X},neg:function(u){var N,x,a;if(u=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(u),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u))a=_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.negative(u);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(u))for(x=u.length,a=[],N=0;N<x;N++)a[N]=-u[N];else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(u)?a=-u:this._error("Unary operation - not defined on operand "+typeof u);return a},mul:function(u,N){var x,a,X;if(u=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(u),N=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(N),_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(N)&&(x=u,N=u=N),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(N))X=_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.mul(u,N);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(N))a=Math.min(u.length,N.length),X=_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.innerProduct(u,N,a);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(N))for(a=N.length,X=[],x=0;x<a;x++)X[x]=u*N[x];else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(N)?X=u*N:this._error("Operation * not defined on operands "+typeof u+" and "+typeof N);return X},div:function(u,N){var x,a,X;if(u=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(u),N=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(N),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(N))X=_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.div(u,N);else if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(N))for(a=u.length,X=[],x=0;x<a;x++)X[x]=u[x]/N;else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(N)?X=u/N:this._error("Operation * not defined on operands "+typeof u+" and "+typeof N);return X},mod:function(u,N){var x,a,X;if(u=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(u),N=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(N),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(N))return _math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.fmod(u,N);if(_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isArray(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(N))for(a=u.length,X=[],x=0;x<a;x++)X[x]=_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.mod(u[x],N,!0);else _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(u)&&_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.isNumber(N)?X=_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.mod(u,N,!0):this._error("Operation * not defined on operands "+typeof u+" and "+typeof N);return X},pow:function(u,N){return u=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(u),N=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.evalSlider(N),_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(N)?_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.pow(u,N):_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.pow(u,N)},lt:function(u,N){return _math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(N)?_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.lt(u,N):u<N},leq:function(u,N){return _math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(N)?_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.leq(u,N):u<=N},gt:function(u,N){return _math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(N)?_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.gt(u,N):u>N},geq:function(u,N){return _math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(u)||_math_ia__WEBPACK_IMPORTED_MODULE_4__.Z.isInterval(N)?Intervalt.geq(u,N):u>=N},randint:function(u,N,x){return _utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.exists(x)||(x=1),Math.round(Math.random()*(N-u)/x)*x+u},DDD:function(u){console.log("Dummy derivative function. This should never appear!")},ifthen:function(u,N,x){return u?N:x},del:function(u){typeof u=="object"&&_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(u.type)&&_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(u.elementClass)&&this.board.removeObject(u)},use:function(u){var N,x,a=!1;if(typeof u=="string"){for(N in _jxg__WEBPACK_IMPORTED_MODULE_0__.Z.boards)if(_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.boards.hasOwnProperty(N)&&_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.boards[N].container===u){x=_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.boards[N],a=!0;break}}else x=u,a=!0;a?(this.board=x,this.builtIn.$board=x,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+u+"' not found!")},findSymbol:function(u,N){var x,a;for(a=(N=_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.def(N,-1))===-1?this.scope:this.scopes[N];a!==null;){for(x in a.locals)if(a.locals.hasOwnProperty(x)&&a.locals[x]===u)return[x,a];a=a.previous}return[]},importModule:function(u){return priv.modules[u.toLowerCase()]},defineBuiltIn:function(){var u=this,N={PI:Math.PI,EULER:Math.E,D:u.DDD,X:u.X,Y:u.Y,V:u.V,L:u.L,acosh:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.acosh,acot:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.acot,asinh:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.asinh,binomial:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.binomial,cbrt:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.cbrt,cosh:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.cosh,cot:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.cot,deg:_math_geometry__WEBPACK_IMPORTED_MODULE_5__.Z.trueAngle,A:u.area,area:u.area,dist:u.dist,R:u.radius,radius:u.radius,erf:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.erf,erfc:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.erfc,erfi:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.erfi,factorial:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.factorial,gcd:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.gcd,lb:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log2,lcm:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.lcm,ld:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log2,lg:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log10,ln:Math.log,log:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log,log10:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log10,log2:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.log2,ndtr:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.ndtr,ndtri:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.ndtri,nthroot:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.nthroot,pow:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.pow,rad:_math_geometry__WEBPACK_IMPORTED_MODULE_5__.Z.rad,ratpow:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.ratpow,trunc:_utils_type__WEBPACK_IMPORTED_MODULE_7__.Z.trunc,sinh:_math_math__WEBPACK_IMPORTED_MODULE_3__.Z.sinh,randint:u.randint,IfThen:u.ifthen,import:u.importModule,use:u.use,remove:u.del,$:u.getElementById,getName:u.getName,name:u.getName,$board:u.board,$log:u.log};return N.rad.sc=_math_geometry__WEBPACK_IMPORTED_MODULE_5__.Z,N.deg.sc=_math_geometry__WEBPACK_IMPORTED_MODULE_5__.Z,N.factorial.sc=_math_math__WEBPACK_IMPORTED_MODULE_3__.Z,N.X.src="$jc$.X",N.Y.src="$jc$.Y",N.V.src="$jc$.V",N.L.src="$jc$.L",N.acosh.src="JXG.Math.acosh",N.acot.src="JXG.Math.acot",N.asinh.src="JXG.Math.asinh",N.binomial.src="JXG.Math.binomial",N.cbrt.src="JXG.Math.cbrt",N.cot.src="JXG.Math.cot",N.cosh.src="JXG.Math.cosh",N.deg.src="JXG.Math.Geometry.trueAngle",N.erf.src="JXG.Math.erf",N.erfc.src="JXG.Math.erfc",N.erfi.src="JXG.Math.erfi",N.A.src="$jc$.area",N.area.src="$jc$.area",N.dist.src="$jc$.dist",N.R.src="$jc$.radius",N.radius.src="$jc$.radius",N.factorial.src="JXG.Math.factorial",N.gcd.src="JXG.Math.gcd",N.lb.src="JXG.Math.log2",N.lcm.src="JXG.Math.lcm",N.ld.src="JXG.Math.log2",N.lg.src="JXG.Math.log10",N.ln.src="Math.log",N.log.src="JXG.Math.log",N.log10.src="JXG.Math.log10",N.log2.src="JXG.Math.log2",N.ndtr.src="JXG.Math.ndtr",N.ndtri.src="JXG.Math.ndtri",N.nthroot.src="JXG.Math.nthroot",N.pow.src="JXG.Math.pow",N.rad.src="JXG.Math.Geometry.rad",N.ratpow.src="JXG.Math.ratpow",N.trunc.src="JXG.trunc",N.sinh.src="JXG.Math.sinh",N.randint.src="$jc$.randint",N.import.src="$jc$.importModule",N.use.src="$jc$.use",N.remove.src="$jc$.del",N.IfThen.src="$jc$.ifthen",N.$.src="(function (n) { return $jc$.board.select(n); })",N.getName.src="$jc$.getName",N.name.src="$jc$.getName",N.$board&&(N.$board.src="$jc$.board"),N.$log.src="$jc$.log",N},getPossibleOperands:function(){var u,N,x,a,X,B,R,A,O,c,b,m,g,f,v=["E"],y=this.defineBuiltIn(),E=Math;for(g=function(T,M){return T.toLowerCase().localeCompare(M.toLowerCase())},f=function(T,M){var L=null;if(M==="jc")L=y[T];else{if(M!=="Math")return;L=E[T]}if(!(v.indexOf(T)>=0))return _jxg__WEBPACK_IMPORTED_MODULE_0__.Z.isFunction(L)?{name:T,type:"function",numParams:L.length,origin:M}:_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.isNumber(L)?{name:T,type:"constant",value:L,origin:M}:void(L!==void 0&&console.error("undefined type",L))},u=Object.getOwnPropertyNames(y).sort(g),N=Object.getOwnPropertyNames(E).sort(g),x=[],a=0,X=0;a<u.length||X<N.length;)u[a]===N[X]?(B=f(N[X],"Math"),_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(B)&&x.push(B),a++,X++):!_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(N[X])||u[a].toLowerCase().localeCompare(N[X].toLowerCase())<0?(B=f(u[a],"jc"),_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(B)&&x.push(B),a++):(B=f(N[X],"Math"),_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.exists(B)&&x.push(B),X++);for(O=[],c=[],b=[],m={},R=x.length,a=0;a<R;a++){switch((A=x[a]).type){case"function":O.push(A.name),A.origin==="jc"&&c.push(A.name);break;case"constant":b.push(A.name)}m[A.name]=A}return{all:m,list:x,functions:O,functions_jessiecode:c,constants:b}},_debug:function(u){typeof console=="object"?console.log(u):_utils_env__WEBPACK_IMPORTED_MODULE_8__.Z.isBrowser&&document&&document.getElementById("debug")!==null&&(document.getElementById("debug").innerHTML+=u+"<br />")},_error:function(u){var N=new Error("Error("+this.line+"): "+u);throw N.line=this.line,N},_warn:function(u){typeof console=="object"?console.log("Warning("+this.line+"): "+u):_utils_env__WEBPACK_IMPORTED_MODULE_8__.Z.isBrowser&&document&&document.getElementById(this.warnLog)!==null&&(document.getElementById(this.warnLog).innerHTML+="Warning("+this.line+"): "+u+"<br />")},_log:function(u){typeof window!="object"&&typeof self=="object"&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+u.toString()}):console.log("Log: ",arguments)}});var parser=function(){var u=function(Ht,Ct,Mt,Ut){for(Mt=Mt||{},Ut=Ht.length;Ut--;Mt[Ht[Ut]]=Ct);return Mt},N=[2,14],x=[1,13],a=[1,37],X=[1,14],B=[1,15],R=[1,21],A=[1,16],O=[1,17],c=[1,33],b=[1,18],m=[1,19],g=[1,12],f=[1,59],v=[1,60],y=[1,58],E=[1,46],T=[1,48],M=[1,49],L=[1,50],Y=[1,51],j=[1,52],F=[1,53],G=[1,54],H=[1,45],q=[1,38],K=[1,39],at=[5,7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],tt=[5,7,8,12,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],Q=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],it=[2,48],rt=[1,72],dt=[10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,66,83,86],ht=[1,78],ut=[8,10,16,32,34,35,37,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],_t=[1,82],Dt=[8,10,16,32,34,35,37,39,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],Bt=[1,83],Xt=[1,84],$t=[1,85],se=[8,10,16,32,34,35,37,39,41,42,43,50,51,53,54,55,57,64,65,66,83,86],ae=[1,89],le=[1,90],he=[1,91],Gt=[1,92],oe=[1,97],_e=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,53,54,55,57,64,65,66,83,86],pe=[1,103],ge=[1,104],Ce=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,57,64,65,66,83,86],ye=[1,105],Pe=[1,106],Ee=[1,107],Re=[1,126],Ae=[1,139],Oe=[83,86],De=[1,150],Le=[10,66,86],ke=[8,10,16,20,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,82,83,86],Be=[1,167],Ie=[10,86],Se={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,5],[63,6],[92,1],[92,3]],performAction:function(Ht,Ct,Mt,Ut,Nt,ct,Zt){var st=ct.length-1;switch(Nt){case 1:return ct[st-1];case 2:this.$=St.createNode(xt(Zt[st-4]),"node_op","op_if",ct[st-2],ct[st]);break;case 3:this.$=St.createNode(xt(Zt[st-6]),"node_op","op_if_else",ct[st-4],ct[st-2],ct[st]);break;case 4:this.$=St.createNode(xt(Zt[st-4]),"node_op","op_while",ct[st-2],ct[st]);break;case 5:this.$=St.createNode(xt(Zt[st-8]),"node_op","op_for",ct[st-6],ct[st-4],ct[st-2],ct[st]);break;case 6:this.$=St.createNode(xt(Zt[st-6]),"node_op","op_do",ct[st-5],ct[st-2]);break;case 7:this.$=St.createNode(xt(Zt[st-1]),"node_op","op_use",ct[st]);break;case 8:this.$=St.createNode(xt(Zt[st-1]),"node_op","op_delete",ct[st]);break;case 9:this.$=St.createNode(xt(Zt[st-1]),"node_op","op_return",void 0);break;case 10:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_return",ct[st-1]);break;case 11:case 14:this.$=St.createNode(xt(Zt[st]),"node_op","op_none");break;case 12:this.$=ct[st-1],this.$.needsBrackets=!0;break;case 13:this.$=St.createNode(xt(Zt[st-1]),"node_op","op_none",ct[st-1],ct[st]);break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 23:case 24:case 26:case 28:case 30:case 32:case 36:case 41:case 44:case 48:case 50:case 52:case 54:case 55:case 56:case 58:case 62:case 81:case 84:case 85:case 86:this.$=ct[st];break;case 22:case 65:case 93:this.$=ct[st-1];break;case 25:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_assign",ct[st-2],ct[st]),this.$.isMath=!1;break;case 27:this.$=St.createNode(xt(Zt[st-4]),"node_op","op_conditional",ct[st-4],ct[st-2],ct[st]),this.$.isMath=!1;break;case 29:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_or",ct[st-2],ct[st]),this.$.isMath=!1;break;case 31:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_and",ct[st-2],ct[st]),this.$.isMath=!1;break;case 33:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_eq",ct[st-2],ct[st]),this.$.isMath=!1;break;case 34:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_neq",ct[st-2],ct[st]),this.$.isMath=!1;break;case 35:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_approx",ct[st-2],ct[st]),this.$.isMath=!1;break;case 37:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_lt",ct[st-2],ct[st]),this.$.isMath=!1;break;case 38:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_gt",ct[st-2],ct[st]),this.$.isMath=!1;break;case 39:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_leq",ct[st-2],ct[st]),this.$.isMath=!1;break;case 40:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_geq",ct[st-2],ct[st]),this.$.isMath=!1;break;case 42:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_add",ct[st-2],ct[st]),this.$.isMath=!0;break;case 43:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_sub",ct[st-2],ct[st]),this.$.isMath=!0;break;case 45:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_mul",ct[st-2],ct[st]),this.$.isMath=!0;break;case 46:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_div",ct[st-2],ct[st]),this.$.isMath=!0;break;case 47:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_mod",ct[st-2],ct[st]),this.$.isMath=!0;break;case 49:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_exp",ct[st-2],ct[st]),this.$.isMath=!0;break;case 51:this.$=St.createNode(xt(Zt[st-1]),"node_op","op_not",ct[st]),this.$.isMath=!1;break;case 53:this.$=St.createNode(xt(Zt[st-1]),"node_op","op_neg",ct[st]),this.$.isMath=!0;break;case 57:case 63:case 64:case 66:case 67:case 68:case 97:this.$=ct[st],this.$.isMath=!1;break;case 59:case 91:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_property",ct[st-2],ct[st]),this.$.isMath=!0;break;case 60:case 90:this.$=St.createNode(xt(Zt[st-3]),"node_op","op_extvalue",ct[st-3],ct[st-1]),this.$.isMath=!0;break;case 61:this.$=St.createNode(xt(Zt[st]),"node_var",ct[st]);break;case 69:this.$=ct[st],this.$.isMath=!0;break;case 70:this.$=St.createNode(xt(Zt[st]),"node_const",null);break;case 71:this.$=St.createNode(xt(Zt[st]),"node_const_bool",!0);break;case 72:this.$=St.createNode(xt(Zt[st]),"node_const_bool",!1);break;case 73:this.$=St.createNode(xt(Zt[st]),"node_str",ct[st].substring(1,ct[st].length-1));break;case 74:this.$=St.createNode(xt(Zt[st]),"node_const",parseFloat(ct[st]));break;case 75:this.$=St.createNode(xt(Zt[st]),"node_const",NaN);break;case 76:this.$=St.createNode(xt(Zt[st]),"node_const",1/0);break;case 77:this.$=St.createNode(xt(Zt[st-1]),"node_op","op_array",[]);break;case 78:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_array",ct[st-1]);break;case 79:this.$=St.createNode(xt(Zt[st-1]),"node_op","op_emptyobject",{}),this.$.needsBrackets=!0;break;case 80:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_proplst_val",ct[st-1]),this.$.needsBrackets=!0;break;case 82:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_proplst",ct[st-2],ct[st]);break;case 83:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_prop",ct[st-2],ct[st]);break;case 87:case 89:this.$=St.createNode(xt(Zt[st-1]),"node_op","op_execfun",ct[st-1],ct[st]),this.$.isMath=!0;break;case 88:this.$=St.createNode(xt(Zt[st-2]),"node_op","op_execfun",ct[st-2],ct[st-1],ct[st],!0),this.$.isMath=!1;break;case 92:this.$=[];break;case 94:case 98:case 104:this.$=[ct[st]];break;case 95:case 99:case 105:this.$=ct[st-2].concat(ct[st]);break;case 96:this.$=St.createNode(xt(Zt[st]),"node_var",ct[st]),this.$.isMath=!0;break;case 100:this.$=St.createNode(xt(Zt[st-3]),"node_op","op_function",[],ct[st]),this.$.isMath=!1;break;case 101:this.$=St.createNode(xt(Zt[st-4]),"node_op","op_function",ct[st-2],ct[st]),this.$.isMath=!1;break;case 102:this.$=St.createNode(xt(Zt[st-4]),"node_op","op_map",[],ct[st]);break;case 103:this.$=St.createNode(xt(Zt[st-5]),"node_op","op_map",ct[st-3],ct[st])}},table:[u([5,7,8,14,15,16,17,19,20,21,23,26,50,51,58,65,74,75,76,77,78,79,80,82,91,93],N,{3:1,4:2}),{1:[3]},{5:[1,3],6:6,7:x,8:a,9:20,11:4,13:7,14:X,15:B,16:R,17:A,18:8,19:O,20:c,21:b,22:9,23:m,24:11,25:5,26:g,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{1:[2,1]},u(at,[2,13]),u(tt,[2,15]),u(tt,[2,16]),u(tt,[2,17]),u(tt,[2,18]),u(tt,[2,19]),u(tt,[2,20]),u(tt,[2,21]),u([7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],N,{4:61}),{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:x,8:a,9:20,11:65,13:7,14:X,15:B,16:R,17:A,18:8,19:O,20:c,21:b,22:9,23:m,24:11,25:5,26:g,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{20:[1,66]},{20:[1,67]},{8:a,9:69,16:[1,68],20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{16:[1,70]},u(tt,[2,11]),u(Q,[2,23]),u(Q,[2,24]),u([8,10,16,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],it,{32:[1,71],57:rt}),u([8,10,16,32,35,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],[2,26],{34:[1,73],37:[1,74]}),u(dt,[2,54],{88:77,8:ht,64:[1,75],65:[1,76]}),u(dt,[2,55],{88:79,8:ht,64:[1,81],65:[1,80]}),u(ut,[2,28],{39:_t}),u(Q,[2,56]),u(Q,[2,57]),u(Q,[2,58]),u(Dt,[2,30],{41:Bt,42:Xt,43:$t}),u(Q,[2,61]),u(Q,[2,62]),u(Q,[2,63]),u(Q,[2,64]),{8:a,9:86,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:[1,87]},{8:[1,88]},u(se,[2,32],{45:ae,46:le,47:he,48:Gt}),u(Q,[2,66]),u(Q,[2,67]),u(Q,[2,68]),u(Q,[2,69]),{20:oe,72:98,73:99,77:Y,78:j,79:F,80:G,83:[1,93],84:94,85:95,87:96},{8:a,20:c,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,66:[1,100],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,81:101,82:H,91:q,93:K},u(_e,[2,36],{50:pe,51:ge}),u(Q,[2,70]),u(Q,[2,71]),u(Q,[2,72]),u(Q,[2,73]),u(Q,[2,74]),u(Q,[2,75]),u(Q,[2,76]),u(Ce,[2,41],{53:ye,54:Pe,55:Ee}),u(Q,[2,44]),u(Q,[2,50]),{8:a,20:c,31:109,50:f,51:v,52:108,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,50:f,51:v,52:110,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,50:f,51:v,52:111,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{6:6,7:x,8:a,9:20,11:4,13:7,14:X,15:B,16:R,17:A,18:8,19:O,20:c,21:b,22:9,23:m,24:11,25:5,26:g,27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,9:113,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,9:114,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,9:115,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{14:[1,116]},u(tt,[2,7]),u(tt,[2,8]),u(tt,[2,9]),{16:[1,117]},u(tt,[2,22]),{8:a,20:c,29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,50:f,51:v,52:119,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,36:121,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{20:[1,122]},{8:a,9:123,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},u(Q,[2,87],{89:124,90:125,68:127,20:Re,82:H}),{8:a,10:[1,128],20:c,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,81:129,82:H,91:q,93:K},u(Q,[2,89]),{8:a,9:130,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{20:[1,131]},{8:a,20:c,31:109,38:132,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,40:133,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,40:134,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,40:135,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{10:[1,136]},{10:[1,137],20:Ae,92:138},{10:[1,140],20:Ae,92:141},{8:a,20:c,31:109,44:142,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,44:143,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,44:144,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,44:145,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},u(Q,[2,79]),{83:[1,146],86:[1,147]},u(Oe,[2,81]),{35:[1,148]},{35:[2,84]},{35:[2,85]},{35:[2,86]},u(Q,[2,77]),{66:[1,149],86:De},u(Le,[2,98]),{8:a,20:c,31:109,49:151,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,49:152,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,50:f,51:v,52:153,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,50:f,51:v,52:154,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,31:109,50:f,51:v,52:155,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},u(Q,[2,51]),u([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],it,{57:rt}),u(Q,[2,52]),u(Q,[2,53]),u([5,7,8,10,12,14,15,16,17,19,20,21,23,26,27,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,58,64,65,66,74,75,76,77,78,79,80,82,83,86,91,93],[2,12]),{10:[1,156]},{10:[1,157]},{16:[1,158]},{8:[1,159]},u(tt,[2,10]),u(Q,[2,25]),u(Q,[2,49]),{35:[1,160]},u(ut,[2,29],{39:_t}),u(Q,[2,59]),{66:[1,161]},u([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83],[2,88],{86:[1,162]}),u(Q,[2,94]),u(Q,[2,96]),u(Q,[2,97]),u(ke,[2,92]),{10:[1,163],86:De},{66:[1,164]},u(Q,[2,91]),u(Dt,[2,31],{41:Bt,42:Xt,43:$t}),u(se,[2,33],{45:ae,46:le,47:he,48:Gt}),u(se,[2,34],{45:ae,46:le,47:he,48:Gt}),u(se,[2,35],{45:ae,46:le,47:he,48:Gt}),u(Q,[2,65]),{25:165,26:g},{10:[1,166],86:Be},u(Ie,[2,104]),{94:[1,168]},{10:[1,169],86:Be},u(_e,[2,37],{50:pe,51:ge}),u(_e,[2,38],{50:pe,51:ge}),u(_e,[2,39],{50:pe,51:ge}),u(_e,[2,40],{50:pe,51:ge}),u(Q,[2,80]),{20:oe,72:98,73:99,77:Y,78:j,79:F,80:G,85:170,87:96},{8:a,20:c,29:171,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},u(Q,[2,78]),{8:a,20:c,29:172,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},u(Ce,[2,42],{53:ye,54:Pe,55:Ee}),u(Ce,[2,43],{53:ye,54:Pe,55:Ee}),u(Q,[2,45]),u(Q,[2,46]),u(Q,[2,47]),{6:6,7:x,8:a,9:20,11:173,13:7,14:X,15:B,16:R,17:A,18:8,19:O,20:c,21:b,22:9,23:m,24:11,25:5,26:g,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{6:6,7:x,8:a,9:20,11:174,13:7,14:X,15:B,16:R,17:A,18:8,19:O,20:c,21:b,22:9,23:m,24:11,25:5,26:g,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,9:175,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,9:176,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,20:c,29:177,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},u(Q,[2,60]),{20:Re,68:127,82:H,90:178},u(ke,[2,93]),u(Q,[2,90]),u(Q,[2,100]),{25:179,26:g},{20:[1,180]},{8:a,9:181,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{94:[1,182]},u(Oe,[2,82]),u(Oe,[2,83]),u(Le,[2,99]),u(at,[2,2],{12:[1,183]}),u(tt,[2,4]),{16:[1,184]},{10:[1,185]},u(Q,[2,27]),u(Q,[2,95]),u(Q,[2,101]),u(Ie,[2,105]),u(Q,[2,102]),{8:a,9:186,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{6:6,7:x,8:a,9:20,11:187,13:7,14:X,15:B,16:R,17:A,18:8,19:O,20:c,21:b,22:9,23:m,24:11,25:5,26:g,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{8:a,9:188,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},{16:[1,189]},u(Q,[2,103]),u(tt,[2,3]),{10:[1,190]},u(tt,[2,6]),{6:6,7:x,8:a,9:20,11:191,13:7,14:X,15:B,16:R,17:A,18:8,19:O,20:c,21:b,22:9,23:m,24:11,25:5,26:g,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:v,52:56,56:57,58:y,59:26,60:27,61:29,62:30,63:31,65:E,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:T,75:M,76:L,77:Y,78:j,79:F,80:G,82:H,91:q,93:K},u(tt,[2,5])],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(Ht,Ct){if(!Ct.recoverable){var Mt=new Error(Ht);throw Mt.hash=Ct,Mt}this.trace(Ht)},parse:function(Ht){var Ct=this,Mt=[0],Ut=[null],Nt=[],ct=this.table,Zt="",st=0,Ye=0,ze=0,He=2,je=1,We=Nt.slice.call(arguments,1),Qt=Object.create(this.lexer),ue={yy:{}};for(var we in this.yy)Object.prototype.hasOwnProperty.call(this.yy,we)&&(ue.yy[we]=this.yy[we]);Qt.setInput(Ht,ue.yy),ue.yy.lexer=Qt,ue.yy.parser=this,Qt.yylloc===void 0&&(Qt.yylloc={});var Te=Qt.yylloc;Nt.push(Te);var Ve=Qt.options&&Qt.options.ranges;typeof ue.yy.parseError=="function"?this.parseError=ue.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var re,Me,de,ne,Xe,be,ce,Ue,Ze,qe=function(){var ve;return typeof(ve=Qt.lex()||je)!="number"&&(ve=Ct.symbols_[ve]||ve),ve},fe={};;){if(de=Mt[Mt.length-1],this.defaultActions[de]?ne=this.defaultActions[de]:(re==null&&(re=qe()),ne=ct[de]&&ct[de][re]),ne===void 0||!ne.length||!ne[0]){var Fe="";for(be in Ze=[],ct[de])this.terminals_[be]&&be>He&&Ze.push("'"+this.terminals_[be]+"'");Fe=Qt.showPosition?"Parse error on line "+(st+1)+`:
`+Qt.showPosition()+`
Expecting `+Ze.join(", ")+", got '"+(this.terminals_[re]||re)+"'":"Parse error on line "+(st+1)+": Unexpected "+(re==je?"end of input":"'"+(this.terminals_[re]||re)+"'"),this.parseError(Fe,{text:Qt.match,token:this.terminals_[re]||re,line:Qt.yylineno,loc:Te,expected:Ze})}if(ne[0]instanceof Array&&ne.length>1)throw new Error("Parse Error: multiple actions possible at state: "+de+", token: "+re);switch(ne[0]){case 1:Mt.push(re),Ut.push(Qt.yytext),Nt.push(Qt.yylloc),Mt.push(ne[1]),re=null,Me?(re=Me,Me=null):(Ye=Qt.yyleng,Zt=Qt.yytext,st=Qt.yylineno,Te=Qt.yylloc,ze>0);break;case 2:if(ce=this.productions_[ne[1]][1],fe.$=Ut[Ut.length-ce],fe._$={first_line:Nt[Nt.length-(ce||1)].first_line,last_line:Nt[Nt.length-1].last_line,first_column:Nt[Nt.length-(ce||1)].first_column,last_column:Nt[Nt.length-1].last_column},Ve&&(fe._$.range=[Nt[Nt.length-(ce||1)].range[0],Nt[Nt.length-1].range[1]]),(Xe=this.performAction.apply(fe,[Zt,Ye,st,ue.yy,ne[1],Ut,Nt].concat(We)))!==void 0)return Xe;ce&&(Mt=Mt.slice(0,-1*ce*2),Ut=Ut.slice(0,-1*ce),Nt=Nt.slice(0,-1*ce)),Mt.push(this.productions_[ne[1]][0]),Ut.push(fe.$),Nt.push(fe._$),Ue=ct[Mt[Mt.length-2]][Mt[Mt.length-1]],Mt.push(Ue);break;case 3:return!0}}return!0}},St={node:function(Ht,Ct,Mt){return{type:Ht,value:Ct,children:Mt}},createNode:function(Ht,Ct,Mt,Ut){var Nt,ct=this.node(Ct,Mt,[]);for(Nt=3;Nt<arguments.length;Nt++)ct.children.push(arguments[Nt]);return ct.line=Ht[0],ct.col=Ht[1],ct.eline=Ht[2],ct.ecol=Ht[3],ct}},xt=function(Ht){return[Ht.first_line,Ht.first_column,Ht.last_line,Ht.last_column]},Ge=function(){var Ht={EOF:1,parseError:function(Ct,Mt){if(!this.yy.parser)throw new Error(Ct);this.yy.parser.parseError(Ct,Mt)},setInput:function(Ct,Mt){return this.yy=Mt||this.yy||{},this._input=Ct,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ct=this._input[0];return this.yytext+=Ct,this.yyleng++,this.offset++,this.match+=Ct,this.matched+=Ct,Ct.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ct},unput:function(Ct){var Mt=Ct.length,Ut=Ct.split(/(?:\r\n?|\n)/g);this._input=Ct+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Mt),this.offset-=Mt;var Nt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ut.length-1&&(this.yylineno-=Ut.length-1);var ct=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ut?(Ut.length===Nt.length?this.yylloc.first_column:0)+Nt[Nt.length-Ut.length].length-Ut[0].length:this.yylloc.first_column-Mt},this.options.ranges&&(this.yylloc.range=[ct[0],ct[0]+this.yyleng-Mt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Ct){this.unput(this.match.slice(Ct))},pastInput:function(){var Ct=this.matched.substr(0,this.matched.length-this.match.length);return(Ct.length>20?"...":"")+Ct.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ct=this.match;return Ct.length<20&&(Ct+=this._input.substr(0,20-Ct.length)),(Ct.substr(0,20)+(Ct.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ct=this.pastInput(),Mt=new Array(Ct.length+1).join("-");return Ct+this.upcomingInput()+`
`+Mt+"^"},test_match:function(Ct,Mt){var Ut,Nt,ct;if(this.options.backtrack_lexer&&(ct={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ct.yylloc.range=this.yylloc.range.slice(0))),(Nt=Ct[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Nt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Nt?Nt[Nt.length-1].length-Nt[Nt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ct[0].length},this.yytext+=Ct[0],this.match+=Ct[0],this.matches=Ct,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ct[0].length),this.matched+=Ct[0],Ut=this.performAction.call(this,this.yy,this,Mt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ut)return Ut;if(this._backtrack){for(var Zt in ct)this[Zt]=ct[Zt];return!1}return!1},next:function(){if(this.done)return this.EOF;var Ct,Mt,Ut,Nt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ct=this._currentRules(),Zt=0;Zt<ct.length;Zt++)if((Ut=this._input.match(this.rules[ct[Zt]]))&&(!Mt||Ut[0].length>Mt[0].length)){if(Mt=Ut,Nt=Zt,this.options.backtrack_lexer){if((Ct=this.test_match(Ut,ct[Zt]))!==!1)return Ct;if(this._backtrack){Mt=!1;continue}return!1}if(!this.options.flex)break}return Mt?(Ct=this.test_match(Mt,ct[Nt]))!==!1&&Ct:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Ct=this.next();return Ct||this.lex()},begin:function(Ct){this.conditionStack.push(Ct)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ct){return(Ct=this.conditionStack.length-1-Math.abs(Ct||0))>=0?this.conditionStack[Ct]:"INITIAL"},pushState:function(Ct){this.begin(Ct)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Ct,Mt,Ut,Nt){switch(Ut){case 0:case 5:case 6:break;case 1:case 2:return 78;case 3:case 4:return 77;case 7:return 7;case 8:return 12;case 9:return 14;case 10:return 17;case 11:return 15;case 12:return 91;case 13:return 93;case 14:return 19;case 15:return 23;case 16:return 21;case 17:return 75;case 18:return 76;case 19:return 74;case 20:return 80;case 21:case 22:return 94;case 23:return 82;case 24:return 83;case 25:return 26;case 26:return 27;case 27:return 16;case 28:return"#";case 29:return 34;case 30:return 35;case 31:return 79;case 32:return 64;case 33:return 65;case 34:return 66;case 35:return 8;case 36:return 10;case 37:return 58;case 38:return 57;case 39:return 53;case 40:return 54;case 41:return 55;case 42:return 50;case 43:return 51;case 44:return 47;case 45:return 45;case 46:return 48;case 47:return 46;case 48:return 41;case 49:return 43;case 50:return 42;case 51:return 39;case 52:return 37;case 53:return 32;case 54:return 86;case 55:return 5;case 56:return 20;case 57:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:=>)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57],inclusive:!0}}};return Ht}();function xe(){this.yy={}}return Se.lexer=Ge,xe.prototype=Se,Se.Parser=xe,new xe}();parser.yy.parseError=parser.parseError;const __WEBPACK_DEFAULT_EXPORT__=_jxg__WEBPACK_IMPORTED_MODULE_0__.Z.JessieCode},327:(u,N,x)=>{x.d(N,{Z:()=>O});var a=x(765),X=x(109),B=x(275),R={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},A=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(c){return[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}];a.Z.rgbParser=function(c,b,m){var g,f,v,y,E,T,M,L,Y,j,F=c;if(!X.Z.exists(c))return[];if(X.Z.exists(b)&&X.Z.exists(m)&&(F=[c,b,m]),g=F,j=!1,X.Z.isArray(g)){for(T=0;T<3;T++)j=j||/\./.test(F[T].toString());for(T=0;T<3;T++)j=j&&F[T]>=0&&F[T]<=1;return j?[Math.ceil(255*F[0]),Math.ceil(255*F[1]),Math.ceil(255*F[2])]:F}for(typeof F=="string"&&(g=F),g.charAt(0)==="#"&&(g=g.substr(1,6)),g=g.replace(/ /g,"").toLowerCase(),g=R[g]||g,T=0;T<A.length;T++)v=A[T].re,y=A[T].process,(E=v.exec(g))&&(M=(f=y(E))[0],L=f[1],Y=f[2]);return isNaN(M)||isNaN(L)||isNaN(Y)?[]:[M=M<0||isNaN(M)?0:M>255?255:M,L=L<0||isNaN(L)?0:L>255?255:L,Y=Y<0||isNaN(Y)?0:Y>255?255:Y]},a.Z.rgb2css=function(c,b,m){var g;return"rgb("+(g=a.Z.rgbParser(c,b,m))[0]+", "+g[1]+", "+g[2]+")"},a.Z.rgb2hex=function(c,b,m){var g,f,v;return f=(g=a.Z.rgbParser(c,b,m))[1],v=g[2],g=(g=g[0]).toString(16),f=f.toString(16),v=v.toString(16),g.length===1&&(g="0"+g),f.length===1&&(f="0"+f),v.length===1&&(v="0"+v),"#"+g+f+v},a.Z.hex2rgb=function(c){return a.Z.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),a.Z.rgb2css(c)},a.Z.hsv2rgb=function(c,b,m){var g,f,v,y,E,T,M,L,Y;if(c=(c%360+360)%360,b===0){if(!(isNaN(c)||c<B.Z.eps))return"#ffffff";g=m,f=m,v=m}else switch(T=c>=360?0:c,M=m*(1-b),L=m*(1-b*(y=(T/=60)-(E=Math.floor(T)))),Y=m*(1-b*(1-y)),E){case 0:g=m,f=Y,v=M;break;case 1:g=L,f=m,v=M;break;case 2:g=M,f=m,v=Y;break;case 3:g=M,f=L,v=m;break;case 4:g=Y,f=M,v=m;break;case 5:g=m,f=M,v=L}return["#",g=(g=Math.round(255*g).toString(16)).length===2?g:g.length===1?"0"+g:"00",f=(f=Math.round(255*f).toString(16)).length===2?f:f.length===1?"0"+f:"00",v=(v=Math.round(255*v).toString(16)).length===2?v:v.length===1?"0"+v:"00"].join("")},a.Z.rgb2hsv=function(c,b,m){var g,f,v,y,E,T,M,L,Y,j,F,G,H;return f=(g=a.Z.rgbParser(c,b,m))[1],v=g[2],y=(g=g[0])/255,E=f/255,T=v/255,G=Math.max(g,f,v),L=(H=Math.min(g,f,v))/255,j=0,(F=M=G/255)>0&&(j=(F-L)/F),Y=1/(M-L),j>0&&(G===g?Y*=E-T:Y=G===f?2+(T-y)*Y:4+(y-E)*Y),(Y*=60)<0&&(Y+=360),G===H&&(Y=0),[Y,j,F]},a.Z.rgb2LMS=function(c,b,m){var g,f,v,y,E,T,M,L=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return f=(g=a.Z.rgbParser(c,b,m))[1],v=g[2],g=g[0],g=Math.pow(g,.476190476),f=Math.pow(f,.476190476),v=Math.pow(v,.476190476),(M=[y=g*L[0][0]+f*L[0][1]+v*L[0][2],E=g*L[1][0]+f*L[1][1]+v*L[1][2],T=g*L[2][0]+f*L[2][1]+v*L[2][2]]).l=y,M.m=E,M.s=T,M},a.Z.LMS2rgb=function(c,b,m){var g,f,v,y,E=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],T=function(M){for(var L=127,Y=64;Y>0;){if(Math.pow(L,.476190476)>M)L-=Y;else{if(Math.pow(L+1,.476190476)>M)return L;L+=Y}Y/=2}return L===254&&13.994955247<M?255:L};return g=c*E[0][0]+b*E[0][1]+m*E[0][2],f=c*E[1][0]+b*E[1][1]+m*E[1][2],v=c*E[2][0]+b*E[2][1]+m*E[2][2],(y=[g=T(g),f=T(f),v=T(v)]).r=g,y.g=f,y.b=v,y},a.Z.rgba2rgbo=function(c){var b;return c.length===9&&c.charAt(0)==="#"?(b=parseInt(c.substr(7,2).toUpperCase(),16)/255,c=c.substr(0,7)):b=1,[c,b]},a.Z.rgbo2rgba=function(c,b){var m;return c==="none"?c:((m=Math.round(255*b).toString(16)).length===1&&(m="0"+m),c+m)},a.Z.rgb2bw=function(c){var b,m,g,f="0123456789ABCDEF";return c==="none"?c:(g=a.Z.rgbParser(c),b=Math.floor(.3*g[0]+.59*g[1]+.11*g[2]),c="#"+(m=f.charAt(b>>4&15)+f.charAt(15&b))+m+m)},a.Z.rgb2cb=function(c,b){var m,g,f,v,y,E,T,M,L,Y,j,F="0123456789ABCDEF";if(c==="none")return c;switch(g=(y=a.Z.rgb2LMS(c))[0],f=y[1],v=y[2],b=b.toLowerCase()){case"protanopia":E=-.06150039994295001,T=.08277001656812001,M=-.013200141220000003,L=.05858939668799999,Y=-.07934519995360001,j=.013289415272000003,g=v/f<.6903216543277437?-(T*f+M*v)/E:-(Y*f+j*v)/L;break;case"tritanopia":E=-.00058973116217,T=.007690316482,M=-.01011703519052,L=.025495080838999994,Y=-.0422740347,j=.017005316784,v=f/g<.8349489908460004?-(E*g+T*f)/M:-(L*g+Y*f)/j;break;default:E=-.06150039994295001,T=.08277001656812001,M=-.013200141220000003,L=.05858939668799999,Y=-.07934519995360001,j=.013289415272000003,f=v/g<.5763833686400911?-(E*g+M*v)/T:-(L*g+j*v)/Y}return m=a.Z.LMS2rgb(g,f,v),c="#"+(F.charAt(m[0]>>4&15)+F.charAt(15&m[0])),c+=F.charAt(m[1]>>4&15)+F.charAt(15&m[1]),c+=F.charAt(m[2]>>4&15)+F.charAt(15&m[2])},a.Z.autoHighlight=function(c){var b=a.Z.rgba2rgbo(c),m=b[0],g=b[1];return c.charAt(0)==="#"?(g*=g<.3?1.8:.4,a.Z.rgbo2rgba(m,g)):c},a.Z.contrast=function(c,b,m,g){var f,v,y,E,T;return b=b||"#000000",m=m||"#ffffff",g=g||7,f=a.Z.rgbParser(c),v=a.Z.rgbParser("#000000"),T=(y=.2126*Math.pow(f[0]/255,2.2)+.7152*Math.pow(f[1]/255,2.2)+.0722*Math.pow(f[2]/255,2.2))>(E=.2126*Math.pow(v[0]/255,2.2)+.7152*Math.pow(v[1]/255,2.2)+.0722*Math.pow(v[2]/255,2.2))?Math.floor((y+.05)/(E+.05)):Math.floor((E+.05)/(y+.05)),(T-=1)>g?b:m},a.Z.setClassicColors=function(){a.Z.Options.elements.strokeColor="blue",a.Z.Options.elements.fillColor="red",a.Z.Options.hatch.strokeColor="blue",a.Z.Options.angle.fillColor="#ff7f00",a.Z.Options.angle.highlightFillColor="#ff7f00",a.Z.Options.angle.strokeColor="#ff7f00",a.Z.Options.angle.label.strokeColor="blue",a.Z.Options.arc.strokeColor="blue",a.Z.Options.circle.center.fillColor="red",a.Z.Options.circle.center.strokeColor="blue",a.Z.Options.circumcircle.strokeColor="blue",a.Z.Options.circumcircle.center.fillColor="red",a.Z.Options.circumcircle.center.strokeColor="blue",a.Z.Options.circumcirclearc.strokeColor="blue",a.Z.Options.circumcirclesector.strokeColor="blue",a.Z.Options.circumcirclesector.fillColor="green",a.Z.Options.circumcirclesector.highlightFillColor="green",a.Z.Options.conic.strokeColor="blue",a.Z.Options.curve.strokeColor="blue",a.Z.Options.incircle.strokeColor="blue",a.Z.Options.incircle.center.fillColor="red",a.Z.Options.incircle.center.strokeColor="blue",a.Z.Options.inequality.fillColor="red",a.Z.Options.integral.fillColor="red",a.Z.Options.integral.curveLeft.color="red",a.Z.Options.integral.curveRight.color="red",a.Z.Options.line.strokeColor="blue",a.Z.Options.point.fillColor="red",a.Z.Options.point.strokeColor="red",a.Z.Options.polygon.fillColor="green",a.Z.Options.polygon.highlightFillColor="green",a.Z.Options.polygon.vertices.strokeColor="red",a.Z.Options.polygon.vertices.fillColor="red",a.Z.Options.regularpolygon.fillColor="green",a.Z.Options.regularpolygon.highlightFillColor="green",a.Z.Options.regularpolygon.vertices.strokeColor="red",a.Z.Options.regularpolygon.vertices.fillColor="red",a.Z.Options.riemannsum.fillColor="yellow",a.Z.Options.sector.fillColor="green",a.Z.Options.sector.highlightFillColor="green",a.Z.Options.semicircle.center.fillColor="red",a.Z.Options.semicircle.center.strokeColor="blue",a.Z.Options.slopetriangle.fillColor="red",a.Z.Options.slopetriangle.highlightFillColor="red",a.Z.Options.turtle.arrow.strokeColor="blue"},a.Z.extend(a.Z,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}}),a.Z.palette=a.Z.paletteWong;const O=a.Z},503:(u,N,x)=>{x.d(N,{Z:()=>B});var a=x(765),X=x(109);a.Z.extendConstants(a.Z,{touchProperty:"touches"}),a.Z.extend(a.Z,{isTouchEvent:function(R){return a.Z.exists(R[a.Z.touchProperty])},isPointerEvent:function(R){return a.Z.exists(R.pointerId)},isMouseEvent:function(R){return!a.Z.isTouchEvent(R)&&!a.Z.isPointerEvent(R)},getNumberOfTouchPoints:function(R){var A=-1;return a.Z.isTouchEvent(R)&&(A=R[a.Z.touchProperty].length),A},isFirstTouch:function(R){var A=a.Z.getNumberOfTouchPoints(R);return a.Z.isPointerEvent(R)?R.isPrimary:A===1},isBrowser:typeof window=="object"&&typeof document=="object",supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch{return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return!!this.isBrowser&&!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},supportsCanvas:function(){var R=!1;return this.isNode()&&(R=!0),R||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&typeof process<"u"&&process.release.name.search(/node|io.js/)!==-1},isWebWorker:function(){return!this.isBrowser&&typeof self=="object"&&typeof self.postMessage=="function"},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&window.ontouchstart!==void 0},isAndroid:function(){return X.Z.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return X.Z.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z.]*Safari/)>-1},isMetroApp:function(){return typeof window=="object"&&window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return X.Z.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&navigator.userAgent.toLowerCase().indexOf("apple")===-1},isFirefoxOS:function(){return X.Z.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")===-1&&navigator.userAgent.toLowerCase().indexOf("apple")===-1&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},ieVersion:function(){var R,A,O=3;if(typeof document!="object")return 0;A=(R=document.createElement("div")).getElementsByTagName("i");do R.innerHTML="<!--[if gt IE "+ ++O+"]><i></i><![endif]-->";while(A[0]);return O>4?O:void 0}(),getDimensions:function(R,A){var O,c,b,m,g,f,v,y,E,T=/\d+(\.\d*)?px/;if(!this.isBrowser||R===null)return{width:500,height:500};if(O=(A=A||document).getElementById(R),!X.Z.exists(O))throw new Error(`
JSXGraph: HTML container element '`+R+"' not found.");return(c=O.style.display)!=="none"&&c!==null?O.clientWidth>0&&O.clientHeight>0?{width:O.clientWidth,height:O.clientHeight}:(E=window.getComputedStyle?window.getComputedStyle(O):O.style,{width:T.test(E.width)?parseFloat(E.width):0,height:T.test(E.height)?parseFloat(E.height):0}):(m=(b=O.style).visibility,g=b.position,f=b.display,b.visibility="hidden",b.position="absolute",b.display="block",v=O.clientWidth,y=O.clientHeight,b.display=f,b.position=g,b.visibility=m,{width:v,height:y})},addEvent:function(R,A,O,c,b){var m=function(){return O.apply(c,arguments)};m.origin=O,typeof c=="object"&&X.Z.exists(c.BOARD_MODE_NONE)&&(c["x_internal"+A]=c["x_internal"+A]||[],c["x_internal"+A].push(m)),X.Z.exists(R)&&X.Z.exists(R.addEventListener)&&(b=b||!1,R.addEventListener(A,m,b)),X.Z.exists(R)&&X.Z.exists(R.attachEvent)&&R.attachEvent("on"+A,m)},removeEvent:function(R,A,O,c){var b;if(X.Z.exists(c))if(X.Z.exists(c["x_internal"+A]))if(X.Z.isArray(c["x_internal"+A]))if((b=X.Z.indexOf(c["x_internal"+A],O,"origin"))!==-1){try{X.Z.exists(R)&&X.Z.exists(R.removeEventListener)&&R.removeEventListener(A,c["x_internal"+A][b],!1),X.Z.exists(R)&&X.Z.exists(R.detachEvent)&&R.detachEvent("on"+A,c["x_internal"+A][b])}catch{a.Z.debug("event not registered in browser: ("+A+" -- "+O+")")}c["x_internal"+A].splice(b,1)}else a.Z.debug("removeEvent: no such event function in internal list: "+O);else a.Z.debug("owner[x_internal + "+A+"] is not an array");else a.Z.debug("no such type: "+A);else a.Z.debug("no such owner")},removeAllEvents:function(R,A,O){var c;if(O["x_internal"+A]){for(c=O["x_internal"+A].length-1;c>=0;c--)a.Z.removeEvent(R,A,O["x_internal"+A][c].origin,O);O["x_internal"+A].length>0&&a.Z.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(R,A,O){var c,b,m,g=0,f=0;if(R||(R=window.event),m=R[a.Z.touchProperty],X.Z.exists(m)&&m.length===0&&(m=R.changedTouches),X.Z.exists(A)&&X.Z.exists(m))if(A===-1){for(b=m.length,c=0;c<b;c++)if(m[c]){R=m[c];break}}else R=m[A];return R.clientX&&(g=R.clientX,f=R.clientY),[g,f]},getOffset:function(R){var A,O=R,c=R,b=O.offsetLeft-O.scrollLeft,m=O.offsetTop-O.scrollTop;for(b=(A=this.getCSSTransform([b,m],O))[0],m=A[1],O=O.offsetParent;O;){for(b+=O.offsetLeft,m+=O.offsetTop,O.offsetParent&&(b+=O.clientLeft-O.scrollLeft,m+=O.clientTop-O.scrollTop),b=(A=this.getCSSTransform([b,m],O))[0],m=A[1],c=c.parentNode;c!==O;)b+=c.clientLeft-c.scrollLeft,m+=c.clientTop-c.scrollTop,b=(A=this.getCSSTransform([b,m],c))[0],m=A[1],c=c.parentNode;O=O.offsetParent}return[b,m]},getStyle:function(R,A){var O,c=R.ownerDocument;return c.defaultView&&c.defaultView.getComputedStyle?O=c.defaultView.getComputedStyle(R,null).getPropertyValue(A):R.currentStyle&&a.Z.ieVersion>=9?O=R.currentStyle[A]:R.style&&(A=A.replace(/-([a-z]|[0-9])/gi,function(b,m){return m.toUpperCase()}),O=R.style[A]),O},getProp:function(R,A){var O=parseInt(this.getStyle(R,A),10);return isNaN(O)?0:O},getCSSTransform:function(R,A){var O,c,b,m,g,f,v,y=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(g=y.length,O=0,b="";O<g;O++)if(X.Z.exists(A.style[y[O]])){b=A.style[y[O]];break}if(b!==""&&(m=b.indexOf("("))>0){for(g=b.length,c=0,f=(v=b.substring(m+1,g-1).split(",")).length;c<f;c++)v[c]=parseFloat(v[c]);b.indexOf("matrix")===0?(R[0]+=v[4],R[1]+=v[5]):b.indexOf("translateX")===0?R[0]+=v[0]:b.indexOf("translateY")===0?R[1]+=v[0]:b.indexOf("translate")===0&&(R[0]+=v[0],R[1]+=v[1])}return X.Z.exists(A.style.zoom)&&(b=A.style.zoom)!==""&&(R[0]*=parseFloat(b),R[1]*=parseFloat(b)),R},getCSSTransformMatrix:function(R){var A,O,c,b,m,g,f,v,y=R.ownerDocument,E=["transform","webkitTransform","MozTransform","msTransform","oTransform"],T=[[1,0,0],[0,1,0],[0,0,1]];if(y.defaultView&&y.defaultView.getComputedStyle)c=(v=y.defaultView.getComputedStyle(R,null)).getPropertyValue("-webkit-transform")||v.getPropertyValue("-moz-transform")||v.getPropertyValue("-ms-transform")||v.getPropertyValue("-o-transform")||v.getPropertyValue("transform");else for(m=E.length,A=0,c="";A<m;A++)if(X.Z.exists(R.style[E[A]])){c=R.style[E[A]];break}if(c!==""&&(b=c.indexOf("("))>0){for(m=c.length,O=0,g=(f=c.substring(b+1,m-1).split(",")).length;O<g;O++)f[O]=parseFloat(f[O]);c.indexOf("matrix")===0?T=[[1,0,0],[0,f[0],f[1]],[0,f[2],f[3]]]:c.indexOf("scaleX")===0?T[1][1]=f[0]:c.indexOf("scaleY")===0?T[2][2]=f[0]:c.indexOf("scale")===0&&(T[1][1]=f[0],T[2][2]=f[1])}return X.Z.exists(R.style.zoom)&&(c=R.style.zoom)!==""&&(T[1][1]*=parseFloat(c),T[2][2]*=parseFloat(c)),T},timedChunk:function(R,A,O,c){var b=R.concat(),m=function(){var g=+new Date;do A.call(O,b.shift());while(b.length>0&&+new Date-g<300);b.length>0?window.setTimeout(m,1):c(R)};window.setTimeout(m,1)},scaleJSXGraphDiv:function(R,A,O,c){var b,m,g,f,v,y,E,T,M,L,Y,j=O.styleSheets.length,F=c,G=[":fullscreen",":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"],H=G.length,q=new RegExp(".*#"+R+":.*full.*screen.*#"+A+".*auto;.*transform:.*matrix");for(f=(v=O.getElementById(R).getBoundingClientRect()).height,g=v.width,E=(T=O.getElementById(A).getBoundingClientRect()).height,L="{margin:0 auto;transform:matrix("+(M=(y=T.width)/E>=g/f?F*g/y:F*f/E)+",0,0,"+M+",0,"+.5*(f-E)+");}",j===0&&((b=document.createElement("style")).appendChild(document.createTextNode("")),O.appendChild(b),j=O.styleSheets.length),O.styleSheets[j-1].cssRules.length>0&&q.test(O.styleSheets[j-1].cssRules[0].cssText)&&O.styleSheets[j-1].deleteRule&&O.styleSheets[j-1].deleteRule(0),Y=0;Y<H;Y++)try{m="#"+R+G[Y]+" #"+A+L,O.styleSheets[j-1].insertRule(m,0);break}catch{}Y===H&&(console.log("JXG.scaleJSXGraphDiv: Could not add any CSS rule."),console.log("One possible reason could be that the id of the JSXGraph container does not start with a letter."))}});const B=a.Z},88:(u,N,x)=>{x.d(N,{Z:()=>B});var a=x(765),X=x(109);a.Z.EventEmitter={eventHandlers:{},suspended:{},trigger:function(R,A){var O,c,b,m,g,f;for(g=R.length,c=0;c<g;c++)if(m=this.eventHandlers[R[c]],!this.suspended[R[c]]){if(this.suspended[R[c]]=!0,m)for(f=m.length,O=0;O<f;O++)(b=m[O]).handler.apply(b.context,A);this.suspended[R[c]]=!1}return this},on:function(R,A,O){return X.Z.isArray(this.eventHandlers[R])||(this.eventHandlers[R]=[]),O=X.Z.def(O,this),this.eventHandlers[R].push({handler:A,context:O}),this},off:function(R,A){var O;return R&&X.Z.isArray(this.eventHandlers[R])?(A?((O=X.Z.indexOf(this.eventHandlers[R],A,"handler"))>-1&&this.eventHandlers[R].splice(O,1),this.eventHandlers[R].length===0&&delete this.eventHandlers[R]):delete this.eventHandlers[R],this):this},eventify:function(R){R.eventHandlers={},R.on=this.on,R.off=this.off,R.triggerEventHandlers=this.trigger,R.trigger=this.trigger,R.suspended={}}};const B=a.Z.EventEmitter},421:(u,N,x)=>{x.d(N,{Z:()=>O});var a=x(765),X=x(109),B=x(351),R=x(705),A={each:function(c,b,m){var g,f,v=[];if(X.Z.exists(c.length))for(f=c.length,g=0;g<f;g++)v.push(b.call(this,c[g],m));return v},coords:function(c,b){var m=c;return c&&c.elementClass===B.Z.OBJECT_CLASS_POINT?m=c.coords:c.usrCoords&&c.scrCoords&&c.usr2screen&&(m=c),b&&(m=new R.Z(B.Z.COORDS_BY_USER,m.usrCoords,m.board)),m},coordsArray:function(c,b){var m;return(m=X.Z.isArray(c)?c:this.coords(c).usrCoords).length<3&&m.unshift(1),b&&(m=[m[0],m[1],m[2]]),m}};a.Z.Expect=A;const O=A},109:(u,N,x)=>{x.d(N,{Z:()=>B});var a=x(765),X=x(351);a.Z.extend(a.Z,{isId:function(R,A){return typeof A=="string"&&!!R.objects[A]},isName:function(R,A){return typeof A=="string"&&!!R.elementsByName[A]},isGroup:function(R,A){return typeof A=="string"&&!!R.groups[A]},isString:function(R){return typeof R=="string"},isNumber:function(R){return typeof R=="number"||Object.prototype.toString.call(R)==="[Object Number]"},isFunction:function(R){return typeof R=="function"},isArray:function(R){return Array.isArray?Array.isArray(R):R!==null&&typeof R=="object"&&typeof R.splice=="function"&&typeof R.join=="function"},isObject:function(R){return typeof R=="object"&&!this.isArray(R)},isDocumentOrFragment:function(R){return this.isObject(R)&&(R.nodeType===9||R.nodeType===11)},isPoint:function(R){return!(R===null||typeof R!="object"||!this.exists(R.elementClass))&&R.elementClass===X.Z.OBJECT_CLASS_POINT},isPoint3D:function(R){return!(R===null||typeof R!="object"||!this.exists(R.elType))&&R.elType==="point3d"},isPointType:function(R,A){var O,c;return!!this.isArray(A)||!!(this.isFunction(A)&&(O=A(),this.isArray(O)&&O.length>1))||(c=R.select(A),this.isPoint(c))},isTransformationOrArray:function(R){if(R!==null){if(this.isArray(R)&&R.length>0)return this.isTransformationOrArray(R[0]);if(typeof R=="object")return R.type===X.Z.OBJECT_TYPE_TRANSFORMATION}return!1},isEmpty:function(R){return Object.keys(R).length===0},exists:function(R,A){var O=!(R==null||R===null);return(A=A||!1)?O&&R!=="":O},def:function(R,A){return this.exists(R)?R:A},str2Bool:function(R){return!this.exists(R)||(typeof R=="boolean"?R:!!this.isString(R)&&R.toLowerCase()==="true")},createEvalFunction:function(R,A,O){var c,b,m,g=[],f={};for(b=0;b<O;b++)for(m in g[b]=a.Z.createFunction(A[b],R,"",!0),g[b].deps)f[m]=g[b].deps;return(c=function(v){return g[v]()}).deps=f,c},createFunction:function(R,A,O,c){var b=null;return this.exists(c)&&!c||!this.isString(R)?this.isFunction(R)?(b=R).deps={}:(this.isNumber(R)||this.isString(R))&&((b=function(){return R}).deps={}):b=A.jc.snippet(R,!0,O,!0),b!==null&&(b.origin=R),b},providePoints:function(R,A,O,c,b){var m,g,f,v,y,E=0,T=[];for(this.isArray(A)||(A=[A]),f=A.length,this.exists(b)&&(E=b.length),E===0&&(v=this.copyAttributes(O,R.options,c)),m=0;m<f;++m)if(E>0&&(g=Math.min(m,E-1),v=this.copyAttributes(O,R.options,c,b[g])),this.isArray(A[m])&&A[m].length>1?(T.push(R.create("point",A[m],v)),T[T.length-1]._is_new=!0):this.isFunction(A[m])?(y=A[m](),this.isArray(y)&&y.length>1&&(T.push(R.create("point",[A[m]],v)),T[T.length-1]._is_new=!0)):T.push(R.select(A[m])),!this.isPoint(T[m]))return!1;return T},providePoints3D:function(R,A,O,c,b){var m,g,f,v,y,E=0,T=[];for(this.isArray(A)||(A=[A]),f=A.length,this.exists(b)&&(E=b.length),E===0&&(v=this.copyAttributes(O,R.board.options,c)),m=0;m<f;++m)if(E>0&&(g=Math.min(m,E-1),v=this.copyAttributes(O,R.board.options,c,b[g])),this.isArray(A[m])&&A[m].length>1?(T.push(R.create("point3d",A[m],v)),T[T.length-1]._is_new=!0):this.isFunction(A[m])?(y=A[m](),this.isArray(y)&&y.length>1&&(T.push(R.create("point3d",[A[m]],v)),T[T.length-1]._is_new=!0)):T.push(R.select(A[m])),!this.isPoint3D(T[m]))return!1;return T},bind:function(R,A){return function(){return R.apply(A,arguments)}},evaluate:function(R){return this.isFunction(R)?R():R},indexOf:function(R,A,O){var c,b=this.exists(O);if(Array.indexOf&&!b)return R.indexOf(A);for(c=0;c<R.length;c++)if(b&&R[c][O]===A||!b&&R[c]===A)return c;return-1},eliminateDuplicates:function(R){var A,O=R.length,c=[],b={};for(A=0;A<O;A++)b[R[A]]=0;for(A in b)b.hasOwnProperty(A)&&c.push(A);return c},swap:function(R,A,O){var c;return c=R[A],R[A]=R[O],R[O]=c,R},uniqueArray:function(R){var A,O,c,b=[];if(R.length===0)return[];for(A=0;A<R.length;A++)if(c=this.isArray(R[A]),this.exists(R[A]))for(O=A+1;O<R.length;O++)c&&a.Z.cmpArrays(R[A],R[O])?R[A]=[]:c||R[A]!==R[O]||(R[A]="");else R[A]="";for(O=0,A=0;A<R.length;A++)(c=this.isArray(R[A]))||R[A]===""?c&&R[A].length!==0&&(b[O]=R[A].slice(0),O++):(b[O]=R[A],O++);return R=b,b},isInArray:function(R,A){return a.Z.indexOf(R,A)>-1},coordsArrayToMatrix:function(R,A){var O,c=[],b=[];for(O=0;O<R.length;O++)A?(c.push(R[O].usrCoords[1]),b.push(R[O].usrCoords[2])):b.push([R[O].usrCoords[1],R[O].usrCoords[2]]);return A&&(b=[c,b]),b},cmpArrays:function(R,A){var O;if(R===A)return!0;if(R.length!==A.length)return!1;for(O=0;O<R.length;O++)if(this.isArray(R[O])&&this.isArray(A[O])){if(!this.cmpArrays(R[O],A[O]))return!1}else if(R[O]!==A[O])return!1;return!0},removeElementFromArray:function(R,A){var O;for(O=0;O<R.length;O++)if(R[O]===A)return R.splice(O,1),R;return R},trunc:function(R,A){return A=a.Z.def(A,0),this.toFixed(R,A)},_decimalAdjust:function(R,A,O){return O===void 0||+O==0?Math[R](A):(A=+A,O=+O,isNaN(A)||typeof O!="number"||O%1!=0?NaN:(A=A.toString().split("e"),+((A=(A=Math[R](+(A[0]+"e"+(A[1]?+A[1]-O:-O)))).toString().split("e"))[0]+"e"+(A[1]?+A[1]+O:O))))},_round10:function(R,A){return this._decimalAdjust("round",R,A)},_floor10:function(R,A){return this._decimalAdjust("floor",R,A)},_ceil10:function(R,A){return this._decimalAdjust("ceil",R,A)},toFixed:function(R,A){return this._round10(R,-A).toFixed(A)},autoDigits:function(R){var A=Math.abs(R);return A>=.1?this.toFixed(R,2):A>=.01?this.toFixed(R,4):A>=1e-4?this.toFixed(R,6):R},keys:function(R,A){var O,c=[];for(O in R)A?R.hasOwnProperty(O)&&c.push(O):c.push(O);return c},clone:function(R){var A={};return A.prototype=R,A},cloneAndCopy:function(R,A){var O,c=function(){};for(O in c.prototype=R,A)c[O]=A[O];return c},merge:function(R,A){var O,c,b,m;for(O in A)if(A.hasOwnProperty(O))if(b=A[O],this.isArray(b))for(R[O]||(R[O]=[]),c=0;c<b.length;c++)m=A[O][c],typeof A[O][c]=="object"?R[O][c]=this.merge(R[O][c],m):R[O][c]=A[O][c];else typeof b=="object"?(R[O]||(R[O]={}),R[O]=this.merge(R[O],b)):R[O]=b;return R},deepCopy:function(R,A,O){var c,b,m,g;if(O=O||!1,typeof R!="object"||R===null)return R;if(this.isArray(R))for(c=[],b=0;b<R.length;b++)typeof(m=R[b])=="object"?this.exists(m.board)?c[b]=m.id:c[b]=this.deepCopy(m):c[b]=m;else{for(b in c={},R)R.hasOwnProperty(b)&&(g=O?b.toLowerCase():b,(m=R[b])!==null&&typeof m=="object"?this.exists(m.board)?c[g]=m.id:c[g]=this.deepCopy(m):c[g]=m);for(b in A)A.hasOwnProperty(b)&&(g=O?b.toLowerCase():b,typeof(m=A[b])=="object"?this.isArray(m)||!this.exists(c[g])?c[g]=this.deepCopy(m):c[g]=this.deepCopy(c[g],m,O):c[g]=m)}return c},mergeAttr:function(R,A,O){var c,b,m;for(c in O=O||!0,A)A.hasOwnProperty(c)&&(b=O?c.toLowerCase():c,m=A[c],!this.isObject(m)||m===null||this.isDocumentOrFragment(m)||this.exists(m.board)||typeof m.valueOf()=="string"?R[b]=m:(R[b]!==void 0&&R[b]!==null&&this.isObject(R[b])||(R[b]={}),this.mergeAttr(R[b],m,O)))},copyAttributes:function(R,A,O){var c,b,m,g,f,v={circle:1,curve:1,foreignobject:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1};for(c=(m=arguments.length)<3||v[O]?a.Z.deepCopy(A.elements,null,!0):{},m<4&&this.exists(O)&&this.exists(A.layer[O])&&(c.layer=A.layer[O]),g=A,f=!0,b=2;b<m;b++){if(!this.exists(g[arguments[b]])){f=!1;break}g=g[arguments[b]]}for(f&&(c=a.Z.deepCopy(c,g,!0)),g=typeof R=="object"?R:{},f=!0,b=3;b<m;b++){if(!this.exists(g[arguments[b]])){f=!1;break}g=g[arguments[b]]}if(f&&this.mergeAttr(c,g,!0),arguments[2]==="board")return c;for(g=A,f=!0,b=2;b<m;b++){if(!this.exists(g[arguments[b]])){f=!1;break}g=g[arguments[b]]}return f&&this.exists(g.label)&&(c.label=a.Z.deepCopy(g.label,c.label)),c.label=a.Z.deepCopy(A.label,c.label),c},copyPrototypeMethods:function(R,A,O){var c;for(c in R.prototype[O]=A.prototype.constructor,A.prototype)A.prototype.hasOwnProperty(c)&&(R.prototype[c]=A.prototype[c])},toJSON:function(R,A){var O,c,b,m;if(A=a.Z.def(A,!1),JSON.stringify&&!A)try{return JSON.stringify(R)}catch{}switch(typeof R){case"object":if(R){if(O=[],this.isArray(R)){for(b=0;b<R.length;b++)O.push(a.Z.toJSON(R[b],A));return"["+O.join(",")+"]"}for(c in R)if(R.hasOwnProperty(c)){try{m=a.Z.toJSON(R[c],A)}catch{m=""}A?O.push(c+":"+m):O.push('"'+c+'":'+m)}return"{"+O.join(",")+"} "}return"null";case"string":return"'"+R.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return R.toString()}return"0"},clearVisPropOld:function(R){return R.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},R},isInObject:function(R,A){var O;for(O in R)if(R.hasOwnProperty(O)&&R[O]===A)return!0;return!1},escapeHTML:function(R){return R.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(R){return R.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(R){return R.charAt(0).toUpperCase()+R.substring(1).toLowerCase()},trimNumber:function(R){return(R=(R=R.replace(/^0+/,"")).replace(/0+$/,""))[R.length-1]!=="."&&R[R.length-1]!==","||(R=R.slice(0,-1)),R[0]!=="."&&R[0]!==","||(R="0"+R),R},filterElements:function(R,A){var O,c,b,m,g,f,v,y=R.length,E=[];if(typeof A!="function"&&typeof A!="object")return E;for(O=0;O<y;O++){if(v=!0,b=R[O],typeof A=="object"){for(c in A)if(A.hasOwnProperty(c)&&(m=c.toLowerCase(),g=typeof b[c]=="function"?b[c]():b[c],f=b.visProp&&typeof b.visProp[m]=="function"?b.visProp[m]():b.visProp&&b.visProp[m],!(v=typeof A[c]=="function"?A[c](g)||A[c](f):g===A[c]||f===A[c])))break}else typeof A=="function"&&(v=A(b));v&&E.push(b)}return E},trim:function(R){return R.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},sanitizeHTML:function(R,A){return typeof html_sanitize=="function"&&A?html_sanitize(R,function(){},function(O){return O}):(R&&typeof R=="string"&&(R=R.replace(/</g,"&lt;").replace(/>/g,"&gt;")),R)},evalSlider:function(R){return R&&R.type===X.Z.OBJECT_TYPE_GLIDER&&typeof R.Value=="function"?R.Value():R}});const B=a.Z}},__webpack_module_cache__={};function __webpack_require__(u){var N=__webpack_module_cache__[u];if(N!==void 0)return N.exports;var x=__webpack_module_cache__[u]={exports:{}};return __webpack_modules__[u](x,x.exports,__webpack_require__),x.exports}__webpack_require__.d=(u,N)=>{for(var x in N)__webpack_require__.o(N,x)&&!__webpack_require__.o(u,x)&&Object.defineProperty(u,x,{enumerable:!0,get:N[x]})},__webpack_require__.o=(u,N)=>Object.prototype.hasOwnProperty.call(u,N);var __webpack_exports__={};(()=>{__webpack_require__.d(__webpack_exports__,{$l:()=>xe,fy:()=>Oe,JU:()=>De,kL:()=>Ht,Cd:()=>Ct,Zz:()=>Mt,fS:()=>Ut,mZ:()=>Nt,L6:()=>ct,Hy:()=>Zt,iG:()=>Le,QK:()=>st,ZA:()=>Ye,Ee:()=>ze,Nn:()=>ke,n1:()=>He,IY:()=>Me,x1:()=>je,ZX:()=>Be,Ei:()=>Ie,E9:()=>We,mg:()=>Qt,xv:()=>ue,vb:()=>we,zA:()=>Te,l8:()=>Ve,nY:()=>re,vP:()=>de,lZ:()=>ne,I0:()=>Xe,ak:()=>be,tj:()=>Se,kC:()=>ce,HM:()=>Ue,d9:()=>Ze,V$:()=>qe,DV:()=>fe,fG:()=>Fe,DM:()=>ve,OD:()=>Qe,o5:()=>ti,JI:()=>ei,fF:()=>ii,Ql:()=>si,yl:()=>ri,lU:()=>oi,p$:()=>ni,Nj:()=>ai,ZP:()=>Os,x9:()=>hi,Rm:()=>St,XH:()=>li,r:()=>ci,Lw:()=>ui,ku:()=>di,a2:()=>pi,vn:()=>fi,wx:()=>gi,zL:()=>_i,t_:()=>vi,os:()=>mi,bt:()=>bi,WJ:()=>Zi,wK:()=>Ci,XG:()=>yi,Dt:()=>Pi,mL:()=>Ei,kJ:()=>Oi,dB:()=>Si,oG:()=>xi,EE:()=>wi,oP:()=>Ti,K9:()=>Mi,UG:()=>Ni,hj:()=>Ri,Kn:()=>Ai,EJ:()=>Di,HD:()=>Li,b1:()=>ki,iI:()=>Bi,n2:()=>Ii,E:()=>Yi,Ju:()=>ji,XP:()=>Xi,TS:()=>Ui,ZL:()=>Fi,DG:()=>xt,od:()=>Ge,bU:()=>Ji,ui:()=>Gi,yt:()=>zi,aC:()=>Hi,sL:()=>Wi,xC:()=>Vi,OK:()=>qi,OW:()=>Ki,KJ:()=>$i,dq:()=>Qi,CO:()=>ts,tu:()=>es,KW:()=>rs,uh:()=>ss,cE:()=>is,jW:()=>os,Xl:()=>ns,uw:()=>as,Fm:()=>hs,kK:()=>ls,n:()=>cs,SJ:()=>us,LF:()=>ds,J6:()=>ps,FH:()=>fs,Ls:()=>_s,au:()=>gs,A8:()=>vs,_V:()=>ms,$G:()=>bs,Uo:()=>Zs,Nb:()=>Cs,zz:()=>ys,W6:()=>Ps,ZK:()=>Es});var u=__webpack_require__(765),N=__webpack_require__(503),x=__webpack_require__(351),a=__webpack_require__(109);u.Z.XML={cleanWhitespace:function(t){for(var e=t.firstChild;a.Z.exists(e);)e.nodeType!==3||/\S/.test(e.nodeValue)?e.nodeType===1&&this.cleanWhitespace(e):t.removeChild(e),e=e.nextSibling},parse:function(t){var e,o;return o=typeof DOMParser=="function"||typeof DOMParser=="object"?DOMParser:function(){this.parseFromString=function(s){var n;return typeof ActiveXObject=="function"&&(n=new ActiveXObject("MSXML.DomDocument")).loadXML(s),n}},e=new o().parseFromString(t,"text/xml"),this.cleanWhitespace(e),e}},u.Z.XML;var X=__webpack_require__(88),B=(__webpack_require__(421),__webpack_require__(275));B.Z.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2461969814735305e-25,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(t,e){var o,s,n,h;return t=Math.abs(t),e<0&&(t=-t),o=(n=this.MINV*Math.floor(this.M*t+.5))*n,s=2*n*(h=t-n)+h*h,e<0&&(o=-o,s=-s),o+s>this.MAXLOG?1/0:o=Math.exp(o)*Math.exp(s)},polevl:function(t,e,o){var s,n;if(a.Z.exists(e.reduce))return e.reduce(function(h,l){return h*t+l},0);for(n=0,s=0;n<=o;n++)s=s*t+e[n];return s},p1evl:function(t,e,o){var s,n;if(a.Z.exists(e.reduce))return e.reduce(function(h,l){return h*t+l},1);for(n=0,s=1;n<o;n++)s=s*t+e[n];return s},ndtr:function(t){var e,o,s;return e=t*this.SQRTH,(s=Math.abs(e))<1?o=.5+.5*this.erf(e):(o=.5*this.erfce(s),s=this.expx2(t,-1),o*=Math.sqrt(s),e>0&&(o=1-o)),o},_underflow:function(t){return console.log("erfc","UNDERFLOW"),t<0?2:0},erfc:function(t){var e,o,s,n,h;return(s=t<0?-t:t)<1?1-this.erf(t):(h=-t*t)<-this.MAXLOG?this._underflow(t):(h=this.expx2(t,-1),s<8?(e=this.polevl(s,this.P,8),o=this.p1evl(s,this.Q,8)):(e=this.polevl(s,this.R,5),o=this.p1evl(s,this.S,6)),n=h*e/o,t<0&&(n=2-n),n===0?this._underflow(t):n)},erfce:function(t){var e,o;return t<8?(e=this.polevl(t,this.P,8),o=this.p1evl(t,this.Q,8)):(e=this.polevl(t,this.R,5),o=this.p1evl(t,this.S,6)),e/o},erf:function(t){var e;return Math.abs(t)>1?1-this.erfc(t):(e=t*t,t*this.polevl(e,this.T,4)/this.p1evl(e,this.U,5))},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,.00030158155350823543,26580697468673755e-22,6239745391849833e-24],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,.00032801446468212774,28924786474538068e-22,6790194080099813e-24],ndtri:function(t){var e,o,s,n,h;return t<=0?-1/0:t>=1?1/0:(h=1,(o=t)>.8646647167633873&&(o=1-o,h=0),o>.1353352832366127?(e=(o-=.5)+o*((n=o*o)*this.polevl(n,this.P0,4)/this.p1evl(n,this.Q0,8)),e*=this.s2pi):(s=1/(e=Math.sqrt(-2*Math.log(o))),e=e-Math.log(e)/e-(e<8?s*this.polevl(s,this.P1,8)/this.p1evl(s,this.Q1,8):s*this.polevl(s,this.P2,8)/this.p1evl(s,this.Q2,8)),h!==0&&(e=-e),e))},erfi:function(t){return this.ndtri(.5*(t+1))*this.SQRTH}},B.Z.ProbFuncs;var R=__webpack_require__(785);B.Z.Extrapolate={upper:15,infty:1e4,wynnEps:function(t,e,o){var s,n,h,l,p;if(o[e]=t,e===0)p=t;else{for(h=0,s=e;s>0;s--)n=h,h=o[s-1],l=o[s]-h,Math.abs(l)<=1e-15?o[s-1]=1e20:o[s-1]=1*n+1/l;p=o[e%2]}return p},aitken:function(t,e,o){var s,n,h,l,p,d;if(o[e]=t,e<2)s=t;else{for(l=e/2,p=1;p<=l;p++)n=o[(d=e-2*p)+2]-2*o[d+1]+o[d],Math.abs(n)<1e-15?o[d]=1e20:(h=o[d]-o[d+1],o[d]-=h*h/n);s=o[e%2]}return s},brezinski:function(t,e,o){var s,n,h,l,p,d,Z,C;if(o[e]=t,e<3)s=t;else{for(d=e/3,C=e,Z=1;Z<=d;Z++)h=o[(C-=3)+1]-o[C],l=o[C+2]-o[C+1],n=(p=o[C+3]-o[C+2])*(l-h)-h*(p-l),Math.abs(n)<1e-15?o[C]=1e20:o[C]=o[C+1]-h*l*(p-l)/n;s=o[e%3]}return s},iteration:function(t,e,o,s,n){var h,l,p,d,Z=NaN,C=[],P="finite",S=e;for(n=n||0,h=1;h<=this.upper;h++){if(l=o(t+(S=n===0?e/(h+1):.5*S),!0),p=this[s](l,h-1,C),isNaN(p)){P="NaN";break}if(l!==0&&p/l>this.infty){Z=p,P="infinite";break}if(d=p-Z,Math.abs(d)<1e-7)break;Z=p}return[Z,P,1-(h-1)/this.upper]},levin:function(t,e,o,s,n,h){var l,p,d,Z;if(Z=1/(s+e),n[e]=t/o,h[e]=1/o,e>0&&(n[e-1]=n[e]-n[e-1],h[e-1]=h[e]-h[e-1],e>1))for(d=(s+e-1)*Z,l=2;l<=e;l++)p=(s+e-l)*Math.pow(d,l-2)*Z,n[e-l]=n[e-l+1]-p*n[e-l],h[e-l]=h[e-l+1]-p*h[e-l],Z*=d;return Math.abs(h[0])<1e-15?1e20:n[0]/h[0]},iteration_levin:function(t,e,o,s){var n,h,l,p,d,Z,C,P=NaN,S=[],w=[],D="finite",k=e;for(s=s||0,p=o(t+e,!0),n=1;n<=this.upper;n++){if(d=(h=o(t+(k=s===0?e/(n+1):.5*k),!0))-p,C=(Math.abs(d)<1?"u":"t")=="u"?(1+n)*d:d,p=h,Z=(l=this.levin(h,n-1,C,1,S,w))-P,isNaN(l)){D="NaN";break}if(h!==0&&l/h>this.infty){P=l,D="infinite";break}if(Math.abs(Z)<1e-7)break;P=l}return[P,D,1-(n-1)/this.upper]},limit:function(t,e,o){return this.iteration_levin(t,e,o,0)}};const A=B.Z.Extrapolate;B.Z.Quadtree=function(t){this.capacity=10,this.points=[],this.xlb=t[0],this.xub=t[2],this.ylb=t[3],this.yub=t[1],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null},a.Z.extend(B.Z.Quadtree.prototype,{contains:function(t,e){return this.xlb<t&&t<=this.xub&&this.ylb<e&&e<=this.yub},insert:function(t){return!!this.contains(t.usrCoords[1],t.usrCoords[2])&&(this.points.length<this.capacity?(this.points.push(t),!0):(this.northWest===null&&this.subdivide(),!!this.northWest.insert(t)||!!this.northEast.insert(t)||!!this.southEast.insert(t)||!!this.southWest.insert(t)))},subdivide:function(){var t,e=this.points.length,o=this.xlb+(this.xub-this.xlb)/2,s=this.ylb+(this.yub-this.ylb)/2;for(this.northWest=new B.Z.Quadtree([this.xlb,this.yub,o,s]),this.northEast=new B.Z.Quadtree([o,this.yub,this.xub,s]),this.southEast=new B.Z.Quadtree([this.xlb,s,o,this.ylb]),this.southWest=new B.Z.Quadtree([o,s,this.xub,this.ylb]),t=0;t<e;t+=1)this.northWest.insert(this.points[t]),this.northEast.insert(this.points[t]),this.southEast.insert(this.points[t]),this.southWest.insert(this.points[t])},_query:function(t,e){var o;if(this.contains(t,e)){if(this.northWest===null)return this;if((o=this.northWest._query(t,e))||(o=this.northEast._query(t,e))||(o=this.southEast._query(t,e))||(o=this.southWest._query(t,e)))return o}return!1},query:function(t,e){var o,s;return a.Z.exists(e)?(o=t,s=e):(o=t.usrCoords[1],s=t.usrCoords[2]),this._query(o,s)}});const O=B.Z.Quadtree;var c=__webpack_require__(336);u.Z.Math.Nlp={arr:function(t){return new Float64Array(t)},arr2:function(t,e){for(var o=0,s=new Array(t);o<t;)s[o]=this.arr(e),o++;return s},arraycopy:function(t,e,o,s,n){for(var h=0;h<n;)o[h+s]=t[h+e],h++},lastNumberOfEvaluations:0,GetLastNumberOfEvaluations:function(){return this.lastNumberOfEvaluations},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(t,e,o,s,n,h,l,p,d){var Z,C,P=o+2,S=this.arr(e+1),w=this;return this.lastNumberOfEvaluations=0,d&&console.log("Experimental feature 'testForRoundingErrors' is activated."),S[0]=0,this.arraycopy(s,0,S,1,e),C=function(D,k,I,U){var J,z,V=w.arr(D);return w.lastNumberOfEvaluations=w.lastNumberOfEvaluations+1,w.arraycopy(I,1,V,0,D),J=w.arr(k),z=t(D,k,V,J),w.arraycopy(J,0,U,1,k),z},Z=this.cobylb(C,e,o,P,S,n,h,l,p,d),this.arraycopy(S,1,s,0,e),Z},cobylb:function(t,e,o,s,n,h,l,p,d,Z){var C,P,S,w,D,k,I,U,J,z,V,W,$,nt,et,lt,ot,gt,vt,Tt,Rt,kt,Ft,te,qt,Pt,yt,mt,bt,pt=-1,At=0,zt=0,ft=e+1,wt=o+1,Ot=h,Lt=0,Wt=!1,Vt=!1,jt=0,It=0,Et=0,ee=this.arr(1+s),Jt=this.arr2(1+e,1+ft),Kt=this.arr2(1+e,1+e),Yt=this.arr2(1+s,1+ft),Je=this.arr2(1+e,1+wt),me=this.arr(1+e),Ne=this.arr(1+e),Ke=this.arr(1+e),ie=this.arr(1+e),$e=this.arr(1+e);for(p>=2&&console.log("The initial value of RHO is "+Ot+" and PARMU is set to zero."),U=0,k=1/Ot,P=1;P<=e;++P)Jt[P][ft]=n[P],Jt[P][P]=Ot,Kt[P][P]=k;J=ft,z=!1;t:for(;;){if(U>=d&&U>0){pt=this.MaxIterationsReached;break t}for(++U,At=t(e,o,n,ee),zt=0,w=1;w<=o;++w)zt=Math.max(zt,-ee[w]);if(U!==p-1&&p!==3||this.PrintIterationResult(U,At,zt,n,e,p),ee[wt]=At,ee[s]=zt,V=!0,!z){for(V=!1,P=1;P<=s;++P)Yt[P][J]=ee[P];if(U<=ft){if(J<=e)if(Yt[wt][ft]<=At)n[J]=Jt[J][ft];else{for(Jt[J][ft]=n[J],w=1;w<=s;++w)Yt[w][J]=Yt[w][ft],Yt[w][ft]=ee[w];for(w=1;w<=J;++w){for(Jt[J][w]=-Ot,k=0,P=w;P<=J;++P)k-=Kt[P][w];Kt[J][w]=k}}if(U<=e){n[J=U]+=Ot;continue t}}z=!0}e:for(;;){i:do{if(!V){for(W=Yt[wt][ft]+Lt*Yt[s][ft],$=ft,S=1;S<=e;++S)(k=Yt[wt][S]+Lt*Yt[s][S])<W?($=S,W=k):k===W&&Lt===0&&Yt[s][S]<Yt[s][$]&&($=S);if($<=e){for(P=1;P<=s;++P)k=Yt[P][ft],Yt[P][ft]=Yt[P][$],Yt[P][$]=k;for(P=1;P<=e;++P){for(k=Jt[P][$],Jt[P][$]=0,Jt[P][ft]+=k,I=0,w=1;w<=e;++w)Jt[P][w]-=k,I-=Kt[w][P];Kt[$][P]=I}}if(nt=0,Z)for(P=1;P<=e;++P)for(S=1;S<=e;++S)k=this.DOT_PRODUCT_ROW_COL(Kt,P,Jt,S,1,e)-(P===S?1:0),nt=Math.max(nt,Math.abs(k));if(nt>.1){pt=this.DivergingRoundingErrors;break t}for(w=1;w<=wt;++w){for(ee[w]=-Yt[w][ft],S=1;S<=e;++S)$e[S]=Yt[w][S]+ee[w];for(P=1;P<=e;++P)Je[P][w]=(w===wt?-1:1)*this.DOT_PRODUCT_ROW_COL($e,-1,Kt,P,1,e)}for(Wt=!0,jt=.25*Ot,et=2.1*Ot,S=1;S<=e;++S){for(lt=0,ot=0,w=1;w<=e;++w)lt+=Kt[S][w]*Kt[S][w],ot+=Jt[w][S]*Jt[w][S];me[S]=1/Math.sqrt(lt),Ne[S]=Math.sqrt(ot),(me[S]<jt||Ne[S]>et)&&(Wt=!1)}if(!z&&!Wt){for(J=0,k=et,S=1;S<=e;++S)Ne[S]>k&&(J=S,k=Ne[S]);if(J===0)for(S=1;S<=e;++S)me[S]<k&&(J=S,k=me[S]);for(k=.5*Ot*me[J],w=1;w<=e;++w)ie[w]=k*Kt[J][w];for(gt=0,vt=0,C=0,w=1;w<=wt;++w)C=this.DOT_PRODUCT_ROW_COL(ie,-1,Je,w,1,e),w<wt&&(k=Yt[w][ft],gt=Math.max(gt,-C-k),vt=Math.max(vt,C-k));for(Tt=Lt*(gt-vt)>2*C?-1:1,k=0,P=1;P<=e;++P)ie[P]=Tt*ie[P],Jt[P][J]=ie[P],k+=Kt[J][P]*ie[P];for(w=1;w<=e;++w)Kt[J][w]/=k;for(S=1;S<=e;++S){if(S!==J)for(k=this.DOT_PRODUCT_ROW_COL(Kt,S,ie,-1,1,e),w=1;w<=e;++w)Kt[S][w]-=k*Kt[J][w];n[S]=Jt[S][ft]+ie[S]}continue t}if(!(Vt=this.trstlp(e,o,Je,ee,Ot,ie))){for(k=0,w=1;w<=e;++w)k+=ie[w]*ie[w];if(k<.25*Ot*Ot){z=!0;break i}}for(C=0,Rt=0,ee[wt]=0,w=1;w<=wt;++w)C=ee[w]-this.DOT_PRODUCT_ROW_COL(ie,-1,Je,w,1,e),w<wt&&(Rt=Math.max(Rt,C));if(Lt<1.5*(kt=(It=Yt[s][ft]-Rt)>0?C/It:0)){for(Lt=2*kt,p>=2&&console.log("Increase in PARMU to "+Lt),Ft=Yt[wt][ft]+Lt*Yt[s][ft],S=1;S<=e;++S)if((k=Yt[wt][S]+Lt*Yt[s][S])<Ft||k===Ft&&Lt===0&&Yt[s][S]<Yt[s][ft])continue e}for(Et=Lt*It-C,w=1;w<=e;++w)n[w]=Jt[w][ft]+ie[w];z=!0;continue t}for(V=!1,te=Yt[wt][ft]+Lt*Yt[s][ft]-(At+Lt*zt),Lt===0&&At===Yt[wt][ft]&&(Et=It,te=Yt[s][ft]-zt),qt=te<=0?1:0,J=0,S=1;S<=e;++S)(k=Math.abs(this.DOT_PRODUCT_ROW_COL(Kt,S,ie,-1,1,e)))>qt&&(J=S,qt=k),Ke[S]=k*me[S];for(Pt=1.1*Ot,D=0,S=1;S<=e;++S)if(Ke[S]>=jt||Ke[S]>=me[S]){if(k=Ne[S],te>0){for(k=0,w=1;w<=e;++w)k+=Math.pow(ie[w]-Jt[w][S],2);k=Math.sqrt(k)}k>Pt&&(D=S,Pt=k)}if(D>0&&(J=D),J!==0){for(k=0,P=1;P<=e;++P)Jt[P][J]=ie[P],k+=Kt[J][P]*ie[P];for(w=1;w<=e;++w)Kt[J][w]/=k;for(S=1;S<=e;++S)if(S!==J)for(k=this.DOT_PRODUCT_ROW_COL(Kt,S,ie,-1,1,e),w=1;w<=e;++w)Kt[S][w]-=k*Kt[J][w];for(w=1;w<=s;++w)Yt[w][J]=ee[w];if(te>0&&te>=.1*Et)continue e}}while(0);if(Wt){if(Ot<=l){pt=this.Normal;break t}if(yt=0,mt=0,(Ot*=.5)<=1.5*l&&(Ot=l),Lt>0){for(bt=0,w=1;w<=wt;++w){for(mt=yt=Yt[w][ft],P=1;P<=e;++P)yt=Math.min(yt,Yt[w][P]),mt=Math.max(mt,Yt[w][P]);w<=o&&yt<.5*mt&&(k=Math.max(mt,0)-yt,bt=bt<=0?k:Math.min(bt,k))}bt===0?Lt=0:mt-yt<Lt*bt&&(Lt=(mt-yt)/bt)}p>=2&&console.log("Reduction in RHO to "+Ot+"  and PARMU = "+Lt),p===2&&this.PrintIterationResult(U,Yt[wt][ft],Yt[s][ft],this.COL(Jt,ft),e,p)}else z=!1}}switch(pt){case this.Normal:if(p>=1&&console.log("%nNormal return from subroutine COBYLA%n"),Vt)return p>=1&&this.PrintIterationResult(U,At,zt,n,e,p),pt;break;case this.MaxIterationsReached:p>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:p>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n")}for(w=1;w<=e;++w)n[w]=Jt[w][ft];return At=Yt[wt][ft],zt=Yt[s][ft],p>=1&&this.PrintIterationResult(U,At,zt,n,e,p),pt},trstlp:function(t,e,o,s,n,h){var l,p,d,Z,C,P,S,w,D,k,I,U,J,z,V,W,$,nt,et,lt,ot,gt,vt,Tt,Rt,kt,Ft,te,qt,Pt,yt,mt,bt,pt=0,At=0,zt=0,ft=this.arr2(1+t,1+t),wt=this.arr(2+e),Ot=this.arr(2+e),Lt=this.arr(1+t),Wt=this.arr(1+t),Vt=this.arr(2+e),jt=this.arr(2+e),It=e,Et=0;for(d=1;d<=t;++d)ft[d][d]=1,h[d]=0;if(l=0,p=0,e>=1){for(Z=1;Z<=e;++Z)s[Z]>p&&(p=s[Z],l=Z);for(Z=1;Z<=e;++Z)jt[Z]=Z,Ot[Z]=p-s[Z]}C=!0;do t:for(;;){(!C||C&&p===0)&&(l=It=e+1,jt[It]=It,Ot[It]=0),C=!1,P=0,S=0,w=0,D=0;e:do{if(k=It===e?p:-this.DOT_PRODUCT_ROW_COL(h,-1,o,It,1,t),S===0||k<P?(P=k,At=Et,S=3):Et>At?(At=Et,S=3):--S,S===0)break t;if(I=0,l<=Et){if(l<Et){U=jt[l],J=Ot[l],Z=l;do{for(W=jt[V=Z+1],$=this.DOT_PRODUCT(this.PART(this.COL(ft,Z),1,t),this.PART(this.COL(o,W),1,t)),pt=Math.sqrt($*$+wt[V]*wt[V]),nt=wt[V]/pt,et=$/pt,wt[V]=nt*wt[Z],wt[Z]=pt,d=1;d<=t;++d)pt=nt*ft[d][V]+et*ft[d][Z],ft[d][V]=nt*ft[d][Z]-et*ft[d][V],ft[d][Z]=pt;jt[Z]=W,Ot[Z]=Ot[V],Z=V}while(Z<Et);jt[Z]=U,Ot[Z]=J}if(--Et,It>e)for(pt=1/wt[Et],Z=1;Z<=t;++Z)Lt[Z]=pt*ft[Z][Et];else for(pt=this.DOT_PRODUCT_ROW_COL(Lt,-1,ft,Et+1,1,t),Z=1;Z<=t;++Z)Lt[Z]-=pt*ft[Z][Et+1]}else{for(W=jt[l],Z=1;Z<=t;++Z)Wt[Z]=o[Z][W];for(lt=0,Z=t;Z>Et;){for($=0,ot=0,d=1;d<=t;++d)$+=pt=ft[d][Z]*Wt[d],ot+=Math.abs(pt);if(gt=ot+.1*Math.abs($),vt=ot+.2*Math.abs($),(ot>=gt||gt>=vt)&&($=0),lt===0)lt=$;else for(V=Z+1,nt=$/(pt=Math.sqrt($*$+lt*lt)),et=lt/pt,lt=pt,d=1;d<=t;++d)pt=nt*ft[d][Z]+et*ft[d][V],ft[d][V]=nt*ft[d][V]-et*ft[d][Z],ft[d][Z]=pt;--Z}if(lt===0){I=-1,Z=Et;do{for(Tt=0,Rt=0,d=1;d<=t;++d)Tt+=pt=ft[d][Z]*Wt[d],Rt+=Math.abs(pt);if(gt=Rt+.1*Math.abs(Tt),vt=Rt+.2*Math.abs(Tt),Rt<gt&&gt<vt){if((pt=Tt/wt[Z])>0&&jt[Z]<=e&&(bt=Ot[Z]/pt,(I<0||bt<I)&&(I=bt)),Z>=2)for(kt=jt[Z],d=1;d<=t;++d)Wt[d]-=pt*o[d][kt];Vt[Z]=pt}else Vt[Z]=0}while(--Z>0);if(I<0)break t;for(Z=1;Z<=Et;++Z)Ot[Z]=Math.max(0,Ot[Z]-I*Vt[Z]);if(l<Et){U=jt[l],J=Ot[l],Z=l;do{for(kt=jt[V=Z+1],$=this.DOT_PRODUCT(this.PART(this.COL(ft,Z),1,t),this.PART(this.COL(o,kt),1,t)),pt=Math.sqrt($*$+wt[V]*wt[V]),nt=wt[V]/pt,et=$/pt,wt[V]=nt*wt[Z],wt[Z]=pt,d=1;d<=t;++d)pt=nt*ft[d][V]+et*ft[d][Z],ft[d][V]=nt*ft[d][Z]-et*ft[d][V],ft[d][Z]=pt;jt[Z]=kt,Ot[Z]=Ot[V],Z=V}while(Z<Et);jt[Z]=U,Ot[Z]=J}if((pt=this.DOT_PRODUCT(this.PART(this.COL(ft,Et),1,t),this.PART(this.COL(o,W),1,t)))===0)break t;wt[Et]=pt,Ot[l]=0,Ot[Et]=I}else wt[++Et]=lt,Ot[l]=Ot[Et],Ot[Et]=0;if(jt[l]=jt[Et],jt[Et]=W,It>e&&W!==It){for(Z=Et-1,$=this.DOT_PRODUCT(this.PART(this.COL(ft,Z),1,t),this.PART(this.COL(o,W),1,t)),pt=Math.sqrt($*$+wt[Et]*wt[Et]),nt=wt[Et]/pt,et=$/pt,wt[Et]=nt*wt[Z],wt[Z]=pt,d=1;d<=t;++d)pt=nt*ft[d][Et]+et*ft[d][Z],ft[d][Et]=nt*ft[d][Z]-et*ft[d][Et],ft[d][Z]=pt;jt[Et]=jt[Z],jt[Z]=W,pt=Ot[Z],Ot[Z]=Ot[Et],Ot[Et]=pt}if(It>e)for(pt=1/wt[Et],Z=1;Z<=t;++Z)Lt[Z]=pt*ft[Z][Et];else for(W=jt[Et],pt=(this.DOT_PRODUCT_ROW_COL(Lt,-1,o,W,1,t)-1)/wt[Et],Z=1;Z<=t;++Z)Lt[Z]-=pt*ft[Z][Et]}for(Ft=n*n,qt=0,te=0,d=1;d<=t;++d)Math.abs(h[d])>=1e-6*n&&(Ft-=h[d]*h[d]),qt+=h[d]*Lt[d],te+=Lt[d]*Lt[d];if(Ft<=0)break t;if(pt=Math.sqrt(te*Ft),Math.abs(qt)>=1e-6*pt&&(pt=Math.sqrt(te*Ft+qt*qt)),w=D=Ft/(pt+qt),It===e){if(vt=w+.2*p,w>=(gt=w+.1*p)||gt>=vt)break e;w=Math.min(w,p)}for(Z=1;Z<=t;++Z)Wt[Z]=h[Z]+w*Lt[Z];if(It===e)for(zt=p,p=0,Z=1;Z<=Et;++Z)pt=s[W=jt[Z]]-this.DOT_PRODUCT_ROW_COL(Wt,-1,o,W,1,t),p=Math.max(p,pt);Z=Et;do{for(Pt=0,yt=0,d=1;d<=t;++d)Pt+=pt=ft[d][Z]*Wt[d],yt+=Math.abs(pt);if(gt=yt+.1*Math.abs(Pt),vt=yt+.2*Math.abs(Pt),(yt>=gt||gt>=vt)&&(Pt=0),Vt[Z]=Pt/wt[Z],Z>=2)for(W=jt[Z],d=1;d<=t;++d)Wt[d]-=Vt[Z]*o[d][W]}while(Z-->=2);for(It>e&&(Vt[Et]=Math.max(0,Vt[Et])),Z=1;Z<=t;++Z)Wt[Z]=h[Z]+w*Lt[Z];if(It>Et)for(Z=Et+1;Z<=It;++Z){for(z=p-s[W=jt[Z]],mt=p+Math.abs(s[W]),d=1;d<=t;++d)z+=pt=o[d][W]*Wt[d],mt+=Math.abs(pt);gt=mt+.1*Math.abs(z),vt=mt+.2*Math.abs(z),(mt>=gt||gt>=vt)&&(z=0),Vt[Z]=z}for(I=1,l=0,Z=1;Z<=It;++Z)Vt[Z]<0&&(pt=Ot[Z]/(Ot[Z]-Vt[Z]))<I&&(I=pt,l=Z);for(pt=1-I,Z=1;Z<=t;++Z)h[Z]=pt*h[Z]+I*Wt[Z];for(Z=1;Z<=It;++Z)Ot[Z]=Math.max(0,pt*Ot[Z]+I*Vt[Z]);It===e&&(p=zt+I*(p-zt))}while(l>0);if(w===D)return!0}while(It===e);return!1},PrintIterationResult:function(t,e,o,s,n,h){h>1&&console.log("NFVALS = "+t+"  F = "+e+"  MAXCV = "+o),h>1&&console.log("X = "+this.PART(s,1,n))},ROW:function(t,e){return t[e].slice()},COL:function(t,e){var o,s=t.length,n=[];for(o=0;o<s;++o)n[o]=t[o][e];return n},PART:function(t,e,o){return t.slice(e,o+1)},FORMAT:function(t){return t.join(",")},DOT_PRODUCT:function(t,e){var o,s=0,n=t.length;for(o=0;o<n;++o)s+=t[o]*e[o];return s},DOT_PRODUCT_ROW_COL:function(t,e,o,s,n,h){var l,p=0;if(e===-1)for(l=n;l<=h;++l)p+=t[l]*o[l][s];else if(s===-1)for(l=n;l<=h;++l)p+=t[e][l]*o[l];else for(l=n;l<=h;++l)p+=t[e][l]*o[l][s];return p}},u.Z.Math.Nlp;var b=__webpack_require__(705),m=__webpack_require__(309),g=__webpack_require__(922);B.Z.Plot={checkReal:function(t){var e,o,s=!1,n=t.length;for(e=0;e<n;e++)if(o=t[e].usrCoords,!isNaN(o[1])&&!isNaN(o[2])&&Math.abs(o[0])>B.Z.eps){s=!0;break}return s},updateParametricCurveNaive:function(t,e,o,s){var n,h,l=!1,p=(o-e)/s;for(n=0;n<s;n++)h=e+n*p,t.points[n].setCoordinates(x.Z.COORDS_BY_USER,[t.X(h,l),t.Y(h,l)],!1),t.points[n]._t=h,l=!0;return t},isSegmentOutside:function(t,e,o,s,n){return e<0&&s<0||e>n.canvasHeight&&s>n.canvasHeight||t<0&&o<0||t>n.canvasWidth&&o>n.canvasWidth},isDistOK:function(t,e,o,s){return Math.abs(t)<o&&Math.abs(e)<s&&!isNaN(t+e)},isSegmentDefined:function(t,e,o,s){return!(isNaN(t+e)&&isNaN(o+s))},updateParametricCurveOld:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D=!1,k=new b.Z(x.Z.COORDS_BY_USER,[0,0],t.board,!1),I=[],U=[],J=[],z=[],V=!1,W=0,$=function(nt,et,lt){var ot,gt,vt=lt[1]-nt[1],Tt=lt[2]-nt[2],Rt=et[0]-nt[1],kt=et[1]-nt[2],Ft=Rt*Rt+kt*kt;return Ft>=B.Z.eps&&(ot=(vt*Rt+Tt*kt)/Ft)>0&&(ot<=1?(vt-=ot*Rt,Tt-=ot*kt):(vt-=Rt,Tt-=kt)),gt=vt*vt+Tt*Tt,Math.sqrt(gt)};for(u.Z.deprecated("Curve.updateParametricCurveOld()"),t.board.updateQuality===t.board.BOARD_QUALITY_LOW?(P=15,S=10,w=10):(P=21,S=.7,w=.7),z[0]=o-e,s=1;s<P;s++)z[s]=.5*z[s-1];s=1,I[0]=1,U[0]=0,n=e,k.setCoordinates(x.Z.COORDS_BY_USER,[t.X(n,D),t.Y(n,D)],!1),D=!0,p=k.scrCoords[1],d=k.scrCoords[2],n=o,k.setCoordinates(x.Z.COORDS_BY_USER,[t.X(n,D),t.Y(n,D)],!1),h=k.scrCoords[1],l=k.scrCoords[2],J[0]=[h,l],Z=1,C=0,t.points=[],t.points[W++]=new b.Z(x.Z.COORDS_BY_SCREEN,[p,d],t.board,!1);do{for(V=this.isDistOK(h-p,l-d,S,w)||this.isSegmentOutside(p,d,h,l,t.board);C<P&&(!V||C<6)&&(C<=7||this.isSegmentDefined(p,d,h,l));)I[Z]=s,U[Z]=C,J[Z]=[h,l],Z+=1,n=e+(s=2*s-1)*z[++C],k.setCoordinates(x.Z.COORDS_BY_USER,[t.X(n,D),t.Y(n,D)],!1,!0),h=k.scrCoords[1],l=k.scrCoords[2],V=this.isDistOK(h-p,l-d,S,w)||this.isSegmentOutside(p,d,h,l,t.board);W>1&&$(t.points[W-2].scrCoords,[h,l],t.points[W-1].scrCoords)<.015&&(W-=1),t.points[W]=new b.Z(x.Z.COORDS_BY_SCREEN,[h,l],t.board,!1),t.points[W]._t=n,W+=1,p=h,d=l,h=J[Z-=1][0],l=J[Z][1],C=U[Z]+1,s=2*I[Z]}while(Z>0&&W<5e5);return t.numberPoints=t.points.length,t},_insertPoint_v2:function(t,e,o){var s=!isNaN(this._lastCrds[1]+this._lastCrds[2]),n=!isNaN(e.scrCoords[1]+e.scrCoords[2]),h=t.board.canvasWidth,l=t.board.canvasHeight,p=500;(!(n=n&&e.scrCoords[1]>-500&&e.scrCoords[2]>-500&&e.scrCoords[1]<h+p&&e.scrCoords[2]<l+p)&&s||n&&(!s||Math.abs(e.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(e.scrCoords[2]-this._lastCrds[2])>.7))&&(e._t=o,t.points.push(e),this._lastCrds=e.copy("scrCoords"))},neighborhood_isNaN_v2:function(t,e){var o,s,n=new b.Z(x.Z.COORDS_BY_USER,[0,0],t.board,!1);return o=e+B.Z.eps,n.setCoordinates(x.Z.COORDS_BY_USER,[t.X(o,!0),t.Y(o,!0)],!1),s=n.usrCoords,!!(isNaN(s[1]+s[2])||(o=e-B.Z.eps,n.setCoordinates(x.Z.COORDS_BY_USER,[t.X(o,!0),t.Y(o,!0)],!1),s=n.usrCoords,isNaN(s[1]+s[2])))},_borderCase:function(t,e,o,s,n,h,l,p){var d,Z,C,P,S,w,D,k=null,I=!1;if(p<=1){if(Z=new b.Z(x.Z.COORDS_BY_USER,[0,0],t.board,!1),isNaN(e[1]+e[2])&&!isNaN(s[1]+s[2])&&!this.neighborhood_isNaN_v2(t,n)||isNaN(o[1]+o[2])&&!isNaN(s[1]+s[2])&&!this.neighborhood_isNaN_v2(t,h)||isNaN(s[1]+s[2])&&(!isNaN(e[1]+e[2])||!isNaN(o[1]+o[2]))&&!this.neighborhood_isNaN_v2(t,l))return!1;P=0;do{if(isNaN(e[1]+e[2])&&!isNaN(s[1]+s[2]))S=n,w=l,D=h;else if(isNaN(o[1]+o[2])&&!isNaN(s[1]+s[2]))S=h,w=l,D=n;else if(isNaN(s[1]+s[2])&&!isNaN(o[1]+o[2]))S=l,w=h,D=h+(h-l);else{if(!isNaN(s[1]+s[2])||isNaN(e[1]+e[2]))return!1;S=l,w=n,D=n-(l-n)}d=.5*(S+w),Z.setCoordinates(x.Z.COORDS_BY_USER,[t.X(d,!0),t.Y(d,!0)],!1),C=Z.usrCoords,(I=isNaN(C[1]+C[2]))?S=d:(D=w,w=d),++P}while(I&&P<30);if(P<30&&(k=C.slice(),s=C.slice(),w=d),(t.X(w,!0)-t.X(D,!0))/(w-D),(t.Y(w,!0)-t.Y(D,!0))/(w-D),k!==null)return this._insertPoint_v2(t,new b.Z(x.Z.COORDS_BY_USER,k,t.board,!1)),!0}return!1},_plotRecursive_v2:function(t,e,o,s,n,h,l){var p,d,Z,C,P,S=0,w=new b.Z(x.Z.COORDS_BY_USER,[0,0],t.board,!1);if(!(t.numberPoints>65536))return h<this.nanLevel&&this._isUndefined(t,e,o,s,n)||h<this.nanLevel&&this._isOutside(e,o,s,n,t.board)?this:(p=.5*(o+n),w.setCoordinates(x.Z.COORDS_BY_USER,[t.X(p,!0),t.Y(p,!0)],!1),d=w.scrCoords,this._borderCase(t,e,s,d,o,n,p,h)||(Z=this._triangleDists(e,s,d),C=h<this.smoothLevel&&Z[3]<l,P=h<this.jumpLevel&&(Z[2]>.99*Z[0]||Z[1]>.99*Z[0]||Z[0]===1/0||Z[1]===1/0||Z[2]===1/0),h<this.smoothLevel+2&&Z[0]<.5*(Z[1]+Z[2])&&(S=0,C=!1),--h,P?this._insertPoint_v2(t,new b.Z(x.Z.COORDS_BY_SCREEN,[NaN,NaN],t.board,!1),p):h<=S||C?this._insertPoint_v2(t,w,p):(this._plotRecursive_v2(t,e,o,d,p,h,l),isNaN(w.scrCoords[1]+w.scrCoords[2])||this._insertPoint_v2(t,w,p),this._plotRecursive_v2(t,d,p,s,n,h,l))),this)},updateParametricCurve_v2:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S=!1,w=new b.Z(x.Z.COORDS_BY_USER,[0,0],t.board,!1),D=new b.Z(x.Z.COORDS_BY_USER,[0,0],t.board,!1);return t.board.updateQuality===t.board.BOARD_QUALITY_LOW?(p=a.Z.evaluate(t.visProp.recursiondepthlow)||13,d=2,this.smoothLevel=p-6,this.jumpLevel=3):(p=a.Z.evaluate(t.visProp.recursiondepthhigh)||17,d=2,this.smoothLevel=p-9,this.jumpLevel=2),this.nanLevel=p-4,t.points=[],this.xterm==="x"?(Z=.3*((C=t.board.getBoundingBox())[2]-C[0]),.3*(C[1]-C[3]),s=Math.max(e,C[0]-Z),n=Math.min(o,C[2]+Z)):(s=e,n=o),w.setCoordinates(x.Z.COORDS_BY_USER,[t.X(s,S),t.Y(s,S)],!1),S=!0,D.setCoordinates(x.Z.COORDS_BY_USER,[t.X(n,S),t.Y(n,S)],!1),P=this._findStartPoint(t,w.scrCoords,s,D.scrCoords,n),w.setCoordinates(x.Z.COORDS_BY_SCREEN,P[0],!1),s=P[1],P=this._findStartPoint(t,D.scrCoords,n,w.scrCoords,s),D.setCoordinates(x.Z.COORDS_BY_SCREEN,P[0],!1),n=P[1],this._visibleArea=[s,n],h=w.copy("scrCoords"),l=D.copy("scrCoords"),w._t=s,t.points.push(w),this._lastCrds=w.copy("scrCoords"),this._plotRecursive_v2(t,h,s,l,n,p,d),D._t=n,t.points.push(D),t.numberPoints=t.points.length,t},_insertLimesPoint:function(t,e,o,s,n){var h,l,p;Math.abs(this._lastUsrCrds[1])===1/0&&Math.abs(n.left_x)===1/0||Math.abs(this._lastUsrCrds[2])===1/0&&Math.abs(n.left_y)===1/0||((h=new b.Z(x.Z.COORDS_BY_USER,[n.left_x,n.left_y],t.board))._t=o,t.points.push(h),isNaN(n.left_x)||isNaN(n.left_y)||isNaN(n.right_x)||isNaN(n.right_y)||!(Math.abs(n.left_x-n.right_x)>B.Z.eps||Math.abs(n.left_y-n.right_y)>B.Z.eps)||((l=new b.Z(x.Z.COORDS_BY_SCREEN,e,t.board))._t=o,t.points.push(l)),(p=new b.Z(x.Z.COORDS_BY_USER,[n.right_x,n.right_y],t.board))._t=o,t.points.push(p),this._lastScrCrds=p.copy("scrCoords"),this._lastUsrCrds=p.copy("usrCoords"))},_insertPoint:function(t,e,o,s,n){var h,l=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),p=!isNaN(e[1]+e[2]),d=t.board.canvasWidth,Z=t.board.canvasHeight,C=500;a.Z.exists(n)?this._insertLimesPoint(t,e,o,s,n):(p=p&&e[1]>-500&&e[2]>-500&&e[1]<d+C&&e[2]<Z+C,(l||p)&&(p&&l&&Math.abs(e[1]-this._lastScrCrds[1])<.8&&Math.abs(e[2]-this._lastScrCrds[2])<.8||Math.abs(e[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(e[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||((h=new b.Z(x.Z.COORDS_BY_SCREEN,e,t.board))._t=o,t.points.push(h),this._lastScrCrds=h.copy("scrCoords"),this._lastUsrCrds=h.copy("usrCoords"))))},_triangleDists:function(t,e,o){var s;return s=[t[0]*e[0],.5*(t[1]+e[1]),.5*(t[2]+e[2])],[g.Z.distance(t,e,3),g.Z.distance(t,o,3),g.Z.distance(o,e,3),g.Z.distance(o,s,3)]},_isUndefined:function(t,e,o,s,n){var h,l,p;if(!isNaN(e[1]+e[2])||!isNaN(s[1]+s[2]))return!1;for(p=new b.Z(x.Z.COORDS_BY_USER,[0,0],t.board,!1),l=0;l<20;++l)if(h=o+Math.random()*(n-o),p.setCoordinates(x.Z.COORDS_BY_USER,[t.X(h,!0),t.Y(h,!0)],!1),!isNaN(p.scrCoords[0]+p.scrCoords[1]+p.scrCoords[2]))return!1;return!0},_isOutside:function(t,e,o,s,n){var h=500,l=n.canvasWidth,p=n.canvasHeight;return t[1]<-500&&o[1]<-500||t[2]<-500&&o[2]<-500||t[1]>l+h&&o[1]>l+h||t[2]>p+h&&o[2]>p+h},_isOutsidePoint:function(t,e){var o=500,s=e.canvasWidth,n=e.canvasHeight;return t[1]<-500||t[2]<-500||t[1]>s+o||t[2]>n+o},_findStartPoint:function(t,e,o,s,n){return[e,o]},_getBorderPos:function(t,e,o,s,n,h,l){var p,d,Z,C,P,S;if(d=new b.Z(x.Z.COORDS_BY_USER,[0,0],t.board,!1),C=0,isNaN(o[1]+o[2])&&!isNaN(n[1]+n[2]))S=e,P=s;else if(isNaN(l[1]+l[2])&&!isNaN(n[1]+n[2]))S=h,P=s;else if(isNaN(n[1]+n[2])&&!isNaN(l[1]+l[2]))S=s,P=h;else{if(!isNaN(n[1]+n[2])||isNaN(o[1]+o[2]))return!1;S=s,P=e}do p=.5*(P+S),d.setCoordinates(x.Z.COORDS_BY_USER,[t.X(p,!0),t.Y(p,!0)],!1),Z=d.usrCoords,isNaN(Z[1]+Z[2])?S=p:P=p,++C;while(C<30&&Math.abs(P-S)>B.Z.eps);return p},_getCuspPos:function(t,e,o){var s=[t.X(e,!0),t.Y(e,!0)],n=[t.X(o,!0),t.Y(o,!0)];return c.Z.fminbr(function(h){var l=[t.X(h,!0),t.Y(h,!0)];return-(Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))+Math.sqrt((n[0]-l[0])*(n[0]-l[0])+(n[1]-l[1])*(n[1]-l[1])))},[e,o],t)},_getJumpPos:function(t,e,o){return c.Z.fminbr(function(s){var n=B.Z.eps*B.Z.eps,h=[t.X(s,!0),t.Y(s,!0)],l=[t.X(s+n,!0),t.Y(s+n,!0)];return-Math.abs((l[1]-h[1])/(l[0]-h[0]))},[e,o],t)},_getLimits:function(t,e){var o,s,n,h,l,p=2/(t.maxX()-t.minX());return s=(o=A.limit(e,-p,t.X))[0],o[1]==="infinite"&&(s=Math.sign(s)*(1/0)),h=(o=A.limit(e,-p,t.Y))[0],o[1]==="infinite"&&(h=Math.sign(h)*(1/0)),n=(o=A.limit(e,p,t.X))[0],o[1]==="infinite"&&(n=Math.sign(n)*(1/0)),l=(o=A.limit(e,p,t.Y))[0],o[1]==="infinite"&&(l=Math.sign(l)*(1/0)),{left_x:s,left_y:h,right_x:n,right_y:l,t:e}},_getLimes:function(t,e,o,s,n,h,l,p,d){var Z;return p==="border"?Z=this._getBorderPos(t,e,o,s,n,h,l):p==="cusp"?Z=this._getCuspPos(t,e,h):p==="jump"&&(Z=this._getJumpPos(t,e,h)),this._getLimits(t,Z)},_plotNonRecursive:function(t,e,o,s,n,h){var l,p,d,Z,C,P,S,w,D,k,I,U=null,J=!1,z="",V=[],W=0;for(w=t.board.origin.scrCoords,V[W++]=[e,o,s,n,h,1/0];W>0;){if(e=(I=V[--W])[0],o=I[1],s=I[2],n=I[3],D=I[4],k=I[5],J=!1,z="",U=null,t.points.length>65536)return;D<this.nanLevel&&(this._isUndefined(t,e,o,s,n)||this._isOutside(e,o,s,n,t.board))||(l=.5*(o+n),P=t.X(l,!0),S=t.Y(l,!0),p=[1,w[1]+P*t.board.unitX,w[2]-S*t.board.unitY],d=this._triangleDists(e,s,p),Z=isNaN(e[1]+e[2]),C=isNaN(s[1]+s[2]),Z&&!C||!Z&&C?z="border":d[0]>.66*k||d[0]<this.cusp_threshold*(d[1]+d[2])||d[1]>5*d[2]||d[2]>5*d[1]?z="cusp":(d[2]>this.jump_threshold*d[0]||d[1]>this.jump_threshold*d[0]||d[0]===1/0||d[1]===1/0||d[2]===1/0)&&(z="jump"),J=z===""&&D<this.smoothLevel&&d[3]<this.smooth_threshold,D<this.testLevel&&!J&&(z===""?J=!0:U=this._getLimes(t,o,e,l,p,n,s,z,D)),U!==null?(p=[1,NaN,NaN],this._insertPoint(t,p,l,D,U)):D<=0||J?this._insertPoint(t,p,l,D,null):(V[W++]=[p,l,s,n,D-1,d[0]],V[W++]=[e,o,p,l,D-1,d[0]]))}return this},updateParametricCurve_v3:function(t,e,o){var s,n,h,l,p,d,Z,C,P=!1,S=new b.Z(x.Z.COORDS_BY_USER,[0,0],t.board,!1),w=new b.Z(x.Z.COORDS_BY_USER,[0,0],t.board,!1);return p=t.board.updateQuality===t.board.BOARD_QUALITY_LOW?a.Z.evaluate(t.visProp.recursiondepthlow)||14:a.Z.evaluate(t.visProp.recursiondepthhigh)||17,this.smoothLevel=7,this.nanLevel=p-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,t.points=[],t.xterm==="x"?(d=.3*((Z=t.board.getBoundingBox())[2]-Z[0]),s=Math.max(e,Z[0]-d),n=Math.min(o,Z[2]+d)):(s=e,n=o),S.setCoordinates(x.Z.COORDS_BY_USER,[t.X(s,P),t.Y(s,P)],!1),P=!0,w.setCoordinates(x.Z.COORDS_BY_USER,[t.X(n,P),t.Y(n,P)],!1),C=this._findStartPoint(t,S.scrCoords,s,w.scrCoords,n),S.setCoordinates(x.Z.COORDS_BY_SCREEN,C[0],!1),s=C[1],C=this._findStartPoint(t,w.scrCoords,n,S.scrCoords,s),w.setCoordinates(x.Z.COORDS_BY_SCREEN,C[0],!1),n=C[1],this._visibleArea=[s,n],h=S.copy("scrCoords"),l=w.copy("scrCoords"),S._t=s,t.points.push(S),this._lastScrCrds=S.copy("scrCoords"),this._lastUsrCrds=S.copy("usrCoords"),this._plotNonRecursive(t,h,s,l,n,p),w._t=n,t.points.push(w),t.numberPoints=t.points.length,t},_criticalInterval:function(t,e,o){var s,n,h,l,p,d,Z,C=!1,P=-1/0,S=!1,w=!1,D=0,k=[],I=[],U=[];for(Z=m.Z.abs(t),(l=m.Z.median(Z))<1e-7?(l=1e-7,S=!0):l*=this.criticalThreshold,s=0;s<e;s++)Z[s]>l?(U.push({i:s,v:t[s],group:D}),P=s,C||(C=!0)):C&&s>P+4&&(U.length>0&&k.push(U.slice(0)),U=[],C=!1,D++);for(C&&U.length>1&&k.push(U.slice(0)),S&&k.length===0&&(w=!0),n=0;n<k.length;n++)if(I[n]="point",!((h=k[n].length)<64)){for(d=0,p=Math.sign(k[n][0].v),s=1;s<h;s++)Math.sign(k[n][s].v)!==p&&(d++,p=Math.sign(k[n][s].v));6*d>h&&(I[n]="interval")}return{smooth:w,groups:k,types:I}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(t,e,o,s){var n,h,l,p,d,Z,C=[],P=0,S=0,w=0,D=!1,k=!1;for(l=(o-e)/s,C[P]=new this.Component,Z=C[P],n=0,h=e;n<=s;n++,h+=l)p=t.X(h,k),d=t.Y(h,k),isNaN(p)||isNaN(d)?++w>1&&D&&(Z.right_isNaN=!0,Z.right_t=h-l,Z.len=S,D=!1,C[++P]=new this.Component,Z=C[P],w=0):(D||(D=!0,S=0,w>0&&(Z.left_t=h-l,Z.left_isNaN=!0)),w=0,Z.t_values[S]=h,Z.x_values[S]=p,Z.y_values[S]=d,S++),n===0&&(k=!0);return D?Z.len=S:C.pop(),C},getPointType:function(t,e,o,s,n,h,l){var p=n[0],d=h[0],Z=s.length,C={idx:e,t:o,x:p[e],y:d[e],type:"other"};return e<5?(C.type="borderleft",C.idx=0,C.t=s[0],C.x=p[0],C.y=d[0],C):(e>l-6&&(C.type="borderright",C.idx=Z-1,C.t=s[Z-1],C.x=p[Z-1],C.y=d[Z-1]),C)},newtonApprox:function(t,e,o,s,n){var h,l=0;for(h=s;h>0;h--)l=(l+n[h][t])*(e-(h-1)*o)/h;return l+n[0][t]},thiele:function(t,e,o,s,n){var h,l=0;for(h=n;h>1;h--)l=(t-o[s+h])/(e[h][s+1]-e[h-2][s+1]+l);return e[0][s+1]+(t-o[s+1])/(e[1][s+1]+l)},differenceMethodExperiments:function(t,e){var o,s,n,h,l,p,d,Z,C,P,S,w=t.t_values,D=t.x_values,k=t.y_values,I=[],U=[],J=[],z=[],V=[],W=[],$=[],nt=[],et=0,lt=[];for(l=w[1]-w[0],V.push([]),W.push([]),$.push([]),nt.push([]),n=k.length,o=0;o<n;o++)V[0][o]=D[o],W[0][o]=k[o],$[0][o]=D[o],nt[0][o]=k[o];for(V.push([]),W.push([]),$.push([]),nt.push([]),p=l,n=k.length-1,o=0;o<n;o++)I[o]=D[o+1]-D[o],U[o]=k[o+1]-k[o],J[o]=I[o],z[o]=U[o],V[1][o]=I[o],W[1][o]=U[o],$[1][o]=p/I[o],nt[1][o]=p/U[o];for(n--,h=Math.min(8,k.length-1),s=1;s<h;s++){for(V.push([]),W.push([]),$.push([]),nt.push([]),p*=l,o=0;o<n;o++)I[o]=I[o+1]-I[o],U[o]=U[o+1]-U[o],V[s+1][o]=I[o],W[s+1][o]=U[o],$[s+1][o]=p/($[s][o+1]-$[s][o])+$[s-1][o+1],nt[s+1][o]=p/(nt[s][o+1]-nt[s][o])+nt[s-1][o+1];if((S=this._criticalPoints(U,n,s))===!1){console.log("Polynomial of degree",s),S=[];break}if(S.length>0&&++et>1&&s%2==0)break;n--}for(o=0;o<S.length;o++){for(Z=-1/0,C=0;C<S[o].length;C++)(P=Math.abs(S[o][C].v))>Z&&(Z=P,d=C);d=Math.floor(S[o][d].i+s/2),lt.push(this.getPointType(e,d,w,D,k,J,z,n+1))}return[lt,V,W,$,nt]},getCenterOfCriticalInterval:function(t,e,o){var s,n,h,l,p,d=0,Z=0,C=o[1]-o[0],P=[];for(s=-1/0,P=[],n=0;n<t.length;n++)(l=Math.abs(t[n].v))>s?(P=[n],s=l,h=n):s===l&&P.push(n);if(P.length>0&&(p=P.reduce(function(S,w){return S+w},0)/P.length,h=Math.floor(p),p+=t[0].i),s<1/0){for(n=0;n<t.length;n++)d+=Math.abs(t[n].v)*t[n].i,Z+=Math.abs(t[n].v);p=d/Z}return p+=e/2,[t[h].i+e/2,p,o[Math.floor(p)]+C*(p-Math.floor(p))]},differenceMethod:function(t,e){var o,s,n,h,l,p,d,Z,C,P,S=t.t_values,w=t.x_values,D=t.y_values,k=[],I=[],U=0,J=-1,z=-1,V=[],W=[];for(n=D.length,k.push(new Float64Array(w)),I.push(new Float64Array(D)),n--,h=Math.min(12,n),s=0;s<h&&(k.push(new Float64Array(n)),I.push(new Float64Array(n)),k[s+1]=k[s].map(function($,nt,et){return et[nt+1]-$}),I[s+1]=I[s].map(function($,nt,et){return et[nt+1]-$}),(Z=this._criticalInterval(I[s+1],n,s)).smooth===!0&&(z=s,V=[]),d=this._criticalInterval(k[s+1],n,s),J===-1&&d.smooth===!0&&(J=s),!(z>=0));s++){if(Z.groups.length>0&&++U>2&&(s+1)%2==0){V=Z.groups,P=Z.types;break}n--}for(o=0;o<V.length;o++)P[o]!=="interval"&&(p=this.getCenterOfCriticalInterval(V[o],s+1,S),Z[0],l=Math.floor(p[1]),C=p[2],W.push(this.getPointType(e,l,C,S,k,I,n+1)));return[W,k,I,J,z]},_insertPoint_v4:function(t,e,o,s){var n,h,l,p=null;t.points.length>0&&(p=t.points[t.points.length-1].scrCoords),n=new b.Z(x.Z.COORDS_BY_USER,e,t.board),p!==null&&(h=n.scrCoords[1]-p[1])*h+(l=n.scrCoords[2]-p[2])*l<.8*.8||(n._t=o,t.points.push(n))},getInterval:function(t,e,o){var s,n;return R.Z.disable(),s=R.Z.Interval(e,o),t.board.mathLib=R.Z,t.board.mathLibJXG=R.Z,t.X(s,!0),n=t.Y(s,!0),t.board.mathLib=Math,t.board.mathLibJXG=u.Z.Math,n},sign:function(t){return t<0?-1:t>0?1:0},handleBorder:function(t,e,o,s,n){var h,l,p,d,Z,C,P,S,w,D,k,I,U=o.idx;if(I=e.t_values[1]-e.t_values[0],o.type==="borderleft"?p=(l=h=e.left_isNaN?e.left_t:o.t-I)+I:o.type==="borderright"?l=(p=h=e.right_isNaN?e.right_t:o.t+I)-I:console.log("No bordercase!!!"),(D=this.findComponents(t,l,p,32)).length!==0){for(o.type==="borderleft"&&(l=D[0].left_t,p=D[0].t_values[0],I=D[0].t_values[1]-D[0].t_values[0],h=l=l===null?p-I:l,d=this.getInterval(t,l,p),a.Z.isObject(d)&&(P=d.lo,S=d.hi,Z=t.X(h,!0),C=n[1][U]<0?S:P,this._insertPoint_v4(t,[1,Z,C],h))),k=D[0].t_values.length,w=0;w<k;w++)h=D[0].t_values[w],Z=D[0].x_values[w],C=D[0].y_values[w],this._insertPoint_v4(t,[1,Z,C],h);o.type==="borderright"&&(l=D[0].t_values[k-1],p=D[0].right_t,I=D[0].t_values[1]-D[0].t_values[0],h=p=p===null?l+I:p,d=this.getInterval(t,l,p),a.Z.isObject(d)&&(P=d.lo,S=d.hi,Z=t.X(h,!0),C=n[1][U]>0?S:P,this._insertPoint_v4(t,[1,Z,C],h)))}},_seconditeration_v4:function(t,e,o,s,n){var h,l,p,d,Z,C,P,S,w,D,k,I,U;for(l=e.t_values[o.idx-2],p=e.t_values[o.idx+2],Z=this.findComponents(t,l,p,64),P=0;P<Z.length;P++){for(C=Z[P],S=(d=this.differenceMethod(C,t))[0],D=d[1],k=d[2],I=0,w=0;w<=S.length;w++){for(U=w===S.length?C.len:S[w].idx,h=I;h<U;h++)isNaN(C.x_values[h])||isNaN(C.y_values[h])||this._insertPoint_v4(t,[1,C.x_values[h],C.y_values[h]],C.t_values[h]);w<S.length&&(this.handleSingularity(t,C,S[w],D,k),I=S[w].idx+1)}U=C.len,P<Z.length-1&&this._insertPoint_v4(t,[1,NaN,NaN],C.right_t)}return this},_recurse_v4:function(t,e,o,s,n,h,l,p){var d,Z,C=.5*(e+o),P=t.X(C,!0),S=t.Y(C,!0);p!==0?(d=(P-s)*t.board.unitX,Z=(S-n)*t.board.unitY,Math.sqrt(d*d+Z*Z)>2?this._recurse_v4(t,e,C,s,n,P,S,p-1):this._insertPoint_v4(t,[1,P,S],C),d=(P-h)*t.board.unitX,Z=(S-l)*t.board.unitY,Math.sqrt(d*d+Z*Z)>2?this._recurse_v4(t,C,o,P,S,h,l,p-1):this._insertPoint_v4(t,[1,P,S],C)):this._insertPoint_v4(t,[1,NaN,NaN],C)},handleSingularity:function(t,e,o,s,n){var h,l,p,d,Z,C,P,S,w,D,k,I=o.idx,U=100;h=o.t,console.log("HandleSingularity at t =",h),l=e.t_values[I-5],p=e.t_values[I+5],d=this.getInterval(t,l,p),a.Z.isObject(d)?(S=d.lo,w=d.hi):n[0][I-1]<n[0][I+1]?(S=n[0][I-1],w=n[0][I+1]):(S=n[0][I+1],w=n[0][I-1]),P=t.X(h,!0),D=(n[0][I-3]-n[0][I-5])/(e.t_values[I-3]-e.t_values[I-5]),k=(n[0][I+3]-n[0][I+5])/(e.t_values[I+3]-e.t_values[I+5]),console.log(":::",D,k),D<-100?(this._insertPoint_v4(t,[1,P,S],h,!0),k<=U&&this._insertPoint_v4(t,[1,NaN,NaN],h)):D>U?(this._insertPoint_v4(t,[1,P,w],h),k>=-100&&this._insertPoint_v4(t,[1,NaN,NaN],h)):(S===-1/0&&(this._insertPoint_v4(t,[1,P,S],h,!0),this._insertPoint_v4(t,[1,NaN,NaN],h)),w===1/0&&(this._insertPoint_v4(t,[1,NaN,NaN],h),this._insertPoint_v4(t,[1,P,w],h,!0)),o.t<e.t_values[I]?(Z=I-1,C=I):(Z=I,C=I+1),l=e.t_values[Z],p=e.t_values[C],this._recurse_v4(t,l,p,s[0][Z],n[0][Z],s[0][C],n[0][C],10)),k<-100?this._insertPoint_v4(t,[1,P,w],h):k>U&&this._insertPoint_v4(t,[1,P,S],h)},steps:1021,criticalThreshold:1e3,plot_v4:function(t,e,o,s){var n,h,l,p,d,Z,C,P,S,w,D,k,I,U,J,z=(o-e)/s,V=function(nt){return t.Y(nt,!0)},W=function(nt){return-t.Y(nt,!0)},$=.5*z;for(l=this.findComponents(t,e,o,s),p=0;p<l.length;p++){for(d=l[p],Z=(S=this.differenceMethod(d,t))[0],w=S[1],D=S[2],S[3],S[4],Z.length!==0&&Z[0].type==="borderleft"||Z.unshift({idx:0,t:d.t_values[0],x:d.x_values[0],y:d.y_values[0],type:"borderleft"}),Z[Z.length-1].type!=="borderright"&&(h=d.t_values.length,Z.push({idx:h-1,t:d.t_values[h-1],x:d.x_values[h-1],y:d.y_values[h-1],type:"borderright"})),P=0,C=0;C<=Z.length;C++){for(h=C===Z.length?d.len:Z[C].idx-1,n=P;n<h-2;n++)this._insertPoint_v4(t,[1,d.x_values[n],d.y_values[n]],d.t_values[n]),n>=P+3&&n<h-3&&D.length>3&&Math.abs(D[2][n])>.2*Math.abs(D[0][n])&&(k=d.t_values[n],$=.25*z,J=this.getInterval(t,k,k+z),a.Z.isObject(J)?D[2][n]>0?this._insertPoint_v4(t,[1,k+$,J.lo],k+$):this._insertPoint_v4(t,[1,k+z-$,J.hi],k+z-$):(I=c.Z.fminbr(V,[k,k+z]))<(U=c.Z.fminbr(W,[k,k+z]))?(this._insertPoint_v4(t,[1,t.X(I,!0),t.Y(I,!0)],I),this._insertPoint_v4(t,[1,t.X(U,!0),t.Y(U,!0)],U)):(this._insertPoint_v4(t,[1,t.X(U,!0),t.Y(U,!0)],U),this._insertPoint_v4(t,[1,t.X(I,!0),t.Y(I,!0)],I)));C<Z.length&&(n=Z[C].idx,Z[C].type==="borderleft"||Z[C].type==="borderright"?this.handleBorder(t,d,Z[C],w,D):this._seconditeration_v4(t,d,Z[C],w,D),P=Z[C].idx+1+1)}h=d.len,p<l.length-1&&this._insertPoint_v4(t,[1,NaN,NaN],d.right_t)}},updateParametricCurve_v4:function(t,e,o){var s,n,h,l;t.xterm==="x"?(h=.3*((l=t.board.getBoundingBox())[2]-l[0]),s=Math.max(e,l[0]-h),n=Math.min(o,l[2]+h)):(s=e,n=o),t.points=[],this.plot_v4(t,s,n,this.steps),t.numberPoints=t.points.length},updateParametricCurve:function(t,e,o){return this.updateParametricCurve_v2(t,e,o)}};const f=B.Z.Plot;B.Z.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(t){var e,o,s,n,h,l,p,d,Z,C,P,S,w,D,k;p=t[0];do{if(!p)break;l=p.next,p.rtype>this.MP_EXPLICIT&&(p.x-l.x)*(p.x-l.x)+(p.y-l.y)*(p.y-l.y)<this.EPS_SQ&&(p.rtype=this.MP_EXPLICIT,p.ltype===this.MP_OPEN&&(p.ltype=this.MP_CURL,p.set_left_curl(this.UNITY)),l.ltype=this.MP_EXPLICIT,l.rtype===this.MP_OPEN&&(l.rtype=this.MP_CURL,l.set_right_curl(this.UNITY)),p.rx=p.x,l.lx=p.x,p.ry=p.y,l.ly=p.y),p=l}while(p!==t[0]);for(o=t[0];o.ltype===this.MP_OPEN&&o.rtype===this.MP_OPEN;)if((o=o.next)===t[0]){o.ltype=this.MP_END_CYCLE;break}for(p=o;p;){if(l=p.next,p.rtype>=this.MP_GIVEN){for(;l.ltype===this.MP_OPEN&&l.rtype===this.MP_OPEN;)l=l.next;for(s=0,d=p,h=t.length,S=[],w=[],D=[],k=[null];C=d.next,S.push(C.x-d.x),w.push(C.y-d.y),D.push(this.mp_pyth_add(S[s],w[s])),s>0&&(P=w[s-1]/D[s-1],Z=S[s-1]/D[s-1],k.push(Math.atan2(w[s]*Z-S[s]*P,S[s]*Z+w[s]*P))),s++,(d=C)===l&&(h=s),!(s>=h&&d.ltype!==this.MP_END_CYCLE););s===h?k.push(0):k.push(k[1]),l.ltype===this.MP_OPEN&&((n=l.rx-l.x)*n+(e=l.ry-l.y)*e<this.EPS_SQ?(l.ltype=this.MP_CURL,l.set_left_curl(this.UNITY)):(l.ltype=this.MP_GIVEN,l.set_left_given(Math.atan2(e,n)))),p.rtype===this.MP_OPEN&&p.ltype===this.MP_EXPLICIT&&((n=p.x-p.lx)*n+(e=p.y-p.ly)*e<this.EPS_SQ?(p.rtype=this.MP_CURL,p.set_right_curl(this.UNITY)):(p.rtype=this.MP_GIVEN,p.set_right_given(Math.atan2(e,n)))),this.mp_solve_choices(p,l,h,S,w,D,k)}else p.rtype===this.MP_ENDPOINT&&(p.rx=p.x,p.ry=p.y,l.lx=l.x,l.ly=l.y);if((p=l)===o)break}},mp_solve_choices:function(t,e,o,s,n,h,l){var p,d,Z,C,P,S,w,D,k,I,U,J,z,V,W,$,nt,et,lt,ot,gt,vt,Tt,Rt,kt,Ft;for(P=h.length+1,I=new Array(P),k=new Array(P),Z=new Array(P),W=new Array(P),kt=0;kt<P;kt++)W[kt]=Z[kt]=k[kt]=I[kt]=0;for(w=0,D=t,J=0;;){if(z=D.next,w===0)if(D.rtype===this.MP_GIVEN){if(z.ltype===this.MP_GIVEN)return p=Math.atan2(n[0],s[0]),ot=(lt=this.mp_n_sin_cos(t.right_given()-p))[0],gt=lt[1],Tt=(vt=this.mp_n_sin_cos(e.left_given()-p))[0],Rt=vt[1],void this.mp_set_controls(t,e,s[0],n[0],gt,ot,-Rt,Tt);Z[0]=D.right_given()-Math.atan2(n[0],s[0]),Z[0]=this.reduce_angle(Z[0]),I[0]=0,k[0]=0}else if(D.rtype===this.MP_CURL){if(z.ltype===this.MP_CURL)return t.rtype=this.MP_EXPLICIT,e.ltype=this.MP_EXPLICIT,U=Math.abs(e.left_tension()),$=Math.abs(t.right_tension()),V=this.UNITY/(3*$),t.rx=t.x+s[0]*V,t.ry=t.y+n[0]*V,V=this.UNITY/(3*U),e.lx=e.x-s[0]*V,void(e.ly=e.y-n[0]*V);et=D.right_curl(),U=Math.abs(z.left_tension()),$=Math.abs(D.right_tension()),I[0]=this.mp_curl_ratio(et,$,U),Z[0]=-l[1]*I[0],k[0]=0}else D.rtype===this.MP_OPEN&&(I[0]=0,Z[0]=0,k[0]=this.FRACTION_ONE);else if(D.ltype===this.MP_END_CYCLE||D.ltype===this.MP_OPEN){if(p=this.UNITY/(3*Math.abs(J.right_tension())-this.UNITY),nt=h[w]*(this.FRACTION_THREE-this.UNITY/Math.abs(J.right_tension())),C=this.UNITY/(3*Math.abs(z.left_tension())-this.UNITY),S=h[w-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(z.left_tension())),nt*=et=this.FRACTION_ONE-I[w-1]*p,(U=Math.abs(D.left_tension()))<($=Math.abs(D.right_tension()))?nt*=Math.pow(U/$,2):U>$&&(S*=Math.pow($/U,2)),V=S/(S+nt),I[w]=V*C,d=-l[w+1]*I[w],J.rtype===this.MP_CURL?(k[w]=0,Z[w]=d-l[1]*(this.FRACTION_ONE-V)):(V=(this.FRACTION_ONE-V)/et,d-=l[w]*V,V*=p,Z[w]=d-Z[w-1]*V,k[w]=-k[w-1]*V),D.ltype===this.MP_END_CYCLE){for(p=0,C=this.FRACTION_ONE;(w-=1)===0&&(w=o),p=Z[w]-p*I[w],C=k[w]-C*I[w],w!==o;);for(p/=this.FRACTION_ONE-C,W[o]=p,Z[0]=p,Ft=1;Ft<o;Ft++)Z[Ft]=Z[Ft]+p*k[Ft];break}}else{if(D.ltype===this.MP_CURL){et=D.left_curl(),U=Math.abs(D.left_tension()),$=Math.abs(J.right_tension()),V=this.mp_curl_ratio(et,U,$),W[o]=-Z[o-1]*V/(this.FRACTION_ONE-V*I[o-1]);break}if(D.ltype===this.MP_GIVEN){W[o]=D.left_given()-Math.atan2(n[o-1],s[o-1]),W[o]=this.reduce_angle(W[o]);break}}J=D,D=z,w+=1}for(w=o-1;w>-1;w--)W[w]=Z[w]-W[w+1]*I[w];for(D=t,w=0;z=D.next,ot=(lt=this.mp_n_sin_cos(W[w]))[0],gt=lt[1],Tt=(vt=this.mp_n_sin_cos(-l[w+1]-W[w+1]))[0],Rt=vt[1],this.mp_set_controls(D,z,s[w],n[w],gt,ot,Rt,Tt),D=z,++w!==o;);},mp_n_sin_cos:function(t){return[Math.cos(t),Math.sin(t)]},mp_set_controls:function(t,e,o,s,n,h,l,p){var d,Z,C,P,S;C=Math.abs(e.left_tension()),d=Math.abs(t.right_tension()),S=this.mp_velocity(n,h,l,p,d),Z=this.mp_velocity(l,p,n,h,C),(t.right_tension()<0||e.left_tension()<0)&&(n>=0&&l>=0||n<=0&&l<=0)&&(P=Math.abs(n)*p+Math.abs(l)*h)>0&&(P*=1.00024414062,t.right_tension()<0&&this.mp_ab_vs_cd(Math.abs(l),this.FRACTION_ONE,S,P)<0&&(S=Math.abs(l)/P),e.left_tension()<0&&this.mp_ab_vs_cd(Math.abs(n),this.FRACTION_ONE,Z,P)<0&&(Z=Math.abs(n)/P)),t.rx=t.x+(o*h-s*n)*S,t.ry=t.y+(s*h+o*n)*S,e.lx=e.x-(o*p+s*l)*Z,e.ly=e.y-(s*p-o*l)*Z,t.rtype=this.MP_EXPLICIT,e.ltype=this.MP_EXPLICIT},mp_pyth_add:function(t,e){return Math.sqrt(t*t+e*e)},mp_curl_ratio:function(t,e,o){var s=1/e,n=1/o;return Math.min(4,((3-s)*s*s*t+n*n*n)/(s*s*s*t+(3-n)*n*n))},mp_ab_vs_cd:function(t,e,o,s){return t*e==o*s?0:t*e>o*s?1:-1},mp_velocity:function(t,e,o,s,n){return Math.min(4,(2+Math.sqrt(2)*(t-o/16)*(o-t/16)*(e-s))/(1.5*n*(2+(Math.sqrt(5)-1)*e+(3-Math.sqrt(5))*s)))},reduce_angle:function(t){return Math.abs(t)>this.ONE_EIGHTY_DEG&&(t>0?t-=this.THREE_SIXTY_DEG:t+=this.THREE_SIXTY_DEG),t},makeknots:function(t,e){var o,s,n=[];for(s=t.length,o=0;o<s;o++)n.push({x:t[o][0],y:t[o][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,lx:!1,rx:!1,ly:e,ry:e,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||1},right_tension:function(){return this.ry||1},set_right_curl:function(h){this.rx=h||0},set_left_curl:function(h){this.lx=h||0}});for(s=n.length,o=0;o<s;o++)n[o].next=n[o+1]||n[o],n[o].set_right_given=n[o].set_right_curl,n[o].set_left_given=n[o].set_left_curl,n[o].right_given=n[o].right_curl,n[o].left_given=n[o].left_curl;return n[s-1].next=n[0],n},curve:function(t,e){var o,s,n,h,l,p,d=!1,Z=[],C=[];for(h in l=1,(e=e||{tension:1,direction:{},curl:{},isClosed:!1}).hasOwnProperty("tension")&&(l=a.Z.evaluate(e.tension)),s=(o=this.makeknots(t,l)).length,a.Z.exists(e.isClosed)&&a.Z.evaluate(e.isClosed)&&(d=!0),d||(o[0].ltype=this.MP_ENDPOINT,o[0].rtype=this.MP_CURL,o[s-1].rtype=this.MP_ENDPOINT,o[s-1].ltype=this.MP_CURL),e)if(e.hasOwnProperty(h)){if(n=parseInt(h,10),isNaN(n)||n<0||n>=s)continue;p=e[n],a.Z.exists(p.type)&&p.type==="curl"&&(l=a.Z.evaluate(p.curl),n===0?(o[n].rtype=this.MP_CURL,o[n].set_right_curl(l)):n===s-1?(o[n].ltype=this.MP_CURL,o[n].set_left_curl(l)):(o[n].ltype=this.MP_CURL,o[n].rtype=this.MP_CURL,o[n].lx=l,o[n].rx=l)),a.Z.exists(p.direction)&&(l=a.Z.evaluate(p.direction),a.Z.isArray(l)?(l[0]!==!1&&(o[n].lx=l[0]*Math.PI/180,o[n].ltype=this.MP_GIVEN),l[1]!==!1&&(o[n].rx=l[1]*Math.PI/180,o[n].rtype=this.MP_GIVEN)):(o[n].lx=l*Math.PI/180,o[n].rx=l*Math.PI/180,o[n].ltype=o[n].rtype=this.MP_GIVEN)),a.Z.exists(p.tension)&&(l=a.Z.evaluate(p.tension),a.Z.isArray(l)?(l[0]!==!1&&(o[n].ly=a.Z.evaluate(l[0])),l[1]!==!1&&(o[n].ry=a.Z.evaluate(l[1]))):(o[n].ly=l,o[n].ry=l))}for(this.make_choices(o),n=0;n<s-1;n++)Z.push(o[n].x),Z.push(o[n].rx),Z.push(o[n+1].lx),C.push(o[n].y),C.push(o[n].ry),C.push(o[n+1].ly);return Z.push(o[s-1].x),C.push(o[s-1].y),d&&(Z.push(o[s-1].rx),C.push(o[s-1].ry),Z.push(o[0].lx),C.push(o[0].ly),Z.push(o[0].x),C.push(o[0].y)),[Z,C]}},B.Z.Metapost;var v=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];u.Z.Util=u.Z.Util||{},u.Z.Util.Unzip=function(t){var e,o,s,n,h=[],l=0,p=[],d=new Array(32768),Z=0,C=!1,P=t.length,S=0,w=1,D=new Array(288),k=new Array(32),I=0,U=null,J=(new Array(64),new Array(64),0),z=new Array(17),V=[];function W(){return S<P?t[S++]:-1}function $(){w=1}function nt(){var Pt;try{Pt=1&w,(w>>=1)===0&&(Pt=1&(w=W()),w=w>>1|128)}catch(yt){throw console.log("Probably problems on iOS7 with >>"),yt}return Pt}function et(Pt){var yt=0,mt=Pt;try{for(;mt--;)yt=yt<<1|nt();Pt&&(yt=v[yt]>>8-Pt)}catch(bt){throw console.log("Probably problems on iOS7 with >>"),bt}return yt}function lt(){Z=0}function ot(Pt){d[Z++]=Pt,h.push(String.fromCharCode(Pt)),Z===32768&&(Z=0)}function gt(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function vt(){for(;;){if(z[J]>=n)return-1;if(s[z[J]]===J)return z[J]++;z[J]++}}function Tt(){var Pt,yt=U[I];if(J===17)return-1;if(I++,J++,(Pt=vt())>=0)yt.b0=Pt;else if(yt.b0=32768,Tt())return-1;if((Pt=vt())>=0)yt.b1=Pt,yt.jump=null;else if(yt.b1=32768,yt.jump=U[I],yt.jumppos=I,Tt())return-1;return J--,0}function Rt(Pt,yt,mt,bt){var pt;for(U=Pt,I=0,s=mt,n=yt,pt=0;pt<17;pt++)z[pt]=0;return J=0,Tt()?-1:0}function kt(Pt){for(var yt,mt,bt=0,pt=Pt[bt];;)if(nt()){if(!(32768&pt.b1))return pt.b1;for(pt=pt.jump,yt=Pt.length,mt=0;mt<yt;mt++)if(Pt[mt]===pt){bt=mt;break}}else{if(!(32768&pt.b0))return pt.b0;pt=Pt[++bt]}}function Ft(){var Pt,yt,mt,bt,pt,At,zt,ft,wt,Ot,Lt,Wt,Vt,jt,It;do if(Pt=nt(),(yt=et(2))===0)for($(),wt=W(),wt|=W()<<8,Lt=W(),65535&(wt^~(Lt|=W()<<8))&&u.Z.debug(`BlockLen checksum mismatch
`);wt--;)ot(W());else if(yt===1)for(;;)if((bt=v[et(7)]>>1)>23?(bt=bt<<1|nt())>199?bt=(bt-=128)<<1|nt():(bt-=48)>143&&(bt+=136):bt+=256,bt<256)ot(bt);else{if(bt===256)break;for(ft=et(E[bt-=257])+y[bt],bt=v[et(5)]>>3,M[bt]>8?(Ot=et(8),Ot|=et(M[bt]-8)<<8):Ot=et(M[bt]),Ot+=T[bt],bt=0;bt<ft;bt++)ot(d[Z-Ot&32767])}else if(yt===2){for(At=new Array(320),Vt=257+et(5),jt=1+et(5),It=4+et(4),bt=0;bt<19;bt++)At[bt]=0;for(bt=0;bt<It;bt++)At[L[bt]]=et(3);for(ft=k.length,mt=0;mt<ft;mt++)k[mt]=new gt;if(Rt(k,19,At))return lt(),1;for(Wt=Vt+jt,mt=0,-1;mt<Wt;)if((bt=kt(k))<16)At[mt++]=bt;else if(bt===16){if(mt+(bt=3+et(2))>Wt)return lt(),1;for(pt=mt?At[mt-1]:0;bt--;)At[mt++]=pt}else{if(mt+(bt=bt===17?3+et(3):11+et(7))>Wt)return lt(),1;for(;bt--;)At[mt++]=0}for(ft=D.length,mt=0;mt<ft;mt++)D[mt]=new gt;if(Rt(D,Vt,At))return lt(),1;for(ft=D.length,mt=0;mt<ft;mt++)k[mt]=new gt;for(zt=[],mt=Vt;mt<At.length;mt++)zt[mt-Vt]=At[mt];if(Rt(k,jt,zt))return lt(),1;for(;;)if((bt=kt(D))>=256){if((bt-=256)===0)break;for(ft=et(E[bt-=1])+y[bt],bt=kt(k),M[bt]>8?(Ot=et(8),Ot|=et(M[bt]-8)<<8):Ot=et(M[bt]),Ot+=T[bt];ft--;)ot(d[Z-Ot&32767])}else ot(bt)}while(!Pt);return lt(),$(),0}function te(){var Pt,yt,mt,bt,pt,At=[];try{if(h=[],C=!1,At[0]=W(),At[1]=W(),At[0]===120&&At[1]===218&&(Ft(),p[l]=[h.join(""),"geonext.gxt"],l++),At[0]===31&&At[1]===139&&(qt(),p[l]=[h.join(""),"file"],l++),At[0]===80&&At[1]===75){if(C=!0,At[2]=W(),At[3]=W(),At[2]===3&&At[3]===4){for(At[0]=W(),At[1]=W(),e=W(),e|=W()<<8,pt=W(),pt|=W()<<8,W(),W(),W(),W(),W(),W()<<8,W()<<16,W()<<24,W(),W()<<8,W()<<16,W()<<24,W(),W()<<8,W()<<16,W()<<24,bt=W(),bt|=W()<<8,mt=W(),mt|=W()<<8,Pt=0,V=[];bt--;)(yt=W())==="/"|yt===":"?Pt=0:Pt<255&&(V[Pt++]=String.fromCharCode(yt));for(o||(o=V),Pt=0;Pt<mt;)yt=W(),Pt++;if(pt===8&&(Ft(),p[l]=new Array(2),p[l][0]=h.join(""),p[l][1]=V.join(""),l++),qt())return!1}return!0}}catch(zt){throw console.log("Probably problems on iOS7 with >>"),zt}return!1}function qt(){var Pt,yt,mt=[];if(8&e&&(mt[0]=W(),mt[1]=W(),mt[2]=W(),mt[3]=W(),mt[0]===80&&mt[1]===75&&mt[2]===7&&mt[3]===8?(W(),W()<<8,W()<<16,W()<<24):mt[0]|mt[1]<<8|mt[2]<<16|mt[3]<<24,W(),W()<<8,W()<<16,W()<<24,W(),W()<<8,W()<<16,W()<<24),C&&te())return!1;if(mt[0]=W(),mt[0]!==8)return!0;if(e=W(),W(),W(),W(),W(),W(),W(),4&e)for(mt[0]=W(),mt[2]=W(),J=mt[0]+256*mt[1],Pt=0;Pt<J;Pt++)W();if(8&e)for(Pt=0,V=[],yt=W();yt;)yt!=="7"&&yt!==":"||(Pt=0),Pt<255&&(V[Pt++]=yt),yt=W();if(16&e)for(yt=W();yt;)yt=W();return 2&e&&(W(),W()),Ft(),W(),W()<<8,W()<<16,W()<<24,W(),W()<<8,W()<<16,W()<<24,C&&te(),!1}z[0]=0,u.Z.Util.Unzip.prototype.unzipFile=function(Pt){var yt;for(this.unzip(),yt=0;yt<p.length;yt++)if(p[yt][1]===Pt)return p[yt][0];return""},u.Z.Util.Unzip.prototype.unzip=function(){return te(),p}};const Y=u.Z.Util;var j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];u.Z.Util=u.Z.Util||{},u.Z.Util.UTF8={encode:function(t){var e,o,s="",n=t.length;if(t=t.replace(/\r\n/g,`
`),typeof unescape=="function"&&typeof encodeURIComponent=="function")return unescape(encodeURIComponent(t));for(e=0;e<n;e++)(o=t.charCodeAt(e))<128?s+=String.fromCharCode(o):o>127&&o<2048?(s+=String.fromCharCode(o>>6|192),s+=String.fromCharCode(63&o|128)):(s+=String.fromCharCode(o>>12|224),s+=String.fromCharCode(o>>6&63|128),s+=String.fromCharCode(63&o|128));return s},decode:function(t){var e,o,s,n=0,h=0,l=0,p=[],d=t.length,Z=[];for(e=0;e<d;e++)o=t.charCodeAt(e),s=j[o],h=l!==0?63&o|h<<6:255>>s&o,(l=j[256+l+s])===0&&(h>65535?p.push(55232+(h>>10),56320+(1023&h)):p.push(h),++n%1e4==0&&(Z.push(String.fromCharCode.apply(null,p)),p=[]));return Z.push(String.fromCharCode.apply(null,p)),Z.join("")},asciiCharCodeAt:function(t,e){var o=t.charCodeAt(e);if(o>255)switch(o){case 8364:o=128;break;case 8218:o=130;break;case 402:o=131;break;case 8222:o=132;break;case 8230:o=133;break;case 8224:o=134;break;case 8225:o=135;break;case 710:o=136;break;case 8240:o=137;break;case 352:o=138;break;case 8249:o=139;break;case 338:o=140;break;case 381:o=142;break;case 8216:o=145;break;case 8217:o=146;break;case 8220:o=147;break;case 8221:o=148;break;case 8226:o=149;break;case 8211:o=150;break;case 8212:o=151;break;case 732:o=152;break;case 8482:o=153;break;case 353:o=154;break;case 8250:o=155;break;case 339:o=156;break;case 382:o=158;break;case 376:o=159}return o}};const F=u.Z.Util.UTF8;var G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H="=";u.Z.Util=u.Z.Util||{},u.Z.Util.Base64={_getByte:function(t,e){return 255&t.charCodeAt(e)},_getIndex:function(t,e){return G.indexOf(t.charAt(e))},encode:function(t){var e,o,s,n,h,l=[];for(n=(s=(h=F.encode(t)).length)%3,e=0;e<s-n;e+=3)o=this._getByte(h,e)<<16|this._getByte(h,e+1)<<8|this._getByte(h,e+2),l.push(G.charAt(o>>18),G.charAt(o>>12&63),G.charAt(o>>6&63),G.charAt(63&o));switch(n){case 1:o=this._getByte(h,s-1),l.push(G.charAt(o>>2),G.charAt(o<<4&63),H,H);break;case 2:o=this._getByte(h,s-2)<<8|this._getByte(h,s-1),l.push(G.charAt(o>>10),G.charAt(o>>4&63),G.charAt(o<<2&63),H)}return l.join("")},decode:function(t,e){var o,s,n,h,l,p,d=[],Z=[];if((n=(o=t.replace(/[^A-Za-z0-9+/=]/g,"")).length)%4!=0)throw new Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for(o.charAt(n-1)===H&&(h=1,o.charAt(n-2)===H&&(h=2),n-=4),s=0;s<n;s+=4)l=this._getIndex(o,s)<<18|this._getIndex(o,s+1)<<12|this._getIndex(o,s+2)<<6|this._getIndex(o,s+3),Z.push(l>>16,l>>8&255,255&l),s%1e4==0&&(d.push(String.fromCharCode.apply(null,Z)),Z=[]);switch(h){case 1:l=this._getIndex(o,n)<<12|this._getIndex(o,n+1)<<6|this._getIndex(o,n+2),Z.push(l>>10,l>>2&255);break;case 2:l=this._getIndex(o,s)<<6|this._getIndex(o,s+1),Z.push(l>>4)}return d.push(String.fromCharCode.apply(null,Z)),p=d.join(""),e&&(p=F.decode(p)),p},decodeAsArray:function(t){var e,o=this.decode(t),s=[],n=o.length;for(e=0;e<n;e++)s[e]=o.charCodeAt(e);return s}};const q=u.Z.Util.Base64;u.Z.Server={modules:{},runningCalls:{},handleError:function(t){u.Z.debug("error occured, server says: "+t.message)},callServer:function(t,e,o,s){var n,h,l,p,d,Z,C;for(Z in s=s||!1,o)o.hasOwnProperty(Z)&&""+escape(Z)+escape(o[Z]);d=a.Z.toJSON(o);do p=t+Math.floor(4096*Math.random());while(a.Z.exists(this.runningCalls[p]));return this.runningCalls[p]={action:t},a.Z.exists(o.module)&&(this.runningCalls[p].module=o.module),n=u.Z.serverBase+"JXGServer.py",h="action="+escape(t)+"&id="+p+"&dataJSON="+escape(q.encode(d)),this.cbp=function(P){var S,w,D,k,I,U,J,z;if(S=new Y.Unzip(q.decodeAsArray(P)).unzip(),a.Z.isArray(S)&&S.length>0&&(S=S[0][0]),a.Z.exists(S)){if((w=window.JSON&&window.JSON.parse?window.JSON.parse(S):new Function("return "+S)()).type==="error")this.handleError(w);else if(w.type==="response"){for(U=w.id,J=0;J<w.fields.length;J++)k=(D=w.fields[J]).namespace+(typeof new Function("return "+D.namespace)()=="object"?".":".prototype.")+D.name+" = "+D.value,new Function(k)();for(J=0;J<w.handler.length;J++){for(D=w.handler[J],I=[],z=0;z<D.parameters.length;z++)I[z]='"'+D.parameters[z]+'": '+D.parameters[z];k="if(typeof JXG.Server.modules."+this.runningCalls[U].module+' == "undefined")JXG.Server.modules.'+this.runningCalls[U].module+" = {};",k+="JXG.Server.modules."+this.runningCalls[U].module+"."+D.name+"_cb = "+D.callback+";",k+="JXG.Server.modules."+this.runningCalls[U].module+"."+D.name+" = function ("+D.parameters.join(",")+', __JXGSERVER_CB__, __JXGSERVER_SYNC) {if(typeof __JXGSERVER_CB__ == "undefined") __JXGSERVER_CB__ = JXG.Server.modules.'+this.runningCalls[U].module+"."+D.name+"_cb;var __JXGSERVER_PAR__ = {"+I.join(",")+', "module": "'+this.runningCalls[U].module+'", "handler": "'+D.name+'" };JXG.Server.callServer("exec", __JXGSERVER_CB__, __JXGSERVER_PAR__, __JXGSERVER_SYNC);};',new Function(k)()}delete this.runningCalls[U],e(w.data)}}},this.cb=u.Z.bind(this.cbp,this),window.XMLHttpRequest?(l=new XMLHttpRequest).overrideMimeType("text/plain; charset=iso-8859-1"):l=new ActiveXObject("Microsoft.XMLHTTP"),!(!l||(l.open("POST",n,!s),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s||(l.onreadystatechange=(C=this.cb,function(){return l.readyState===4&&l.status===200&&(C(l.responseText),!0)})),l.send(h),!s))&&(this.cb(l.responseText),!0)},loadModule_cb:function(t){var e;for(e=0;e<t.length;e++)u.Z.debug(t[e].name+": "+t[e].value)},loadModule:function(t){return u.Z.Server.callServer("load",u.Z.Server.loadModule_cb,{module:t},!0)}},u.Z.Server.load=u.Z.Server.loadModule;const K=u.Z.Server;var at;B.Z.Symbolic={generateSymbolicCoordinatesPartial:function(t,e,o,s){var n,h,l,p=e.ancestors,d=0,Z=function(C){return s==="underscore"?o+"_{"+C+"}":s==="brace"?o+"["+C+"]":o+C};for(h in t.listOfFreePoints=[],t.listOfDependantPoints=[],p)if(p.hasOwnProperty(h)&&(n=0,a.Z.isPoint(p[h]))){for(l in p[h].ancestors)p[h].ancestors.hasOwnProperty(l)&&n++;n===0?(p[h].symbolic.x=p[h].coords.usrCoords[1],p[h].symbolic.y=p[h].coords.usrCoords[2],t.listOfFreePoints.push(p[h])):(d+=1,p[h].symbolic.x=Z(d),d+=1,p[h].symbolic.y=Z(d),t.listOfDependantPoints.push(p[h]))}return a.Z.isPoint(e)&&(e.symbolic.x="x",e.symbolic.y="y"),d},clearSymbolicCoordinates:function(t){var e=function(o){var s,n=o&&o.length||0;for(s=0;s<n;s++)a.Z.isPoint(o[s])&&(o[s].symbolic.x="",o[s].symbolic.y="")};e(t.listOfFreePoints),e(t.listOfDependantPoints),delete t.listOfFreePoints,delete t.listOfDependantPoints},generatePolynomials:function(t,e,o){var s,n,h,l,p=e.ancestors,d=[],Z=[];for(s in o&&this.generateSymbolicCoordinatesPartial(t,e,"u","brace"),p[e.id]=e,p)if(p.hasOwnProperty(s)&&(l=0,d=[],a.Z.isPoint(p[s]))){for(n in p[s].ancestors)p[s].ancestors.hasOwnProperty(n)&&l++;if(l>0)for(d=p[s].generatePolynomial(),h=0;h<d.length;h++)Z.push(d[h])}return o&&this.clearSymbolicCoordinates(t),Z},geometricLocusByGroebnerBase:function(t,e){var o,s,n,h,l,p,d,Z,C,P,S,w,D=t.options.locus,k={},I=this.generateSymbolicCoordinatesPartial(t,e,"u","brace"),U=new b.Z(x.Z.COORDS_BY_USR,[0,0],t),J=new b.Z(x.Z.COORDS_BY_USR,[t.canvasWidth,t.canvasHeight],t),z=1,V=0,W=0,$=0;if(K.modules.geoloci===at&&K.loadModule("geoloci"),K.modules.geoloci===at)throw new Error("JSXGraph: Unable to load JXG.Server module 'geoloci.py'.");if(p=U.usrCoords[1],d=J.usrCoords[1],Z=J.usrCoords[2],C=U.usrCoords[2],D.translateToOrigin&&t.listOfFreePoints.length>0){for(V=(n=D.toOrigin!==at&&D.toOrigin!==null&&a.Z.isInArray(t.listOfFreePoints,D.toOrigin.id)?D.toOrigin:t.listOfFreePoints[0]).symbolic.x,W=n.symbolic.y,l=0;l<t.listOfFreePoints.length;l++)t.listOfFreePoints[l].symbolic.x-=V,t.listOfFreePoints[l].symbolic.y-=W;if(p-=V,d-=V,Z-=W,C-=W,D.translateTo10&&t.listOfFreePoints.length>1){for(h=D.to10!==at&&D.to10!==null&&D.to10.id!==D.toOrigin.id&&a.Z.isInArray(t.listOfFreePoints,D.to10.id)?D.to10:t.listOfFreePoints[0].id===n.id?t.listOfFreePoints[1]:t.listOfFreePoints[0],$=g.Z.rad([1,0],[0,0],[h.symbolic.x,h.symbolic.y]),P=Math.cos(-$),S=Math.sin(-$),l=0;l<t.listOfFreePoints.length;l++)w=t.listOfFreePoints[l].symbolic.x,t.listOfFreePoints[l].symbolic.x=P*t.listOfFreePoints[l].symbolic.x-S*t.listOfFreePoints[l].symbolic.y,t.listOfFreePoints[l].symbolic.y=S*w+P*t.listOfFreePoints[l].symbolic.y;if(h.symbolic.y=0,w=p,p=P*p-S*Z,Z=S*w+P*Z,w=d,d=P*d-S*C,C=S*w+P*C,D.stretch&&Math.abs(h.symbolic.x)>B.Z.eps){for(z=h.symbolic.x,l=0;l<t.listOfFreePoints.length;l++)t.listOfFreePoints[l].symbolic.x/=z,t.listOfFreePoints[l].symbolic.y/=z;for(l=0;l<t.objectsList.length;l++)t.objectsList[l].elementClass===x.Z.OBJECT_CLASS_CIRCLE&&t.objectsList[l].method==="pointRadius"&&(k[l]=t.objectsList[l].radius,t.objectsList[l].radius/=z);p/=z,d/=z,Z/=z,C/=z,h.symbolic.x=1}}for(l=0;l<t.listOfFreePoints.length;l++)w=t.listOfFreePoints[l].symbolic.x,Math.abs(w)<B.Z.eps&&(t.listOfFreePoints[l].symbolic.x=0),Math.abs(w-Math.round(w))<B.Z.eps&&(t.listOfFreePoints[l].symbolic.x=Math.round(w)),w=t.listOfFreePoints[l].symbolic.y,Math.abs(w)<B.Z.eps&&(t.listOfFreePoints[l].symbolic.y=0),Math.abs(w-Math.round(w))<B.Z.eps&&(t.listOfFreePoints[l].symbolic.y=Math.round(w))}for(l in o=this.generatePolynomials(t,e).join(","),this.cbp=function(nt){s=nt},this.cb=a.Z.bind(this.cbp,this),K.modules.geoloci.lociCoCoA(p,d,Z,C,I,o,z,$,V,W,this.cb,!0),this.clearSymbolicCoordinates(t),k)k.hasOwnProperty(l)&&(t.objects[l].radius=k[l]);return s}};const tt=B.Z.Symbolic;B.Z.Clip={_isSeparator:function(t){return isNaN(t.coords.usrCoords[1])&&isNaN(t.coords.usrCoords[2])},makeDoublyLinkedList:function(t){var e,o=null,s=[],n=t.length;if(n>0)for(e=0;e<n;e++)this._isSeparator(t[e])?(t[e]._next=t[(e+1)%n],t[e]._prev=t[(n+e-1)%n]):(o===null&&(o=e,s.push(o)),this._isSeparator(t[(e+1)%n])||e===n-1?(t[e]._next=t[o],t[o]._prev=t[e],t[e]._end=!0,o=null):(t[e]._next=t[(e+1)%n],t[o]._prev=t[e]),this._isSeparator(t[(n+e-1)%n])||(t[e]._prev=t[(n+e-1)%n]));return s},Vertex:function(t,e,o,s,n,h){this.pos=e,this.intersection=!0,this.coords=t,this.elementClass=x.Z.OBJECT_CLASS_POINT,this.data={alpha:o,path:s,pathname:n,done:!1,type:h,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(t,e,o){var s=t.length,n=B.Z.eps*B.Z.eps;s>0&&Math.abs(t[s-1].coords.usrCoords[0]-e.usrCoords[0])<n&&Math.abs(t[s-1].coords.usrCoords[1]-e.usrCoords[1])<n&&Math.abs(t[s-1].coords.usrCoords[2]-e.usrCoords[2])<n||t.push({pos:o,intersection:!1,coords:e,elementClass:x.Z.OBJECT_CLASS_POINT})},sortIntersections:function(t){var e,o,s,n,h,l,p=[],d=t.length;for(e=0;e<d;e++)if(t[e].sort(function(Z,C){return Z.data.alpha>C.data.alpha?1:-1}),t[e].length>0){for(h=t[e].length-1,l=(n=(s=t[e][0]).data.path[s.pos])._next,e===d-1&&(n._end=!1),s.data.alpha===0&&s.data.type==="T"?(n.intersection=!0,n.data=s.data,n.neighbour=s.neighbour,n.neighbour.neighbour=n,n.entry_exit=!1,t[e][0]=n):(s._prev=n,s._prev._next=s),o=1;o<=h;o++)(s=t[e][o])._prev=t[e][o-1],s._prev._next=s;(s=t[e][h])._next=l,s._next._prev=s,e===d-1&&(s._end=!0),p=p.concat(t[e])}return p},_inbetween:function(t,e,o){var s,n=B.Z.eps*B.Z.eps,h=o[1]-e[1],l=o[2]-e[2],p=t[1]-e[1],d=t[2]-e[2];return h===0&&l===0&&p===0&&d===0||(s=Math.abs(p)<n&&Math.abs(h)<n?d/l:p/h,Math.abs(s)<n&&(s=0),s)},_print_array:function(t){var e,o;for(e=0;e<t.length;e++)try{o="",t[e]._end&&(o=" end"),console.log(e,t[e].coords.usrCoords,t[e].data.type,"	","prev",t[e]._prev.coords.usrCoords,"next",t[e]._next.coords.usrCoords+o)}catch{console.log(e,t[e].coords.usrCoords)}},_print_list:function(t){for(var e,o=0;o<100&&(e=t.data?t.data.alpha:"-",console.log("	",t.coords.usrCoords,`
		is:`,t.intersection,"end:",t._end,e,`
		-:`,t._prev.coords.usrCoords,`
		+:`,t._next.coords.usrCoords,`
		n:`,t.intersection?t.neighbour.coords.usrCoords:"-"),!t._end);)t=t._next,o++},_noOverlap:function(t,e,o,s){var n,h,l,p,d,Z=Math.sqrt(B.Z.eps),C=!1;for(n=0;n<3;n++)if(h=Math.min(t[n],e[n]),l=Math.max(t[n],e[n]),p=Math.min(o[n],s[n]),d=Math.max(o[n],s[n]),l<p-Z||h>d+Z){C=!0;break}return C},findIntersections:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D,k,I=[],U=100*B.Z.eps,J=t.length,z=e.length,V=[],W=[],$=[],nt=!1,et=!1;for(n=0;n<z;n++)$.push([]);for(s=0;s<J;s++)if(W.push([]),this._isSeparator(t[s])||this._isSeparator(t[(s+1)%J]))nt=!0;else{if(nt&&s===J-1)break;for(l=t[s].coords.usrCoords,p=t[(s+1)%J].coords.usrCoords,n=0;n<z;n++)if(this._isSeparator(e[n])||this._isSeparator(e[(n+1)%z]))et=!0;else{if(et&&n===z-1)break;if(d=e[n].coords.usrCoords,Z=e[(n+1)%z].coords.usrCoords,!this._noOverlap(l,p,d,Z)&&(I=g.Z.meetSegmentSegment(l,p,d,Z),C=g.Z.distance(l,p,3),P=g.Z.distance(d,Z,3),I[1]*C>-U&&I[1]<1-U/C&&I[2]*P>-U&&I[2]<1-U/P||I[1]===1/0&&I[2]===1/0&&B.Z.norm(I[0],3)<U)){if(h=new b.Z(x.Z.COORDS_BY_USER,I[0],o),w="X",Math.abs(I[1])*C<U||Math.abs(I[2])*P<U)w="T",Math.abs(I[1])*C<U&&(I[1]=0),Math.abs(I[2])*P<U&&(I[2]=0),h=I[1]===0?new b.Z(x.Z.COORDS_BY_USER,l,o):new b.Z(x.Z.COORDS_BY_USER,d,o);else if(I[1]===1/0&&I[2]===1/0&&B.Z.norm(I[0],3)<U){(S=this._inbetween(l,d,Z))>=0&&S<1&&(w="T",h=new b.Z(x.Z.COORDS_BY_USER,l,o),I[1]=0,I[2]=S,D=new this.Vertex(h,s,I[1],t,"S",w),k=new this.Vertex(h,n,I[2],e,"C",w),D.neighbour=k,k.neighbour=D,W[s].push(D),$[n].push(k)),S=this._inbetween(d,l,p),g.Z.distance(l,d,3)>U&&S>=0&&S<1&&(w="T",h=new b.Z(x.Z.COORDS_BY_USER,d,o),I[1]=S,I[2]=0,D=new this.Vertex(h,s,I[1],t,"S",w),k=new this.Vertex(h,n,I[2],e,"C",w),D.neighbour=k,k.neighbour=D,W[s].push(D),$[n].push(k));continue}D=new this.Vertex(h,s,I[1],t,"S",w),k=new this.Vertex(h,n,I[2],e,"C",w),D.neighbour=k,k.neighbour=D,W[s].push(D),$[n].push(k)}}}for(V=this.sortIntersections(W),s=0;s<V.length;s++)V[s].data.idx=s,V[s].neighbour.data.idx=s;return[V,this.sortIntersections($)]},_getPosition:function(t,e,o,s){var n=g.Z.det3p(t,e,o),h=g.Z.det3p(t,o,s);return g.Z.det3p(e,o,s)>=0?n>=0&&h>=0?"left":"right":n>=0||h>=0?"left":"right"},_classifyDegenerateIntersections:function(t){var e,o,s,n,h,l,p,d,Z,C,P,S,w,D;for(Z=g.Z.det3p,p=0,t._tours=0;;){if(t.intersection&&t.data.type==="T"&&(e=t._next.coords.usrCoords,o=t._prev.coords.usrCoords,g.Z.distance(t.coords.usrCoords,e,3)<B.Z.eps&&(e=t._next._next.coords.usrCoords),g.Z.distance(t.coords.usrCoords,o,3)<B.Z.eps&&(o=t._prev._prev.coords.usrCoords),n=(h=t.neighbour)._prev.coords.usrCoords,s=h._next.coords.usrCoords,g.Z.distance(h.coords.usrCoords,s,3)<B.Z.eps&&(s=h._next._next.coords.usrCoords),g.Z.distance(h.coords.usrCoords,n,3)<B.Z.eps&&(n=h._prev._prev.coords.usrCoords),P=Z(t.coords.usrCoords,o,n),S=Z(t.coords.usrCoords,e,s),w=Z(t.coords.usrCoords,o,s),D=Z(t.coords.usrCoords,e,n),P===0&&S===0&&w===0&&D===0&&(t.coords.usrCoords[1]*=1+Math.random()*B.Z.eps,t.coords.usrCoords[2]*=1+Math.random()*B.Z.eps,h.coords.usrCoords[1]=t.coords.usrCoords[1],h.coords.usrCoords[2]=t.coords.usrCoords[2],P=Z(t.coords.usrCoords,o,n),S=Z(t.coords.usrCoords,e,s),w=Z(t.coords.usrCoords,o,s),D=Z(t.coords.usrCoords,e,n)),C=!1,P===0?g.Z.affineRatio(t.coords.usrCoords,o,n)<0&&(C=!0):S===0?g.Z.affineRatio(t.coords.usrCoords,e,s)<0&&(C=!0):w===0?g.Z.affineRatio(t.coords.usrCoords,o,s)>0&&(C=!0):D===0&&g.Z.affineRatio(t.coords.usrCoords,e,n)>0&&(C=!0),C&&(d=n,n=s,s=d,d=P,P=w,w=d,d=S,S=D,D=d),a.Z.exists(t.delayedStatus)||(t.delayedStatus=[]),P===0&&S===0?t.delayedStatus=["on","on"]:P===0?(l=this._getPosition(e,n,h.coords.usrCoords,s),t.delayedStatus=["on",l]):S===0?(l=this._getPosition(o,n,h.coords.usrCoords,s),t.delayedStatus=[l,"on"]):t.delayedStatus.length===0&&(this._getPosition(o,n,h.coords.usrCoords,s)!==this._getPosition(e,n,h.coords.usrCoords,s)?t.data.type="X":t.data.type="B")),a.Z.exists(t._tours)&&t._tours++,t._tours>3||t._end||p>1e3){p>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),a.Z.exists(t._tours)&&delete t._tours;break}t.intersection&&p++,t=t._next}},_handleIntersectionChains:function(t){var e,o=0,s="Null",n=!1,h=!1,l=!1;for(l;t.intersection===!0&&(t.data.type==="T"&&(t.delayedStatus[0]!=="on"&&t.delayedStatus[1]==="on"?(n=!0,e=t,s=t.delayedStatus[0]):n&&t.delayedStatus[0]==="on"&&t.delayedStatus[1]==="on"?t.data.type="B":n&&t.delayedStatus[0]==="on"&&t.delayedStatus[1]!=="on"&&(n=!1,s===t.delayedStatus[1]?(e.data.type="DB",t.data.type="DB"):(e.data.type="DX",t.data.type="DX"))),o++),t._end&&(h=!0),!h||n;){if(o>1e3){console.log("Warning: _handleIntersectionChains: intersection chain reached maximum numbers of iterations");break}t=t._next}},_handleFullyDegenerateCase:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U=[t,e];for(h=0;h<2;h++){for(S=(s=U[h]).length,C=0,I=!0;C<S;C++)if(!s[C].intersection){I=!1;break}if(I)for(w=(n=U[(h+1)%2]).length,C=0;C<S;C++){for(p=s[C].coords.usrCoords,d=s[C]._next.coords.usrCoords,l=[.5*(p[0]+d[0]),.5*(p[1]+d[1]),.5*(p[2]+d[2])],P=0,D=!1;P<w;P++)if(Math.abs(g.Z.det3p(n[P].coords.usrCoords,n[(P+1)%w].coords.usrCoords,l))<B.Z.eps){D=!0;break}if(!D){Z={pos:C,intersection:!1,coords:new b.Z(x.Z.COORDS_BY_USER,l,o),elementClass:x.Z.OBJECT_CLASS_POINT},k=s[C]._next,s[C]._next=Z,Z._prev=s[C],Z._next=k,k._prev=Z,s[C]._end&&(s[C]._end=!1,Z._end=!0);break}}}},_getStatus:function(t,e){for(;t.intersection&&!t._end;)t=t._next;return[t,g.Z.windingNumber(t.coords.usrCoords,e)===0?"entry":"exit"]},markEntryExit:function(t,e,o){var s,n,h,l,p,d,Z,C=null,P=0;for(d=o.length,p=0;p<d;p++)for(Z=o[p],this._classifyDegenerateIntersections(t[Z]),this._handleIntersectionChains(t[Z]),n=(l=this._getStatus(t[Z],e))[0],s=l[1],n._starter=!0,h=0,C=null,P=0;n.intersection===!0&&(n.data.type==="X"&&P===1&&(C.entry_exit=s,s==="exit"&&(C.data.type="X"),P=2),n.data.type!=="X"&&n.data.type!=="DB"||(n.entry_exit=s,s=s==="entry"?"exit":"entry"),n.data.type==="DX"&&(P===0?(C=n,P=1):P===1?(n.entry_exit=s,C.entry_exit=s,s==="exit"?C.data.type="X":n.data.type="X",s=s==="entry"?"exit":"entry",C=null,P=0):P===2&&(n.entry_exit=s,n.data.type="X",s=s==="entry"?"exit":"entry",C=null,P=0))),n=n._next,!(a.Z.exists(n._starter)||h>1e4);)h++},_stayOnPath:function(t,e){var o=!0;return t.intersection&&t.data.type!=="B"&&(o=e===t.entry_exit),o},_addVertex:function(t,e,o){return isNaN(e.coords.usrCoords[1])||isNaN(e.coords.usrCoords[2])||t.push(e),e.intersection&&e.data.done?(o&&console.log("Add last intersection point",e.coords.usrCoords,"on",e.data.pathname,e.entry_exit,e.data.type),!0):(e.intersection&&(e.data.done=!0,o&&console.log("Add intersection point",e.coords.usrCoords,"on",e.data.pathname,e.entry_exit,e.data.type)),!1)},tracing:function(t,e,o){var s,n,h,l,p=0,d=1e4,Z=0,C=[],P=!1,S=!1;for(S;Z<e.length&&p<d;)if((h=e[Z]).data.done||h.data.type!=="X")Z++;else{C.length>0&&C.push([NaN,NaN]),l=h.data.idx,s=t,P=this._addVertex(C,h,S),n=h.entry_exit;do{if(P)break;if(o==="intersection"&&h.entry_exit==="entry"||o==="union"&&h.entry_exit==="exit"||o==="difference"&&s===t==(h.entry_exit==="exit")){do if(h=h._next,P=this._addVertex(C,h,S))break;while(this._stayOnPath(h,n));p++}else{do if(h=h._prev,P=this._addVertex(C,h,S))break;while(this._stayOnPath(h,n));p++}if(P)break;if(!h.neighbour)return console.log("Tracing: emergency break - no neighbour!!!!!!!!!!!!!!!!!",p),[[0],[0]];if((h=h.neighbour).data.done)break;h.data.done=!0,n=h.entry_exit,s=h.data.path}while(h.data.idx!==l&&p<d);p>=d&&console.log("Tracing: stopping an infinite loop!",p),Z++}return this._getCoordsArrays(C,!1)},isEmptyCase:function(t,e,o){return o==="intersection"&&(t.length===0||e.length===0)||o==="union"&&t.length===0&&e.length===0||o==="difference"&&t.length===0},_getCoordsArrays:function(t,e){var o,s=[],n=[],h=t.length;for(o=0;o<h;o++)t[o].coords?(s.push(t[o].coords.usrCoords[1]),n.push(t[o].coords.usrCoords[2])):(s.push(t[o][0]),n.push(t[o][1]));return e&&h>0&&(t[0].coords?(s.push(t[0].coords.usrCoords[1]),n.push(t[0].coords.usrCoords[2])):(s.push(t[0][0]),n.push(t[0][1]))),[s,n]},handleEmptyIntersection:function(t,e,o){var s,n,h=!1,l=[];if(t.length===0)return l=o==="union"?e:[],this._getCoordsArrays(l,!0);if(e.length===0)return l=o==="intersection"?[]:t,this._getCoordsArrays(l,!0);if(t.length>0)for(s=t[0];s.intersection&&!(s=s._next)._end;);if(e.length>0)for(n=e[0];n.intersection&&!(n=n._next)._end;);return g.Z.windingNumber(s.coords.usrCoords,e)===0?g.Z.windingNumber(n.coords.usrCoords,t)!==0?(o==="union"?(l=l.concat(t)).push(t[0]):o==="difference"&&((l=l.concat(t)).push(t[0]),g.Z.signedPolygon(t)*g.Z.signedPolygon(e)>0&&l.reverse(),l.push([NaN,NaN])),o!=="difference"&&o!=="intersection"||((l=l.concat(e)).push(e[0]),h=!1)):o==="difference"?(l=l.concat(t),h=!0):o==="union"&&((l=l.concat(t)).push(t[0]),l.push([NaN,NaN]),(l=l.concat(e)).push(e[0])):o==="intersection"?(l=l.concat(t),h=!0):o==="union"&&(l=l.concat(e)).push(e[0]),this._getCoordsArrays(l,h)},_countCrossingIntersections:function(t){var e,o=t.length,s=0;for(e=0;e<o;e++)t[e].data.type==="X"&&s++;return s},_getPath:function(t,e){var o,s,n,h,l,p,d,Z=[];if(t.elementClass!==x.Z.OBJECT_CLASS_CURVE||t.type!==x.Z.OBJECT_TYPE_ARC&&t.type!==x.Z.OBJECT_TYPE_SECTOR){if(t.elementClass===x.Z.OBJECT_CLASS_CURVE&&a.Z.exists(t.points))for(s=t.numberPoints,o=0;o<s;o++)this._addToList(Z,t.points[o],o);else if(t.type===x.Z.OBJECT_TYPE_POLYGON)for(o=0;o<t.vertices.length;o++)this._addToList(Z,t.vertices[o].coords,o);else if(t.elementClass===x.Z.OBJECT_CLASS_CIRCLE)for(d=359,n=t.Radius(),h=2*Math.PI/d,o=0;o<=d;o++)this._addToList(Z,new b.Z(x.Z.COORDS_BY_USER,[t.center.coords.usrCoords[0],t.center.coords.usrCoords[1]+Math.cos(o*h)*n,t.center.coords.usrCoords[2]+Math.sin(o*h)*n],e),o);else if(a.Z.isArray(t))for(s=t.length,o=0;o<s;o++)a.Z.exists(t[o].coords)?this._addToList(Z,t[o].coords,o):a.Z.isArray(t[o])?this._addToList(Z,new b.Z(x.Z.COORDS_BY_USER,t[o],e),o):a.Z.exists(t[o].usrCoords)&&this._addToList(Z,t[o],o)}else{for(l=g.Z.rad(t.radiuspoint,t.center,t.anglepoint),d=Math.floor(180*l/Math.PI),n=t.Radius(),h=l/d,p=Math.atan2(t.radiuspoint.coords.usrCoords[2]-t.center.coords.usrCoords[2],t.radiuspoint.coords.usrCoords[1]-t.center.coords.usrCoords[1]),t.type===x.Z.OBJECT_TYPE_SECTOR&&this._addToList(Z,t.center.coords,0),o=0;o<=d;o++)this._addToList(Z,new b.Z(x.Z.COORDS_BY_USER,[t.center.coords.usrCoords[0],t.center.coords.usrCoords[1]+Math.cos(o*h+p)*n,t.center.coords.usrCoords[2]+Math.sin(o*h+p)*n],e),o+1);t.type===x.Z.OBJECT_TYPE_SECTOR&&this._addToList(Z,t.center.coords,d+2)}return Z},greinerHormann:function(t,e,o,s){var n,h,l,p,d=[],Z=[];return(n=(d=this._getPath(t,s)).length)>0&&g.Z.distance(d[0].coords.usrCoords,d[n-1].coords.usrCoords,3)<B.Z.eps&&d.pop(),(n=(Z=this._getPath(e,s)).length)>0&&g.Z.distance(Z[0].coords.usrCoords,Z[n-1].coords.usrCoords,3)<B.Z.eps*B.Z.eps&&Z.pop(),this.isEmptyCase(d,Z,o)?[[],[]]:(l=this.makeDoublyLinkedList(d),p=this.makeDoublyLinkedList(Z),h=this.findIntersections(d,Z,s)[0],this._handleFullyDegenerateCase(d,Z,s),this.markEntryExit(d,Z,l),this.markEntryExit(Z,d,p),this._countCrossingIntersections(h)===0?this.handleEmptyIntersection(d,Z,o):this.tracing(d,h,o))},union:function(t,e,o){return this.greinerHormann(t,e,"union",o)},intersection:function(t,e,o){return this.greinerHormann(t,e,"intersection",o)},difference:function(t,e,o){return this.greinerHormann(t,e,"difference",o)}},u.Z.extend(B.Z.Clip,{}),B.Z.Clip,B.Z.Poly={},B.Z.Poly.Ring=function(t){this.vars=t},u.Z.extend(B.Z.Poly.Ring.prototype,{}),B.Z.Poly.Monomial=function(t,e,o){var s;if(!a.Z.exists(t))throw new Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(a.Z.isArray(o)||(o=[]),s=(o=o.slice(0,t.vars.length)).length;s<t.vars.length;s++)o.push(0);this.ring=t,this.coefficient=e||0,this.exponents=a.Z.deepCopy(o)},u.Z.extend(B.Z.Poly.Monomial.prototype,{copy:function(){return new B.Z.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var t,e=[];for(t=0;t<this.ring.vars.length;t++)e.push(this.ring.vars[t]+"^"+this.exponents[t]);return this.coefficient+"*"+e.join("*")}}),B.Z.Poly.Polynomial=function(t,e){var o;if(!a.Z.exists(t))throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");o=a.Z.exists(e)&&a.Z.isString(e)?void 0:[],this.ring=t,this.monomials=o},u.Z.extend(B.Z.Poly.Polynomial.prototype,{findSignature:function(t){var e;for(e=0;e<this.monomials.length;e++)if(a.Z.cmpArrays(this.monomials[e].exponents,t))return e;return-1},addSubMonomial:function(t,e){var o;(o=this.findSignature(t.exponents))>-1?this.monomials[o].coefficient+=e*t.coefficient:(t.coefficient*=e,this.monomials.push(t))},add:function(t){var e;if(!a.Z.exists(t)||t.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.");if(a.Z.isArray(t.exponents))this.addSubMonomial(t,1);else for(e=0;e<t.monomials.length;e++)this.addSubMonomial(t.monomials[e],1)},sub:function(t){var e;if(!a.Z.exists(t)||t.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.");if(a.Z.isArray(t.exponents))this.addSubMonomial(t,-1);else for(e=0;e<t.monomials.length;e++)this.addSubMonomial(t.monomials[e],-1)},copy:function(){var t,e;for(e=new B.Z.Poly.Polynomial(this.ring),t=0;t<this.monomials.length;t++)e.monomials.push(this.monomials[t].copy());return e},print:function(){var t,e=[];for(t=0;t<this.monomials.length;t++)e.push("("+this.monomials[t].print()+")");return e.join("+")}}),B.Z.Poly,u.Z.Complex=function(t,e){this.isComplex=!0,t&&t.isComplex&&(e=t.imaginary,t=t.real),this.real=t||0,this.imaginary=e||0,this.absval=0,this.angle=0},u.Z.extend(u.Z.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(t){return a.Z.isNumber(t)?this.real+=t:(this.real+=t.real,this.imaginary+=t.imaginary),this},sub:function(t){return a.Z.isNumber(t)?this.real-=t:(this.real-=t.real,this.imaginary-=t.imaginary),this},mult:function(t){var e,o;return a.Z.isNumber(t)?(this.real*=t,this.imaginary*=t):(e=this.real,o=this.imaginary,this.real=e*t.real-o*t.imaginary,this.imaginary=e*t.imaginary+o*t.real),this},div:function(t){var e,o,s;if(a.Z.isNumber(t)){if(Math.abs(t)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=t,this.imaginary/=t}else{if(Math.abs(t.real)<Math.eps&&Math.abs(t.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;e=t.real*t.real+t.imaginary*t.imaginary,s=this.real,o=this.imaginary,this.real=(s*t.real+o*t.imaginary)/e,this.imaginary=(o*t.real-s*t.imaginary)/e}return this},conj:function(){return this.imaginary*=-1,this}}),u.Z.C={},u.Z.C.add=function(t,e){var o=new u.Z.Complex(t);return o.add(e),o},u.Z.C.sub=function(t,e){var o=new u.Z.Complex(t);return o.sub(e),o},u.Z.C.mult=function(t,e){var o=new u.Z.Complex(t);return o.mult(e),o},u.Z.C.div=function(t,e){var o=new u.Z.Complex(t);return o.div(e),o},u.Z.C.conj=function(t){var e=new u.Z.Complex(t);return e.conj(),e},u.Z.C.abs=function(t){var e=new u.Z.Complex(t);return e.conj(),e.mult(t),Math.sqrt(e.real)},u.Z.Complex.C=u.Z.C;const Q=u.Z.Complex;var it=__webpack_require__(766);u.Z.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1},u.Z.extend(u.Z.AbstractRenderer.prototype,{_updateVisual:function(t,e,o){(o||this.enhancedRendering)&&(e=e||{},this.setObjectTransition(t),a.Z.evaluate(t.visProp.draft)?this.setDraft(t):(e.stroke||(t.highlighted?(this.setObjectStrokeColor(t,t.visProp.highlightstrokecolor,t.visProp.highlightstrokeopacity),this.setObjectStrokeWidth(t,t.visProp.highlightstrokewidth)):(this.setObjectStrokeColor(t,t.visProp.strokecolor,t.visProp.strokeopacity),this.setObjectStrokeWidth(t,t.visProp.strokewidth))),e.fill||(t.highlighted?this.setObjectFillColor(t,t.visProp.highlightfillcolor,t.visProp.highlightfillopacity):this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity)),e.dash||this.setDashStyle(t,t.visProp),e.shadow||this.setShadow(t),e.gradient||this.setShadow(t),e.tabindex||this.setTabindex(t)))},_getHighlighted:function(t){var e=!1;return a.Z.exists(t.board)&&a.Z.exists(t.board.highlightedObjects)||(e=!0),!e&&a.Z.exists(t.board.highlightedObjects[t.id])?"highlight":""},drawPoint:function(t){var e,o=it.Z.normalizePointFace(a.Z.evaluate(t.visProp.face));e=o==="o"?"ellipse":o==="[]"?"rect":"path",t.rendNode=this.appendChildPrim(this.createPrim(e,t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,e),this._updateVisual(t,{dash:!0,shadow:!0},!0),this.updatePoint(t)},updatePoint:function(t){var e,o=a.Z.evaluate(t.visProp.size),s=it.Z.normalizePointFace(a.Z.evaluate(t.visProp.face)),n=a.Z.evaluate(t.visProp.sizeunit),h=a.Z.evaluate(t.visProp.zoom);isNaN(t.coords.scrCoords[2]+t.coords.scrCoords[1])||(n==="user"&&(o*=Math.sqrt(t.board.unitX*t.board.unitY)),e=(o*=t.board&&h?Math.sqrt(t.board.zoomX*t.board.zoomY):1)===0?0:o+1,s==="o"?this.updateEllipsePrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2],e,e):s==="[]"?this.updateRectPrim(t.rendNode,t.coords.scrCoords[1]-o,t.coords.scrCoords[2]-o,2*o,2*o):this.updatePathPrim(t.rendNode,this.updatePathStringPoint(t,o,s),t.board),this._updateVisual(t,{dash:!1,shadow:!1}),this.setShadow(t))},changePointStyle:function(t){var e=this.getElementById(t.id);a.Z.exists(e)&&this.remove(e),this.drawPoint(t),a.Z.clearVisPropOld(t),t.visPropCalc.visible||this.display(t,!1),a.Z.evaluate(t.visProp.draft)&&this.setDraft(t)},drawLine:function(t){t.rendNode=this.appendChildPrim(this.createPrim("line",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"lines"),this.updateLine(t)},updateLine:function(t){this._updateVisual(t),this.updatePathWithArrowHeads(t),this.setLineCap(t)},drawCurve:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"path"),this.updateCurve(t)},updateCurve:function(t){this._updateVisual(t),this.updatePathWithArrowHeads(t),this.setLineCap(t)},updatePathWithArrowHeads:function(t,e){var o,s,n=t.visProp,h=e?"highlight":"";o=e&&n.highlightstrokewidth?Math.max(a.Z.evaluate(n.highlightstrokewidth),a.Z.evaluate(n.strokewidth)):a.Z.evaluate(n.strokewidth),s=this.getArrowHeadData(t,o,h),this.makeArrows(t,s),t.elementClass===x.Z.OBJECT_CLASS_LINE?this.updateLineWithEndings(t,s):t.elementClass===x.Z.OBJECT_CLASS_CURVE&&this.updatePath(t),this.setArrowSize(t,s)},getArrowHeadData:function(t,e,o){var s,n,h,l,p=B.Z.eps,d=0,Z=0,C=0,P=0,S=a.Z.evaluate(t.visProp.firstarrow),w=a.Z.evaluate(t.visProp.lastarrow);return(S||w)&&(s=a.Z.exists(S.type)?a.Z.evaluate(S.type):t.elementClass===x.Z.OBJECT_CLASS_LINE?1:7,n=a.Z.exists(w.type)?a.Z.evaluate(w.type):t.elementClass===x.Z.OBJECT_CLASS_LINE?1:7,S&&(l=6,a.Z.exists(S.size)&&(l=a.Z.evaluate(S.size)),o!==""&&a.Z.exists(S[o+"size"])&&(l=a.Z.evaluate(S[o+"size"])),h=e*l,s===2?(h*=.5,p+=e*l):s===3?(h=e*l/3,p+=e):s===4||s===5||s===6?(h=e*l/1.5,p+=e*l):s===7?(h=0,l=10,p+=e):p+=e*l,d+=h,C=l),w&&(l=6,a.Z.exists(w.size)&&(l=a.Z.evaluate(w.size)),o!==""&&a.Z.exists(w[o+"size"])&&(l=a.Z.evaluate(w[o+"size"])),h=e*l,n===2?(h*=.5,p+=e*l):n===3?(h=e*l/3,p+=e):n===4||n===5||n===6?(h=e*l/1.5,p+=e*l):n===7?(h=0,l=10,p+=e):p+=e*l,Z+=h,P=l)),t.visPropCalc.typeFirst=s,t.visPropCalc.typeLast=n,{evFirst:S,evLast:w,typeFirst:s,typeLast:n,offFirst:d,offLast:Z,sizeFirst:C,sizeLast:P,showFirst:1,showLast:1,minLen:p,strokeWidth:e}},updateLineWithEndings:function(t,e){var o,s,n;return o=new b.Z(x.Z.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),s=new b.Z(x.Z.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),n=a.Z.evaluate(t.visProp.margin),g.Z.calcStraight(t,o,s,n),this.handleTouchpoints(t,o,s,e),this.getPositionArrowHead(t,o,s,e),this.updateLinePrim(t.rendNode,o.scrCoords[1],o.scrCoords[2],s.scrCoords[1],s.scrCoords[2],t.board),this},updatePath:function(t){return a.Z.evaluate(t.visProp.handdrawing)?this.updatePathPrim(t.rendNode,this.updatePathStringBezierPrim(t),t.board):this.updatePathPrim(t.rendNode,this.updatePathStringPrim(t),t.board),this},getPositionArrowHead:function(t,e,o,s){var n,h,l,p,d;return(s.evFirst||s.evLast)&&(h=l=p=d=0,n=e.distance(x.Z.COORDS_BY_SCREEN,o),s.evFirst&&t.board.renderer.type!=="vml"&&(n>=s.minLen?(h=(o.scrCoords[1]-e.scrCoords[1])*s.offFirst/n,l=(o.scrCoords[2]-e.scrCoords[2])*s.offFirst/n):s.showFirst=0),s.evLast&&t.board.renderer.type!=="vml"&&(n>=s.minLen?(p=(o.scrCoords[1]-e.scrCoords[1])*s.offLast/n,d=(o.scrCoords[2]-e.scrCoords[2])*s.offLast/n):s.showLast=0),e.setCoordinates(x.Z.COORDS_BY_SCREEN,[e.scrCoords[1]+h,e.scrCoords[2]+l],!1,!0),o.setCoordinates(x.Z.COORDS_BY_SCREEN,[o.scrCoords[1]-p,o.scrCoords[2]-d],!1,!0)),this},handleTouchpoints:function(t,e,o,s){var n,h,l,p,d,Z,C;return(s.evFirst||s.evLast)&&(l=p=d=Z=C=0,n=a.Z.evaluate(t.point1.visProp.size)+a.Z.evaluate(t.point1.visProp.strokewidth),h=a.Z.evaluate(t.point2.visProp.size)+a.Z.evaluate(t.point2.visProp.strokewidth),s.evFirst&&a.Z.evaluate(t.visProp.touchfirstpoint)&&(l=e.distance(x.Z.COORDS_BY_SCREEN,o),p=(o.scrCoords[1]-e.scrCoords[1])*n/l,d=(o.scrCoords[2]-e.scrCoords[2])*n/l),s.evLast&&a.Z.evaluate(t.visProp.touchlastpoint)&&(l=e.distance(x.Z.COORDS_BY_SCREEN,o),Z=(o.scrCoords[1]-e.scrCoords[1])*h/l,C=(o.scrCoords[2]-e.scrCoords[2])*h/l),e.setCoordinates(x.Z.COORDS_BY_SCREEN,[e.scrCoords[1]+p,e.scrCoords[2]+d],!1,!0),o.setCoordinates(x.Z.COORDS_BY_SCREEN,[o.scrCoords[1]-Z,o.scrCoords[2]-C],!1,!0)),this},setArrowSize:function(t,e){return e.evFirst&&this._setArrowWidth(t.rendNodeTriangleStart,e.showFirst*e.strokeWidth,t.rendNode,e.sizeFirst),e.evLast&&this._setArrowWidth(t.rendNodeTriangleEnd,e.showLast*e.strokeWidth,t.rendNode,e.sizeLast),this},setLineCap:function(t){},drawTicks:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"path")},updateTicks:function(t){},drawEllipse:function(t){t.rendNode=this.appendChildPrim(this.createPrim("ellipse",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"ellipse"),this.updateEllipse(t)},updateEllipse:function(t){this._updateVisual(t);var e=t.Radius();Math.abs(t.center.coords.usrCoords[0])>B.Z.eps&&!isNaN(e+t.center.coords.scrCoords[1]+t.center.coords.scrCoords[2])&&e*t.board.unitX<2e6&&this.updateEllipsePrim(t.rendNode,t.center.coords.scrCoords[1],t.center.coords.scrCoords[2],e*t.board.unitX,e*t.board.unitY)},drawPolygon:function(t){t.rendNode=this.appendChildPrim(this.createPrim("polygon",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"polygon"),this.updatePolygon(t)},updatePolygon:function(t){this._updateVisual(t,{stroke:!0,dash:!0}),this.updatePolygonPrim(t.rendNode,t)},displayCopyright:function(t,e){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){var e,o,s,n;a.Z.evaluate(t.visProp.display)==="html"&&N.Z.isBrowser&&this.type!=="no"?((e=this.container.ownerDocument.createElement("div")).style.position="absolute",e.className=a.Z.evaluate(t.visProp.cssclass),s=a.Z.evaluate(t.visProp.layer),a.Z.exists(s)||(s=0),o=this.container.style.zIndex===""?0:parseInt(this.container.style.zIndex,10),e.style.zIndex=o+s,this.container.appendChild(e),e.setAttribute("id",this.container.id+"_"+t.id)):e=this.drawInternalText(t),t.rendNode=e,t.htmlStr="",t.visProp.islabel&&a.Z.exists(t.visProp.anchor)?(n=a.Z.evaluate(t.visProp.anchor.visProp.visible),t.prepareUpdate().updateVisibility(n)):t.prepareUpdate().updateVisibility(),this.updateText(t)},updateText:function(t){var e,o,s,n,h,l,p,d,Z,C=t.plaintext;if(t.visPropCalc.visible)if(this.updateTextStyle(t,!1),a.Z.evaluate(t.visProp.display)==="html"&&this.type!=="no"){if(isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])||(o=t.coords.scrCoords[1],o=Math.abs(o)<1e6?o:1e6,e=(d=t.getAnchorX())==="right"?t.board.canvasWidth-o:d==="middle"?o-.5*t.size[0]:o,t.visPropOld.left!==d+e&&(d==="right"?(t.rendNode.style.right=e+"px",t.rendNode.style.left="auto"):(t.rendNode.style.left=e+"px",t.rendNode.style.right="auto"),t.visPropOld.left=d+e),o=t.coords.scrCoords[2]+this.vOffsetText,o=Math.abs(o)<1e6?o:1e6,e=(Z=t.getAnchorY())==="bottom"?t.board.canvasHeight-o:Z==="middle"?o-.5*t.size[1]:o,t.visPropOld.top!==Z+e&&(Z==="bottom"?(t.rendNode.style.top="auto",t.rendNode.style.bottom=e+"px"):(t.rendNode.style.bottom="auto",t.rendNode.style.top=e+"px"),t.visPropOld.top=Z+e)),t.htmlStr!==C){try{t.type===a.Z.OBJECT_TYPE_BUTTON?t.rendNodeButton.innerHTML=C:t.type===a.Z.OBJECT_TYPE_CHECKBOX||t.type===a.Z.OBJECT_TYPE_INPUT?t.rendNodeLabel.innerHTML=C:t.rendNode.innerHTML=C}catch{s=t.rendNode.parentNode,t.rendNode.parentNode.removeChild(t.rendNode),t.rendNode.innerHTML=C,s.appendChild(t.rendNode)}if(t.htmlStr=C,a.Z.evaluate(t.visProp.usemathjax))try{MathJax.typeset?MathJax.typeset([t.rendNode]):MathJax.Hub.Queue(["Typeset",MathJax.Hub,t.rendNode]),p="fullscreenwrap_"+(l=t.board.container),document.getElementById(p)&&(n=t.board.containerObj._cssFullscreenStore.scale,h=t.board.containerObj._cssFullscreenStore.vshift,N.Z.scaleJSXGraphDiv("#"+p,"#"+l,n,h))}catch{u.Z.debug("MathJax (not yet) loaded")}else if(a.Z.evaluate(t.visProp.usekatex))try{katex.render(C,t.rendNode,{macros:a.Z.evaluate(t.visProp.katexmacros),throwOnError:!1})}catch{u.Z.debug("KaTeX not loaded (yet)")}else if(a.Z.evaluate(t.visProp.useasciimathml))try{AMprocessNode(t.rendNode,!1)}catch{u.Z.debug("AsciiMathML not loaded (yet)")}}this.transformImage(t,t.transformations)}else this.updateInternalText(t)},_css2js:function(t){var e,o,s,n,h,l=[],p=a.Z.trim(t).replace(/;$/,"").split(";");for(o=p.length,e=0;e<o;++e)a.Z.trim(p[e])!==""&&(h=p[e].split(":"),s=a.Z.trim(h[0].replace(/-([a-z])/gi,function(d,Z){return Z.toUpperCase()})),n=a.Z.trim(h[1]),l.push({key:s,val:n}));return l},updateTextStyle:function(t,e){var o,s,n,h,l,p,d,Z,C,P=t.visProp,S=N.Z.isBrowser?P.display:"internal",w=["rendNode","rendNodeTag","rendNodeLabel"],D=w.length,k=a.Z.evaluate(P.fontunit),I=["cssdefaultstyle","cssstyle"],U=I.length;if(e?(n=P.highlightstrokecolor,s=P.highlightstrokeopacity,h=P.highlightcssclass):(n=P.strokecolor,s=P.strokeopacity,h=P.cssclass),this.type!=="no"&&(S==="html"||this.type!=="canvas")){for(Z=0;Z<U;Z++)if((C=a.Z.evaluate(P[(e?"highlight":"")+I[Z]]))!==""&&t.visPropOld[I[Z]]!==C){for(p=this._css2js(C),l=0;l<D;l++)if(a.Z.exists(t[w[l]]))for(d in p)p.hasOwnProperty(d)&&(t[w[l]].style[p[d].key]=p[d].val);t.visPropOld[I[Z]]=C}if(o=a.Z.evaluate(P.fontsize),t.visPropOld.fontsize!==o){t.needsSizeUpdate=!0;try{for(l=0;l<D;l++)a.Z.exists(t[w[l]])&&(t[w[l]].style.fontSize=o+k)}catch{for(l=0;l<D;l++)a.Z.exists(t[w[l]])&&(t[w[l]].style.fontSize=o)}t.visPropOld.fontsize=o}}return this.setTabindex(t),this.setObjectTransition(t),S==="html"&&this.type!=="no"?(t.visPropOld.cssclass!==h&&(t.rendNode.className=h,t.visPropOld.cssclass=h,t.needsSizeUpdate=!0),this.setObjectStrokeColor(t,n,s)):this.updateInternalTextStyle(t,n,s),this},updateInternalTextStyle:function(t,e,o){this.setObjectStrokeColor(t,e,o)},drawImage:function(t){},updateImage:function(t){this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),this.updateImageURL(t),this.transformImage(t,t.transformations),this._updateVisual(t,{stroke:!0,dash:!0},!0)},joinTransforms:function(t,e){var o,s=t.board.origin.scrCoords[1],n=t.board.origin.scrCoords[2],h=t.board.unitX,l=t.board.unitY,p=e.length,d=[[1,0,0],[-s/h,1/h,0],[n/l,0,-1/l]];for(o=0;o<p;o++)d=B.Z.matMatMult(e[o].matrix,d);return d=B.Z.matMatMult([[1,0,0],[s,h,0],[n,0,-l]],d)},transformImage:function(t,e){},updateImageURL:function(t){},updateImageStyle:function(t,e){t.rendNode.className=a.Z.evaluate(e?t.visProp.highlightcssclass:t.visProp.cssclass)},drawForeignObject:function(t){},updateForeignObject:function(t){},appendChildPrim:function(t,e){},appendNodesToElement:function(t,e){},createPrim:function(t,e){return null},remove:function(t){},makeArrows:function(t,e){},_setArrowWidth:function(t,e,o){},updateEllipsePrim:function(t,e,o,s,n){},updateLinePrim:function(t,e,o,s,n,h){},updatePathPrim:function(t,e,o){},updatePathStringPoint:function(t,e,o){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,e){},updateRectPrim:function(t,e,o,s,n){},setPropertyPrim:function(t,e,o){},setTabindex:function(t){var e;t.board.attr.keyboard.enabled&&a.Z.exists(t.rendNode)&&(e=a.Z.evaluate(t.visProp.tabindex),t.visPropCalc.visible&&!a.Z.evaluate(t.visProp.fixed)||(e=null),e!==t.visPropOld.tabindex&&(t.rendNode.setAttribute("tabindex",e),t.visPropOld.tabindex=e))},display:function(t,e){t&&(t.visPropOld.visible=e)},show:function(t){},hide:function(t){},setBuffering:function(t,e){},setDashStyle:function(t){},setDraft:function(t){if(a.Z.evaluate(t.visProp.draft)){var e=t.board.options.elements.draft.color,o=t.board.options.elements.draft.opacity;this.setObjectTransition(t),t.type===x.Z.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,e,o):(t.elementClass===x.Z.OBJECT_CLASS_POINT?this.setObjectFillColor(t,e,o):this.setObjectFillColor(t,"none",0),this.setObjectStrokeColor(t,e,o),this.setObjectStrokeWidth(t,t.board.options.elements.draft.strokeWidth))}},removeDraft:function(t){this.setObjectTransition(t),t.type===x.Z.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity):(t.type===x.Z.OBJECT_CLASS_POINT&&this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity),this.setObjectStrokeColor(t,t.visProp.strokecolor,t.visProp.strokeopacity),this.setObjectStrokeWidth(t,t.visProp.strokewidth))},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,e){},setObjectFillColor:function(t,e,o){},setObjectStrokeColor:function(t,e,o){},setObjectStrokeWidth:function(t,e){},setShadow:function(t){},highlight:function(t){var e,o,s=t.visProp;if(this.setObjectTransition(t),!s.draft){if(t.type===x.Z.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,s.highlightfillcolor,s.highlightfillopacity),e=0;e<t.borders.length;e++)this.setObjectStrokeColor(t.borders[e],t.borders[e].visProp.highlightstrokecolor,t.borders[e].visProp.highlightstrokeopacity);else t.elementClass===x.Z.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!0):t.type===x.Z.OBJECT_TYPE_IMAGE?(this.updateImageStyle(t,!0),this.setObjectFillColor(t,s.highlightfillcolor,s.highlightfillopacity)):(this.setObjectStrokeColor(t,s.highlightstrokecolor,s.highlightstrokeopacity),this.setObjectFillColor(t,s.highlightfillcolor,s.highlightfillopacity));s.highlightstrokewidth&&(o=Math.max(a.Z.evaluate(s.highlightstrokewidth),a.Z.evaluate(s.strokewidth)),this.setObjectStrokeWidth(t,o),t.elementClass!==x.Z.OBJECT_CLASS_LINE&&t.elementClass!==x.Z.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(t,!0))}return this},noHighlight:function(t){var e,o,s=t.visProp;if(this.setObjectTransition(t),!a.Z.evaluate(t.visProp.draft)){if(t.type===x.Z.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,s.fillcolor,s.fillopacity),e=0;e<t.borders.length;e++)this.setObjectStrokeColor(t.borders[e],t.borders[e].visProp.strokecolor,t.borders[e].visProp.strokeopacity);else t.elementClass===x.Z.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!1):t.type===x.Z.OBJECT_TYPE_IMAGE?(this.updateImageStyle(t,!1),this.setObjectFillColor(t,s.fillcolor,s.fillopacity)):(this.setObjectStrokeColor(t,s.strokecolor,s.strokeopacity),this.setObjectFillColor(t,s.fillcolor,s.fillopacity));o=a.Z.evaluate(s.strokewidth),this.setObjectStrokeWidth(t,o),t.elementClass!==x.Z.OBJECT_CLASS_LINE&&t.elementClass!==x.Z.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(t,!1)}return this},suspendRedraw:function(){},unsuspendRedraw:function(){},drawZoomBar:function(t,e){var o,s,n=function(l){l||(l=window.event),l.stopPropagation?l.stopPropagation():l.cancelBubble=!0},h=function(l,p,d){var Z;d=d||"",(Z=o.createElement("span")).innerHTML=l,Z.style.paddingLeft="7px",Z.style.paddingRight="7px",Z.classList!==void 0&&Z.classList.add("JXG_navigation_button"),Z.setAttribute("id",d),s.appendChild(Z),N.Z.addEvent(Z,"click",function(C){return a.Z.bind(p,t)(),!1},t),N.Z.addEvent(Z,"mouseup",n,t),N.Z.addEvent(Z,"mousedown",n,t),N.Z.addEvent(Z,"touchend",n,t),N.Z.addEvent(Z,"touchstart",n,t)};N.Z.isBrowser&&this.type!=="no"&&(o=t.containerObj.ownerDocument,(s=o.createElement("div")).setAttribute("id",t.container+"_navigationbar"),s.style.color=e.strokecolor,s.style.backgroundColor=e.fillcolor,s.style.padding=e.padding,s.style.position=e.position,s.style.fontSize=e.fontsize,s.style.cursor=e.cursor,s.style.zIndex=e.zindex,t.containerObj.appendChild(s),s.style.right=e.right,s.style.bottom=e.bottom,s.classList!==void 0&&s.classList.add("JXG_navigation"),t.attr.showfullscreen&&h(t.attr.fullscreen.symbol,function(){t.toFullscreen(t.attr.fullscreen.id)},t.container+"_navigation_fullscreen"),t.attr.showscreenshot&&h(t.attr.screenshot.symbol,function(){window.setTimeout(function(){t.renderer.screenshot(t,"",!1)},330)},t.container+"_navigation_screenshot"),t.attr.showreload&&h("↻",function(){t.reload()},t.container+"_navigation_reload"),t.attr.showcleartraces&&h("⊗",function(){t.clearTraces()},t.container+"_navigation_cleartraces"),t.attr.shownavigation&&(t.attr.showzoom&&(h("–",t.zoomOut,t.container+"_navigation_out"),h("o",t.zoom100,t.container+"_navigation_100"),h("+",t.zoomIn,t.container+"_navigation_in")),h("←",t.clickLeftArrow,t.container+"_navigation_left"),h("↓",t.clickUpArrow,t.container+"_navigation_down"),h("↑",t.clickDownArrow,t.container+"_navigation_up"),h("→",t.clickRightArrow,t.container+"_navigation_right")))},getElementById:function(t){var e;return a.Z.exists(this.container)?(e=this.container.id+"_"+t,a.Z.exists(CSS)&&a.Z.exists(CSS.escape)&&(e=CSS.escape(e)),this.container.querySelector("#"+e)):""},removeToInsertLater:function(t){var e=t.parentNode,o=t.nextSibling;if(e!==null)return e.removeChild(t),function(){o?e.insertBefore(t,o):e.appendChild(t)}},resize:function(t,e){},createTouchpoints:function(t){},showTouchpoint:function(t){},hideTouchpoint:function(t){},updateTouchpoint:function(t,e){},dumpToDataURI:function(t){},dumpToCanvas:function(t,e,o,s){},screenshot:function(t){},setLayer:function(t,e){}});const rt=u.Z.AbstractRenderer;u.Z.FileReader={handleRemoteFile:function(t,e,o,s,n,h){var l=!1;try{l=new XMLHttpRequest,o.toLowerCase()==="raw"?l.overrideMimeType("text/plain; charset="+n):l.overrideMimeType("text/xml; charset="+n)}catch{try{l=new ActiveXObject("Msxml2.XMLHTTP")}catch{try{l=new ActiveXObject("Microsoft.XMLHTTP")}catch{l=!1}}}if(l){l.open("GET",t,s),o.toLowerCase()==="raw"?this.cbp=function(){var p=l;p.readyState===4&&e(p.responseText)}:this.cbp=function(){var p=l,d="";p.readyState===4&&(d=!a.Z.exists(p.responseStream)||p.responseText.slice(0,2)!=="PK"&&F.asciiCharCodeAt(p.responseText.slice(0,1),0)!==31?p.responseText:q.decode(jxgBinFileReader(p)),this.parseString(d,e,o,h))},this.cb=a.Z.bind(this.cbp,this),l.onreadystatechange=this.cb;try{l.send(null)}catch{throw new Error("JSXGraph: A problem occurred while trying to read remote file '"+t+"'.")}}else u.Z.debug("AJAX not activated!")},handleLocalFile:function(t,e,o,s,n,h){a.Z.exists(s)||(s=!0),o.toLowerCase()==="raw"?this.cbp=function(p){e(p.target.result)}:this.cbp=function(p){var d=p.target.result;this.parseString(d,e,o,h)},this.cb=a.Z.bind(this.cbp,this);var l=new FileReader;l.onload=this.cb,o.toLowerCase()==="raw"?l.readAsText(t):l.readAsText(t,n)},parseFileContent:function(t,e,o,s,n,h){a.Z.isString(t)||FileReader===void 0?this.handleRemoteFile(t,e,o,s,n,h):this.handleLocalFile(t,e,o,s,n,h)},parseString:function(t,e,o,s){var n;if(o=o.toLowerCase(),n=u.Z.readers[o],a.Z.exists(n))new n(e,t).read();else if(o!=="jessiecode")throw new Error("JSXGraph: There is no reader available for '"+o+"'.");a.Z.isFunction(s)&&s(e)}},!N.Z.isMetroApp()&&N.Z.isBrowser&&typeof navigator=="object"&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write(`<script type="text/vbscript">
Function Base64Encode(inData)
  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
  Dim cOut, sOut, I
  For I = 1 To LenB(inData) Step 3
    Dim nGroup, pOut, sGroup
    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _
      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))
    nGroup = Oct(nGroup)
    nGroup = String(8 - Len(nGroup), "0") & nGroup
    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _
      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)
    sOut = sOut + pOut
  Next
  Select Case LenB(inData) Mod 3
    Case 1: '8 bit final
      sOut = Left(sOut, Len(sOut) - 2) + "=="
    Case 2: '16 bit final
      sOut = Left(sOut, Len(sOut) - 1) + "="
  End Select
  Base64Encode = sOut
End Function

Function MyASC(OneChar)
  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)
End Function

Function jxgBinFileReader(xhr)
    Dim byteString
    Dim b64String
    Dim i
    byteString = xhr.responseBody
    ReDim byteArray(LenB(byteString))
    For i = 1 To LenB(byteString)
        byteArray(i-1) = AscB(MidB(byteString, i, 1))
    Next
    b64String = Base64Encode(byteString)
    jxgBinFileReader = b64String
End Function
<\/script>
`);const dt=u.Z.FileReader;var ht=__webpack_require__(632),ut=__webpack_require__(254),_t=__webpack_require__(327);u.Z.Composition=function(t){var e,o=this,s=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],n=function(h){return function(){var l;for(l in o.elements)o.elements.hasOwnProperty(l)&&a.Z.exists(o.elements[l][h])&&o.elements[l][h].apply(o.elements[l],arguments);return o}};for(e=0;e<s.length;e++)this[s[e]]=n(s[e]);for(e in this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"},t)t.hasOwnProperty(e)&&this.add(e,t[e]);this.dump=!0,this.subs={}},u.Z.extend(u.Z.Composition.prototype,{add:function(t,e){return!(a.Z.exists(this[t])||!a.Z.exists(e))&&(a.Z.exists(e.id)?this.elements[e.id]=e:this.elements[t]=e,a.Z.exists(e.name)&&(this.elementsByName[e.name]=e),e.on("attribute:name",this.nameListener,this),this.objectsList.push(e),this[t]=e,this.methodMap[t]=e,!0)},remove:function(t){var e,o=!1;for(e in this.elements)if(this.elements.hasOwnProperty(e)&&this.elements[e].id===this[t].id){o=!0;break}return o&&(delete this.elements[this[t].id],delete this[t]),o},nameListener:function(t,e,o){delete this.elementsByName[t],this.elementsByName[e]=o},select:function(t){return a.Z.exists(u.Z.Board)?u.Z.Board.prototype.select.call(this,t):new u.Z.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var t;for(t in this.subs)this.subs.hasOwnProperty(t)&&this.subs[t].visProp;return this.attr}});const Dt=u.Z.Composition;u.Z.Board=function(t,e,o,s,n,h,l,p,d,Z,C){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_MODE_ZOOM=17,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,a.Z.exists(C.document)&&C.document!==!1?this.document=C.document:N.Z.isBrowser&&(this.document=document),this.container=t,this.containerObj=N.Z.isBrowser?this.document.getElementById(this.container):null,N.Z.isBrowser&&e.type!=="no"&&this.containerObj===null)throw new Error(`
JSXGraph: HTML container element '`+t+"' not found.");this.renderer=e,this.grids=[],this.options=a.Z.deepCopy(it.Z),this.attr=C,this.dimension=2,this.jc=new ut.Z,this.jc.use(this),this.origin={},this.origin.usrCoords=[1,0,0],this.origin.scrCoords=[1,s[0],s[1]],this.zoomX=n,this.zoomY=h,this.unitX=l*this.zoomX,this.unitY=p*this.zoomY,this.keepaspectratio=!1,this.canvasWidth=d,this.canvasHeight=Z,a.Z.exists(o)&&o!==""&&N.Z.isBrowser&&!a.Z.exists(this.document.getElementById(o))?this.id=o:this.id=this.generateId(),X.Z.eventify(this),this.hooks=[],this.dependentBoards=[],this.inUpdate=!1,this.objects={},this.objectsList=[],this.groups={},this.animationObjects={},this.highlightedObjects={},this.numObjects=0,this.elementsByName={},this.mode=this.BOARD_MODE_NONE,this.updateQuality=this.BOARD_QUALITY_HIGH,this.isSuspendedRedraw=!1,this.calculateSnapSizes(),this.drag_dx=0,this.drag_dy=0,this.drag_position=[0,0],this.mouse={},this.touches=[],this.xmlString="",this.cPos=[],this.touchMoveLast=0,this.touchMoveLastId=1/0,this.positionAccessLast=0,this.downObjects=[],this.focusObjects=[],this.attr.showcopyright&&this.renderer.displayCopyright(x.Z.licenseText,parseInt(this.options.text.fontSize,10)),this.needsFullUpdate=!1,this.reducedUpdate=!1,this.currentCBDef="none",this.geonextCompatibilityMode=!1,this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1,this.hasMouseHandlers=!1,this.hasTouchHandlers=!1,this.hasPointerHandlers=!1,this.hasMouseUp=!1,this.hasTouchEnd=!1,this.hasPointerUp=!1,this._drag_offset=[0,0],this._inputDevice="mouse",this._board_touches=[],this.selectingMode=!1,this.isSelecting=!1,this._isScrolling=!1,this._isResizing=!1,this.selectingBox=[[0,0],[0,0]],this.userLog=[],this.mathLib=Math,this.mathLibJXG=u.Z.Math,this.attr.registerevents&&this.addEventHandlers(),this.attr.registerresizeevent&&this.addResizeEventHandlers(),this.attr.registerfullscreenevent&&this.addFullscreenEventHandlers(),this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setView:"setBoundingBox",setBoundingBox:"setBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}},u.Z.extend(u.Z.Board.prototype,{generateName:function(t){var e,o,s=this.attr.maxnamelength,n="",h="",l=[],p="";if(t.type===x.Z.OBJECT_TYPE_TICKS)return"";for(e=a.Z.isPoint(t)||a.Z.isPoint3D(t)?["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]:t.type===x.Z.OBJECT_TYPE_ANGLE?["","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;"]:["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],a.Z.isPoint(t)||t.elementClass===x.Z.OBJECT_CLASS_LINE||t.type===x.Z.OBJECT_TYPE_ANGLE||(n=t.type===x.Z.OBJECT_TYPE_POLYGON?"P_{":t.elementClass===x.Z.OBJECT_CLASS_CIRCLE?"k_{":t.elementClass===x.Z.OBJECT_CLASS_TEXT?"t_{":"s_{",h="}"),o=0;o<s;o++)l[o]=0;for(;l[s-1]<e.length;){for(l[0]=1;l[0]<e.length;l[0]++){for(p=n,o=s;o>0;o--)p+=e[l[o-1]];if(!a.Z.exists(this.elementsByName[p+h]))return p+h}for(l[0]=e.length,o=1;o<s;o++)l[o-1]===e.length&&(l[o-1]=1,l[o]+=1)}return""},generateId:function(){for(var t=1;a.Z.exists(u.Z.boards["jxgBoard"+t]);)t=Math.round(65535*Math.random());return"jxgBoard"+t},setId:function(t,e){var o,s=this.numObjects,n=t.id;if(this.numObjects+=1,n===""||!a.Z.exists(n))for(n=this.id+e+s;a.Z.exists(this.objects[n]);)o=Math.round(65535*Math.random()),n=this.id+e+s+"-"+o;return t.id=n,this.objects[n]=t,t._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=t,n},finalizeAdding:function(t){a.Z.evaluate(t.visProp.visible)===!1&&this.renderer.display(t,!1)},finalizeLabel:function(t){t.hasLabel&&!a.Z.evaluate(t.label.visProp.islabel)&&a.Z.evaluate(t.label.visProp.visible)===!1&&this.renderer.display(t.label,!1)},checkFrameRate:function(t){var e=!1,o=new Date().getTime();return a.Z.exists(t.pointerId)&&this.touchMoveLastId!==t.pointerId&&(e=!0,this.touchMoveLastId=t.pointerId),!e&&(o-this.touchMoveLast)*this.attr.maxframerate>=1e3&&(e=!0),e&&(this.touchMoveLast=o),e},getCoordsTopLeftCorner:function(){var t,e,o,s,n,h=this.document.ownerDocument||this.document,l=h.documentElement||this.document.body.parentNode,p=h.body,d=this.containerObj;if(this.cPos.length>0&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||new Date().getTime()-this.positionAccessLast<1e3))return this.cPos;if(this.positionAccessLast=new Date().getTime(),d.getBoundingClientRect){for(o=d.getBoundingClientRect(),s=1,n=d;n&&a.Z.exists(n.parentNode);)a.Z.exists(n.style)&&a.Z.exists(n.style.zoom)&&n.style.zoom!==""&&(s*=parseFloat(n.style.zoom)),n=n.parentNode;return(t=[o.left*s,o.top*s])[0]+=N.Z.getProp(d,"border-left-width"),t[1]+=N.Z.getProp(d,"border-top-width"),this.renderer.type!=="vml"&&(t[0]+=N.Z.getProp(d,"padding-left"),t[1]+=N.Z.getProp(d,"padding-top")),this.cPos=t.slice(),this.cPos}return t=N.Z.getOffset(d),e=this.document.documentElement.ownerDocument,!this.containerObj.currentStyle&&e.defaultView&&(t[0]+=N.Z.getProp(l,"margin-left"),t[1]+=N.Z.getProp(l,"margin-top"),t[0]+=N.Z.getProp(l,"border-left-width"),t[1]+=N.Z.getProp(l,"border-top-width"),t[0]+=N.Z.getProp(l,"padding-left"),t[1]+=N.Z.getProp(l,"padding-top")),p&&(t[0]+=N.Z.getProp(p,"left"),t[1]+=N.Z.getProp(p,"top")),typeof google=="object"&&google.translate&&(t[0]+=10,t[1]+=25),t[0]+=N.Z.getProp(d,"border-left-width"),t[1]+=N.Z.getProp(d,"border-top-width"),this.renderer.type!=="vml"&&(t[0]+=N.Z.getProp(d,"padding-left"),t[1]+=N.Z.getProp(d,"padding-top")),t[0]+=this.attr.offsetx,t[1]+=this.attr.offsety,this.cPos=t.slice(),this.cPos},getMousePosition:function(t,e){var o,s,n=this.getCoordsTopLeftCorner();return o=N.Z.getPosition(t,e,this.document),a.Z.exists(this.cssTransMat)||this.updateCSSTransforms(),s=[1,o[0]-n[0],o[1]-n[1]],(s=B.Z.matVecMult(this.cssTransMat,s))[1]/=s[0],s[2]/=s[0],[s[1],s[2]]},initMoveOrigin:function(t,e){this.drag_dx=t-this.origin.scrCoords[1],this.drag_dy=e-this.origin.scrCoords[2],this.mode=this.BOARD_MODE_MOVE_ORIGIN,this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(t,e,o,s){var n,h,l,p=[],d=[],Z=this.objectsList.length,C={visProp:{layer:-1e4}};for(h=0;h<Z;h++)l=(n=this.objectsList[h]).hasPoint&&n.hasPoint(t,e),n.visPropCalc.visible&&l&&(n.triggerEventHandlers([s+"down","down"],[o]),this.downObjects.push(n)),l&&n.isDraggable&&n.visPropCalc.visible&&(this.geonextCompatibilityMode&&(a.Z.isPoint(n)||n.elementClass===x.Z.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!a.Z.evaluate(n.visProp.fixed)&&(n.visProp.layer>C.visProp.layer||n.visProp.layer===C.visProp.layer&&n.lastDragTime.getTime()>=C.lastDragTime.getTime())&&(this.attr.ignorelabels&&a.Z.exists(C.label)&&n===C.label||(C=n,p.push(C),a.Z.exists(C.coords)?d.push(m.Z.subtract(C.coords.scrCoords.slice(1),[t,e])):d.push([0,0])));return this.attr.drag.enabled&&p.length>0&&(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst?(p.length=1,this._drag_offset=d[0]):(p=p.slice(-1),this._drag_offset=d[d.length-1]),this._drag_offset||(this._drag_offset=[0,0]),this.renderer.type==="svg"&&a.Z.exists(p[0])&&a.Z.evaluate(p[0].visProp.dragtotopoflayer)&&p.length===1&&a.Z.exists(p[0].rendNode)&&p[0].rendNode.parentNode.appendChild(p[0].rendNode),this.previousRotation=0,this.previousScale=1,p.length>=1&&(p[0].highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[o,p[0]])),p},moveObject:function(t,e,o,s,n){var h,l,p,d=new b.Z(x.Z.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(t,e),this);o&&o.obj&&((h=o.obj).coords&&(l=h.coords.scrCoords.slice()),this.addLogEntry("drag",h,d.usrCoords.slice(1)),this.drag_position=[d.scrCoords[1],d.scrCoords[2]],this.drag_position=m.Z.add(this.drag_position,this._drag_offset),a.Z.exists(h.coords)?h.setPositionDirectly(x.Z.COORDS_BY_SCREEN,this.drag_position):(this.displayInfobox(!1),isNaN(o.targets[0].Xprev+o.targets[0].Yprev)||h.setPositionDirectly(x.Z.COORDS_BY_SCREEN,[d.scrCoords[1],d.scrCoords[2]],[o.targets[0].Xprev,o.targets[0].Yprev]),o.targets[0].Xprev=d.scrCoords[1],o.targets[0].Yprev=d.scrCoords[2]),a.Z.exists(h.coords)&&(h.prepareUpdate().update(!1).updateRenderer(),this.updateInfobox(h),h.prepareUpdate().update(!0).updateRenderer()),h.coords&&(p=h.coords.scrCoords),h.coords&&l[1]===p[1]&&l[2]===p[2]||(h.triggerEventHandlers([n+"drag","drag"],[s]),this.update()),h.highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[s,h]),h.lastDragTime=new Date)},twoFingerMove:function(t,e,o){var s;a.Z.exists(t)&&a.Z.exists(t.obj)&&((s=t.obj).elementClass===x.Z.OBJECT_CLASS_LINE||s.type===x.Z.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(t.targets,s,e):s.elementClass===x.Z.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(t.targets,s,e),o&&s.triggerEventHandlers(["touchdrag","drag"],[o]))},twoFingerTouchObject:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U,J,z=0;if(a.Z.exists(t[0])&&a.Z.exists(t[1])&&!isNaN(t[0].Xprev+t[0].Yprev+t[1].Xprev+t[1].Yprev)){if(o===t[0].num?(I=t[1],U=t[0]):(I=t[0],U=t[1]),J=new b.Z(x.Z.COORDS_BY_SCREEN,[I.Xprev,I.Yprev],this).usrCoords,n=new b.Z(x.Z.COORDS_BY_SCREEN,[U.Xprev,U.Yprev],this).usrCoords,s=new b.Z(x.Z.COORDS_BY_SCREEN,[U.X,U.Y],this).usrCoords,l=B.Z.crossProduct(J,n),h=B.Z.crossProduct(J,s),d=B.Z.crossProduct(l,h),Math.abs(d[0])<B.Z.eps)return;if(a.Z.evaluate(e.visProp.rotatable)&&(z=g.Z.rad(n.slice(1),J.slice(1),s.slice(1))),(Z=this.create("transform",[z,[J[1],J[2]]],{type:"rotate"})).update(),a.Z.evaluate(e.visProp.scalable)&&(p=g.Z.distance(s,J)/g.Z.distance(n,J),C=this.create("transform",[-J[1],-J[2]],{type:"translate"}),P=this.create("transform",[p,p],{type:"scale"}),S=this.create("transform",[J[1],J[2]],{type:"translate"}),Z.melt(C).melt(P).melt(S)),e.elementClass===x.Z.OBJECT_CLASS_LINE)w=[],e.point1.draggable()&&w.push(e.point1),e.point2.draggable()&&w.push(e.point2),Z.applyOnce(w);else if(e.type===x.Z.OBJECT_TYPE_POLYGON){for(w=[],k=e.vertices.length-1,D=0;D<k;++D)e.vertices[D].draggable()&&w.push(e.vertices[D]);Z.applyOnce(w)}this.update(),e.highlight(!0)}},twoFingerTouchCircle:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w;e.method!=="pointCircle"&&e.method!=="pointLine"&&a.Z.exists(t[0])&&a.Z.exists(t[1])&&!isNaN(t[0].Xprev+t[0].Yprev+t[1].Xprev+t[1].Yprev)&&(o===t[0].num?(s=t[1],n=t[0]):(s=t[0],n=t[1]),p=new b.Z(x.Z.COORDS_BY_SCREEN,[s.Xprev,s.Yprev],this).usrCoords,l=new b.Z(x.Z.COORDS_BY_SCREEN,[n.Xprev,n.Yprev],this).usrCoords,h=new b.Z(x.Z.COORDS_BY_SCREEN,[n.X,n.Y],this).usrCoords,Z=g.Z.rad(l.slice(1),p.slice(1),h.slice(1)),C=this.create("transform",[-p[1],-p[2]],{type:"translate"}),P=this.create("transform",[Z],{type:"rotate"}),C.melt(P),a.Z.evaluate(e.visProp.scalable)&&(d=g.Z.distance(p,h)/g.Z.distance(p,l),S=this.create("transform",[d,d],{type:"scale"}),C.melt(S)),w=this.create("transform",[p[1],p[2]],{type:"translate"}),C.melt(w),e.center.draggable()&&C.applyOnce([e.center]),e.method==="twoPoints"?e.point2.draggable()&&C.applyOnce([e.point2]):e.method==="pointRadius"&&a.Z.isNumber(e.updateRadius.origin)&&e.setRadius(e.radius*d),this.update(e.center),e.highlight(!0))},highlightElements:function(t,e,o,s){var n,h,l,p={},d=this.objectsList.length;for(n=0;n<d;n++)l=(h=this.objectsList[n]).id,a.Z.exists(h.hasPoint)&&h.visPropCalc.visible&&h.hasPoint(t,e)&&(this.updateInfobox(h),a.Z.exists(this.highlightedObjects[l])||(p[l]=h,h.highlight(),this.triggerEventHandlers(["mousehit","hit"],[o,h,s])),h.mouseover?h.triggerEventHandlers(["mousemove","move"],[o]):(h.triggerEventHandlers(["mouseover","over"],[o]),h.mouseover=!0));for(n=0;n<d;n++)l=(h=this.objectsList[n]).id,h.mouseover&&(p[l]||(h.triggerEventHandlers(["mouseout","out"],[o]),h.mouseover=!1))},saveStartPos:function(t,e){var o,s,n=[];if(t.type===x.Z.OBJECT_TYPE_TICKS)n.push([1,NaN,NaN]);else if(t.elementClass===x.Z.OBJECT_CLASS_LINE)n.push(t.point1.coords.usrCoords),n.push(t.point2.coords.usrCoords);else if(t.elementClass===x.Z.OBJECT_CLASS_CIRCLE)n.push(t.center.coords.usrCoords),t.method==="twoPoints"&&n.push(t.point2.coords.usrCoords);else if(t.type===x.Z.OBJECT_TYPE_POLYGON)for(s=t.vertices.length-1,o=0;o<s;o++)n.push(t.vertices[o].coords.usrCoords);else if(t.type===x.Z.OBJECT_TYPE_SECTOR)n.push(t.point1.coords.usrCoords),n.push(t.point2.coords.usrCoords),n.push(t.point3.coords.usrCoords);else if(a.Z.isPoint(t)||t.type===x.Z.OBJECT_TYPE_GLIDER)n.push(t.coords.usrCoords);else if(t.elementClass===x.Z.OBJECT_CLASS_CURVE)t.points.length>0&&n.push(t.points[0].usrCoords);else try{n.push(t.coords.usrCoords)}catch(h){u.Z.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+h)}for(s=n.length,o=0;o<s;o++)e.Zstart.push(n[o][0]),e.Xstart.push(n[o][1]),e.Ystart.push(n[o][2])},mouseOriginMoveStart:function(t){var e,o;return(e=this._isRequiredKeyPressed(t,"pan"))&&(o=this.getMousePosition(t),this.initMoveOrigin(o[0],o[1])),e},mouseOriginMove:function(t){var e,o=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return o&&(e=this.getMousePosition(t),this.moveOrigin(e[0],e[1],!0)),o},touchStartMoveOriginOneFinger:function(t){var e,o,s=t[u.Z.touchProperty];return(e=this.attr.pan.enabled&&!this.attr.pan.needtwofingers&&s.length===1)&&(o=this.getMousePosition(t,0),this.initMoveOrigin(o[0],o[1])),e},touchOriginMove:function(t){var e,o=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return o&&(e=this.getMousePosition(t,0),this.moveOrigin(e[0],e[1],!0)),o},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE},addEventHandlers:function(){N.Z.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers()),this.containerObj!==null&&(this.containerObj.oncontextmenu=function(t){return a.Z.exists(t)&&t.preventDefault(),!1}),this.addKeyboardEventHandlers()},addResizeEventHandlers:function(){if(N.Z.isBrowser){try{this.startResizeObserver()}catch{N.Z.addEvent(window,"resize",this.resizeListener,this),this.startIntersectionObserver()}N.Z.addEvent(window,"scroll",this.scrollListener,this)}},removeEventHandlers:function(){this.removeMouseEventHandlers(),this.removeTouchEventHandlers(),this.removePointerEventHandlers(),this.removeFullscreenEventHandlers(),this.removeKeyboardEventHandlers(),N.Z.isBrowser&&(a.Z.exists(this.resizeObserver)?this.stopResizeObserver():(N.Z.removeEvent(window,"resize",this.resizeListener,this),this.stopIntersectionObserver()),N.Z.removeEvent(window,"scroll",this.scrollListener,this))},addPointerEventHandlers:function(){if(!this.hasPointerHandlers&&N.Z.isBrowser){var t=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(N.Z.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),N.Z.addEvent(t,"MSPointerMove",this.pointerMoveListener,this)):(N.Z.addEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),N.Z.addEvent(t,"pointermove",this.pointerMoveListener,this)),N.Z.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),N.Z.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.containerObj!==null&&(this.containerObj.style.touchAction="none"),this.hasPointerHandlers=!0}},addMouseEventHandlers:function(){if(!this.hasMouseHandlers&&N.Z.isBrowser){var t=this.attr.movetarget||this.containerObj;N.Z.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),N.Z.addEvent(t,"mousemove",this.mouseMoveListener,this),N.Z.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),N.Z.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!0}},addTouchEventHandlers:function(t){if(!this.hasTouchHandlers&&N.Z.isBrowser){var e=this.attr.movetarget||this.containerObj;N.Z.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),N.Z.addEvent(e,"touchmove",this.touchMoveListener,this),this.hasTouchHandlers=!0}},addFullscreenEventHandlers:function(){var t,e=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],o=e.length;if(!this.hasFullscreenEventHandlers&&N.Z.isBrowser){for(t=0;t<o;t++)N.Z.addEvent(this.document,e[t],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!0}},addKeyboardEventHandlers:function(){this.attr.keyboard.enabled&&!this.hasKeyboardHandlers&&N.Z.isBrowser&&(N.Z.addEvent(this.containerObj,"keydown",this.keyDownListener,this),N.Z.addEvent(this.containerObj,"focusin",this.keyFocusInListener,this),N.Z.addEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!0)},removeKeyboardEventHandlers:function(){this.hasKeyboardHandlers&&N.Z.isBrowser&&(N.Z.removeEvent(this.containerObj,"keydown",this.keyDownListener,this),N.Z.removeEvent(this.containerObj,"focusin",this.keyFocusInListener,this),N.Z.removeEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!1)},removeFullscreenEventHandlers:function(){var t,e=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],o=e.length;if(this.hasFullscreenEventHandlers&&N.Z.isBrowser){for(t=0;t<o;t++)N.Z.removeEvent(this.document,e[t],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!1}},removePointerEventHandlers:function(){if(this.hasPointerHandlers&&N.Z.isBrowser){var t=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(N.Z.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),N.Z.removeEvent(t,"MSPointerMove",this.pointerMoveListener,this)):(N.Z.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),N.Z.removeEvent(t,"pointermove",this.pointerMoveListener,this)),N.Z.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),N.Z.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasPointerUp&&(window.navigator.msPointerEnabled?N.Z.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(N.Z.removeEvent(this.document,"pointerup",this.pointerUpListener,this),N.Z.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this.hasPointerHandlers=!1}},removeMouseEventHandlers:function(){if(this.hasMouseHandlers&&N.Z.isBrowser){var t=this.attr.movetarget||this.containerObj;N.Z.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),N.Z.removeEvent(t,"mousemove",this.mouseMoveListener,this),this.hasMouseUp&&(N.Z.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),N.Z.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),N.Z.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!1}},removeTouchEventHandlers:function(){if(this.hasTouchHandlers&&N.Z.isBrowser){var t=this.attr.movetarget||this.containerObj;N.Z.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),N.Z.removeEvent(t,"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(N.Z.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasTouchHandlers=!1}},clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-.1*this.canvasHeight),this},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+.1*this.canvasHeight),this},gestureChangeListener:function(t){var e,o,s,n,h,l,p,d,Z,C,P,S,w=!1,D=this.attr.zoom.factorx,k=this.attr.zoom.factory;return this.mode!==this.BOARD_MODE_ZOOM||(t.preventDefault(),l=g.Z.distance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY],2),t.scale===void 0&&(t.scale=l/this.prevDist),!!a.Z.exists(this.prevCoords)&&(o=[t.touches[0].clientX-this.prevCoords[0][0],t.touches[0].clientY-this.prevCoords[0][1]],s=[t.touches[1].clientX-this.prevCoords[1][0],t.touches[1].clientY-this.prevCoords[1][1]],o[0]*o[0]+o[1]*o[1]<100&&s[0]*s[0]+s[1]*s[1]<100||(n=g.Z.rad(o,[0,0],s),this.isPreviousGesture!=="pan"&&Math.abs(n)>.2*Math.PI&&Math.abs(n)<1.8*Math.PI&&(w=!0),this.isPreviousGesture==="pan"||w||(Math.abs(t.scale)<.77||Math.abs(t.scale)>1.3)&&(w=!0),h=t.scale/this.prevScale,this.prevScale=t.scale,this.prevCoords=[[t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY]],e=new b.Z(x.Z.COORDS_BY_SCREEN,this.getMousePosition(t,0),this),this.attr.pan.enabled&&this.attr.pan.needtwofingers&&!w?(this.isPreviousGesture="pan",this.moveOrigin(e.scrCoords[1],e.scrCoords[2],!0)):this.attr.zoom.enabled&&Math.abs(h-1)<.5&&((this.attr.zoom.pinchhorizontal||this.attr.zoom.pinchvertical)&&(p=Math.abs(t.touches[0].clientX-t.touches[1].clientX),d=Math.abs(t.touches[0].clientY-t.touches[1].clientY),Z=Math.abs(Math.atan2(d,p)),S=Math.PI*this.attr.zoom.pinchsensitivity/90),this.attr.zoom.pinchhorizontal&&Z<S?(this.attr.zoom.factorx=h,this.attr.zoom.factory=1,C=0,P=0):this.attr.zoom.pinchvertical&&Math.abs(Z-.5*Math.PI)<S?(this.attr.zoom.factorx=1,this.attr.zoom.factory=h,C=0,P=0):(this.attr.zoom.factorx=h,this.attr.zoom.factory=h,C=e.usrCoords[1],P=e.usrCoords[2]),this.zoomIn(C,P),this.attr.zoom.factorx=D,this.attr.zoom.factory=k)),!1))},gestureStartListener:function(t){var e;return t.preventDefault(),this.prevScale=1,this.prevDist=g.Z.distance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY],2),this.prevCoords=[[t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY]],this.isPreviousGesture="none",e=this.getMousePosition(t,0),this.initMoveOrigin(e[0],e[1]),this.mode=this.BOARD_MODE_ZOOM,!1},_isRequiredKeyPressed:function(t,e){var o=this.attr[e];return!!o.enabled&&!(!(o.needshift&&t.shiftKey||!o.needshift&&!t.shiftKey)||!(o.needctrl&&t.ctrlKey||!o.needctrl&&!t.ctrlKey))},_isPointerRegistered:function(t){var e,o=this._board_touches.length;for(e=0;e<o;e++)if(this._board_touches[e].pointerId===t.pointerId)return!0;return!1},_pointerStorePosition:function(t){var e,o;for(e=0,o=!1;e<this._board_touches.length;e++)if(this._board_touches[e].pointerId===t.pointerId){this._board_touches[e].clientX=t.clientX,this._board_touches[e].clientY=t.clientY,o=!0;break}return!o&&this._board_touches.length<2&&this._board_touches.push({pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY}),this},_pointerRemoveTouches:function(t){var e;for(e=0;e<this._board_touches.length;e++)if(this._board_touches[e].pointerId===t.pointerId){this._board_touches.splice(e,1);break}return this},_pointerClearTouches:function(){this._board_touches.length>0&&this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE,this._board_touches=[],this.touches=[]},_getPointerInputDevice:function(t){if(N.Z.isBrowser){if(t.pointerType==="touch"||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)return"touch";if(t.pointerType==="mouse")return"mouse";if(t.pointerType==="pen")return"pen"}return"mouse"},pointerDownListener:function(t,e){var o,s,n,h,l,p,d,Z,C,P,S;if(!e&&this._isPointerRegistered(t))return!1;if(!e&&t.isPrimary&&this._pointerClearTouches(),this.hasPointerUp||(window.navigator.msPointerEnabled?N.Z.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(N.Z.addEvent(this.document,"pointerup",this.pointerUpListener,this),N.Z.addEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&a.Z.isFunction(this.document.selection.empty))this.document.selection.empty();else if(window.getSelection&&(p=window.getSelection()).removeAllRanges)try{p.removeAllRanges()}catch{}if(this._inputDevice=this._getPointerInputDevice(t),Z=this._inputDevice,this.options.precision.hasPoint=this.options.precision[Z],h=this.getMousePosition(t),this._testForSelection(t),this.selectingMode)return this._startSelecting(h),void this.triggerEventHandlers(["touchstartselecting","pointerstartselecting","startselecting"],[t]);if(this.attr.drag.enabled&&e?(l=[e],this.mode=this.BOARD_MODE_DRAG):l=this.initMoveObject(h[0],h[1],t,Z),d={num:t.pointerId,X:h[0],Y:h[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},l.length>0){for(P=l[l.length-1],C=!1,o=0;o<this.touches.length;o++)if(this.touches[o].obj===P){s=o,n=this.touches[o].targets.push(d)-1,C=!0;break}C||(n=0,s=this.touches.push({obj:P,targets:[d]})-1),this.dehighlightAll(),P.highlight(!0),this.saveStartPos(P,this.touches[s].targets[n]),t&&t.preventDefault?t.preventDefault():window.event&&(window.event.returnValue=!1)}return this.touches.length>0&&(t.preventDefault(),t.stopPropagation()),!!N.Z.isBrowser&&(this._getPointerInputDevice(t)!=="touch"?this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(t):(this._pointerStorePosition(t),t.touches=this._board_touches,t.touches.length===1&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(t)||t.touches.length!==2||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(t))),S="none",this.mode!==this.BOARD_MODE_NONE||!a.Z.evaluate(this.attr.browserpan)||a.Z.evaluate(this.attr.pan.enabled)&&!a.Z.evaluate(this.attr.pan.needtwofingers)||(S="pan-x pan-y"),this.containerObj.style.touchAction=S,this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[t]),!0)},pointerMoveListener:function(t){var e,o,s,n,h;if(this._getPointerInputDevice(t)==="touch"&&!this._isPointerRegistered(t))return this.BOARD_MODE_NONE;if(!this.checkFrameRate(t))return!1;if(this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.mode!==this.BOARD_MODE_NONE&&(t.preventDefault(),t.stopPropagation()),this.updateQuality=this.BOARD_QUALITY_LOW,this._inputDevice=this._getPointerInputDevice(t),h=this._inputDevice,this.options.precision.hasPoint=this.options.precision[h],this.selectingMode)s=this.getMousePosition(t),this._moveSelecting(s),this.triggerEventHandlers(["touchmoveselecting","moveselecting","pointermoveselecting"],[t,this.mode]);else if(!this.mouseOriginMove(t))if(this.mode===this.BOARD_MODE_DRAG){for(e=0;e<this.touches.length;e++)for(n=this.touches[e].targets,o=0;o<n.length;o++)if(n[o].num===t.pointerId){s=this.getMousePosition(t),n[o].X=s[0],n[o].Y=s[1],n.length===1?this.moveObject(s[0],s[1],this.touches[e],t,h):n.length===2&&(this.twoFingerMove(this.touches[e],t.pointerId,t),n[o].Xprev=s[0],n[o].Yprev=s[1]);break}}else this._getPointerInputDevice(t)==="touch"&&(this._pointerStorePosition(t),this._board_touches.length===2&&(t.touches=this._board_touches,this.gestureChangeListener(t))),s=this.getMousePosition(t),this.highlightElements(s[0],s[1],t,-1);return this.triggerEventHandlers(["pointermove","MSPointerMove","move"],[t,this.mode]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(t){var e,o,s,n,h=!1;if(this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[t]),this.displayInfobox(!1),t){for(e=0;e<this.touches.length;e++)for(n=this.touches[e].targets,o=0;o<n.length;o++)if(n[o].num===t.pointerId){n.splice(o,1),n.length===0&&this.touches.splice(e,1);break}}if(this.originMoveEnd(),this.update(),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["touchstopselecting","pointerstopselecting","stopselecting"],[t]),this.stopSelectionMode();else for(e=this.downObjects.length-1;e>-1;e--){for(s=!1,o=0;o<this.touches.length;o++)this.touches[o].obj.id===this.downObjects[e].id&&(s=!0);s||(this.downObjects[e].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[t]),a.Z.exists(this.downObjects[e].coords)||(this.downObjects[e].snapToGrid(),this.downObjects[e].snapToPoints(),h=!0),this.downObjects.splice(e,1))}return this.hasPointerUp&&(window.navigator.msPointerEnabled?N.Z.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(N.Z.removeEvent(this.document,"pointerup",this.pointerUpListener,this),N.Z.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),h&&this.update(),this._pointerClearTouches(),!0},touchStartListener:function(t){var e,o,s,n,h,l,p,d,Z,C,P=this.options.precision.touch,S=t[u.Z.touchProperty];for(this.hasTouchEnd||(N.Z.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0),this.document.selection&&a.Z.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,e=0;e<S.length;e++)S[e].jxg_isused=!1;for(e=0;e<this.touches.length;e++)for(C=this.touches[e].targets,n=0;n<C.length;n++){C[n].num=-1,P=this.options.precision.touch;do{for(h=0;h<S.length;h++)if(Math.abs(Math.pow(S[h].screenX-C[n].X,2)+Math.pow(S[h].screenY-C[n].Y,2))<P*P){C[n].num=h,C[n].X=S[h].screenX,C[n].Y=S[h].screenY,S[h].jxg_isused=!0;break}P*=2}while(C[n].num===-1&&P<this.options.precision.touchMax);C[n].num===-1&&(u.Z.debug("i couldn't find a targettouches for target no "+n+" on "+this.touches[e].obj.name+" ("+this.touches[e].obj.id+"). Removed the target."),u.Z.debug("eps = "+P+", touchMax = "+it.Z.precision.touchMax),C.splice(e,1))}for(e=0;e<S.length;e++)if(!S[e].jxg_isused){if(o=this.getMousePosition(t,e),this.selectingMode)return this._startSelecting(o),this.triggerEventHandlers(["touchstartselecting","startselecting"],[t]),t.preventDefault(),t.stopPropagation(),this.options.precision.hasPoint=this.options.precision.mouse,this.touches.length>0;if((s=this.initMoveObject(o[0],o[1],t,"touch")).length!==0){if(l=s[s.length-1],Z={num:e,X:S[e].screenX,Y:S[e].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},a.Z.isPoint(l)||l.elementClass===x.Z.OBJECT_CLASS_TEXT||l.type===x.Z.OBJECT_TYPE_TICKS||l.type===x.Z.OBJECT_TYPE_IMAGE)d=[Z],this.saveStartPos(l,d[0]),this.touches.push({obj:l,targets:d}),l.highlight(!0);else if(l.elementClass===x.Z.OBJECT_CLASS_LINE||l.elementClass===x.Z.OBJECT_CLASS_CIRCLE||l.elementClass===x.Z.OBJECT_CLASS_CURVE||l.type===x.Z.OBJECT_TYPE_POLYGON){for(p=!1,n=0;n<this.touches.length;n++)l.id===this.touches[n].obj.id&&(p=!0,this.touches[n].targets.length===1&&(this.saveStartPos(l,Z),this.touches[n].targets.push(Z)),S[e].jxg_isused=!0);p||(d=[Z],this.saveStartPos(l,d[0]),this.touches.push({obj:l,targets:d}),l.highlight(!0))}}S[e].jxg_isused=!0}return this.touches.length>0&&(t.preventDefault(),t.stopPropagation()),S.length===1&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(t)||S.length!==2||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(t)),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[t]),!1},touchMoveListener:function(t){var e,o,s,n,h=t[u.Z.touchProperty];if(!this.checkFrameRate(t))return!1;if(this.mode!==this.BOARD_MODE_NONE&&(t.preventDefault(),t.stopPropagation()),this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode){for(e=0;e<h.length;e++)if(!h[e].jxg_isused){o=this.getMousePosition(t,e),this._moveSelecting(o),this.triggerEventHandlers(["touchmoves","moveselecting"],[t,this.mode]);break}}else if(!this.touchOriginMove(t))if(this.mode===this.BOARD_MODE_DRAG){for(e=0;e<this.touches.length;e++)if((n=this.touches[e].targets).length===1){if(h[n[0].num]){if((o=this.getMousePosition(t,n[0].num))[0]<0||o[0]>this.canvasWidth||o[1]<0||o[1]>this.canvasHeight)return;n[0].X=o[0],n[0].Y=o[1],this.moveObject(o[0],o[1],this.touches[e],t,"touch")}}else if(n.length===2&&n[0].num>-1&&n[1].num>-1&&h[n[0].num]&&h[n[1].num]){if(o=this.getMousePosition(t,n[0].num),s=this.getMousePosition(t,n[1].num),o[0]<0||o[0]>this.canvasWidth||o[1]<0||o[1]>this.canvasHeight||s[0]<0||s[0]>this.canvasWidth||s[1]<0||s[1]>this.canvasHeight)return;n[0].X=o[0],n[0].Y=o[1],n[1].X=s[0],n[1].Y=s[1],this.twoFingerMove(this.touches[e],n[0].num,t),this.twoFingerMove(this.touches[e],n[1].num),n[0].Xprev=o[0],n[0].Yprev=o[1],n[1].Xprev=s[0],n[1].Yprev=s[1]}}else h.length===2&&this.gestureChangeListener(t),o=this.getMousePosition(t,0),this.highlightElements(o[0],o[1],t,-1);return this.mode!==this.BOARD_MODE_DRAG&&this.displayInfobox(!1),this.triggerEventHandlers(["touchmove","move"],[t,this.mode]),this.options.precision.hasPoint=this.options.precision.mouse,this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},touchEndListener:function(t){var e,o,s,n,h,l,p=this.options.precision.touch,d=[],Z=t&&t[u.Z.touchProperty],C=!1;if(this.triggerEventHandlers(["touchend","up"],[t]),this.displayInfobox(!1),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["touchstopselecting","stopselecting"],[t]),this.stopSelectionMode();else if(Z&&Z.length>0){for(e=0;e<this.touches.length;e++)d[e]=this.touches[e];for(this.touches.length=0,e=0;e<Z.length;e++)Z[e].jxg_isused=!1;for(e=0;e<d.length;e++){for(n=!1,h=0,l=d[e].targets,o=0;o<l.length;o++)for(l[o].found=!1,s=0;s<Z.length;s++)if(Math.abs(Math.pow(Z[s].screenX-l[o].X,2)+Math.pow(Z[s].screenY-l[o].Y,2))<p*p){l[o].found=!0,l[o].num=s,l[o].X=Z[s].screenX,l[o].Y=Z[s].screenY,h+=1;break}if(a.Z.isPoint(d[e].obj)?n=l[0]&&l[0].found:d[e].obj.elementClass===x.Z.OBJECT_CLASS_LINE?n=l[0]&&l[0].found||l[1]&&l[1].found:d[e].obj.elementClass===x.Z.OBJECT_CLASS_CIRCLE&&(n=h===1||h===3),n)for(this.touches.push({obj:d[e].obj,targets:[]}),o=0;o<l.length;o++)l[o].found&&this.touches[this.touches.length-1].targets.push({num:l[o].num,X:l[o].screenX,Y:l[o].screenY,Xprev:NaN,Yprev:NaN,Xstart:l[o].Xstart,Ystart:l[o].Ystart,Zstart:l[o].Zstart});else d[e].obj.noHighlight()}}else this.touches.length=0;for(e=this.downObjects.length-1;e>-1;e--){for(n=!1,o=0;o<this.touches.length;o++)this.touches[o].obj.id===this.downObjects[e].id&&(n=!0);n||(this.downObjects[e].triggerEventHandlers(["touchup","up"],[t]),a.Z.exists(this.downObjects[e].coords)||(this.downObjects[e].snapToGrid(),this.downObjects[e].snapToPoints(),C=!0),this.downObjects.splice(e,1))}return Z&&Z.length!==0||(this.hasTouchEnd&&(N.Z.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),C&&this.update()),!0},mouseDownListener:function(t){var e,o,s;if(this.document.selection&&a.Z.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!this.hasMouseUp)return N.Z.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0,this._inputDevice="mouse",this.options.precision.hasPoint=this.options.precision.mouse,e=this.getMousePosition(t),this._testForSelection(t),this.selectingMode?(this._startSelecting(e),void this.triggerEventHandlers(["mousestartselecting","startselecting"],[t])):((o=this.initMoveObject(e[0],e[1],t,"mouse")).length===0?(this.mode=this.BOARD_MODE_NONE,s=!0):(this.mouse={obj:null,targets:[{X:e[0],Y:e[1],Xprev:NaN,Yprev:NaN}]},this.mouse.obj=o[o.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),t&&t.preventDefault?t.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(s=this.mouseOriginMoveStart(t)),this.triggerEventHandlers(["mousedown","down"],[t]),s)},mouseMoveListener:function(t){var e;if(!this.checkFrameRate(t))return!1;e=this.getMousePosition(t),this.updateQuality=this.BOARD_QUALITY_LOW,this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.selectingMode?(this._moveSelecting(e),this.triggerEventHandlers(["mousemoveselecting","moveselecting"],[t,this.mode])):this.mouseOriginMove(t)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(e[0],e[1],this.mouse,t,"mouse"):this.highlightElements(e[0],e[1],t,-1),this.triggerEventHandlers(["mousemove","move"],[t,this.mode])),this.updateQuality=this.BOARD_QUALITY_HIGH},mouseUpListener:function(t){var e;if(this.selectingMode===!1&&this.triggerEventHandlers(["mouseup","up"],[t]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mouse&&this.mouse.obj&&(a.Z.exists(this.mouse.obj.coords)||(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints())),this.originMoveEnd(),this.dehighlightAll(),this.update(),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["mousestopselecting","stopselecting"],[t]),this.stopSelectionMode();else for(e=0;e<this.downObjects.length;e++)this.downObjects[e].triggerEventHandlers(["mouseup","up"],[t]);this.downObjects.length=0,this.hasMouseUp&&(N.Z.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.mouse=null},mouseWheelListener:function(t){if(!this.attr.zoom.wheel||!this._isRequiredKeyPressed(t,"zoom"))return!0;var e=(t=t||window.event).detail?-t.detail:t.wheelDelta/40,o=new b.Z(x.Z.COORDS_BY_SCREEN,this.getMousePosition(t),this);return e>0?this.zoomIn(o.usrCoords[1],o.usrCoords[2]):this.zoomOut(o.usrCoords[1],o.usrCoords[2]),this.triggerEventHandlers(["mousewheel"],[t]),t.preventDefault(),!1},keyDownListener:function(t){var e,o,s,n,h,l,p=t.target.id,d=0,Z=0,C=a.Z.evaluate(this.attr.keyboard.dx)/this.unitX,P=a.Z.evaluate(this.attr.keyboard.dy)/this.unitY,S=!1,w=!0;return!(!this.attr.keyboard.enabled||p==="")&&(!(n=this.containerObj.shadowRoot||document).activeElement||(o=n.activeElement).tagName!=="INPUT"&&o.tagName!=="textarea")&&(e=p.replace(this.containerObj.id+"_",""),o=this.select(e),a.Z.exists(o.coords)&&(l=o.coords.usrCoords.slice(1)),a.Z.evaluate(this.attr.keyboard.panshift)&&t.shiftKey||a.Z.evaluate(this.attr.keyboard.panctrl)&&t.ctrlKey?(a.Z.evaluate(this.attr.zoom.enabled)===!0&&(S=!0),t.keyCode===38?this.clickUpArrow():t.keyCode===40?this.clickDownArrow():t.keyCode===37?this.clickLeftArrow():t.keyCode===39?this.clickRightArrow():S&&t.keyCode===171?this.zoomIn():S&&t.keyCode===173?this.zoomOut():S&&t.keyCode===79?this.zoom100():w=!1):(a.Z.exists(o.visProp)&&(a.Z.exists(o.visProp.snaptogrid)&&o.visProp.snaptogrid&&a.Z.evaluate(o.visProp.snapsizex)&&a.Z.evaluate(o.visProp.snapsizey)?(d=(s=o.getSnapSizes())[0],Z=s[1],C=Math.max(d,C),P=Math.max(Z,P)):a.Z.exists(o.visProp.attracttogrid)&&o.visProp.attracttogrid&&a.Z.evaluate(o.visProp.attractordistance)&&a.Z.evaluate(o.visProp.attractorunit)&&(Z=d=1.1*a.Z.evaluate(o.visProp.attractordistance),a.Z.evaluate(o.visProp.attractorunit)==="screen"&&(d/=this.unitX,Z/=this.unitX),C=Math.max(d,C),P=Math.max(Z,P))),t.keyCode===38?h=[0,P]:t.keyCode===40?h=[0,-P]:t.keyCode===37?h=[-C,0]:t.keyCode===39?h=[C,0]:w=!1,h&&o.isDraggable&&o.visPropCalc.visible&&(this.geonextCompatibilityMode&&(a.Z.isPoint(o)||o.elementClass===x.Z.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!a.Z.evaluate(o.visProp.fixed)&&(this.mode=this.BOARD_MODE_DRAG,a.Z.exists(o.coords)&&(h[0]+=l[0],h[1]+=l[1]),a.Z.exists(o.coords)?(o.setPosition(u.Z.COORDS_BY_USER,h),this.updateInfobox(o)):(this.displayInfobox(!1),o.setPositionDirectly(x.Z.COORDS_BY_USER,h,[0,0])),this.triggerEventHandlers(["keymove","move"],[t,this.mode]),o.triggerEventHandlers(["keydrag","drag"],[t]),this.mode=this.BOARD_MODE_NONE)),this.update(),w&&a.Z.exists(t.preventDefault)&&t.preventDefault(),w)},keyFocusInListener:function(t){var e,o,s=t.target.id;if(!this.attr.keyboard.enabled||s==="")return!1;e=s.replace(this.containerObj.id+"_",""),o=this.select(e),a.Z.exists(o.highlight)&&(o.highlight(!0),this.focusObjects=[e],o.triggerEventHandlers(["hit"],[t])),a.Z.exists(o.coords)&&this.updateInfobox(o)},keyFocusOutListener:function(t){if(!this.attr.keyboard.enabled)return!1;this.focusObjects=[],this.dehighlightAll(),this.displayInfobox(!1)},updateContainerDims:function(){var t,e,o,s,n,h;t=(o=this.containerObj.getBoundingClientRect()).width,e=o.height,window&&window.getComputedStyle&&(s=window.getComputedStyle(this.containerObj,null),n=parseFloat(s.getPropertyValue("border-left-width"))+parseFloat(s.getPropertyValue("border-right-width")),isNaN(n)||(t-=n),h=parseFloat(s.getPropertyValue("border-top-width"))+parseFloat(s.getPropertyValue("border-bottom-width")),isNaN(h)||(e-=h)),t<=0||e<=0||isNaN(t)||isNaN(e)||(isNaN(this.getBoundingBox()[0])&&this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"keep"),a.Z.exists(this._prevDim)&&this._prevDim.w===t&&this._prevDim.h===e||(this.resizeContainer(t,e,!0),this._prevDim={w:t,h:e}))},startResizeObserver:function(){var t=this;N.Z.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this.resizeObserver=new ResizeObserver(function(e){t._isResizing||(t._isResizing=!0,window.setTimeout(function(){try{t.updateContainerDims()}catch{t.stopResizeObserver()}finally{t._isResizing=!1}},t.attr.resize.throttle))}),this.resizeObserver.observe(this.containerObj))},stopResizeObserver:function(){N.Z.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&a.Z.exists(this.resizeObserver)&&this.resizeObserver.unobserve(this.containerObj)},resizeListener:function(){var t=this;N.Z.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this._isScrolling||this._isResizing||(this._isResizing=!0,window.setTimeout(function(){t.updateContainerDims(),t._isResizing=!1},this.attr.resize.throttle)))},scrollListener:function(t){var e=this;N.Z.isBrowser&&(this._isScrolling||(this._isScrolling=!0,window.setTimeout(function(){e._isScrolling=!1},66)))},startIntersectionObserver:function(){var t=this;try{this.intersectionObserver=new IntersectionObserver(function(e){isNaN(t.getBoundingBox()[0])&&t.updateContainerDims()},{root:null,rootMargin:"0px",threshold:.8}),this.intersectionObserver.observe(t.containerObj)}catch{console.log("JSXGraph: IntersectionObserver not available in this browser.")}},stopIntersectionObserver:function(){a.Z.exists(this.intersectionObserver)&&this.intersectionObserver.unobserve(this.containerObj)},initInfobox:function(){var t=a.Z.copyAttributes({},this.options,"infobox");return t.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],t),this.infobox.dump=!1,this.displayInfobox(!1),this},updateInfobox:function(t){var e,o,s,n,h,l,p,d=a.Z.evaluate(t.visProp.showinfobox);return!a.Z.evaluate(this.attr.showinfobox)&&d==="inherit"||!d||a.Z.isPoint(t)&&(s=t.coords.usrCoords[1],n=t.coords.usrCoords[2],l=a.Z.evaluate(this.infobox.visProp.distancex),p=a.Z.evaluate(this.infobox.visProp.distancey),h=a.Z.evaluate(t.visProp.infoboxdigits),this.infobox.setCoords(s+l/this.unitX,n+p/this.unitY),typeof t.infoboxText!="string"?(h==="auto"?(e=a.Z.autoDigits(s),o=a.Z.autoDigits(n)):a.Z.isNumber(h)?(e=a.Z.toFixed(s,h),o=a.Z.toFixed(n,h)):(e=s,o=n),this.highlightInfobox(e,o,t)):this.highlightCustomInfobox(t.infoboxText,t),this.displayInfobox(!0)),this},displayInfobox:function(t){return!t&&this.focusObjects.length>0&&this.select(this.focusObjects[0]).elementClass===x.Z.OBJECT_CLASS_POINT||this.infobox.hiddenByParent===t&&(this.infobox.hiddenByParent=!t,this.infobox.prepareUpdate().updateVisibility(t).updateRenderer()),this},showInfobox:function(t){return this.displayInfobox(t)},highlightInfobox:function(t,e,o){return this.highlightCustomInfobox("("+t+", "+e+")",o),this},highlightCustomInfobox:function(t,e){return this.infobox.setText(t),this},dehighlightAll:function(){var t,e,o={},s=!1;for(t in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(t)&&(e=this.highlightedObjects[t],this.focusObjects.indexOf(t)<0?((this.hasMouseHandlers||this.hasPointerHandlers)&&e.noHighlight(),s=!0):o[t]=e);return this.highlightedObjects=o,this.renderer.type==="canvas"&&s&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(t,e){return[t,e]},getUsrCoordsOfMouse:function(t){var e=this.getCoordsTopLeftCorner(),o=N.Z.getPosition(t,null,this.document),s=o[0]-e[0],n=o[1]-e[1];return new b.Z(x.Z.COORDS_BY_SCREEN,[s,n],this).usrCoords.slice(1)},getAllUnderMouse:function(t){var e=this.getAllObjectsUnderMouse(t);return e.push(this.getUsrCoordsOfMouse(t)),e},getAllObjectsUnderMouse:function(t){var e,o,s=this.getCoordsTopLeftCorner(),n=N.Z.getPosition(t,null,this.document),h=n[0]-s[0],l=n[1]-s[1],p=[],d=this.objectsList.length;for(e=0;e<d;e++)(o=this.objectsList[e]).visPropCalc.visible&&o.hasPoint&&o.hasPoint(h,l)&&(p[p.length]=o);return p},updateCoords:function(){var t,e,o=this.objectsList.length;for(e=0;e<o;e++)t=this.objectsList[e],a.Z.exists(t.coords)&&(a.Z.evaluate(t.visProp.frozen)?t.coords.screen2usr():t.coords.usr2screen());return this},moveOrigin:function(t,e,o){var s,n,h,l;return a.Z.exists(t)&&a.Z.exists(e)&&(s=this.origin.scrCoords[1],n=this.origin.scrCoords[2],this.origin.scrCoords[1]=t,this.origin.scrCoords[2]=e,o&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy),h=new b.Z(x.Z.COORDS_BY_SCREEN,[0,0],this).usrCoords,l=new b.Z(x.Z.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords,(h[1]<this.maxboundingbox[0]||h[2]>this.maxboundingbox[1]||l[1]>this.maxboundingbox[2]||l[2]<this.maxboundingbox[3])&&(this.origin.scrCoords[1]=s,this.origin.scrCoords[2]=n)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(t){var e,o,s,n,h,l,p,d=[],Z=t.indexOf("<data>"),C=t.indexOf("</data>"),P=function(I,U,J,z){return function(){var V,W;W=(V=I.select(U.id)).coords.usrCoords[z],z===2?V.setPositionDirectly(x.Z.COORDS_BY_USER,[J(),W]):V.setPositionDirectly(x.Z.COORDS_BY_USER,[W,J()]),V.prepareUpdate().update()}},S=function(I,U,J){return function(){var z,V;z=I.select(U.id),V=J(),z.setAttribute({visible:V})}},w=function(I,U,J,z){return function(){var V,W;V=I.select(U.id),W=J(),z==="strokewidth"?V.visProp.strokewidth=W:(W=_t.Z.rgba2rgbo(W),V.visProp[z+"color"]=W[0],V.visProp[z+"opacity"]=W[1])}},D=function(I,U,J){return function(){I.select(U.id).position=J()}},k=function(I,U,J){return function(){I.select(U.id).setStyle(J())}};if(!(Z<0)){for(;Z>=0;){if(o=(e=t.slice(Z+6,C)).indexOf("="),s=e.slice(0,o),n=e.slice(o+1),o=s.indexOf("."),h=s.slice(0,o),l=this.elementsByName[a.Z.unescapeHTML(h)],p=s.slice(o+1).replace(/\s+/g,"").toLowerCase(),n=a.Z.createFunction(n,this,"",!0),a.Z.exists(this.elementsByName[h]))switch(p){case"x":d.push(P(this,l,n,2));break;case"y":d.push(P(this,l,n,1));break;case"visible":d.push(S(this,l,n));break;case"position":d.push(D(this,l,n));break;case"stroke":d.push(w(this,l,n,"stroke"));break;case"style":d.push(k(this,l,n));break;case"strokewidth":d.push(w(this,l,n,"strokewidth"));break;case"fill":d.push(w(this,l,n,"fill"));break;case"label":break;default:u.Z.debug("property '"+p+"' in conditions not yet implemented:"+n)}else u.Z.debug("debug conditions: |"+h+"| undefined");Z=(t=t.slice(C+7)).indexOf("<data>"),C=t.indexOf("</data>")}this.updateConditions=function(){var I;for(I=0;I<d.length;I++)d[I]();return this.prepareUpdate().updateElements(),!0},this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var t=new b.Z(x.Z.COORDS_BY_USER,[0,0],this),e=new b.Z(x.Z.COORDS_BY_USER,[this.options.grid.gridX,this.options.grid.gridY],this),o=t.scrCoords[1]-e.scrCoords[1],s=t.scrCoords[2]-e.scrCoords[2];for(this.options.grid.snapSizeX=this.options.grid.gridX;Math.abs(o)>25;)this.options.grid.snapSizeX*=2,o/=2;for(this.options.grid.snapSizeY=this.options.grid.gridY;Math.abs(s)>25;)this.options.grid.snapSizeY*=2,s/=2;return this},applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(t,e){var o=this.getBoundingBox(),s=this.attr.zoom.factorx,n=this.attr.zoom.factory,h=(o[2]-o[0])*(1-1/s),l=(o[1]-o[3])*(1-1/n),p=.5,d=.5,Z=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX>this.attr.zoom.max&&s>1||this.zoomY>this.attr.zoom.max&&n>1||this.zoomX<Z&&s<1||this.zoomY<Z&&n<1?this:(a.Z.isNumber(t)&&a.Z.isNumber(e)&&(p=(t-o[0])/(o[2]-o[0]),d=(o[1]-e)/(o[1]-o[3])),this.setBoundingBox([o[0]+h*p,o[1]-l*d,o[2]-h*(1-p),o[3]+l*(1-d)],this.keepaspectratio,"update"),this.applyZoom())},zoomOut:function(t,e){var o=this.getBoundingBox(),s=this.attr.zoom.factorx,n=this.attr.zoom.factory,h=(o[2]-o[0])*(1-s),l=(o[1]-o[3])*(1-n),p=.5,d=.5,Z=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX<Z||this.zoomY<Z?this:(a.Z.isNumber(t)&&a.Z.isNumber(e)&&(p=(t-o[0])/(o[2]-o[0]),d=(o[1]-e)/(o[1]-o[3])),this.setBoundingBox([o[0]+h*p,o[1]-l*d,o[2]-h*(1-p),o[3]+l*(1-d)],this.keepaspectratio,"update"),this.applyZoom())},zoom100:function(){var t,e,o;return a.Z.exists(this.attr.boundingbox)?this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"reset"):(e=((t=this.getBoundingBox())[2]-t[0])*(1-this.zoomX)*.5,o=(t[1]-t[3])*(1-this.zoomY)*.5,this.setBoundingBox([t[0]+e,t[1]-o,t[2]-e,t[3]+o],this.keepaspectratio,"reset")),this.applyZoom()},zoomAllPoints:function(){var t,e,o,s,n=0,h=0,l=0,p=0,d=this.objectsList.length;for(t=0;t<d;t++)s=this.objectsList[t],a.Z.isPoint(s)&&s.visPropCalc.visible&&(s.coords.usrCoords[1]<n?n=s.coords.usrCoords[1]:s.coords.usrCoords[1]>h&&(h=s.coords.usrCoords[1]),s.coords.usrCoords[2]>p?p=s.coords.usrCoords[2]:s.coords.usrCoords[2]<l&&(l=s.coords.usrCoords[2]));return e=50/this.unitX,o=50/this.unitY,this.setBoundingBox([n-e,p+o,h+e,l-o],this.keepaspectratio,"update"),this.applyZoom()},zoomElements:function(t){var e,o,s,n,h,l,p,d=[1/0,-1/0,-1/0,1/0];if(!a.Z.isArray(t)||t.length===0)return this;for(e=0;e<t.length;e++)o=this.select(t[e]).bounds(),a.Z.isArray(o)&&(o[0]<d[0]&&(d[0]=o[0]),o[1]>d[1]&&(d[1]=o[1]),o[2]>d[2]&&(d[2]=o[2]),o[3]<d[3]&&(d[3]=o[3]));return a.Z.isArray(d)&&(s=.5*(d[0]+d[2]),n=.5*(d[1]+d[3]),h=1.5*(d[2]-d[0])*.5,l=1.5*(d[1]-d[3])*.5,p=Math.max(h,l),this.setBoundingBox([s-p,n+p,s+p,n-p],this.keepaspectratio,"update")),this},setZoom:function(t,e){var o=this.attr.zoom.factorx,s=this.attr.zoom.factory;return this.attr.zoom.factorx=t/this.zoomX,this.attr.zoom.factory=e/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=o,this.attr.zoom.factory=s,this},removeObject:function(t,e){var o,s;if(a.Z.isArray(t)){for(s=0;s<t.length;s++)this.removeObject(t[s]);return this}if(t=this.select(t),!a.Z.exists(t)||a.Z.isString(t))return this;try{for(o in t.childElements)t.childElements.hasOwnProperty(o)&&t.childElements[o].board.removeObject(t.childElements[o]);for(o in t.objects)t.objects.hasOwnProperty(o)&&t.objects[o].board.removeObject(t.objects[o]);if(e)for(o in this.objects)this.objects.hasOwnProperty(o)&&a.Z.exists(this.objects[o].childElements)&&a.Z.exists(this.objects[o].childElements.hasOwnProperty(t.id))&&(delete this.objects[o].childElements[t.id],delete this.objects[o].descendants[t.id]);else if(a.Z.exists(t.ancestors))for(o in t.ancestors)t.ancestors.hasOwnProperty(o)&&a.Z.exists(t.ancestors[o].childElements)&&a.Z.exists(t.ancestors[o].childElements.hasOwnProperty(t.id))&&(delete t.ancestors[o].childElements[t.id],delete t.ancestors[o].descendants[t.id]);if(t._pos>-1)for(this.objectsList.splice(t._pos,1),o=t._pos;o<this.objectsList.length;o++)this.objectsList[o]._pos--;else t.type!==x.Z.OBJECT_TYPE_TURTLE&&u.Z.debug("Board.removeObject: object "+t.id+" not found in list.");delete this.objects[t.id],delete this.elementsByName[t.name],t.visProp&&a.Z.evaluate(t.visProp.trace)&&t.clearTrace(),a.Z.exists(t.remove)&&t.remove()}catch(n){u.Z.debug(t.id+": Could not be removed: "+n)}return this.update(),this},removeAncestors:function(t){var e;for(e in t.ancestors)t.ancestors.hasOwnProperty(e)&&this.removeAncestors(t.ancestors[e]);return this.removeObject(t),this},initGeonextBoard:function(){var t,e,o;return t=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),e=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),o=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[t,e],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),this.create("line",[t,o],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},resizeContainer:function(t,e,o,s){var n,h,l,p,d;return h=this.canvasWidth,l=this.canvasHeight,s||(n=this.getBoundingBox()),this.canvasWidth=parseFloat(t),this.canvasHeight=parseFloat(e),o||(this.containerObj.style.width=this.canvasWidth+"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),s?(p=(this.canvasWidth-h)/2,d=(this.canvasHeight-l)/2,this.moveOrigin(this.origin.scrCoords[1]+p,this.origin.scrCoords[2]+d)):this.setBoundingBox(n,this.keepaspectratio,"keep"),this},showDependencies:function(){var t,e,o,s,n;for(t in e=`<p>
`,this.objects)if(this.objects.hasOwnProperty(t)){for(o in n=0,this.objects[t].childElements)this.objects[t].childElements.hasOwnProperty(o)&&(n+=1);for(o in n>=0&&(e+="<strong>"+this.objects[t].id+":</strong> "),this.objects[t].childElements)this.objects[t].childElements.hasOwnProperty(o)&&(e+=this.objects[t].childElements[o].id+"("+this.objects[t].childElements[o].name+"), ");e+=`<p>
`}return e+=`</p>
`,(s=window.open()).document.open(),s.document.write(e),s.document.close(),this},showXML:function(){var t=window.open("");return t.document.open(),t.document.write("<pre>"+a.Z.escapeHTML(this.xmlString)+"</pre>"),t.document.close(),this},prepareUpdate:function(){var t,e,o=this.objectsList.length;for(t=0;t<o;t++)(e=this.objectsList[t]).needsUpdate=e.needsRegularUpdate||this.needsFullUpdate;for(t in this.groups)this.groups.hasOwnProperty(t)&&((e=this.groups[t]).needsUpdate=e.needsRegularUpdate||this.needsFullUpdate);return this},updateElements:function(t){var e,o;for(t=this.select(t),e=0;e<this.objectsList.length;e++)o=this.objectsList[e],this.needsFullUpdate&&o.elementClass===x.Z.OBJECT_CLASS_TEXT&&o.updateSize(),o.update(!a.Z.exists(t)||o.id!==t.id).updateVisibility();for(e in this.groups)this.groups.hasOwnProperty(e)&&this.groups[e].update(t);return this},updateRenderer:function(){var t,e=this.objectsList.length;if(this.renderer){if(this.renderer.type==="canvas")this.updateRendererCanvas();else for(t=0;t<e;t++)this.objectsList[t].updateRenderer();return this}},updateRendererCanvas:function(){var t,e,o,s,n,h=this.objectsList.length,l=this.options.layer,p=this.options.layer.numlayers,d=Number.NEGATIVE_INFINITY;for(o=0;o<p;o++){for(n in s=Number.POSITIVE_INFINITY,l)l.hasOwnProperty(n)&&l[n]>d&&l[n]<s&&(s=l[n]);for(d=s,t=0;t<h;t++)(e=this.objectsList[t]).visProp.layer===s&&e.prepareUpdate().updateRenderer()}return this},addHook:function(t,e,o){return u.Z.deprecated("Board.addHook()","Board.on()"),e=a.Z.def(e,"update"),o=a.Z.def(o,this),this.hooks.push([e,t]),this.on(e,t,o),this.hooks.length-1},addEvent:u.Z.shortcut(u.Z.Board.prototype,"on"),removeHook:function(t){return u.Z.deprecated("Board.removeHook()","Board.off()"),this.hooks[t]&&(this.off(this.hooks[t][0],this.hooks[t][1]),this.hooks[t]=null),this},removeEvent:u.Z.shortcut(u.Z.Board.prototype,"off"),updateHooks:function(t){var e=Array.prototype.slice.call(arguments,0);return u.Z.deprecated("Board.updateHooks()","Board.triggerEventHandlers()"),e[0]=a.Z.def(e[0],"update"),this.triggerEventHandlers([e[0]],arguments),this},addChild:function(t){return a.Z.exists(t)&&a.Z.exists(t.containerObj)&&(this.dependentBoards.push(t),this.update()),this},removeChild:function(t){var e;for(e=this.dependentBoards.length-1;e>=0;e--)this.dependentBoards[e]===t&&this.dependentBoards.splice(e,1);return this},update:function(t){var e,o,s,n,h;if(this.inUpdate||this.isSuspendedUpdate)return this;for(this.inUpdate=!0,this.attr.minimizereflow==="all"&&this.containerObj&&this.renderer.type!=="vml"&&(h=this.document.activeElement,n=this.renderer.removeToInsertLater(this.containerObj)),this.attr.minimizereflow==="svg"&&this.renderer.type==="svg"&&(h=this.document.activeElement,n=this.renderer.removeToInsertLater(this.renderer.svgRoot)),this.prepareUpdate().updateElements(t).updateConditions(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw(),this.triggerEventHandlers(["update"],[]),n&&(n(),h.focus()),o=this.dependentBoards.length,e=0;e<o;e++)s=this.dependentBoards[e],a.Z.exists(s)&&s!==this&&(s.updateQuality=this.updateQuality,s.prepareUpdate().updateElements().updateConditions(),s.renderer.suspendRedraw(),s.updateRenderer(),s.renderer.unsuspendRedraw(),s.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var t;for(t=0;t<this.grids.length;t++)this.removeObject(this.grids[t]);return this.grids.length=0,this.update(),this},create:function(t,e,o){var s,n;for(t=t.toLowerCase(),a.Z.exists(e)||(e=[]),a.Z.exists(o)||(o={}),n=0;n<e.length;n++)!a.Z.isString(e[n])||t==="text"&&n===2||t==="solidofrevolution3d"&&n===2||!(t!=="input"&&t!=="checkbox"&&t!=="button"||n!==2&&n!==3)||t==="curve"&&n>0||(e[n]=this.select(e[n]));if(!a.Z.isFunction(u.Z.elements[t]))throw new Error("JSXGraph: create: Unknown element type given: "+t);return s=u.Z.elements[t](this,e,o),a.Z.exists(s)?(s.prepareUpdate&&s.update&&s.updateRenderer&&s.fullUpdate(),s):(u.Z.debug("JSXGraph: create: failure creating "+t),s)},createElement:function(){return u.Z.deprecated("Board.createElement()","Board.create()"),this.create.apply(this,arguments)},clearTraces:function(){var t;for(t=0;t<this.objectsList.length;t++)this.objectsList[t].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.fullUpdate()),this},setBoundingBox:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S=0,w=0,D=1,k=N.Z.getDimensions(this.container,this.document);return a.Z.isArray(t)?(t[0]<this.maxboundingbox[0]||t[1]>this.maxboundingbox[1]||t[2]>this.maxboundingbox[2]||t[3]<this.maxboundingbox[3]||(a.Z.exists(o)||(o="reset"),h=this.unitX,l=this.unitY,this.canvasWidth=parseFloat(k.width),this.canvasHeight=parseFloat(k.height),n=this.canvasWidth,s=this.canvasHeight,e?(p=h/l,o==="keep"&&(D=this.zoomX/this.zoomY),C=h*(d=t[2]-t[0]),P=l*(Z=t[1]-t[3]),n>=s?C>=P?(this.unitY=s/Z,this.unitX=this.unitY*p):(this.unitY=s/Math.abs(d)*B.Z.sign(Z)/D,this.unitX=this.unitY*p):P>C?(this.unitX=n/d,this.unitY=this.unitX/p):(this.unitX=n/Math.abs(Z)*B.Z.sign(d)*D,this.unitY=this.unitX/p),S=.5*(n/this.unitX-d),w=.5*(s/this.unitY-Z),this.keepaspectratio=!0):(this.unitX=n/(t[2]-t[0]),this.unitY=s/(t[1]-t[3]),this.keepaspectratio=!1),this.moveOrigin(-this.unitX*(t[0]-S),this.unitY*(t[1]+w)),o==="update"?(this.zoomX*=this.unitX/h,this.zoomY*=this.unitY/l):o==="reset"&&(this.zoomX=a.Z.exists(this.attr.zoomx)?this.attr.zoomx:1,this.zoomY=a.Z.exists(this.attr.zoomy)?this.attr.zoomy:1)),this):this},getBoundingBox:function(){var t=new b.Z(x.Z.COORDS_BY_SCREEN,[0,0],this).usrCoords,e=new b.Z(x.Z.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords;return[t[1],t[2],e[1],e[2]]},addAnimation:function(t){var e=this;return this.animationObjects[t.id]=t,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval(function(){e.animate()},t.board.attr.animationdelay)),this},stopAllAnimation:function(){var t;for(t in this.animationObjects)this.animationObjects.hasOwnProperty(t)&&a.Z.exists(this.animationObjects[t])&&(this.animationObjects[t]=null,delete this.animationObjects[t]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var t,e,o,s,n,h,l,p,d=0,Z=null;for(e in this.animationObjects)if(this.animationObjects.hasOwnProperty(e)&&a.Z.exists(this.animationObjects[e])){if(d+=1,(o=this.animationObjects[e]).animationPath&&(s=a.Z.isFunction(o.animationPath)?o.animationPath(new Date().getTime()-o.animationStart):o.animationPath.pop(),!a.Z.exists(s)||!a.Z.isArray(s)&&isNaN(s)?delete o.animationPath:(o.setPositionDirectly(x.Z.COORDS_BY_USER,s),o.fullUpdate(),Z=o)),o.animationData){for(n in l=0,o.animationData)o.animationData.hasOwnProperty(n)&&(h=o.animationData[n].pop(),a.Z.exists(h)?(l+=1,(t={})[n]=h,o.setAttribute(t)):delete o.animationData[h]);l===0&&delete o.animationData}a.Z.exists(o.animationData)||a.Z.exists(o.animationPath)||(this.animationObjects[e]=null,delete this.animationObjects[e],a.Z.exists(o.animationCallback)&&(p=o.animationCallback,o.animationCallback=null,p()))}return d===0?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(Z),this},migratePoint:function(t,e,o){var s,n,h,l,p,d,Z=!1;for(n in t=this.select(t),e=this.select(e),a.Z.exists(t.label)&&(d=t.label.id,Z=!0,this.removeObject(t.label)),t.childElements)if(t.childElements.hasOwnProperty(n)){for(h in l=!1,s=t.childElements[n])s.hasOwnProperty(h)&&s[h]===t&&(s[h]=e,l=!0);for(l&&delete t.childElements[n],p=0;p<s.parents.length;p++)s.parents[p]===t.id&&(s.parents[p]=e.id);e.addChild(s)}return o&&(Z&&(delete e.childElements[d],delete e.descendants[d]),e.label&&this.removeObject(e.label),delete this.elementsByName[e.name],e.name=t.name,Z&&e.createLabel()),this.removeObject(t),a.Z.exists(e.name)&&e.name!==""&&(this.elementsByName[e.name]=e),this.fullUpdate(),this},emulateColorblindness:function(t){var e,o;if(a.Z.exists(t)||(t="none"),this.currentCBDef===t)return this;for(e in this.objects)this.objects.hasOwnProperty(e)&&(o=this.objects[e],t!=="none"?(this.currentCBDef==="none"&&(o.visPropOriginal={strokecolor:o.visProp.strokecolor,fillcolor:o.visProp.fillcolor,highlightstrokecolor:o.visProp.highlightstrokecolor,highlightfillcolor:o.visProp.highlightfillcolor}),o.setAttribute({strokecolor:_t.Z.rgb2cb(a.Z.evaluate(o.visPropOriginal.strokecolor),t),fillcolor:_t.Z.rgb2cb(a.Z.evaluate(o.visPropOriginal.fillcolor),t),highlightstrokecolor:_t.Z.rgb2cb(a.Z.evaluate(o.visPropOriginal.highlightstrokecolor),t),highlightfillcolor:_t.Z.rgb2cb(a.Z.evaluate(o.visPropOriginal.highlightfillcolor),t)})):a.Z.exists(o.visPropOriginal)&&u.Z.extend(o.visProp,o.visPropOriginal));return this.currentCBDef=t,this.update(),this},select:function(t,e){var o,s,n,h,l=t;if(l===null)return l;if(a.Z.isString(l)&&l!=="")a.Z.exists(this.objects[l])?l=this.objects[l]:a.Z.exists(this.elementsByName[l])?l=this.elementsByName[l]:a.Z.exists(this.groups[l])&&(l=this.groups[l]);else if(!e&&(a.Z.isFunction(l)||a.Z.isObject(l)&&!a.Z.isFunction(l.setAttribute))){for(s={},h=(o=a.Z.filterElements(this.objectsList,l)).length,n=0;n<h;n++)s[o[n].id]=o[n];l=new Dt(s)}else a.Z.isObject(l)&&a.Z.exists(l.id)&&!a.Z.exists(this.objects[l.id])&&(l=null);return l},hasPoint:function(t,e){var o=t,s=e,n=this.getBoundingBox();return a.Z.exists(t)&&a.Z.isArray(t.usrCoords)&&(o=t.usrCoords[1],s=t.usrCoords[2]),!!(a.Z.isNumber(o)&&a.Z.isNumber(s)&&n[0]<o&&o<n[2]&&n[1]>s&&s>n[3])},updateCSSTransforms:function(){var t=this.containerObj,e=t,o=t;if(this.cssTransMat=N.Z.getCSSTransformMatrix(e),a.Z.exists(e.getRootNode)){for(e=e.parentNode===e.getRootNode()?e.parentNode.host:e.parentNode;e;)this.cssTransMat=B.Z.matMatMult(N.Z.getCSSTransformMatrix(e),this.cssTransMat),e=e.parentNode===e.getRootNode()?e.parentNode.host:e.parentNode;this.cssTransMat=B.Z.inverse(this.cssTransMat)}else{for(e=e.offsetParent;e;){for(this.cssTransMat=B.Z.matMatMult(N.Z.getCSSTransformMatrix(e),this.cssTransMat),o=o.parentNode;o!==e;)this.cssTransMat=B.Z.matMatMult(N.Z.getCSSTransformMatrix(e),this.cssTransMat),o=o.parentNode;e=e.offsetParent}this.cssTransMat=B.Z.inverse(this.cssTransMat)}return this},startSelectionMode:function(){this.selectingMode=!0,this.selectionPolygon.setAttribute({visible:!0}),this.selectingBox=[[0,0],[0,0]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate()},stopSelectionMode:function(){return this.selectingMode=!1,this.selectionPolygon.setAttribute({visible:!1}),[this.selectionPolygon.vertices[0].coords,this.selectionPolygon.vertices[2].coords]},_startSelecting:function(t){this.isSelecting=!0,this.selectingBox=[[t[0],t[1]],[t[0],t[1]]],this._setSelectionPolygonFromBox()},_moveSelecting:function(t){this.isSelecting&&(this.selectingBox[1]=[t[0],t[1]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate())},_stopSelecting:function(t){var e=this.getMousePosition(t);this.isSelecting=!1,this.selectingBox[1]=[e[0],e[1]],this._setSelectionPolygonFromBox()},_setSelectionPolygonFromBox:function(){var t=this.selectingBox[0],e=this.selectingBox[1];this.selectionPolygon.vertices[0].setPositionDirectly(u.Z.COORDS_BY_SCREEN,[t[0],t[1]]),this.selectionPolygon.vertices[1].setPositionDirectly(u.Z.COORDS_BY_SCREEN,[t[0],e[1]]),this.selectionPolygon.vertices[2].setPositionDirectly(u.Z.COORDS_BY_SCREEN,[e[0],e[1]]),this.selectionPolygon.vertices[3].setPositionDirectly(u.Z.COORDS_BY_SCREEN,[e[0],t[1]])},_testForSelection:function(t){this._isRequiredKeyPressed(t,"selection")&&(a.Z.exists(this.selectionPolygon)||this._createSelectionPolygon(this.attr),this.startSelectionMode())},_createSelectionPolygon:function(t){var e;return a.Z.exists(this.selectionPolygon)||(e=a.Z.copyAttributes(t,it.Z,"board","selection")).enabled===!0&&(this.selectionPolygon=this.create("polygon",[[0,0],[0,0],[0,0],[0,0]],e)),this},__evt__down:function(t){},__evt__mousedown:function(t){},__evt__pendown:function(t){},__evt__pointerdown:function(t){},__evt__touchstart:function(t){},__evt__up:function(t){},__evt__mouseup:function(t){},__evt__pointerup:function(t){},__evt__touchend:function(t){},__evt__move:function(t,e){},__evt__mousemove:function(t,e){},__evt__penmove:function(t,e){},__evt__pointermove:function(t,e){},__evt__touchmove:function(t,e){},__evt__keymove:function(t,e){},__evt__hit:function(t,e,o){},__evt__mousehit:function(t,e,o){},__evt__update:function(){},__evt__boundingbox:function(){},__evt__startselecting:function(){},__evt__mousestartselecting:function(){},__evt__pointerstartselecting:function(){},__evt__touchstartselecting:function(){},__evt__stopselecting:function(){},__evt__mousestopselecting:function(){},__evt__pointerstopselecting:function(){},__evt__touchstopselecting:function(){},__evt__moveselecting:function(){},__evt__mousemoveselecting:function(){},__evt__pointermoveselecting:function(){},__evt__touchmoveselecting:function(){},__evt:function(){},toFullscreen:function(t){var e,o,s,n=this.document;return t=t||this.container,this._fullscreen_inner_id=t,s=n.getElementById(t),e="fullscreenwrap_"+t,n.getElementById(e)?o=n.getElementById(e):((o=document.createElement("div")).classList.add("JXG_wrap_private"),o.setAttribute("id",e),s.parentNode.insertBefore(o,s),o.appendChild(s)),o.requestFullscreen=o.requestFullscreen||o.webkitRequestFullscreen||o.mozRequestFullScreen||o.msRequestFullscreen,(n.fullscreenElement!==void 0?n.fullscreenElement:n.webkitFullscreenElement!==void 0?n.webkitFullscreenElement:n.msFullscreenElement)===null?o.requestFullscreen&&o.requestFullscreen():a.Z.exists(document.exitFullscreen)?document.exitFullscreen():a.Z.exists(document.webkitExitFullscreen)&&document.webkitExitFullscreen(),this},fullscreenListener:function(t){var e,o,s,n=this.document;if(e=this._fullscreen_inner_id,a.Z.exists(e)){if(s=n.fullscreenElement!==void 0?n.fullscreenElement:n.webkitFullscreenElement!==void 0?n.webkitFullscreenElement:n.msFullscreenElement,o=n.getElementById(e),s)o._cssFullscreenStore={id:s.id,isFullscreen:!0,margin:o.style.margin},o.style.margin="",N.Z.scaleJSXGraphDiv(s.id,e,n,a.Z.evaluate(this.attr.fullscreen.scale)),s=null;else if(a.Z.exists(o._cssFullscreenStore)){try{n.styleSheets[n.styleSheets.length-1].deleteRule(0)}catch{console.log("JSXGraph: Could not remove CSS rules for full screen mode")}o._cssFullscreenStore.isFullscreen=!1,o.style.margin=o._cssFullscreenStore.margin}this.updateCSSTransforms()}},addLogEntry:function(t,e,o){var s,n,h=this.userLog.length-1;return a.Z.exists(e.elementClass)&&(n=e.id),a.Z.evaluate(this.attr.logging.enabled)&&(s=new Date().getTime(),h>=0&&this.userLog[h].type===t&&this.userLog[h].id===n&&s-this.userLog[h].end<500?(this.userLog[h].end=s,this.userLog[h].endpos=o):this.userLog.push({type:t,id:n,start:s,startpos:o,end:s,endpos:o,bbox:this.getBoundingBox(),canvas:[this.canvasWidth,this.canvasHeight],zoom:[this.zoomX,this.zoomY]})),this},createRoulette:function(t,e,o,s,n,h,l){var p=this;return new function(){var d,Z=0,C=0,P=0,S=o,w=c.Z.root(function(et){var lt=t.X(S),ot=t.Y(S),gt=e.X(et),vt=e.Y(et);return(lt-gt)*(lt-gt)+(ot-vt)*(ot-vt)},[0,2*Math.PI]),D=0,k=0,I=p.create("transform",[function(){return Z}],{type:"rotate"}),U=p.create("transform",[function(){return Z},function(){return t.X(S)},function(){return t.Y(S)}],{type:"rotate"}),J=p.create("transform",[function(){return C},function(){return P}],{type:"translate"}),z=function(et,lt,ot){var gt=c.Z.D(et.X)(lt),vt=c.Z.D(et.Y)(lt),Tt=c.Z.D(et.X)(ot),Rt=c.Z.D(et.Y)(ot),kt=c.Z.D(et.X)(.5*(lt+ot)),Ft=c.Z.D(et.Y)(.5*(lt+ot)),te=Math.sqrt(gt*gt+vt*vt),qt=Math.sqrt(Tt*Tt+Rt*Rt);return(te+4*Math.sqrt(kt*kt+Ft*Ft)+qt)*(ot-lt)/6},V=function(et){return d-z(e,w,et)},W=Math.PI/18,$=9*W,nt=null;return this.rolling=function(){var et,lt,ot,gt,vt;d=z(t,S,D=S+n*s),k=c.Z.root(V,w),et=new Q(t.X(D),t.Y(D)),lt=new Q(e.X(k),e.Y(k)),ot=new Q(c.Z.D(t.X)(D),c.Z.D(t.Y)(D)),gt=new Q(c.Z.D(e.X)(k),c.Z.D(e.Y)(k)),vt=Q.C.div(ot,gt),Z=Math.atan2(vt.imaginary,vt.real),vt.div(Q.C.abs(vt)),vt.mult(lt),C=et.real-vt.real,P=et.imaginary-vt.imaginary,Z<-W&&Z>-$?(Z=-W,U.applyOnce(l)):Z>W&&Z<$?(Z=W,U.applyOnce(l)):(I.applyOnce(l),J.applyOnce(l),S=D,w=k),p.update()},this.start=function(){return h>0&&(nt=window.setInterval(this.rolling,h)),this},this.stop=function(){return window.clearInterval(nt),this},this}}});const Bt=u.Z.Board;u.Z.SVGRenderer=function(t,e){var o;for(this.type="svg",this.isIE=navigator.appVersion.indexOf("MSIE")!==-1||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(e.width,e.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.createShadowFilter=function(s,n,h,l,p,d){var Z,C,P,S,w,D=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter");return D.setAttributeNS(null,"id",s),D.setAttributeNS(null,"width","300%"),D.setAttributeNS(null,"height","300%"),D.setAttributeNS(null,"filterUnits","userSpaceOnUse"),(Z=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset")).setAttributeNS(null,"in","SourceGraphic"),Z.setAttributeNS(null,"result","offOut"),Z.setAttributeNS(null,"dx",d[0]),Z.setAttributeNS(null,"dy",d[1]),D.appendChild(Z),(C=this.container.ownerDocument.createElementNS(this.svgNamespace,"feColorMatrix")).setAttributeNS(null,"in","offOut"),C.setAttributeNS(null,"result","colorOut"),C.setAttributeNS(null,"type","matrix"),n==="none"||!a.Z.isArray(n)||n.length<3?C.setAttributeNS(null,"values","0.1 0 0 0 0  0 0.1 0 0 0  0 0 0.1 0 0  0 0 0 "+h+" 0"):(n[0]/=255,n[1]/=255,n[2]/=255,w=l+" 0 0 0 "+n[0]+"  0 "+l+" 0 0 "+n[1]+"  0 0 "+l+" 0 "+n[2]+"  0 0 0 "+h+" 0",C.setAttributeNS(null,"values",w)),D.appendChild(C),(P=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur")).setAttributeNS(null,"in","colorOut"),P.setAttributeNS(null,"result","blurOut"),P.setAttributeNS(null,"stdDeviation",p),D.appendChild(P),(S=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend")).setAttributeNS(null,"in","SourceGraphic"),S.setAttributeNS(null,"in2","blurOut"),S.setAttributeNS(null,"mode","normal"),D.appendChild(S),D},this.defs.appendChild(this.createShadowFilter(this.container.id+"_f1","none",1,.1,3,[5,5])),this.toURL=function(){var s=Array.prototype.slice.call(arguments).join("");return a.Z.exists(CSS)&&a.Z.exists(CSS.escape)&&(s=CSS.escape(s)),"url(#"+s+")"},this.layer=[],o=0;o<it.Z.layer.numlayers;o++)this.layer[o]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[o]);try{this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.container.id+"_foreignObj"),this.svgRoot.appendChild(this.foreignObjLayer),this.supportsForeignObject=!0}catch{this.supportsForeignObject=!1}this.dashArray=["2, 2","5, 5","10, 10","20, 20","20, 10, 10, 10","20, 5, 10, 5"]},u.Z.SVGRenderer.prototype=new rt,u.Z.extend(u.Z.SVGRenderer.prototype,{_createArrowHead:function(t,e,o){var s,n,h,l,p=t.id+"Triangle";return a.Z.exists(e)&&(p+=e),(s=this.createPrim("marker",p)).setAttributeNS(null,"stroke",a.Z.evaluate(t.visProp.strokecolor)),s.setAttributeNS(null,"stroke-opacity",a.Z.evaluate(t.visProp.strokeopacity)),s.setAttributeNS(null,"fill",a.Z.evaluate(t.visProp.strokecolor)),s.setAttributeNS(null,"fill-opacity",a.Z.evaluate(t.visProp.strokeopacity)),s.setAttributeNS(null,"stroke-width",0),s.setAttributeNS(null,"orient","auto"),s.setAttributeNS(null,"markerUnits","strokeWidth"),n=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),l=5,e==="End"?(h=0,o===2?n.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):o===3?n.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):o===4?(l=3.31,n.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):o===5?(l=3.28,n.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):o===6?(l=2.84,n.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):o===7?(l=5.2,n.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):n.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),t.elementClass===x.Z.OBJECT_CLASS_LINE&&(h=o===2?4.9:o===3?3.3:o===4||o===5||o===6?6.66:o===7?0:10)):(h=10,o===2?n.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):o===3?(h=3.3,n.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):o===4?(l=3.31,n.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):o===5?(l=3.28,n.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):o===6?(l=2.84,n.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):o===7?(l=5.2,n.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):n.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),t.elementClass===x.Z.OBJECT_CLASS_LINE&&(h=o===2?5.1:o===3?.02:o===4||o===5||o===6?3.33:o===7?10:.05)),o===7&&(s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"stroke-width",1)),s.setAttributeNS(null,"refY",l),s.setAttributeNS(null,"refX",h),s.appendChild(n),s},_setArrowColor:function(t,e,o,s,n){t&&(a.Z.isString(e)&&(n!==7?this._setAttribute(function(){t.setAttributeNS(null,"stroke",e),t.setAttributeNS(null,"fill",e),t.setAttributeNS(null,"stroke-opacity",o),t.setAttributeNS(null,"fill-opacity",o)},s.visPropOld.fillcolor):this._setAttribute(function(){t.setAttributeNS(null,"fill","none"),t.setAttributeNS(null,"stroke",e),t.setAttributeNS(null,"stroke-opacity",o)},s.visPropOld.fillcolor)),this.isIE&&s.rendNode.parentNode.insertBefore(s.rendNode,s.rendNode))},_setArrowWidth:function(t,e,o,s){var n,h;t&&(h=(n=e)*s,t.setAttributeNS(null,"viewBox","0 0 "+10*n+" "+10*n),t.setAttributeNS(null,"markerHeight",h),t.setAttributeNS(null,"markerWidth",h),t.setAttributeNS(null,"display","inherit"),this.isIE&&o.parentNode.insertBefore(o,o))},updateTicks:function(t){var e,o,s,n,h,l,p,d,Z="",C=t.ticks.length,P=!0;for(e=0;e<C;e++){for(h=(s=t.ticks[e])[0],l=s[1],p=h.length,d=" M "+h[0]+" "+l[0],a.Z.isNumber(h[0])||(P=!1),o=1;P&&o<p;++o)a.Z.isNumber(h[o])?d+=" L "+h[o]+" "+l[o]:P=!1;P&&(Z+=d)}n=t.rendNode,a.Z.exists(n)||(n=this.createPrim("path",t.id),this.appendChildPrim(n,a.Z.evaluate(t.visProp.layer)),t.rendNode=n),n.setAttributeNS(null,"stroke",a.Z.evaluate(t.visProp.strokecolor)),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"stroke-opacity",a.Z.evaluate(t.visProp.strokeopacity)),n.setAttributeNS(null,"stroke-width",a.Z.evaluate(t.visProp.strokewidth)),this.updatePathPrim(n,Z,t.board)},displayCopyright:function(t,e){var o,s=this.createPrim("text","licenseText");s.setAttributeNS(null,"x","20px"),s.setAttributeNS(null,"y",2+e+"px"),s.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+e+"px; fill:#356AA0;  opacity:0.3;"),o=this.container.ownerDocument.createTextNode(t),s.appendChild(o),this.appendChildPrim(s,0)},drawInternalText:function(t){var e=this.createPrim("text",t.id);return e.style.whiteSpace="nowrap",t.rendNodeText=this.container.ownerDocument.createTextNode(""),e.appendChild(t.rendNodeText),this.appendChildPrim(e,a.Z.evaluate(t.visProp.layer)),e},updateInternalText:function(t){var e,o=t.plaintext,s=t.getAnchorX(),n=t.getAnchorY();t.rendNode.getAttributeNS(null,"class")!==t.visProp.cssclass&&(t.rendNode.setAttributeNS(null,"class",a.Z.evaluate(t.visProp.cssclass)),t.needsSizeUpdate=!0),isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])||(e=t.coords.scrCoords[1],t.visPropOld.left!==s+e&&(t.rendNode.setAttributeNS(null,"x",e+"px"),s==="left"?t.rendNode.setAttributeNS(null,"text-anchor","start"):s==="right"?t.rendNode.setAttributeNS(null,"text-anchor","end"):s==="middle"&&t.rendNode.setAttributeNS(null,"text-anchor","middle"),t.visPropOld.left=s+e),e=t.coords.scrCoords[2],t.visPropOld.top!==n+e&&(t.rendNode.setAttributeNS(null,"y",e+.5*this.vOffsetText+"px"),n==="bottom"?t.rendNode.setAttributeNS(null,"dominant-baseline","text-after-edge"):n==="top"?t.rendNode.setAttributeNS(null,"dy","1.6ex"):n==="middle"&&t.rendNode.setAttributeNS(null,"dy","0.6ex"),t.visPropOld.top=n+e)),t.htmlStr!==o&&(t.rendNodeText.data=o,t.htmlStr=o),this.transformImage(t,t.transformations)},updateInternalTextStyle:function(t,e,o,s){this.setObjectFillColor(t,e,o)},drawImage:function(t){var e=this.createPrim("image",t.id);e.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(e,a.Z.evaluate(t.visProp.layer)),t.rendNode=e,this.updateImage(t)},transformImage:function(t,e){var o,s=t.rendNode,n="";e.length>0&&(n+=" matrix("+[(o=this.joinTransforms(t,e))[1][1],o[2][1],o[1][2],o[2][2],o[1][0],o[2][0]].join(",")+") ",s.setAttributeNS(null,"transform",n))},updateImageURL:function(t){var e=a.Z.evaluate(t.url);return t._src!==e&&(t.imgIsLoaded=!1,t.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",e),t._src=e,!0)},updateImageStyle:function(t,e){var o=a.Z.evaluate(e?t.visProp.highlightcssclass:t.visProp.cssclass);t.rendNode.setAttributeNS(null,"class",o)},drawForeignObject:function(t){t.rendNode=this.appendChildPrim(this.createPrim("foreignObject",t.id),a.Z.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"foreignObject"),this.updateForeignObject(t)},updateForeignObject:function(t){t._useUserSize?t.rendNode.style.overflow="hidden":t.rendNode.style.overflow="visible",this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),t.rendNode.innerHTML=t.content,this._updateVisual(t,{stroke:!0,dash:!0},!0)},appendChildPrim:function(t,e){return a.Z.exists(e)?e>=it.Z.layer.numlayers&&(e=it.Z.layer.numlayers-1):e=0,this.layer[e].appendChild(t),t},createPrim:function(t,e){var o=this.container.ownerDocument.createElementNS(this.svgNamespace,t);return o.setAttributeNS(null,"id",this.container.id+"_"+e),o.style.position="absolute",t==="path"&&(o.setAttributeNS(null,"stroke-linecap","round"),o.setAttributeNS(null,"stroke-linejoin","round"),o.setAttributeNS(null,"fill-rule","evenodd")),o},remove:function(t){a.Z.exists(t)&&a.Z.exists(t.parentNode)&&t.parentNode.removeChild(t)},setLayer:function(t,e){a.Z.exists(e)?e>=it.Z.layer.numlayers&&(e=it.Z.layer.numlayers-1):e=0,this.layer[e].appendChild(t.rendNode)},makeArrows:function(t,e){var o,s=e.evFirst,n=e.evLast;t.visPropOld.firstarrow!==s||t.visPropOld.lastarrow!==n?(s?(o=t.rendNodeTriangleStart,a.Z.exists(o)?this.defs.appendChild(o):(o=this._createArrowHead(t,"End",e.typeFirst),this.defs.appendChild(o),t.rendNodeTriangleStart=o,t.rendNode.setAttributeNS(null,"marker-start",this.toURL(this.container.id,"_",t.id,"TriangleEnd")))):(o=t.rendNodeTriangleStart,a.Z.exists(o)&&this.remove(o)),n?(o=t.rendNodeTriangleEnd,a.Z.exists(o)?this.defs.appendChild(o):(o=this._createArrowHead(t,"Start",e.typeLast),this.defs.appendChild(o),t.rendNodeTriangleEnd=o,t.rendNode.setAttributeNS(null,"marker-end",this.toURL(this.container.id,"_",t.id,"TriangleStart")))):(o=t.rendNodeTriangleEnd,a.Z.exists(o)&&this.remove(o)),t.visPropOld.firstarrow=s,t.visPropOld.lastarrow=n):this.isIE&&t.visPropCalc.visible&&(s||n)&&t.rendNode.parentNode.insertBefore(t.rendNode,t.rendNode)},updateEllipsePrim:function(t,e,o,s,n){var h;h=2e5,e=Math.abs(e)<h?e:h*e/Math.abs(e),o=Math.abs(o)<h?o:h*o/Math.abs(o),s=Math.abs(s)<h?s:h*s/Math.abs(s),n=Math.abs(n)<h?n:h*n/Math.abs(n),t.setAttributeNS(null,"cx",e),t.setAttributeNS(null,"cy",o),t.setAttributeNS(null,"rx",Math.abs(s)),t.setAttributeNS(null,"ry",Math.abs(n))},updateLinePrim:function(t,e,o,s,n){var h;h=2e5,isNaN(e+o+s+n)||(e=Math.abs(e)<h?e:h*e/Math.abs(e),o=Math.abs(o)<h?o:h*o/Math.abs(o),s=Math.abs(s)<h?s:h*s/Math.abs(s),n=Math.abs(n)<h?n:h*n/Math.abs(n),t.setAttributeNS(null,"x1",e),t.setAttributeNS(null,"y1",o),t.setAttributeNS(null,"x2",s),t.setAttributeNS(null,"y2",n))},updatePathPrim:function(t,e){e===""&&(e="M 0 0"),t.setAttributeNS(null,"d",e)},updatePathStringPoint:function(t,e,o){var s="",n=t.coords.scrCoords,h=e*Math.sqrt(3)*.5,l=.5*e;return o==="x"?s=" M "+(n[1]-e)+" "+(n[2]-e)+" L "+(n[1]+e)+" "+(n[2]+e)+" M "+(n[1]+e)+" "+(n[2]-e)+" L "+(n[1]-e)+" "+(n[2]+e):o==="+"?s=" M "+(n[1]-e)+" "+n[2]+" L "+(n[1]+e)+" "+n[2]+" M "+n[1]+" "+(n[2]-e)+" L "+n[1]+" "+(n[2]+e):o==="|"?s=" M "+n[1]+" "+(n[2]-e)+" L "+n[1]+" "+(n[2]+e):o==="-"?s=" M "+(n[1]-e)+" "+n[2]+" L "+(n[1]+e)+" "+n[2]:o==="<>"?s=" M "+(n[1]-e)+" "+n[2]+" L "+n[1]+" "+(n[2]+e)+" L "+(n[1]+e)+" "+n[2]+" L "+n[1]+" "+(n[2]-e)+" Z ":o==="^"?s=" M "+n[1]+" "+(n[2]-e)+" L "+(n[1]-h)+" "+(n[2]+l)+" L "+(n[1]+h)+" "+(n[2]+l)+" Z ":o==="v"?s=" M "+n[1]+" "+(n[2]+e)+" L "+(n[1]-h)+" "+(n[2]-l)+" L "+(n[1]+h)+" "+(n[2]-l)+" Z ":o===">"?s=" M "+(n[1]+e)+" "+n[2]+" L "+(n[1]-l)+" "+(n[2]-h)+" L "+(n[1]-l)+" "+(n[2]+h)+" Z ":o==="<"&&(s=" M "+(n[1]-e)+" "+n[2]+" L "+(n[1]+l)+" "+(n[2]-h)+" L "+(n[1]+l)+" "+(n[2]+h)+" Z "),s},updatePathStringPrim:function(t){var e,o,s,n=" M ",h=n,l=5e3,p="";if(t.numberPoints<=0)return"";if(s=Math.min(t.points.length,t.numberPoints),t.bezierDegree===1)for(e=0;e<s;e++)o=t.points[e].scrCoords,isNaN(o[1])||isNaN(o[2])?h=n:(o[1]=Math.max(Math.min(o[1],l),-5e3),o[2]=Math.max(Math.min(o[2],l),-5e3),p+=h+o[1]+" "+o[2],h=" L ");else if(t.bezierDegree===3)for(e=0;e<s;)o=t.points[e].scrCoords,isNaN(o[1])||isNaN(o[2])?h=n:(p+=h+o[1]+" "+o[2],h===" C "&&(e+=1,p+=" "+(o=t.points[e].scrCoords)[1]+" "+o[2],e+=1,p+=" "+(o=t.points[e].scrCoords)[1]+" "+o[2]),h=" C "),e+=1;return p},updatePathStringBezierPrim:function(t){var e,o,s,n,h,l,p,d=" M ",Z=d,C=5e3,P="",S=a.Z.evaluate(t.visProp.strokewidth),w=a.Z.evaluate(t.visProp.curvetype)!=="plot";if(t.numberPoints<=0)return"";for(w&&t.board.options.curve.RDPsmoothing&&(t.points=c.Z.RamerDouglasPeucker(t.points,.5)),p=Math.min(t.points.length,t.numberPoints),o=1;o<3;o++)for(Z=d,e=0;e<p;e++)n=t.points[e].scrCoords,isNaN(n[1])||isNaN(n[2])?Z=d:(n[1]=Math.max(Math.min(n[1],C),-5e3),n[2]=Math.max(Math.min(n[2],C),-5e3),Z===d?P+=Z+n[1]+" "+n[2]:(s=2*o,P+=[Z,h+.333*(n[1]-h)+S*(s*Math.random()-o)," ",l+.333*(n[2]-l)+S*(s*Math.random()-o)," ",h+.666*(n[1]-h)+S*(s*Math.random()-o)," ",l+.666*(n[2]-l)+S*(s*Math.random()-o)," ",n[1]," ",n[2]].join("")),Z=" C ",h=n[1],l=n[2]);return P},updatePolygonPrim:function(t,e){var o,s,n="",h=e.vertices.length;for(t.setAttributeNS(null,"stroke","none"),t.setAttributeNS(null,"fill-rule","evenodd"),e.elType==="polygonalchain"&&h++,o=0;o<h-1;o++){if(!e.vertices[o].isReal)return void t.setAttributeNS(null,"points","");n=n+(s=e.vertices[o].coords.scrCoords)[1]+","+s[2],o<h-2&&(n+=" ")}n.indexOf("NaN")===-1&&t.setAttributeNS(null,"points",n)},updateRectPrim:function(t,e,o,s,n){t.setAttributeNS(null,"x",e),t.setAttributeNS(null,"y",o),t.setAttributeNS(null,"width",s),t.setAttributeNS(null,"height",n)},setPropertyPrim:function(t,e,o){e!=="stroked"&&t.setAttributeNS(null,e,o)},display:function(t,e){var o;t&&t.rendNode&&(t.visPropOld.visible=e,o=t.rendNode,e?(o.setAttributeNS(null,"display","inline"),o.style.visibility="inherit"):(o.setAttributeNS(null,"display","none"),o.style.visibility="hidden"))},show:function(t){u.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(t,!0)},hide:function(t){u.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(t,!1)},setBuffering:function(t,e){t.rendNode.setAttribute("buffered-rendering",e)},setDashStyle:function(t){var e=a.Z.evaluate(t.visProp.dash),o=t.rendNode;e>0?o.setAttributeNS(null,"stroke-dasharray",this.dashArray[e-1]):o.hasAttributeNS(null,"stroke-dasharray")&&o.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(t){var e,o,s,n=t.rendNode,h=a.Z.evaluate(t.visProp.gradient);h==="linear"||h==="radial"?(e=this.createPrim(h+"Gradient",t.id+"_gradient"),o=this.createPrim("stop",t.id+"_gradient1"),s=this.createPrim("stop",t.id+"_gradient2"),e.appendChild(o),e.appendChild(s),this.defs.appendChild(e),n.setAttributeNS(null,"style","fill:"+this.toURL(this.container.id+"_"+t.id+"_gradient")),t.gradNode1=o,t.gradNode2=s,t.gradNode=e):n.removeAttributeNS(null,"style")},updateGradientAngle:function(t,e){var o=1,s=Math.cos(e),n=Math.sin(e);Math.abs(s)>Math.abs(n)?o/=Math.abs(s):o/=Math.abs(n),s>=0?(t.setAttributeNS(null,"x1",0),t.setAttributeNS(null,"x2",s*o)):(t.setAttributeNS(null,"x1",-s*o),t.setAttributeNS(null,"x2",0)),n>=0?(t.setAttributeNS(null,"y1",0),t.setAttributeNS(null,"y2",n*o)):(t.setAttributeNS(null,"y1",-n*o),t.setAttributeNS(null,"y2",0))},updateGradientCircle:function(t,e,o,s,n,h,l){t.setAttributeNS(null,"cx",100*e+"%"),t.setAttributeNS(null,"cy",100*o+"%"),t.setAttributeNS(null,"r",100*s+"%"),t.setAttributeNS(null,"fx",100*n+"%"),t.setAttributeNS(null,"fy",100*h+"%"),t.setAttributeNS(null,"fr",100*l+"%")},updateGradient:function(t){var e,o,s=t.gradNode1,n=t.gradNode2,h=a.Z.evaluate(t.visProp.gradient);a.Z.exists(s)&&a.Z.exists(n)&&(o=(o=a.Z.evaluate(t.visProp.fillopacity))>0?o:0,e=a.Z.evaluate(t.visProp.fillcolor),s.setAttributeNS(null,"style","stop-color:"+e+";stop-opacity:"+o),n.setAttributeNS(null,"style","stop-color:"+a.Z.evaluate(t.visProp.gradientsecondcolor)+";stop-opacity:"+a.Z.evaluate(t.visProp.gradientsecondopacity)),s.setAttributeNS(null,"offset",100*a.Z.evaluate(t.visProp.gradientstartoffset)+"%"),n.setAttributeNS(null,"offset",100*a.Z.evaluate(t.visProp.gradientendoffset)+"%"),h==="linear"?this.updateGradientAngle(t.gradNode,a.Z.evaluate(t.visProp.gradientangle)):h==="radial"&&this.updateGradientCircle(t.gradNode,a.Z.evaluate(t.visProp.gradientcx),a.Z.evaluate(t.visProp.gradientcy),a.Z.evaluate(t.visProp.gradientr),a.Z.evaluate(t.visProp.gradientfx),a.Z.evaluate(t.visProp.gradientfy),a.Z.evaluate(t.visProp.gradientfr)))},setObjectTransition:function(t,e){var o,s,n,h=[],l=0,p=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(e===void 0&&(e=a.Z.evaluate(t.visProp.transitionduration)),o=a.Z.evaluate(t.visProp.transitionproperties),e!==t.visPropOld.transitionduration||o!==t.visPropOld.transitionproperties){for(a.Z.exists(o)&&(l=o.length),n=0;n<l;n++)h.push(o[n]+" "+e+"ms");for(s=h.join(", "),l=p.length,n=0;n<l;++n)t[p[n]]&&(t[p[n]].style.transition=s);t.visPropOld.transitionduration=e,t.visPropOld.transitionproperties=o}},_setAttribute:function(t,e){e===""?t():window.setTimeout(t,1)},setObjectFillColor:function(t,e,o,s){var n,h,l,p,d=a.Z.evaluate(e),Z=a.Z.evaluate(o),C=a.Z.evaluate(t.visProp.gradient);Z=Z>0?Z:0,t.visPropOld.fillcolor===d&&t.visPropOld.fillopacity===Z&&C===null||(a.Z.exists(d)&&d!==!1&&(d.length!==9?(h=d,p=Z):(l=_t.Z.rgba2rgbo(d),h=l[0],p=Z*l[1]),n=s===void 0?t.rendNode:s,h!=="none"&&this._setAttribute(function(){n.setAttributeNS(null,"fill",h)},t.visPropOld.fillcolor),t.type===u.Z.OBJECT_TYPE_IMAGE?this._setAttribute(function(){n.setAttributeNS(null,"opacity",p)},t.visPropOld.fillopacity):(h==="none"?(p=0,n.setAttributeNS(null,"pointer-events","visibleStroke")):n.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute(function(){n.setAttributeNS(null,"fill-opacity",p)},t.visPropOld.fillopacity)),C!=="linear"&&C!=="radial"||this.updateGradient(t)),t.visPropOld.fillcolor=d,t.visPropOld.fillopacity=Z)},setObjectStrokeColor:function(t,e,o){var s,n,h,l,p=a.Z.evaluate(e),d=a.Z.evaluate(o);d=d>0?d:0,t.visPropOld.strokecolor===p&&t.visPropOld.strokeopacity===d||(a.Z.exists(p)&&p!==!1&&(p.length!==9?(s=p,h=d):(n=_t.Z.rgba2rgbo(p),s=n[0],h=d*n[1]),l=t.rendNode,t.elementClass===x.Z.OBJECT_CLASS_TEXT?a.Z.evaluate(t.visProp.display)==="html"?this._setAttribute(function(){l.style.color=s,l.style.opacity=h},t.visPropOld.strokecolor):this._setAttribute(function(){l.setAttributeNS(null,"style","fill:"+s),l.setAttributeNS(null,"style","fill-opacity:"+h)},t.visPropOld.strokecolor):this._setAttribute(function(){l.setAttributeNS(null,"stroke",s),l.setAttributeNS(null,"stroke-opacity",h)},t.visPropOld.strokecolor),t.elementClass!==x.Z.OBJECT_CLASS_CURVE&&t.elementClass!==x.Z.OBJECT_CLASS_LINE||(a.Z.evaluate(t.visProp.firstarrow)&&this._setArrowColor(t.rendNodeTriangleStart,s,h,t,t.visPropCalc.typeFirst),a.Z.evaluate(t.visProp.lastarrow)&&this._setArrowColor(t.rendNodeTriangleEnd,s,h,t,t.visPropCalc.typeLast))),t.visPropOld.strokecolor=p,t.visPropOld.strokeopacity=d)},setObjectStrokeWidth:function(t,e){var o,s=a.Z.evaluate(e);isNaN(s)||t.visPropOld.strokewidth===s||(o=t.rendNode,this.setPropertyPrim(o,"stroked","true"),a.Z.exists(s)&&this.setPropertyPrim(o,"stroke-width",s+"px"),t.visPropOld.strokewidth=s)},setLineCap:function(t){var e=a.Z.evaluate(t.visProp.linecap);e!==void 0&&e!==""&&t.visPropOld.linecap!==e&&a.Z.exists(t.rendNode)&&(this.setPropertyPrim(t.rendNode,"stroke-linecap",e),t.visPropOld.linecap=e)},setShadow:function(t){var e,o,s,n,h,l,p,d,Z=a.Z.evaluate(t.visProp.shadow),C=!0,P=!1;(e=JSON.stringify(Z))!==t.visPropOld.shadow&&(typeof Z=="boolean"?(C=!0,P=Z,o="none",s=3,n=.1,h=[5,5],l=1):a.Z.evaluate(Z.enabled)?(C=!1,P=!0,o=u.Z.rgbParser(a.Z.evaluate(Z.color)),s=a.Z.evaluate(Z.blur),n=a.Z.evaluate(Z.blend),h=a.Z.evaluate(Z.offset),l=a.Z.evaluate(Z.opacity)):P=!1,a.Z.exists(t.rendNode)&&(P?C?t.rendNode.setAttributeNS(null,"filter",this.toURL(this.container.id+"_f1")):((d=this.container.ownerDocument.getElementById(p))&&this.defs.removeChild(d),p=t.rendNode.id+"_f1",this.defs.appendChild(this.createShadowFilter(p,o,l,n,s,h)),t.rendNode.setAttributeNS(null,"filter",this.toURL(p))):t.rendNode.removeAttributeNS(null,"filter")),t.visPropOld.shadow=e)},suspendRedraw:function(){},unsuspendRedraw:function(){},resize:function(t,e){this.svgRoot.setAttribute("width",parseFloat(t)),this.svgRoot.setAttribute("height",parseFloat(e))},createTouchpoints:function(t){var e,o,s,n;for(this.touchpoints=[],e=0;e<t;e++)o="touchpoint1_"+e,n=this.createPrim("path",o),this.appendChildPrim(n,19),n.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(n),this.setPropertyPrim(n,"stroked","true"),this.setPropertyPrim(n,"stroke-width","1px"),n.setAttributeNS(null,"stroke","#000000"),n.setAttributeNS(null,"stroke-opacity",1),n.setAttributeNS(null,"display","none"),s="touchpoint2_"+e,n=this.createPrim("ellipse",s),this.appendChildPrim(n,19),this.updateEllipsePrim(n,0,0,0,0),this.touchpoints.push(n),this.setPropertyPrim(n,"stroked","true"),this.setPropertyPrim(n,"stroke-width","1px"),n.setAttributeNS(null,"stroke","#000000"),n.setAttributeNS(null,"stroke-opacity",1),n.setAttributeNS(null,"fill","#ffffff"),n.setAttributeNS(null,"fill-opacity",0),n.setAttributeNS(null,"display","none")},showTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","inline"),this.touchpoints[2*t+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","none"),this.touchpoints[2*t+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(t,e){var o,s;this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(o=e[0],s=e[1],this.touchpoints[2*t].setAttributeNS(null,"d","M "+(o-37)+" "+s+" L "+(o+37)+" "+s+" M "+o+" "+(s-37)+" L "+o+" "+(s+37)),this.updateEllipsePrim(this.touchpoints[2*t+1],e[0],e[1],25,25))},_getValuesOfDOMElements:function(t){var e=[];if(t.nodeType===1)for(t=t.firstChild;t;)t.id!==void 0&&t.value!==void 0&&e.push([t.id,t.value]),e=e.concat(this._getValuesOfDOMElements(t)),t=t.nextSibling;return e},_getDataUri:function(t,e){var o=new Image;o.onload=function(){var s=document.createElement("canvas");s.width=this.naturalWidth,s.height=this.naturalHeight,s.getContext("2d").drawImage(this,0,0),e(s.toDataURL("image/png")),s.remove()},o.src=t},_getImgDataURL:function(t){var e,o,s,n,h,l;if((o=(e=t.getElementsByTagName("image")).length)>0)for(s=document.createElement("canvas"),l=0;l<o;l++){e[l].setAttribute("crossorigin","anonymous"),n=s.getContext("2d"),s.width=e[l].getAttribute("width"),s.height=e[l].getAttribute("height");try{n.drawImage(e[l],0,0,s.width,s.height),h=s.toDataURL(),e[l].setAttribute("xlink:href",h)}catch(p){console.log("CORS problem! Image can not be used",p)}}return!0},dumpToDataURI:function(t){var e,o,s,n=this.svgRoot,h=window.btoa||q.encode,l=[];if(this.container.hasChildNodes()&&a.Z.exists(this.foreignObjLayer))for(t||this.foreignObjLayer.setAttribute("display","inline");n.nextSibling;)l=l.concat(this._getValuesOfDOMElements(n.nextSibling)),this.foreignObjLayer.appendChild(n.nextSibling);if(this._getImgDataURL(n),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),e=new XMLSerializer().serializeToString(n),t!==!0)for(s=l.length,o=0;o<s;o++)e=e.replace('id="'+l[o][0]+'"','id="'+l[o][0]+'" value="'+l[o][1]+'"');if((e.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length>1&&(e=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"")),e=e.replace(/&nbsp;/g," "),a.Z.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+h(unescape(encodeURIComponent(e)))},dumpToCanvas:function(t,e,o,s){var n,h,l,p;return(l=this.container.ownerDocument.getElementById(t)).width=l.width,p=l.getContext("2d"),e!==void 0&&o!==void 0&&(l.style.width=parseFloat(e)+"px",l.style.height=parseFloat(o)+"px",l.setAttribute("width",parseFloat(e)),l.setAttribute("height",parseFloat(o))),h=new Image,n=this.dumpToDataURI(s),h.src=n,"Promise"in window?new Promise(function(d,Z){try{h.onload=function(){p.drawImage(h,0,0,e,o),d()}}catch(C){Z(C)}}):(h.onload=function(){window.setTimeout(function(){try{p.drawImage(h,0,0,e,o)}catch{console.log("screenshots not longer supported on IE")}},200)},this)},screenshot:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D=this.container.ownerDocument,k=this.container.parentNode,I=t.attr.screenshot,U=!1;return this.type==="no"||(Z=I.scale*this.container.getBoundingClientRect().width,C=I.scale*this.container.getBoundingClientRect().height,e===void 0||e===""?(U=!0,(l=new Image).style.width=Z+"px",l.style.height=C+"px"):(U=!1,l=D.getElementById(e)),U&&((s=D.createElement("div")).style.cssText=I.css,s.style.width=Z+"px",s.style.height=C+"px",s.style.zIndex=this.container.style.zIndex+120,s.style.position="absolute",s.style.top=this.container.offsetTop+"px",s.style.left=this.container.offsetLeft+"px"),n=D.createElement("canvas"),h=Math.random().toString(36).substr(2,5),n.setAttribute("id",h),n.setAttribute("width",Z),n.setAttribute("height",C),n.style.width=Z+"px",n.style.height=Z+"px",n.style.display="none",k.appendChild(n),U&&(p=D.createElement("span"),d=D.createTextNode("✖"),p.style.cssText=I.cssButton,p.appendChild(d),p.onclick=function(){s.parentNode.removeChild(s)},s.appendChild(l),s.appendChild(p),k.insertBefore(s,this.container.nextSibling)),P=D.getElementById(this.container.id+"_navigationbar"),a.Z.exists(P)&&(S=P.style.display,P.style.display="none"),w=function(){l.src=n.toDataURL("image/png"),k.removeChild(n)},"Promise"in window?this.dumpToCanvas(h,Z,C,o).then(w):(this.dumpToCanvas(h,Z,C,o),window.setTimeout(w,200)),a.Z.exists(P)&&(P.style.display=S)),this}});const Xt=u.Z.SVGRenderer;u.Z.VMLRenderer=function(t){this.type="vml",this.container=t,this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,a.Z.exists(u.Z.vmlStylesheet)||(t.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),u.Z.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),u.Z.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{t.ownerDocument.namespaces.jxgvml||t.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(e){return t.ownerDocument.createElement("<jxgvml:"+e+' class="jxgvml">')}}catch{this.createNode=function(e){return t.ownerDocument.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]},u.Z.VMLRenderer.prototype=new rt,u.Z.extend(u.Z.VMLRenderer.prototype,{_setAttr:function(t,e,o,s){try{this.container.ownerDocument.documentMode===8?t[e]=o:t.setAttribute(e,o,s)}catch{u.Z.debug("_setAttr: "+e+" "+o+`<br>
`)}},updateTicks:function(t){var e,o,s,n,h,l=this.resolution,p=[];for(o=t.ticks.length,e=0;e<o;e++)n=(s=t.ticks[e])[0],h=s[1],a.Z.isNumber(n[0])&&a.Z.isNumber(n[1])&&p.push(" m "+Math.round(l*n[0])+", "+Math.round(l*h[0])+" l "+Math.round(l*n[1])+", "+Math.round(l*h[1])+" ");a.Z.exists(t.rendNode)||(t.rendNode=this.createPrim("path",t.id),this.appendChildPrim(t.rendNode,a.Z.evaluate(t.visProp.layer))),this._setAttr(t.rendNode,"stroked","true"),this._setAttr(t.rendNode,"strokecolor",a.Z.evaluate(t.visProp.strokecolor),1),this._setAttr(t.rendNode,"strokeweight",a.Z.evaluate(t.visProp.strokewidth)),this._setAttr(t.rendNodeStroke,"opacity",100*a.Z.evaluate(t.visProp.strokeopacity)+"%"),this.updatePathPrim(t.rendNode,p,t.board)},displayCopyright:function(t,e){var o,s;(o=this.createNode("textbox")).style.position="absolute",this._setAttr(o,"id",this.container.id+"_licenseText"),o.style.left=20,o.style.top=2,o.style.fontSize=e,o.style.color="#356AA0",o.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(o,"opacity","30%"),o.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",s=this.container.ownerDocument.createTextNode(t),o.appendChild(s),this.appendChildPrim(o,0)},drawInternalText:function(t){var e;return(e=this.createNode("textbox")).style.position="absolute",t.rendNodeText=this.container.ownerDocument.createTextNode(""),e.appendChild(t.rendNodeText),this.appendChildPrim(e,9),e.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",e},updateInternalText:function(t){var e,o,s,n,h,l,p=t.plaintext,d=this.joinTransforms(t,t.transformations),Z=[0,0],C=t.rendNode,P=[],S=t.getAnchorX(),w=t.getAnchorY();if(!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])){for(S==="right"?Z[0]=1:S==="middle"&&(Z[0]=.5),w==="bottom"?Z[1]=1:w==="middle"&&(Z[1]=.5),P[0]=B.Z.matVecMult(d,[1,t.coords.scrCoords[1]-Z[0]*t.size[0],t.coords.scrCoords[2]+(1-Z[1])*t.size[1]+this.vOffsetText]),P[0][1]/=P[0][0],P[0][2]/=P[0][0],P[1]=B.Z.matVecMult(d,[1,t.coords.scrCoords[1]+(1-Z[0])*t.size[0],t.coords.scrCoords[2]+(1-Z[1])*t.size[1]+this.vOffsetText]),P[1][1]/=P[1][0],P[1][2]/=P[1][0],P[2]=B.Z.matVecMult(d,[1,t.coords.scrCoords[1]+(1-Z[0])*t.size[0],t.coords.scrCoords[2]-Z[1]*t.size[1]+this.vOffsetText]),P[2][1]/=P[2][0],P[2][2]/=P[2][0],P[3]=B.Z.matVecMult(d,[1,t.coords.scrCoords[1]-Z[0]*t.size[0],t.coords.scrCoords[2]-Z[1]*t.size[1]+this.vOffsetText]),P[3][1]/=P[3][0],P[3][2]/=P[3][0],o=P[0][1],n=P[0][1],s=P[0][2],h=P[0][2],l=1;l<4;l++)o=Math.max(o,P[l][1]),n=Math.min(n,P[l][1]),s=Math.max(s,P[l][2]),h=Math.min(h,P[l][2]);e=Z[0]===1?Math.floor(t.board.canvasWidth-o):Math.floor(n),t.visPropOld.left!==S+e&&(Z[0]===1?(t.rendNode.style.right=e+"px",t.rendNode.style.left="auto"):(t.rendNode.style.left=e+"px",t.rendNode.style.right="auto"),t.visPropOld.left=S+e),e=Z[1]===1?Math.floor(t.board.canvasHeight-s):Math.floor(h),t.visPropOld.top!==w+e&&(Z[1]===1?(t.rendNode.style.bottom=e+"px",t.rendNode.style.top="auto"):(t.rendNode.style.top=e+"px",t.rendNode.style.bottom="auto"),t.visPropOld.top=w+e)}t.htmlStr!==p&&(t.rendNodeText.data=p,t.htmlStr=p),C.filters.item(0).M11=d[1][1],C.filters.item(0).M12=d[1][2],C.filters.item(0).M21=d[2][1],C.filters.item(0).M22=d[2][2],C.filters.item(0).enabled=!0},drawImage:function(t){var e;(e=this.container.ownerDocument.createElement("img")).style.position="absolute",this._setAttr(e,"id",this.container.id+"_"+t.id),this.container.appendChild(e),this.appendChildPrim(e,a.Z.evaluate(t.visProp.layer)),e.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",t.rendNode=e,this.updateImage(t)},transformImage:function(t,e){var o,s,n,h,l,p,d=t.rendNode,Z=[];if(e.length>0){for(o=this.joinTransforms(t,e),Z[0]=B.Z.matVecMult(o,t.coords.scrCoords),Z[0][1]/=Z[0][0],Z[0][2]/=Z[0][0],Z[1]=B.Z.matVecMult(o,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]]),Z[1][1]/=Z[1][0],Z[1][2]/=Z[1][0],Z[2]=B.Z.matVecMult(o,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]-t.size[1]]),Z[2][1]/=Z[2][0],Z[2][2]/=Z[2][0],Z[3]=B.Z.matVecMult(o,[1,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1]]),Z[3][1]/=Z[3][0],Z[3][2]/=Z[3][0],s=Z[0][1],h=Z[0][1],n=Z[0][2],l=Z[0][2],p=1;p<4;p++)s=Math.max(s,Z[p][1]),h=Math.min(h,Z[p][1]),n=Math.max(n,Z[p][2]),l=Math.min(l,Z[p][2]);d.style.left=Math.floor(h)+"px",d.style.top=Math.floor(l)+"px",d.filters.item(0).M11=o[1][1],d.filters.item(0).M12=o[1][2],d.filters.item(0).M21=o[2][1],d.filters.item(0).M22=o[2][2],d.filters.item(0).enabled=!0}},updateImageURL:function(t){var e=a.Z.evaluate(t.url);this._setAttr(t.rendNode,"src",e)},appendChildPrim:function(t,e){return a.Z.exists(e)||(e=0),t.style.zIndex=e,this.container.appendChild(t),t},appendNodesToElement:function(t,e){e!=="shape"&&e!=="path"&&e!=="polygon"||(t.rendNodePath=this.getElementById(t.id+"_path")),t.rendNodeFill=this.getElementById(t.id+"_fill"),t.rendNodeStroke=this.getElementById(t.id+"_stroke"),t.rendNodeShadow=this.getElementById(t.id+"_shadow"),t.rendNode=this.getElementById(t.id)},createPrim:function(t,e){var o,s,n=this.createNode("fill"),h=this.createNode("stroke"),l=this.createNode("shadow");return this._setAttr(n,"id",this.container.id+"_"+e+"_fill"),this._setAttr(h,"id",this.container.id+"_"+e+"_stroke"),this._setAttr(l,"id",this.container.id+"_"+e+"_shadow"),t==="circle"||t==="ellipse"?((o=this.createNode("oval")).appendChild(n),o.appendChild(h),o.appendChild(l)):t==="polygon"||t==="path"||t==="shape"||t==="line"?((o=this.createNode("shape")).appendChild(n),o.appendChild(h),o.appendChild(l),s=this.createNode("path"),this._setAttr(s,"id",this.container.id+"_"+e+"_path"),o.appendChild(s)):((o=this.createNode(t)).appendChild(n),o.appendChild(h),o.appendChild(l)),o.style.position="absolute",o.style.left="0px",o.style.top="0px",this._setAttr(o,"id",this.container.id+"_"+e),o},remove:function(t){a.Z.exists(t)&&t.removeNode(!0)},makeArrows:function(t){var e,o=a.Z.evaluate(t.visProp.firstarrow),s=a.Z.evaluate(t.visProp.lastarrow);t.visPropOld.firstarrow===o&&t.visPropOld.lastarrow===s||(o?(e=t.rendNodeStroke,this._setAttr(e,"startarrow","block"),this._setAttr(e,"startarrowlength","long")):(e=t.rendNodeStroke,a.Z.exists(e)&&this._setAttr(e,"startarrow","none")),s?(e=t.rendNodeStroke,this._setAttr(e,"id",this.container.id+"_"+t.id+"stroke"),this._setAttr(e,"endarrow","block"),this._setAttr(e,"endarrowlength","long")):(e=t.rendNodeStroke,a.Z.exists(e)&&this._setAttr(e,"endarrow","none")),t.visPropOld.firstarrow=o,t.visPropOld.lastarrow=s)},updateEllipsePrim:function(t,e,o,s,n){t.style.left=Math.floor(e-s)+"px",t.style.top=Math.floor(o-n)+"px",t.style.width=Math.floor(2*Math.abs(s))+"px",t.style.height=Math.floor(2*Math.abs(n))+"px"},updateLinePrim:function(t,e,o,s,n,h){var l,p=this.resolution;isNaN(e+o+s+n)||(l=["m ",Math.floor(p*e),", ",Math.floor(p*o)," l ",Math.floor(p*s),", ",Math.floor(p*n)],this.updatePathPrim(t,l,h))},updatePathPrim:function(t,e,o){var s=o.canvasWidth,n=o.canvasHeight;e.length<=0&&(e=["m 0,0"]),t.style.width=s,t.style.height=n,this._setAttr(t,"coordsize",[Math.floor(this.resolution*s),Math.floor(this.resolution*n)].join(",")),this._setAttr(t,"path",e.join(""))},updatePathStringPoint:function(t,e,o){var s=[],n=Math.round,h=t.coords.scrCoords,l=e*Math.sqrt(3)*.5,p=.5*e,d=this.resolution;return o==="x"?s.push([" m ",n(d*(h[1]-e)),", ",n(d*(h[2]-e))," l ",n(d*(h[1]+e)),", ",n(d*(h[2]+e))," m ",n(d*(h[1]+e)),", ",n(d*(h[2]-e))," l ",n(d*(h[1]-e)),", ",n(d*(h[2]+e))].join("")):o==="+"?s.push([" m ",n(d*(h[1]-e)),", ",n(d*h[2])," l ",n(d*(h[1]+e)),", ",n(d*h[2])," m ",n(d*h[1]),", ",n(d*(h[2]-e))," l ",n(d*h[1]),", ",n(d*(h[2]+e))].join("")):o==="<>"?s.push([" m ",n(d*(h[1]-e)),", ",n(d*h[2])," l ",n(d*h[1]),", ",n(d*(h[2]+e))," l ",n(d*(h[1]+e)),", ",n(d*h[2])," l ",n(d*h[1]),", ",n(d*(h[2]-e))," x e "].join("")):o==="^"?s.push([" m ",n(d*h[1]),", ",n(d*(h[2]-e))," l ",n(d*(h[1]-l)),", ",n(d*(h[2]+p))," l ",n(d*(h[1]+l)),", ",n(d*(h[2]+p))," x e "].join("")):o==="v"?s.push([" m ",n(d*h[1]),", ",n(d*(h[2]+e))," l ",n(d*(h[1]-l)),", ",n(d*(h[2]-p))," l ",n(d*(h[1]+l)),", ",n(d*(h[2]-p))," x e "].join("")):o===">"?s.push([" m ",n(d*(h[1]+e)),", ",n(d*h[2])," l ",n(d*(h[1]-p)),", ",n(d*(h[2]-l))," l ",n(d*(h[1]-p)),", ",n(d*(h[2]+l))," l ",n(d*(h[1]+e)),", ",n(d*h[2])].join("")):o==="<"&&s.push([" m ",n(d*(h[1]-e)),", ",n(d*h[2])," l ",n(d*(h[1]+p)),", ",n(d*(h[2]-l))," l ",n(d*(h[1]+p)),", ",n(d*(h[2]+l))," x e "].join("")),s},updatePathStringPrim:function(t){var e,o,s=[],n=this.resolution,h=Math.round,l=" m ",p=l,d=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";if(d=Math.min(d,t.points.length),t.bezierDegree===1)for(e=0;e<d;e++)o=t.points[e].scrCoords,isNaN(o[1])||isNaN(o[2])?p=l:(o[1]>2e4?o[1]=2e4:o[1]<-2e4&&(o[1]=-2e4),o[2]>2e4?o[2]=2e4:o[2]<-2e4&&(o[2]=-2e4),s.push([p,h(n*o[1]),", ",h(n*o[2])].join("")),p=" l ");else if(t.bezierDegree===3)for(e=0;e<d;)o=t.points[e].scrCoords,isNaN(o[1])||isNaN(o[2])?p=l:(s.push([p,h(n*o[1]),", ",h(n*o[2])].join("")),p===" c "&&(e+=1,o=t.points[e].scrCoords,s.push([" ",h(n*o[1]),", ",h(n*o[2])].join("")),e+=1,o=t.points[e].scrCoords,s.push([" ",h(n*o[1]),", ",h(n*o[2])].join(""))),p=" c "),e+=1;return s.push(" e"),s},updatePathStringBezierPrim:function(t){var e,o,s,n,h,l,p=[],d=a.Z.evaluate(t.visProp.strokewidth),Z=this.resolution,C=Math.round,P=" m ",S=P,w=a.Z.evaluate(t.visProp.curvetype)!=="plot",D=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";for(w&&t.board.options.curve.RDPsmoothing&&(t.points=c.Z.RamerDouglasPeucker(t.points,1)),D=Math.min(D,t.points.length),o=1;o<3;o++)for(S=P,e=0;e<D;e++)n=t.points[e].scrCoords,isNaN(n[1])||isNaN(n[2])?S=P:(n[1]>2e4?n[1]=2e4:n[1]<-2e4&&(n[1]=-2e4),n[2]>2e4?n[2]=2e4:n[2]<-2e4&&(n[2]=-2e4),S===P?p.push([S,C(Z*n[1])," ",C(Z*n[2])].join("")):(s=2*o,p.push([S,C(Z*(h+.333*(n[1]-h)+d*(s*Math.random()-o)))," ",C(Z*(l+.333*(n[2]-l)+d*(s*Math.random()-o)))," ",C(Z*(h+.666*(n[1]-h)+d*(s*Math.random()-o)))," ",C(Z*(l+.666*(n[2]-l)+d*(s*Math.random()-o)))," ",C(Z*n[1])," ",C(Z*n[2])].join(""))),S=" c ",h=n[1],l=n[2]);return p.push(" e"),p},updatePolygonPrim:function(t,e){var o,s,n=e.vertices.length,h=this.resolution,l=[];if(this._setAttr(t,"stroked","false"),s=e.vertices[0].coords.scrCoords,!isNaN(s[1]+s[2])){for(l.push(["m ",Math.floor(h*s[1]),",",Math.floor(h*s[2])," l "].join("")),o=1;o<n-1;o++){if(!e.vertices[o].isReal)return void this.updatePathPrim(t,"",e.board);if(s=e.vertices[o].coords.scrCoords,isNaN(s[1]+s[2]))return;l.push(Math.floor(h*s[1])+","+Math.floor(h*s[2])),o<n-2&&l.push(", ")}l.push(" x e"),this.updatePathPrim(t,l,e.board)}},updateRectPrim:function(t,e,o,s,n){t.style.left=Math.floor(e)+"px",t.style.top=Math.floor(o)+"px",s>=0&&(t.style.width=s+"px"),n>=0&&(t.style.height=n+"px")},setPropertyPrim:function(t,e,o){var s,n="";switch(e){case"stroke":n="strokecolor";break;case"stroke-width":n="strokeweight";break;case"stroke-dasharray":n="dashstyle"}n!==""&&(s=a.Z.evaluate(o),this._setAttr(t,n,s))},display:function(t,e){t&&t.rendNode&&(t.visPropOld.visible=e,t.rendNode.style.visibility=e?"inherit":"hidden")},show:function(t){u.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),t&&t.rendNode&&(t.rendNode.style.visibility="inherit")},hide:function(t){u.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),t&&t.rendNode&&(t.rendNode.style.visibility="hidden")},setDashStyle:function(t,e){var o;e.dash>=0&&(o=t.rendNodeStroke,this._setAttr(o,"dashstyle",this.dashArray[e.dash]))},setGradient:function(t){var e=t.rendNodeFill,o=a.Z.evaluate(t.visProp.gradient);o==="linear"?(this._setAttr(e,"type","gradient"),this._setAttr(e,"color2",a.Z.evaluate(t.visProp.gradientsecondcolor)),this._setAttr(e,"opacity2",a.Z.evaluate(t.visProp.gradientsecondopacity)),this._setAttr(e,"angle",a.Z.evaluate(t.visProp.gradientangle))):o==="radial"?(this._setAttr(e,"type","gradientradial"),this._setAttr(e,"color2",a.Z.evaluate(t.visProp.gradientsecondcolor)),this._setAttr(e,"opacity2",a.Z.evaluate(t.visProp.gradientsecondopacity)),this._setAttr(e,"focusposition",100*a.Z.evaluate(t.visProp.gradientpositionx)+"%,"+100*a.Z.evaluate(t.visProp.gradientpositiony)+"%"),this._setAttr(e,"focussize","0,0")):this._setAttr(e,"type","solid")},setObjectFillColor:function(t,e,o){var s,n,h,l=a.Z.evaluate(e),p=a.Z.evaluate(o),d=t.rendNode;p=p>0?p:0,t.visPropOld.fillcolor===l&&t.visPropOld.fillopacity===p||(a.Z.exists(l)&&l!==!1&&(l.length!==9?(s=l,h=p):(s=(n=_t.Z.rgba2rgbo(l))[0],h=p*n[1]),s==="none"||s===!1?this._setAttr(t.rendNode,"filled","false"):(this._setAttr(t.rendNode,"filled","true"),this._setAttr(t.rendNode,"fillcolor",s),a.Z.exists(h)&&t.rendNodeFill&&this._setAttr(t.rendNodeFill,"opacity",100*h+"%")),t.type===x.Z.OBJECT_TYPE_IMAGE&&d.filters.length>1&&(d.filters.item(1).opacity=Math.round(100*h),d.filters.item(1).enabled=!0)),t.visPropOld.fillcolor=l,t.visPropOld.fillopacity=p)},setObjectStrokeColor:function(t,e,o){var s,n,h,l,p=a.Z.evaluate(e),d=a.Z.evaluate(o),Z=t.rendNode;d=d>0?d:0,t.visPropOld.strokecolor===p&&t.visPropOld.strokeopacity===d||(a.Z.exists(p)&&p!==!1&&(p.length!==9?(s=p,h=d):(s=(n=e.rgba2rgbo(p))[0],h=d*n[1]),t.elementClass===x.Z.OBJECT_CLASS_TEXT?(Z.filters.length>1&&(Z.filters.item(1).opacity=Math.round(100*h),Z.filters.item(1).enabled=!0),Z.style.color=s):(s!==!1&&(this._setAttr(Z,"stroked","true"),this._setAttr(Z,"strokecolor",s)),l=t.rendNodeStroke,a.Z.exists(h)&&t.type!==x.Z.OBJECT_TYPE_IMAGE&&this._setAttr(l,"opacity",100*h+"%"))),t.visPropOld.strokecolor=p,t.visPropOld.strokeopacity=d)},setObjectStrokeWidth:function(t,e){var o,s=a.Z.evaluate(e);isNaN(s)||t.visPropOld.strokewidth===s||(o=t.rendNode,this.setPropertyPrim(o,"stroked","true"),a.Z.exists(s)&&(this.setPropertyPrim(o,"stroke-width",s),s===0&&a.Z.exists(t.rendNodeStroke)&&this._setAttr(o,"stroked","false")),t.visPropOld.strokewidth=s)},setShadow:function(t){var e=t.rendNodeShadow,o=a.Z.evaluate(t.visProp.shadow);e&&t.visPropOld.shadow!==o&&(o?(this._setAttr(e,"On","True"),this._setAttr(e,"Offset","3pt,3pt"),this._setAttr(e,"Opacity","60%"),this._setAttr(e,"Color","#aaaaaa")):this._setAttr(e,"On","False"),t.visPropOld.shadow=o)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}});const $t=u.Z.VMLRenderer;var se="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");u.Z.Util=u.Z.Util||{},u.Z.Util.genUUID=function(t){var e,o,s=[],n=0;for((t=t||"")!==""&&t.substr(t.length-1)!=="-"&&(t+="-"),o=0;o<36;o++)o===8||o===13||o===18||o===23?s[o]="-":o===14?s[o]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,s[o]=se[o===19?3&e|8:e]);return t+s.join("")};const ae=u.Z.Util;u.Z.CanvasRenderer=function(t,e){if(this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=ae.genUUID(),this.canvasNamespace=null,N.Z.isBrowser)this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",this.container.style.position===""&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',e.width,'px" height="',e.height,'px"><',"/canvas>"].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.canvasRoot.style.display="block",this.context=this.canvasRoot.getContext("2d");else if(N.Z.isNode())try{this.canvasRoot=u.Z.createCanvas(500,500),this.context=this.canvasRoot.getContext("2d")}catch{throw new Error(`JXG.createCanvas not available.
Install the npm package \`canvas\`
and call:
    import { createCanvas } from "canvas";
    JXG.createCanvas = createCanvas;
`)}this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5]]},u.Z.CanvasRenderer.prototype=new rt,u.Z.extend(u.Z.CanvasRenderer.prototype,{_drawPolygon:function(t,e,o){var s,n=t.length,h=this.context;if(n>0){if(o&&(h.lineWidth=0),h.beginPath(),h.moveTo(t[0][0],t[0][1]),e===1)for(s=1;s<n;s++)h.lineTo(t[s][0],t[s][1]);else for(s=1;s<n;s+=3)h.bezierCurveTo(t[s][0],t[s][1],t[s+1][0],t[s+1][1],t[s+2][0],t[s+2][1]);o?(h.lineTo(t[0][0],t[0][1]),h.closePath(),h.fill("evenodd")):h.stroke()}},_fill:function(t){var e=this.context;e.save(),this._setColor(t,"fill")&&e.fill("evenodd"),e.restore()},_rotatePoint:function(t,e,o){return[e*Math.cos(t)-o*Math.sin(t),e*Math.sin(t)+o*Math.cos(t)]},_rotateShape:function(t,e){var o,s=[],n=t.length;if(n<=0)return t;for(o=0;o<n;o++)s.push(this._rotatePoint(e,t[o][0],t[o][1]));return s},updateGradientAngle:function(t,e){var o,s,n,h,l,p,d,Z,C,P,S,w,D=1,k=Math.cos(-e),I=Math.sin(-e),U=t.getBoundingBox();return Math.abs(k)>Math.abs(I)?D/=Math.abs(k):D/=Math.abs(I),k>=0?(n=0,h=k*D):(n=-k*D,h=0),I>=0?(l=0,p=I*D):(l=-I*D,p=0),o=new b.Z(x.Z.COORDS_BY_USER,[U[0],U[1]],t.board),S=(s=new b.Z(x.Z.COORDS_BY_USER,[U[2],U[3]],t.board)).scrCoords[1]-o.scrCoords[1],w=s.scrCoords[2]-o.scrCoords[2],d=o.scrCoords[1]+S*n,C=o.scrCoords[2]+w*l,Z=o.scrCoords[1]+S*h,P=o.scrCoords[2]+w*p,this.context.createLinearGradient(d,C,Z,P)},updateGradientCircle:function(t,e,o,s,n,h,l){var p,d,Z,C,P,S,w,D,k,I,U=t.getBoundingBox();return p=new b.Z(x.Z.COORDS_BY_USER,[U[0],U[1]],t.board),k=(d=new b.Z(x.Z.COORDS_BY_USER,[U[2],U[3]],t.board)).scrCoords[1]-p.scrCoords[1],I=p.scrCoords[2]-d.scrCoords[2],Z=p.scrCoords[1]+k*e,C=d.scrCoords[2]+I*o,S=p.scrCoords[1]+k*n,w=d.scrCoords[2]+I*h,P=s*(k+I)*.5,D=l*(k+I)*.5,this.context.createRadialGradient(S,w,D,Z,C,P)},updateGradient:function(t){var e,o,s,n=a.Z.evaluate(t.visProp.gradient);return o=(o=a.Z.evaluate(t.visProp.fillopacity))>0?o:0,e=a.Z.evaluate(t.visProp.fillcolor),n==="linear"?s=this.updateGradientAngle(t,a.Z.evaluate(t.visProp.gradientangle)):n==="radial"&&(s=this.updateGradientCircle(t,a.Z.evaluate(t.visProp.gradientcx),a.Z.evaluate(t.visProp.gradientcy),a.Z.evaluate(t.visProp.gradientr),a.Z.evaluate(t.visProp.gradientfx),a.Z.evaluate(t.visProp.gradientfy),a.Z.evaluate(t.visProp.gradientfr))),s.addColorStop(a.Z.evaluate(t.visProp.gradientstartoffset),e),s.addColorStop(a.Z.evaluate(t.visProp.gradientendoffset),a.Z.evaluate(t.visProp.gradientsecondcolor)),s},_setColor:function(t,e,o){var s,n,h,l,p,d,Z,C,P=!0,S=t.visProp;return e=e||"stroke",o=o||e,s=this._getHighlighted(t),(C=a.Z.evaluate(t.visProp.gradient))==="linear"||C==="radial"?(this.context[o+"Style"]=this.updateGradient(t),P):((h=a.Z.evaluate(S[s+e+"color"]))!=="none"&&h!==!1?(d=(d=a.Z.evaluate(S[s+e+"opacity"]))>0?d:0,h.length!==9?(p=h,Z=d):(p=(l=_t.Z.rgba2rgbo(h))[0],Z=d*l[1]),this.context.globalAlpha=Z,this.context[o+"Style"]=p):P=!1,n=parseFloat(a.Z.evaluate(S[s+"strokewidth"])),e!=="stroke"||isNaN(n)||(n===0?this.context.globalAlpha=0:this.context.lineWidth=n),e==="stroke"&&S.linecap!==void 0&&S.linecap!==""&&(this.context.lineCap=S.linecap),P)},_stroke:function(t){var e=this.context,o=a.Z.evaluate(t.visProp.dash);e.save(),o>0?e.setLineDash&&e.setLineDash(this.dashArray[o]):this.context.lineDashArray=[],this._setColor(t,"stroke")&&e.stroke(),e.restore()},_translateShape:function(t,e,o){var s,n=[],h=t.length;if(h<=0)return t;for(s=0;s<h;s++)n.push([t[s][0]+e,t[s][1]+o]);return n},drawPoint:function(t){var e=a.Z.evaluate(t.visProp.face),o=a.Z.evaluate(t.visProp.size),s=t.coords.scrCoords,n=o*Math.sqrt(3)*.5,h=.5*o,l=parseFloat(a.Z.evaluate(t.visProp.strokewidth))/2,p=this.context;if(t.visPropCalc.visible)switch(e){case"cross":case"x":p.beginPath(),p.moveTo(s[1]-o,s[2]-o),p.lineTo(s[1]+o,s[2]+o),p.moveTo(s[1]+o,s[2]-o),p.lineTo(s[1]-o,s[2]+o),p.lineCap="round",p.lineJoin="round",p.closePath(),this._stroke(t);break;case"circle":case"o":p.beginPath(),p.arc(s[1],s[2],o+1+l,0,2*Math.PI,!1),p.closePath(),this._fill(t),this._stroke(t);break;case"square":case"[]":if(o<=0)break;p.save(),this._setColor(t,"stroke","fill")&&p.fillRect(s[1]-o-l,s[2]-o-l,2*o+3*l,2*o+3*l),p.restore(),p.save(),this._setColor(t,"fill"),p.fillRect(s[1]-o+l,s[2]-o+l,2*o-l,2*o-l),p.restore();break;case"plus":case"+":p.beginPath(),p.moveTo(s[1]-o,s[2]),p.lineTo(s[1]+o,s[2]),p.moveTo(s[1],s[2]-o),p.lineTo(s[1],s[2]+o),p.lineCap="round",p.lineJoin="round",p.closePath(),this._stroke(t);break;case"divide":case"|":p.beginPath(),p.moveTo(s[1],s[2]-o),p.lineTo(s[1],s[2]+o),p.lineCap="round",p.lineJoin="round",p.closePath(),this._stroke(t);break;case"minus":case"-":p.beginPath(),p.moveTo(s[1]-o,s[2]),p.lineTo(s[1]+o,s[2]),p.lineCap="round",p.lineJoin="round",p.closePath(),this._stroke(t);break;case"diamond":case"<>":p.beginPath(),p.moveTo(s[1]-o,s[2]),p.lineTo(s[1],s[2]+o),p.lineTo(s[1]+o,s[2]),p.lineTo(s[1],s[2]-o),p.closePath(),this._fill(t),this._stroke(t);break;case"triangleup":case"a":case"^":p.beginPath(),p.moveTo(s[1],s[2]-o),p.lineTo(s[1]-n,s[2]+h),p.lineTo(s[1]+n,s[2]+h),p.closePath(),this._fill(t),this._stroke(t);break;case"triangledown":case"v":p.beginPath(),p.moveTo(s[1],s[2]+o),p.lineTo(s[1]-n,s[2]-h),p.lineTo(s[1]+n,s[2]-h),p.closePath(),this._fill(t),this._stroke(t);break;case"triangleleft":case"<":p.beginPath(),p.moveTo(s[1]-o,s[2]),p.lineTo(s[1]+h,s[2]-n),p.lineTo(s[1]+h,s[2]+n),p.closePath(),this._fill(t),this._stroke(t);break;case"triangleright":case">":p.beginPath(),p.moveTo(s[1]+o,s[2]),p.lineTo(s[1]-h,s[2]-n),p.lineTo(s[1]-h,s[2]+n),p.closePath(),this._fill(t),this._stroke(t)}},updatePoint:function(t){this.drawPoint(t)},drawArrows:function(t,e,o,s,n){var h,l,p,d,Z,C,P,S,w,D,k,I,U,J,z,V,W,$,nt,et,lt=this.context,ot=1,gt=1,vt=1,Tt=n.evFirst,Rt=n.evLast;if(a.Z.evaluate(t.visProp.strokecolor)!=="none"&&(Tt||Rt)){if(t.elementClass===x.Z.OBJECT_CLASS_LINE)h=e.scrCoords[1],l=e.scrCoords[2],p=o.scrCoords[1],d=o.scrCoords[2],nt=et=Math.atan2(d-l,p-h);else{if(h=t.points[0].scrCoords[1],l=t.points[0].scrCoords[2],($=t.points.length-1)<1)return;p=t.points[t.points.length-1].scrCoords[1],d=t.points[t.points.length-1].scrCoords[2],J=t.points[1].scrCoords[1]-t.points[0].scrCoords[1],z=t.points[1].scrCoords[2]-t.points[0].scrCoords[2],V=t.points[$].scrCoords[1]-t.points[$-1].scrCoords[1],W=t.points[$].scrCoords[2]-t.points[$-1].scrCoords[2],Tt&&(nt=Math.atan2(z,J)),Rt&&(et=Math.atan2(W,V))}if(Z=a.Z.evaluate(t.visProp[s+"strokewidth"]),Tt)if(C=Z*n.sizeFirst,w=ot=n.typeFirst,ot===2)S=[[C,.5*-C],[0,0],[C,.5*C],[.5*C,0]];else if(ot===3)S=[[C/3,.5*-C],[0,.5*-C],[0,.5*C],[C/3,.5*C]];else if(ot===4)for(C/=10,gt=3,U=(S=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,I=0;I<U;I++)S[I][0]*=-C,S[I][1]*=C,S[I][0]+=10*C,S[I][1]-=3.31*C;else if(ot===5)for(C/=10,gt=3,U=(S=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,I=0;I<U;I++)S[I][0]*=-C,S[I][1]*=C,S[I][0]+=10*C,S[I][1]-=3.28*C;else if(ot===6)for(C/=10,gt=3,U=(S=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,I=0;I<U;I++)S[I][0]*=-C,S[I][1]*=C,S[I][0]+=10*C,S[I][1]-=2.84*C;else if(ot===7)for(C=Z,gt=3,U=(S=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,I=0;I<U;I++)S[I][0]*=-C,S[I][1]*=C,S[I][0]+=10*C,S[I][1]-=5.2*C;else S=[[C,.5*-C],[0,0],[C,.5*C]];if(Rt)if(C=Z*n.sizeLast,D=ot=n.typeLast,ot===2)P=[[-C,.5*-C],[0,0],[-C,.5*C],[.5*-C,0]];else if(ot===3)P=[[-C/3,.5*-C],[0,.5*-C],[0,.5*C],[-C/3,.5*C]];else if(ot===4)for(C/=10,vt=3,U=(P=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,I=0;I<U;I++)P[I][0]*=C,P[I][1]*=C,P[I][0]-=10*C,P[I][1]-=3.31*C;else if(ot===5)for(C/=10,vt=3,U=(P=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,I=0;I<U;I++)P[I][0]*=C,P[I][1]*=C,P[I][0]-=10*C,P[I][1]-=3.28*C;else if(ot===6)for(C/=10,vt=3,U=(P=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,I=0;I<U;I++)P[I][0]*=C,P[I][1]*=C,P[I][0]-=10*C,P[I][1]-=2.84*C;else if(ot===7)for(C=Z,vt=3,U=(P=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,I=0;I<U;I++)P[I][0]*=C,P[I][1]*=C,P[I][0]-=10*C,P[I][1]-=5.2*C;else P=[[-C,.5*-C],[0,0],[-C,.5*C]];lt.save(),this._setColor(t,"stroke","fill")&&(this._setColor(t,"stroke"),Tt&&(k=w!==7,this._drawPolygon(this._translateShape(this._rotateShape(S,nt),h,l),gt,k)),Rt&&(k=D!==7,this._drawPolygon(this._translateShape(this._rotateShape(P,et),p,d),vt,k))),lt.restore()}},drawLine:function(t){var e,o,s,n,h,l=new b.Z(x.Z.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),p=new b.Z(x.Z.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),d=null;t.visPropCalc.visible&&(s=this._getHighlighted(t),n=a.Z.evaluate(t.visProp[s+"strokewidth"]),((h=this.getArrowHeadData(t,n,s)).evFirst||h.evLast)&&(d=-4),g.Z.calcStraight(t,l,p,d),this.handleTouchpoints(t,l,p,h),e=new b.Z(x.Z.COORDS_BY_USER,l.usrCoords,t.board),o=new b.Z(x.Z.COORDS_BY_USER,p.usrCoords,t.board),this.getPositionArrowHead(t,l,p,h),this.context.beginPath(),this.context.moveTo(l.scrCoords[1],l.scrCoords[2]),this.context.lineTo(p.scrCoords[1],p.scrCoords[2]),this._stroke(t),(h.evFirst||h.evLast)&&this.drawArrows(t,e,o,s,h))},updateLine:function(t){this.drawLine(t)},drawTicks:function(){},updateTicks:function(t){var e,o,s,n,h,l,p=t.ticks.length,d=this.context;for(d.beginPath(),e=0;e<p;e++)for(s=(o=t.ticks[e])[0],n=o[1],h=s.length,d.moveTo(s[0],n[0]),l=1;l<h;++l)d.lineTo(s[l],n[l]);d.lineCap="round",this._stroke(t)},drawCurve:function(t){var e,o,s;a.Z.evaluate(t.visProp.handdrawing)?this.updatePathStringBezierPrim(t):this.updatePathStringPrim(t),t.numberPoints>1&&(e=this._getHighlighted(t),o=a.Z.evaluate(t.visProp[e+"strokewidth"]),((s=this.getArrowHeadData(t,o,e)).evFirst||s.evLast)&&this.drawArrows(t,null,null,e,s))},updateCurve:function(t){this.drawCurve(t)},drawEllipse:function(t){var e=t.center.coords.scrCoords[1],o=t.center.coords.scrCoords[2],s=t.board.unitX,n=t.board.unitY,h=2*t.Radius(),l=2*t.Radius(),p=h*s,d=l*n,Z=e-p/2,C=o-d/2,P=p/2*.5522848,S=d/2*.5522848,w=Z+p,D=C+d,k=Z+p/2,I=C+d/2,U=this.context;h>0&&l>0&&!isNaN(e+o)&&(U.beginPath(),U.moveTo(Z,I),U.bezierCurveTo(Z,I-S,k-P,C,k,C),U.bezierCurveTo(k+P,C,w,I-S,w,I),U.bezierCurveTo(w,I+S,k+P,D,k,D),U.bezierCurveTo(k-P,D,Z,I+S,Z,I),U.closePath(),this._fill(t),this._stroke(t))},updateEllipse:function(t){return this.drawEllipse(t)},displayCopyright:function(t,e){var o=this.context;o.save(),o.font=e+"px Arial",o.fillStyle="#aaa",o.lineWidth=.5,o.fillText(t,10,2+e),o.restore()},drawInternalText:function(t){var e=a.Z.evaluate(t.visProp.fontsize),o=a.Z.evaluate(t.visProp.fontunit),s=t.getAnchorX(),n=t.getAnchorY(),h=this.context;return h.save(),this._setColor(t,"stroke","fill")&&!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])&&(h.font=(e>0?e:0)+o+" Arial",this.transformImage(t,t.transformations),s==="left"?h.textAlign="left":s==="right"?h.textAlign="right":s==="middle"&&(h.textAlign="center"),n==="bottom"?h.textBaseline="bottom":n==="top"?h.textBaseline="top":n==="middle"&&(h.textBaseline="middle"),h.fillText(t.plaintext,t.coords.scrCoords[1],t.coords.scrCoords[2])),h.restore(),null},updateInternalText:function(t){this.drawInternalText(t)},setObjectStrokeColor:function(t,e,o){var s,n,h,l,p=a.Z.evaluate(e),d=a.Z.evaluate(o);d=d>0?d:0,t.visPropOld.strokecolor===p&&t.visPropOld.strokeopacity===d||(a.Z.exists(p)&&p!==!1&&(p.length!==9?(s=p,h=d):(s=(n=_t.Z.rgba2rgbo(p))[0],h=d*n[1]),l=t.rendNode,t.elementClass===x.Z.OBJECT_CLASS_TEXT&&a.Z.evaluate(t.visProp.display)==="html"&&(l.style.color=s,l.style.opacity=h)),t.visPropOld.strokecolor=p,t.visPropOld.strokeopacity=d)},drawImage:function(t){t.rendNode=new Image,t._src="",this.updateImage(t)},updateImage:function(t){var e=this.context,o=a.Z.evaluate(t.visProp.fillopacity),s=a.Z.bind(function(){t.imgIsLoaded=!0,t.size[0]<=0||t.size[1]<=0||(e.save(),e.globalAlpha=o,this.transformImage(t,t.transformations),e.drawImage(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),e.restore())},this);this.updateImageURL(t)?t.rendNode.onload=s:t.imgIsLoaded&&s()},transformImage:function(t,e){var o,s=e.length,n=this.context;s>0&&(o=this.joinTransforms(t,e),Math.abs(c.Z.det(o))>=B.Z.eps&&n.transform(o[1][1],o[2][1],o[1][2],o[2][2],o[1][0],o[2][0]))},updateImageURL:function(t){var e;return e=a.Z.evaluate(t.url),t._src!==e&&(t.imgIsLoaded=!1,t.rendNode.src=e,t._src=e,!0)},remove:function(t){a.Z.exists(t)&&a.Z.exists(t.parentNode)&&t.parentNode.removeChild(t)},updatePathStringPrim:function(t){var e,o,s,n,h,l="M",p=l,d=5e3,Z=this.context;if(!(t.numberPoints<=0)){if(h=Math.min(t.points.length,t.numberPoints),Z.beginPath(),t.bezierDegree===1)for(e=0;e<h;e++)o=t.points[e].scrCoords,isNaN(o[1])||isNaN(o[2])?p=l:(o[1]>d?o[1]=d:o[1]<-5e3&&(o[1]=-5e3),o[2]>d?o[2]=d:o[2]<-5e3&&(o[2]=-5e3),p===l?Z.moveTo(o[1],o[2]):Z.lineTo(o[1],o[2]),p="L");else if(t.bezierDegree===3)for(e=0;e<h;)o=t.points[e].scrCoords,isNaN(o[1])||isNaN(o[2])?p=l:(p===l?Z.moveTo(o[1],o[2]):(e+=1,s=t.points[e].scrCoords,e+=1,n=t.points[e].scrCoords,Z.bezierCurveTo(o[1],o[2],s[1],s[2],n[1],n[2])),p="C"),e+=1;Z.lineCap="round",this._fill(t),this._stroke(t)}},updatePathStringBezierPrim:function(t){var e,o,s,n,h,l,p,d="M",Z=d,C=5e3,P=a.Z.evaluate(t.visProp.strokewidth),S=a.Z.evaluate(t.visProp.curvetype)!=="plot",w=this.context;if(!(t.numberPoints<=0)){for(S&&t.board.options.curve.RDPsmoothing&&(t.points=c.Z.RamerDouglasPeucker(t.points,.5)),p=Math.min(t.points.length,t.numberPoints),w.beginPath(),o=1;o<3;o++)for(Z=d,e=0;e<p;e++)n=t.points[e].scrCoords,isNaN(n[1])||isNaN(n[2])?Z=d:(n[1]>C?n[1]=C:n[1]<-5e3&&(n[1]=-5e3),n[2]>C?n[2]=C:n[2]<-5e3&&(n[2]=-5e3),Z===d?w.moveTo(n[1],n[2]):(s=2*o,w.bezierCurveTo(h+.333*(n[1]-h)+P*(s*Math.random()-o),l+.333*(n[2]-l)+P*(s*Math.random()-o),h+.666*(n[1]-h)+P*(s*Math.random()-o),l+.666*(n[2]-l)+P*(s*Math.random()-o),n[1],n[2])),Z="C",h=n[1],l=n[2]);w.lineCap="round",this._fill(t),this._stroke(t)}},updatePolygonPrim:function(t,e){var o,s,n,h=e.vertices.length,l=this.context,p=!0;if(!(h<=0)&&e.visPropCalc.visible){for(e.elType==="polygonalchain"&&h++,l.beginPath(),s=0;!e.vertices[s].isReal&&s<h-1;)s++,p=!1;for(o=e.vertices[s].coords.scrCoords,l.moveTo(o[1],o[2]),n=s;n<h-1;n++)e.vertices[n].isReal||(p=!1),o=e.vertices[n].coords.scrCoords,l.lineTo(o[1],o[2]);l.closePath(),p&&this._fill(e)}},display:function(t,e){t&&t.rendNode&&(t.visPropOld.visible=e,t.rendNode.style.visibility=e?"inherit":"hidden")},show:function(t){u.Z.deprecated("Board.renderer.show()","Board.renderer.display()"),a.Z.exists(t.rendNode)&&(t.rendNode.style.visibility="inherit")},hide:function(t){u.Z.deprecated("Board.renderer.hide()","Board.renderer.display()"),a.Z.exists(t.rendNode)&&(t.rendNode.style.visibility="hidden")},setGradient:function(t){var e;e=(e=a.Z.evaluate(t.visProp.fillopacity))>0?e:0},setShadow:function(t){t.visPropOld.shadow!==t.visProp.shadow&&(t.visPropOld.shadow=t.visProp.shadow)},highlight:function(t){return t.elementClass===x.Z.OBJECT_CLASS_TEXT&&a.Z.evaluate(t.visProp.display)==="html"?this.updateTextStyle(t,!0):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},noHighlight:function(t){return t.elementClass===x.Z.OBJECT_CLASS_TEXT&&a.Z.evaluate(t.visProp.display)==="html"?this.updateTextStyle(t,!1):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(t){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),t&&t.attr.showcopyright&&this.displayCopyright(u.Z.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(t,e){this.container?(this.canvasRoot.style.width=parseFloat(t)+"px",this.canvasRoot.style.height=parseFloat(e)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(t)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(e)+"px")):(this.canvasRoot.width=2*parseFloat(t),this.canvasRoot.height=2*parseFloat(e)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}});const le=u.Z.CanvasRenderer;u.Z.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"},u.Z.extend(u.Z.NoRenderer.prototype,{drawPoint:function(t){},updatePoint:function(t){},changePointStyle:function(t){},drawLine:function(t){},updateLine:function(t){},drawTicks:function(t){},updateTicks:function(t){},drawCurve:function(t){},updateCurve:function(t){},drawEllipse:function(t){},updateEllipse:function(t){},drawPolygon:function(t){},updatePolygon:function(t){},displayCopyright:function(t,e){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){},updateText:function(t){},updateTextStyle:function(t,e){},updateInternalTextStyle:function(t,e,o){},drawImage:function(t){},updateImage:function(t){},transformImage:function(t,e){},updateImageURL:function(t){},appendChildPrim:function(t,e){},appendNodesToElement:function(t,e){},createPrim:function(t,e){return null},remove:function(t){},makeArrows:function(t){},updateEllipsePrim:function(t,e,o,s,n){},updateLinePrim:function(t,e,o,s,n,h){},updatePathPrim:function(t,e,o){},updatePathStringPoint:function(t,e,o){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,e){},updateRectPrim:function(t,e,o,s,n){},setPropertyPrim:function(t,e,o){},display:function(t,e){t&&(t.visPropOld.visible=e)},show:function(t){},hide:function(t){},setBuffering:function(t,e){},setDashStyle:function(t){},setDraft:function(t){},removeDraft:function(t){},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,e){},setObjectFillColor:function(t,e,o){},setObjectStrokeColor:function(t,e,o){},setObjectStrokeWidth:function(t,e){},setShadow:function(t){},highlight:function(t){},noHighlight:function(t){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawZoomBar:function(t){},getElementById:function(t){return null},resize:function(t,e){},removeToInsertLater:function(){return function(){}}}),u.Z.NoRenderer.prototype=new rt;const he=u.Z.NoRenderer;u.Z.JSXGraph={rendererType:(it.Z.board.renderer="no",N.Z.supportsVML()&&(it.Z.board.renderer="vml",document.onmousemove=function(){var t;return document.body&&(t=document.body.scrollLeft,t+=document.body.scrollTop),t}),N.Z.supportsCanvas()&&(it.Z.board.renderer="canvas"),N.Z.supportsSVG()&&(it.Z.board.renderer="svg"),N.Z.isNode()&&N.Z.supportsCanvas()&&(it.Z.board.renderer="canvas"),(N.Z.isNode()||it.Z.renderer==="no")&&(it.Z.text.display="internal",it.Z.infobox.display="internal"),it.Z.board.renderer),initRenderer:function(t,e,o,s){var n;if(a.Z.exists(o)&&o!==!1||typeof document!="object"||(o=document),typeof o=="object"&&t!==null)for(n=o.getElementById(t);n.firstChild;)n.removeChild(n.firstChild);else n=t;return s!==void 0&&s!=="auto"||(s=this.rendererType),s==="svg"?new Xt(n,e):s==="vml"?new $t(n):s==="canvas"?new le(n,e):new he},_setAttributes:function(t){var e=a.Z.copyAttributes(t,it.Z,"board");return e.zoom=a.Z.copyAttributes(e,it.Z,"board","zoom"),e.pan=a.Z.copyAttributes(e,it.Z,"board","pan"),e.drag=a.Z.copyAttributes(e,it.Z,"board","drag"),e.keyboard=a.Z.copyAttributes(e,it.Z,"board","keyboard"),e.selection=a.Z.copyAttributes(e,it.Z,"board","selection"),e.navbar=a.Z.copyAttributes(e.navbar,it.Z,"navbar"),e.screenshot=a.Z.copyAttributes(e,it.Z,"board","screenshot"),e.resize=a.Z.copyAttributes(e,it.Z,"board","resize"),e.fullscreen=a.Z.copyAttributes(e,it.Z,"board","fullscreen"),e.logging=a.Z.copyAttributes(e,it.Z,"board","logging"),e.movetarget=t.moveTarget||t.movetarget||it.Z.board.moveTarget,e},_fillBoard:function(t,e,o){t.initInfobox(),t.maxboundingbox=e.maxboundingbox,t.resizeContainer(o.width,o.height,!0,!0),t._createSelectionPolygon(e),t.renderer.drawZoomBar(t,e.navbar),u.Z.boards[t.id]=t},_setARIA:function(t,e){var o,s,n,h,l,p,d=e.document;if(typeof d!="object"){if(!N.Z.isBrowser)return;d=document}o=(s=d.getElementById(t)).ownerDocument,h=s.parentNode,l=t+"_ARIAlabel",p=t+"_ARIAdescription",(n=o.createElement("div")).innerHTML=e.title,n.setAttribute("id",l),n.style.display="none",h.insertBefore(n,s),(n=o.createElement("div")).innerHTML=e.description,n.setAttribute("id",p),n.style.display="none",h.insertBefore(n,s),s.setAttribute("aria-labelledby",l),s.setAttribute("aria-describedby",p)},_removeARIANodes:function(t){var e,o,s;typeof(s=t.document||document)=="object"&&(o=t.containerObj.getAttribute("aria-labelledby"),(e=s.getElementById(o))&&e.parentNode&&e.parentNode.removeChild(e),o=t.containerObj.getAttribute("aria-describedby"),(e=s.getElementById(o))&&e.parentNode&&e.parentNode.removeChild(e))},initBoard:function(t,e){var o,s,n,h,l,p,d,Z,C,P,S,w,D,k,I=0,U=0;return e=e||{},P=this._setAttributes(e),Z=N.Z.getDimensions(t,P.document),P.unitx||P.unity?(o=a.Z.def(P.originx,150),s=a.Z.def(P.originy,150),n=a.Z.def(P.unitx,50),h=a.Z.def(P.unity,50)):((C=P.boundingbox)[0]<P.maxboundingbox[0]&&(C[0]=P.maxboundingbox[0]),C[1]>P.maxboundingbox[1]&&(C[1]=P.maxboundingbox[1]),C[2]>P.maxboundingbox[2]&&(C[2]=P.maxboundingbox[2]),C[3]<P.maxboundingbox[3]&&(C[3]=P.maxboundingbox[3]),p=parseInt(Z.width,10),d=parseInt(Z.height,10),a.Z.exists(C)&&P.keepaspectratio?(n=p/(C[2]-C[0]),h=d/(C[1]-C[3]),Math.abs(n)<Math.abs(h)?U=.5*(d/(h=Math.abs(n)*h/Math.abs(h))-(C[1]-C[3])):I=.5*(p/(n=Math.abs(h)*n/Math.abs(n))-(C[2]-C[0]))):(n=p/(C[2]-C[0]),h=d/(C[1]-C[3])),o=-n*(C[0]-I),s=h*(C[1]+U)),l=this.initRenderer(t,Z,P.document,P.renderer),this._setARIA(t,P),(k=new Bt(t,l,P.id,[o,s],P.zoomfactor*P.zoomx,P.zoomfactor*P.zoomy,n,h,Z.width,Z.height,P)).keepaspectratio=P.keepaspectratio,this._fillBoard(k,P,Z),k.suspendUpdate(),P.axis&&(S=typeof P.axis=="object"?P.axis:{},w=a.Z.deepCopy(it.Z.board.defaultAxes.x,S),D=a.Z.deepCopy(it.Z.board.defaultAxes.y,S),P.defaultaxes.x&&(w=a.Z.deepCopy(w,P.defaultaxes.x)),P.defaultaxes.y&&(D=a.Z.deepCopy(D,P.defaultaxes.y)),k.defaultAxes={},k.defaultAxes.x=k.create("axis",[[0,0],[1,0]],w),k.defaultAxes.y=k.create("axis",[[0,0],[0,1]],D)),P.grid&&k.create("grid",[],typeof P.grid=="object"?P.grid:{}),k.unsuspendUpdate(),k},loadBoardFromFile:function(t,e,o,s,n){var h,l,p,d,Z;return s=s||{},h=this._setAttributes(s),d=N.Z.getDimensions(t,h.document),l=this.initRenderer(t,d,h.document,h.renderer),this._setARIA(t,h),p=new Bt(t,l,"",[150,150],1,1,50,50,d.width,d.height,h),this._fillBoard(p,h,d),Z=h.encoding||"iso-8859-1",dt.parseFileContent(e,p,o,!0,Z,n),p},loadBoardFromString:function(t,e,o,s,n){var h,l,p,d;return s=s||{},h=this._setAttributes(s),d=N.Z.getDimensions(t,h.document),l=this.initRenderer(t,d,h.document,h.renderer),this._setARIA(t,h),p=new Bt(t,l,"",[150,150],1,1,50,50,d.width,d.height,h),this._fillBoard(p,h,d),dt.parseString(e,p,o,!0,n),p},freeBoard:function(t){var e;for(e in typeof t=="string"&&(t=u.Z.boards[t]),this._removeARIANodes(t),t.removeEventHandlers(),t.suspendUpdate(),t.objects)t.objects.hasOwnProperty(e)&&t.objects[e].remove();for(;t.containerObj.firstChild;)t.containerObj.removeChild(t.containerObj.firstChild);for(e in t.objects)t.objects.hasOwnProperty(e)&&delete t.objects[e];delete t.renderer,t.jc.creator.clearCache(),delete t.jc,delete u.Z.boards[t.id]},registerElement:function(t,e){u.Z.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),u.Z.registerElement(t,e)}},N.Z.isBrowser&&typeof window=="object"&&typeof document=="object"&&N.Z.addEvent(window,"load",function(){var t,e,o,s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U,J=!1,z=document.getElementsByTagName("script"),V=function($,nt,et){var lt=u.Z.JSXGraph.initBoard(n,{boundingbox:et,keepaspectratio:!0,grid:D,axis:w,showReload:!0});if(nt.toLowerCase().indexOf("script")>-1)lt.construct($);else try{lt.jc.parse($)}catch(ot){u.Z.debug(ot)}return lt},W=function($,nt,et,lt){return function(){var ot;u.Z.JSXGraph.freeBoard($),(ot=V(nt,et,lt)).reload=W(ot,nt,et,lt)}};for(e=0;e<z.length;e++)if(t=z[e].getAttribute("type",!1),a.Z.exists(t)&&(t.toLowerCase()==="text/jessiescript"||t.toLowerCase()==="jessiescript"||t.toLowerCase()==="text/jessiecode"||t.toLowerCase()==="jessiecode")){if(P=z[e].getAttribute("class",!1)||"",p=z[e].getAttribute("width",!1)||"",d=z[e].getAttribute("height",!1)||"",Z=z[e].getAttribute("maxwidth",!1)||"100%",C=z[e].getAttribute("aspectratio",!1)||"1/1",S=z[e].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",n=z[e].getAttribute("container",!1),I=z[e].getAttribute("src",!1),(S=S.split(",")).length!==4)S=[-5,5,5,-5];else for(o=0;o<S.length;o++)S[o]=parseFloat(S[o]);if(w=a.Z.str2Bool(z[e].getAttribute("axis",!1)||"false"),D=a.Z.str2Bool(z[e].getAttribute("grid",!1)||"false"),a.Z.exists(n))s=document.getElementById(n);else{n="jessiescript_autgen_jxg_"+e,(s=document.createElement("div")).setAttribute("id",n),l=p!==""?"width:"+p+";":"",l+=d!==""?"height:"+d+";":"",l+=Z!==""?"max-width:"+Z+";":"",l+=C!==""?"aspect-ratio:"+C+";":"",s.setAttribute("style",l),s.setAttribute("class","jxgbox "+P);try{document.body.insertBefore(s,z[e])}catch{typeof jQuery=="object"&&jQuery(s).insertBefore(z[e])}}k="",a.Z.exists(I)?(J=!0,(U=new XMLHttpRequest).open("GET",I),U.overrideMimeType("text/plain; charset=x-user-defined"),U.addEventListener("load",function(){if(!(this.status<400))throw new Error(`
JSXGraph: failed to load file`,I,":",this.responseText);k=this.responseText+`
`+k,(h=V(k,t,S)).reload=W(h,k,t,S)}),U.addEventListener("error",function($){throw new Error(`
JSXGraph: failed to load file`,I,":",$)}),U.send()):J=!1,document.getElementById(n)?(k=(k=z[e].innerHTML).replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),z[e].innerHTML=k,J||((h=V(k,t,S)).reload=W(h,k,t,S))):u.Z.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},window),u.Z.JSXGraph;var Gt=__webpack_require__(958),oe=__webpack_require__(218);u.Z.Point=function(t,e,o){this.constructor(t,o,x.Z.OBJECT_TYPE_POINT,x.Z.OBJECT_CLASS_POINT),this.element=this.board.select(o.anchor),this.coordsConstructor(e),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createGradient(),this.createLabel()},u.Z.Point.prototype=new Gt.Z,a.Z.copyPrototypeMethods(u.Z.Point,oe.Z,"coordsConstructor"),u.Z.extend(u.Z.Point.prototype,{hasPoint:function(t,e){var o,s,n,h=this.coords.scrCoords,l=a.Z.evaluate(this.visProp.sizeunit);return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(n=this.board._inputDevice,s=a.Z.evaluate(this.visProp.precision[n])):s=this.board.options.precision.hasPoint,o=parseFloat(a.Z.evaluate(this.visProp.size)),l==="user"&&(o*=Math.sqrt(this.board.unitX*this.board.unitY)),(o+=.5*parseFloat(a.Z.evaluate(this.visProp.strokewidth)))<s&&(o=s),Math.abs(h[1]-t)<o+2&&Math.abs(h[2]-e)<o+2},update:function(t){return this.needsUpdate?(this.updateCoords(t),a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateTransform:function(t){var e,o;if(this.transformations.length===0||this.baseElement===null)return this;for(this===this.baseElement?(e=this.transformations[0].apply(this.baseElement,"self"),this.coords.setCoordinates(x.Z.COORDS_BY_USER,e)):e=this.transformations[0].apply(this.baseElement),this.coords.setCoordinates(x.Z.COORDS_BY_USER,e),o=1;o<this.transformations.length;o++)this.coords.setCoordinates(x.Z.COORDS_BY_USER,this.transformations[o].apply(this));return this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(t,e,o,s){var n;t=this.board.select(t),e=this.board.select(e),n=g.Z.intersectionFunction(this.board,t,e,o,s,this.visProp.alwaysintersect),this.addConstraint([n]);try{t.addChild(this),e.addChild(this)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof t+"' and '"+typeof e+"'.")}this.type=x.Z.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[t.id,e.id,o,s],this.generatePolynomial=function(){var h=t.generatePolynomial(this),l=e.generatePolynomial(this);return h.length===0||l.length===0?[]:[h[0],l[0]]},this.prepareUpdate().update()},setStyle:function(t){return this.visProp.face=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"][t],this.visProp.size=[2,3,4,1,2,3,4,2,3,4,2,3,4][t],this.board.renderer.changePointStyle(this),this},normalizeFace:function(t){return u.Z.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),it.Z.normalizePointFace(t)},face:function(t){u.Z.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:t})},size:function(t){u.Z.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:t})},isOn:function(t,e){var o,s;return e=e||B.Z.eps,a.Z.isPoint(t)?this.Dist(t)<e:t.elementClass===x.Z.OBJECT_CLASS_LINE?(t.elType!=="segment"||a.Z.evaluate(this.visProp.alwaysintersect)||(o=u.Z.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,t.point1.coords.usrCoords,t.point2.coords.usrCoords))[1]>=0&&o[1]<=1)&&g.Z.distPointLine(this.coords.usrCoords,t.stdform)<e:t.elementClass===x.Z.OBJECT_CLASS_CIRCLE?a.Z.evaluate(t.visProp.hasinnerpoints)?this.Dist(t.center)<t.Radius()+e:Math.abs(this.Dist(t.center)-t.Radius())<e:t.elementClass===x.Z.OBJECT_CLASS_CURVE?(s=g.Z.projectPointToCurve(this,t,this.board)[0],g.Z.distance(this.coords.usrCoords,s.usrCoords,3)<e):t.type===x.Z.OBJECT_TYPE_POLYGON?!(!a.Z.evaluate(t.visProp.hasinnerpoints)||!t.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],u.Z.COORDS_BY_USER))||(o=g.Z.projectCoordsToPolygon(this.coords.usrCoords,t),g.Z.distance(this.coords.usrCoords,o,3)<e):t.type===x.Z.OBJECT_TYPE_TURTLE&&(s=g.Z.projectPointToTurtle(this,t,this.board),g.Z.distance(this.coords.usrCoords,s.usrCoords,3)<e)},cloneToBackground:function(){var t={};return t.id=this.id+"T"+this.numTraces,this.numTraces+=1,t.coords=this.coords,t.visProp=a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),t.visProp.layer=this.board.options.layer.trace,t.elementClass=x.Z.OBJECT_CLASS_POINT,t.board=this.board,a.Z.clearVisPropOld(t),t.visPropCalc={visible:a.Z.evaluate(t.visProp.visible)},this.board.renderer.drawPoint(t),this.traces[t.id]=t.rendNode,this}}),u.Z.createPoint=function(t,e,o){var s,n;if(n=a.Z.copyAttributes(o,t.options,"point"),!(s=oe.Z.create(u.Z.Point,t,e,n)))throw new Error("JSXGraph: Can't create point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return s},u.Z.createGlider=function(t,e,o){var s,n,h=a.Z.copyAttributes(o,t.options,"glider");return n=e.length===1?[0,0]:e.slice(0,2),(s=t.create("point",n,h)).makeGlider(e[e.length-1]),s},u.Z.createIntersectionPoint=function(t,e,o){var s,n,h,l,p,d,Z=a.Z.copyAttributes(o,t.options,"intersection");e.push(0,0),n=t.select(e[0]),h=t.select(e[1]),p=e[2]||0,d=e[3]||0,s=t.create("point",[0,0,0],Z),l=g.Z.intersectionFunction(t,n,h,p,d,s.visProp.alwaysintersect),s.addConstraint([l]);try{n.addChild(s),h.addChild(s)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.")}return s.type=x.Z.OBJECT_TYPE_INTERSECTION,s.elType="intersection",s.setParents([n.id,h.id]),s.intersectionNumbers=[p,d],s.getParents=function(){return this.parents.concat(this.intersectionNumbers)},s.generatePolynomial=function(){var C=n.generatePolynomial(s),P=h.generatePolynomial(s);return C.length===0||P.length===0?[]:[C[0],P[0]]},s},u.Z.createOtherIntersectionPoint=function(t,e,o){var s,n,h,l;if(e.length!==3||!a.Z.isPoint(e[2])||e[0].elementClass!==x.Z.OBJECT_CLASS_LINE&&e[0].elementClass!==x.Z.OBJECT_CLASS_CIRCLE||e[1].elementClass!==x.Z.OBJECT_CLASS_LINE&&e[1].elementClass!==x.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof e[0]+"',  '"+typeof e[1]+"'and  '"+typeof e[2]+`'.
Possible parent types: [circle|line,circle|line,point]`);return n=t.select(e[0]),h=t.select(e[1]),l=t.select(e[2]),(s=t.create("point",[function(){var p=g.Z.meet(n.stdform,h.stdform,0,n.board);return Math.abs(l.X()-p.usrCoords[1])>B.Z.eps||Math.abs(l.Y()-p.usrCoords[2])>B.Z.eps||Math.abs(l.Z()-p.usrCoords[0])>B.Z.eps?p:g.Z.meet(n.stdform,h.stdform,1,n.board)}],o)).type=x.Z.OBJECT_TYPE_INTERSECTION,s.elType="otherintersection",s.setParents([n.id,h.id,l]),n.addChild(s),h.addChild(s),s.generatePolynomial=function(){var p=n.generatePolynomial(s),d=h.generatePolynomial(s);return p.length===0||d.length===0?[]:[p[0],d[0]]},s},u.Z.createPolePoint=function(t,e,o){var s,n,h,l,p,d,Z;if(e.length>1&&(l=e[0].type===x.Z.OBJECT_TYPE_CONIC||e[0].elementClass===x.Z.OBJECT_CLASS_CIRCLE,p=e[1].type===x.Z.OBJECT_TYPE_CONIC||e[1].elementClass===x.Z.OBJECT_CLASS_CIRCLE,d=e[0].elementClass===x.Z.OBJECT_CLASS_LINE,Z=e[1].elementClass===x.Z.OBJECT_CLASS_LINE),e.length!==2||!(l&&Z||d&&p))throw new Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent type: [conic|circle,line], [line,conic|circle]`);return Z?(n=t.select(e[0]),h=t.select(e[1])):(n=t.select(e[1]),h=t.select(e[0])),(s=t.create("point",[function(){var C=n.quadraticform,P=h.stdform.slice(0,3);return[u.Z.Math.Numerics.det([P,C[1],C[2]]),u.Z.Math.Numerics.det([C[0],P,C[2]]),u.Z.Math.Numerics.det([C[0],C[1],P])]}],o)).elType="polepoint",s.setParents([n.id,h.id]),n.addChild(s),h.addChild(s),s},u.Z.registerElement("point",u.Z.createPoint),u.Z.registerElement("glider",u.Z.createGlider),u.Z.registerElement("intersection",u.Z.createIntersectionPoint),u.Z.registerElement("otherintersection",u.Z.createOtherIntersectionPoint),u.Z.registerElement("polepoint",u.Z.createPolePoint);const _e=u.Z.Point;u.Z.Line=function(t,e,o,s){this.constructor(t,s,x.Z.OBJECT_TYPE_LINE,x.Z.OBJECT_CLASS_LINE),this.point1=this.board.select(e),this.point2=this.board.select(o),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=u.Z.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"getSlope",getRise:"getRise",getYIntersect:"getRise",getAngle:"getAngle",L:"L",length:"L"})},u.Z.Line.prototype=new Gt.Z,u.Z.extend(u.Z.Line.prototype,{hasPoint:function(t,e){var o,s,n,h,l,p,d,Z,C,P=[],S=[1,t,e],w=a.Z.evaluate(this.visProp.strokewidth);return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(C=this.board._inputDevice,Z=a.Z.evaluate(this.visProp.precision[C])):Z=this.board.options.precision.hasPoint,Z+=.5*w,P[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,P[1]=this.stdform[1]/this.board.unitX,P[2]=this.stdform[2]/-this.board.unitY,o=g.Z.distPointLine(S,P),!(isNaN(o)||o>Z)&&(!(!a.Z.evaluate(this.visProp.straightfirst)||!a.Z.evaluate(this.visProp.straightlast))||(n=this.point1.coords,h=this.point2.coords,s=[0,P[1],P[2]],s=B.Z.crossProduct(s,S),(s=B.Z.crossProduct(s,P))[1]/=s[0],s[2]/=s[0],s[0]=1,s=new b.Z(x.Z.COORDS_BY_SCREEN,s.slice(1),this.board).usrCoords,l=n.distance(x.Z.COORDS_BY_USER,h),n=n.usrCoords.slice(0),h=h.usrCoords.slice(0),l<B.Z.eps?p=0:(l===Number.POSITIVE_INFINITY&&(l=1/B.Z.eps,Math.abs(h[0])<B.Z.eps?(l/=g.Z.distance([0,0,0],h),h=[1,n[1]+h[1]*l,n[2]+h[2]*l]):(l/=g.Z.distance([0,0,0],n),n=[1,h[1]+n[1]*l,h[2]+n[2]*l])),l=h[d=1]-n[d],Math.abs(l)<B.Z.eps&&(l=h[d=2]-n[d]),p=(s[d]-n[d])/l),!(!a.Z.evaluate(this.visProp.straightfirst)&&p<0)&&!(!a.Z.evaluate(this.visProp.straightlast)&&p>1)))},update:function(){var t;return this.needsUpdate?(this.constrained&&(a.Z.isFunction(this.funps)?(t=this.funps())&&t.length&&t.length===2&&(this.point1=t[0],this.point2=t[1]):(a.Z.isFunction(this.funp1)&&(t=this.funp1(),a.Z.isPoint(t)?this.point1=t:t&&t.length&&t.length===2&&this.point1.setPositionDirectly(x.Z.COORDS_BY_USER,t)),a.Z.isFunction(this.funp2)&&(t=this.funp2(),a.Z.isPoint(t)?this.point2=t:t&&t.length&&t.length===2&&this.point2.setPositionDirectly(x.Z.COORDS_BY_USER,t)))),this.updateSegmentFixedLength(),this.updateStdform(),a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateSegmentFixedLength:function(){var t,e,o,s,n,h,l,p;return this.hasFixedLength?(t=this.point1.Dist(this.point2),e=this.fixedLength(),o=this.fixedLengthOldCoords[0].distance(x.Z.COORDS_BY_USER,this.point1.coords),s=this.fixedLengthOldCoords[1].distance(x.Z.COORDS_BY_USER,this.point2.coords),(o>B.Z.eps||s>B.Z.eps||t!==e)&&(n=this.point1.isDraggable&&this.point1.type!==x.Z.OBJECT_TYPE_GLIDER&&!a.Z.evaluate(this.point1.visProp.fixed),h=this.point2.isDraggable&&this.point2.type!==x.Z.OBJECT_TYPE_GLIDER&&!a.Z.evaluate(this.point2.visProp.fixed),t>B.Z.eps?o>s&&h||o<=s&&h&&!n?(this.point2.setPositionDirectly(x.Z.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*e/t,this.point1.Y()+(this.point2.Y()-this.point1.Y())*e/t]),this.point2.fullUpdate()):(o<=s&&n||o>s&&n&&!h)&&(this.point1.setPositionDirectly(x.Z.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*e/t,this.point2.Y()+(this.point1.Y()-this.point2.Y())*e/t]),this.point1.fullUpdate()):(l=Math.random()-.5,p=Math.random()-.5,t=Math.sqrt(l*l+p*p),h?(this.point2.setPositionDirectly(x.Z.COORDS_BY_USER,[this.point1.X()+l*e/t,this.point1.Y()+p*e/t]),this.point2.fullUpdate()):n&&(this.point1.setPositionDirectly(x.Z.COORDS_BY_USER,[this.point2.X()+l*e/t,this.point2.Y()+p*e/t]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(x.Z.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(x.Z.COORDS_BY_USER,this.point2.coords.usrCoords)),this):this},updateStdform:function(){var t=B.Z.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=t[0],this.stdform[1]=t[1],this.stdform[2]=t[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&B.Z.innerProduct(this.stdform,this.stdform,3)>=B.Z.eps*B.Z.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},generatePolynomial:function(t){var e=this.point1.symbolic.x,o=this.point1.symbolic.y,s=this.point2.symbolic.x,n=this.point2.symbolic.y,h=t.symbolic.x,l=t.symbolic.y;return[["(",o,")*(",h,")-(",o,")*(",s,")+(",l,")*(",s,")-(",e,")*(",l,")+(",e,")*(",n,")-(",h,")*(",n,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=B.Z.eps?-this.stdform[0]/this.stdform[2]:1/0},getSlope:function(){return Math.abs(this.stdform[2])>=B.Z.eps?-this.stdform[1]/this.stdform[2]:1/0},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},setStraight:function(t,e){return this.visProp.straightfirst=t,this.visProp.straightlast=e,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new b.Z(x.Z.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(t){a.Z.exists(this.label)&&(this.label.relativeCoords=new b.Z(x.Z.COORDS_BY_SCREEN,[t[0],-t[1]],this.board))},getLabelAnchor:function(){var t,e,o=0,s=new b.Z(x.Z.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),n=new b.Z(x.Z.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),h=a.Z.evaluate(this.visProp.straightfirst),l=a.Z.evaluate(this.visProp.straightlast);if((h||l)&&g.Z.calcStraight(this,s,n,0),s=s.scrCoords,n=n.scrCoords,!a.Z.exists(this.label))return new b.Z(x.Z.COORDS_BY_SCREEN,[NaN,NaN],this.board);switch(a.Z.evaluate(this.label.visProp.position)){case"last":t=n[1],e=n[2];break;case"first":t=s[1],e=s[2];break;case"lft":case"llft":case"ulft":s[1]<=n[1]?(t=s[1],e=s[2]):(t=n[1],e=n[2]);break;case"rt":case"lrt":case"urt":s[1]>n[1]?(t=s[1],e=s[2]):(t=n[1],e=n[2]);break;default:t=.5*(s[1]+n[1]),e=.5*(s[2]+n[2])}return(h||l)&&(a.Z.exists(this.label)&&(o=a.Z.evaluate(this.label.visProp.fontsize)),Math.abs(t)<B.Z.eps?t=o:this.board.canvasWidth+B.Z.eps>t&&t>this.board.canvasWidth-o-B.Z.eps&&(t=this.board.canvasWidth-o),B.Z.eps+o>e&&e>-B.Z.eps?e=o:this.board.canvasHeight+B.Z.eps>e&&e>this.board.canvasHeight-o-B.Z.eps&&(e=this.board.canvasHeight-o)),new b.Z(x.Z.COORDS_BY_SCREEN,[t,e],this.board)},cloneToBackground:function(){var t,e,o,s={};return s.id=this.id+"T"+this.numTraces,s.elementClass=x.Z.OBJECT_CLASS_LINE,this.numTraces++,s.point1=this.point1,s.point2=this.point2,s.stdform=this.stdform,s.board=this.board,s.visProp=a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),s.visProp.layer=this.board.options.layer.trace,a.Z.clearVisPropOld(s),s.visPropCalc={visible:a.Z.evaluate(s.visProp.visible)},e=this.getSlope(),t=this.getRise(),s.getSlope=function(){return e},s.getRise=function(){return t},o=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(s),this.board.renderer.enhancedRendering=o,this.traces[s.id]=s.rendNode,this},addTransform:function(t){var e,o=a.Z.isArray(t)?t:[t],s=o.length;for(e=0;e<s;e++)this.point1.transformations.push(o[e]),this.point2.transformations.push(o[e]);return this},snapToGrid:function(t){var e,o,s,n,h,l,p,d;return a.Z.evaluate(this.visProp.snaptogrid)?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):a.Z.exists(t)&&(p=a.Z.evaluate(this.visProp.snapsizex),d=a.Z.evaluate(this.visProp.snapsizey),h=(e=new b.Z(x.Z.COORDS_BY_SCREEN,[t.Xprev,t.Yprev],this.board)).usrCoords[1],l=e.usrCoords[2],p<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(p=(n=this.board.defaultAxes.x.defaultTicks).ticksDelta*(a.Z.evaluate(n.visProp.minorticks)+1)),d<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(d=(n=this.board.defaultAxes.y.defaultTicks).ticksDelta*(a.Z.evaluate(n.visProp.minorticks)+1)),p>0&&d>0&&(o=g.Z.projectPointToLine({coords:e},this,this.board),s=m.Z.subtract([1,Math.round(h/p)*p,Math.round(l/d)*d],o.usrCoords),this.board.create("transform",s.slice(1),{type:"translate"}).applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var t=a.Z.evaluate(this.visProp.snaptopoints);return this.parents.length<3&&(this.point1.handleSnapToPoints(t),this.point2.handleSnapToPoints(t)),this},X:function(t){var e,o=this.stdform[2];return e=Math.abs(this.point1.coords.usrCoords[0])>B.Z.eps?this.point1.coords.usrCoords[1]:this.point2.coords.usrCoords[1],t=2*(t-.5),(1-Math.abs(t))*e-t*o},Y:function(t){var e,o=this.stdform[1];return e=Math.abs(this.point1.coords.usrCoords[0])>B.Z.eps?this.point1.coords.usrCoords[2]:this.point2.coords.usrCoords[2],t=2*(t-.5),(1-Math.abs(t))*e+t*o},Z:function(t){var e=Math.abs(this.point1.coords.usrCoords[0])>B.Z.eps?this.point1.coords.usrCoords[0]:this.point2.coords.usrCoords[0];return t=2*(t-.5),(1-Math.abs(t))*e},L:function(){return this.point1.Dist(this.point2)},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var t=this.point1.coords.usrCoords,e=this.point2.coords.usrCoords;return[Math.min(t[1],e[1]),Math.max(t[2],e[2]),Math.max(t[1],e[1]),Math.min(t[2],e[2])]},remove:function(){this.removeAllTicks(),Gt.Z.prototype.remove.call(this)}}),u.Z.createLine=function(t,e,o){var s,n,h,l,p,d,Z,C=[],P=!1,S=!1;if(e.length===2){if(a.Z.isArray(e[0])&&e[0].length>1)d=a.Z.copyAttributes(o,t.options,"line","point1"),h=t.create("point",e[0],d);else if(a.Z.isString(e[0])||a.Z.isPoint(e[0]))h=t.select(e[0]);else if(a.Z.isFunction(e[0])&&a.Z.isPoint(e[0]()))h=e[0](),S=!0;else if(a.Z.isFunction(e[0])&&e[0]().length&&e[0]().length>=2)d=a.Z.copyAttributes(o,t.options,"line","point1"),h=u.Z.createPoint(t,e[0](),d),S=!0;else{if(!a.Z.isObject(e[0])||!a.Z.isTransformationOrArray(e[1]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);P=!0,d=a.Z.copyAttributes(o,t.options,"line","point1"),h=t.create("point",[e[0].point1,e[1]],d)}if(P)d=a.Z.copyAttributes(o,t.options,"line","point2"),l=t.create("point",[e[0].point2,e[1]],d);else if(a.Z.isArray(e[1])&&e[1].length>1)d=a.Z.copyAttributes(o,t.options,"line","point2"),l=t.create("point",e[1],d);else if(a.Z.isString(e[1])||a.Z.isPoint(e[1]))l=t.select(e[1]);else if(a.Z.isFunction(e[1])&&a.Z.isPoint(e[1]()))l=e[1](),S=!0;else{if(!(a.Z.isFunction(e[1])&&e[1]().length&&e[1]().length>=2))throw new Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);d=a.Z.copyAttributes(o,t.options,"line","point2"),l=u.Z.createPoint(t,e[1](),d),S=!0}d=a.Z.copyAttributes(o,t.options,"line"),n=new u.Z.Line(t,h,l,d),S?(n.constrained=!0,n.funp1=e[0],n.funp2=e[1]):P||(n.isDraggable=!0),n.setParents([h.id,l.id])}else if(e.length===3){for(Z=!0,p=0;p<3;p++)if(a.Z.isNumber(e[p]))C[p]=a.Z.createFunction(e[p]);else{if(!a.Z.isFunction(e[p]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);C[p]=e[p],Z=!1}d=a.Z.copyAttributes(o,t.options,"line","point1"),h=Z?t.create("point",[C[2]()*C[2]()+C[1]()*C[1](),C[2]()-C[1]()*C[0]()+C[2](),-C[1]()-C[2]()*C[0]()-C[1]()],d):t.create("point",[function(){return .5*(C[2]()*C[2]()+C[1]()*C[1]())},function(){return .5*(C[2]()-C[1]()*C[0]()+C[2]())},function(){return .5*(-C[1]()-C[2]()*C[0]()-C[1]())}],d),d=a.Z.copyAttributes(o,t.options,"line","point2"),l=Z?t.create("point",[C[2]()*C[2]()+C[1]()*C[1](),-C[1]()*C[0]()+C[2](),-C[2]()*C[0]()-C[1]()],d):t.create("point",[function(){return C[2]()*C[2]()+C[1]()*C[1]()},function(){return-C[1]()*C[0]()+C[2]()},function(){return-C[2]()*C[0]()-C[1]()}],d),h.prepareUpdate().update(),l.prepareUpdate().update(),d=a.Z.copyAttributes(o,t.options,"line"),(n=new u.Z.Line(t,h,l,d)).isDraggable=Z,n.setParents([h,l])}else if(e.length===1&&a.Z.isFunction(e[0])&&e[0]().length===2&&a.Z.isPoint(e[0]()[0])&&a.Z.isPoint(e[0]()[1]))s=e[0](),d=a.Z.copyAttributes(o,t.options,"line"),(n=new u.Z.Line(t,s[0],s[1],d)).constrained=!0,n.funps=e[0],n.setParents(s);else{if(!(e.length===1&&a.Z.isFunction(e[0])&&e[0]().length===3&&a.Z.isNumber(e[0]()[0])&&a.Z.isNumber(e[0]()[1])&&a.Z.isNumber(e[0]()[2])))throw new Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]`);s=e[0],d=a.Z.copyAttributes(o,t.options,"line","point1"),h=t.create("point",[function(){var w=s();return[.5*(w[2]*w[2]+w[1]*w[1]),.5*(w[2]-w[1]*w[0]+w[2]),.5*(-w[1]-w[2]*w[0]-w[1])]}],d),d=a.Z.copyAttributes(o,t.options,"line","point2"),l=t.create("point",[function(){var w=s();return[w[2]*w[2]+w[1]*w[1],-w[1]*w[0]+w[2],-w[2]*w[0]-w[1]]}],d),d=a.Z.copyAttributes(o,t.options,"line"),(n=new u.Z.Line(t,h,l,d)).constrained=!0,n.funps=e[0],n.setParents([h,l])}return n},u.Z.registerElement("line",u.Z.createLine),u.Z.createSegment=function(t,e,o){var s,n;if(o.straightFirst=!1,o.straightLast=!1,n=a.Z.copyAttributes(o,t.options,"segment"),s=t.create("line",e.slice(0,2),n),e.length===3){if(s.hasFixedLength=!0,a.Z.isNumber(e[2]))s.fixedLength=function(){return e[2]};else{if(!a.Z.isFunction(e[2]))throw new Error("JSXGraph: Can't create segment with third parent type '"+typeof e[2]+`'.
Possible third parent types: number or function`);s.fixedLength=e[2]}s.getParents=function(){return this.parents.concat(this.fixedLength())},s.fixedLengthOldCoords=[],s.fixedLengthOldCoords[0]=new b.Z(x.Z.COORDS_BY_USER,s.point1.coords.usrCoords.slice(1,3),t),s.fixedLengthOldCoords[1]=new b.Z(x.Z.COORDS_BY_USER,s.point2.coords.usrCoords.slice(1,3),t)}return s.elType="segment",s},u.Z.registerElement("segment",u.Z.createSegment),u.Z.createArrow=function(t,e,o){var s,n;return o.straightFirst=!1,o.straightLast=!1,n=a.Z.copyAttributes(o,t.options,"arrow"),(s=t.create("line",e,n)).type=x.Z.OBJECT_TYPE_VECTOR,s.elType="arrow",s},u.Z.registerElement("arrow",u.Z.createArrow),u.Z.createAxis=function(t,e,o){var s,n,h,l,p;if(!a.Z.isArray(e[0])&&!a.Z.isPoint(e[0])||!a.Z.isArray(e[1])&&!a.Z.isPoint(e[1]))throw new Error("JSXGraph: Can't create axis with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);for(l in s=a.Z.copyAttributes(o,t.options,"axis"),(h=t.create("line",e,s)).type=x.Z.OBJECT_TYPE_AXIS,h.isDraggable=!1,h.point1.isDraggable=!1,h.point2.isDraggable=!1,h.ancestors)h.ancestors.hasOwnProperty(l)&&(h.ancestors[l].type=x.Z.OBJECT_TYPE_AXISPOINT);return n=a.Z.copyAttributes(o,t.options,"axis","ticks"),p=a.Z.exists(n.ticksdistance)?n.ticksdistance:a.Z.isArray(n.ticks)?n.ticks:1,h.defaultTicks=t.create("ticks",[h,p],n),h.defaultTicks.dump=!1,h.elType="axis",h.subs={ticks:h.defaultTicks},h.inherits.push(h.defaultTicks),h},u.Z.registerElement("axis",u.Z.createAxis),u.Z.createTangent=function(t,e,o){var s,n,h,l,p;if(e.length===1)s=e[0],n=s.slideObject;else{if(e.length!==2)throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [glider], [point,line|curve|circle|conic]`);if(a.Z.isPoint(e[0]))s=e[0],n=e[1];else{if(!a.Z.isPoint(e[1]))throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [glider], [point,line|curve|circle|conic]`);n=e[0],s=e[1]}}if(n.elementClass===x.Z.OBJECT_CLASS_LINE?(p=t.create("line",[n.point1,n.point2],o)).glider=s:n.elementClass===x.Z.OBJECT_CLASS_CURVE&&n.type!==x.Z.OBJECT_TYPE_CONIC?a.Z.evaluate(n.visProp.curvetype)!=="plot"?(p=t.create("line",[function(){var d=n.X,Z=n.Y;return-s.X()*c.Z.D(Z)(s.position)+s.Y()*c.Z.D(d)(s.position)},function(){return c.Z.D(n.Y)(s.position)},function(){return-c.Z.D(n.X)(s.position)}],o),s.addChild(p),p.glider=s):(p=t.create("line",[function(){var d,Z,C,P,S,w,D,k,I,U,J=Math.floor(s.position);if(n.bezierDegree===1)J===n.numberPoints-1&&J--;else{if(n.bezierDegree!==3)return 0;J=3*Math.floor(s.position*(n.numberPoints-1)/3),C=(s.position*(n.numberPoints-1)-J)/3,J>=n.numberPoints-1&&(J=n.numberPoints-4,C=1)}return J<0?1:(n.bezierDegree===1?(d=n.points[J].usrCoords,Z=n.points[J+1].usrCoords):(P=n.points[J].usrCoords,S=n.points[J+1].usrCoords,w=n.points[J+2].usrCoords,D=n.points[J+3].usrCoords,k=(1-C)*(1-C)*(S[1]-P[1])+2*(1-C)*C*(w[1]-S[1])+C*C*(D[1]-w[1]),I=(1-C)*(1-C)*(S[2]-P[2])+2*(1-C)*C*(w[2]-S[2])+C*C*(D[2]-w[2]),k/=U=Math.sqrt(k*k+I*I),I/=U,Z=[1,(d=s.coords.usrCoords)[1]+k,d[2]+I]),d[2]*Z[1]-d[1]*Z[2])},function(){var d,Z,C,P,S,w,D,k,I,U,J=Math.floor(s.position);if(n.bezierDegree===1)J===n.numberPoints-1&&J--;else{if(n.bezierDegree!==3)return 0;J=3*Math.floor(s.position*(n.numberPoints-1)/3),C=(s.position*(n.numberPoints-1)-J)/3,J>=n.numberPoints-1&&(J=n.numberPoints-4,C=1)}return J<0?0:(n.bezierDegree===1?(d=n.points[J].usrCoords,Z=n.points[J+1].usrCoords):(P=n.points[J].usrCoords,S=n.points[J+1].usrCoords,w=n.points[J+2].usrCoords,D=n.points[J+3].usrCoords,k=(1-C)*(1-C)*(S[1]-P[1])+2*(1-C)*C*(w[1]-S[1])+C*C*(D[1]-w[1]),I=(1-C)*(1-C)*(S[2]-P[2])+2*(1-C)*C*(w[2]-S[2])+C*C*(D[2]-w[2]),k/=U=Math.sqrt(k*k+I*I),I/=U,Z=[1,(d=s.coords.usrCoords)[1]+k,d[2]+I]),Z[2]-d[2])},function(){var d,Z,C,P,S,w,D,k,I,U,J=Math.floor(s.position);if(n.bezierDegree===1)J===n.numberPoints-1&&J--;else{if(n.bezierDegree!==3)return 0;J=3*Math.floor(s.position*(n.numberPoints-1)/3),C=(s.position*(n.numberPoints-1)-J)/3,J>=n.numberPoints-1&&(J=n.numberPoints-4,C=1)}return J<0?0:(n.bezierDegree===1?(d=n.points[J].usrCoords,Z=n.points[J+1].usrCoords):(P=n.points[J].usrCoords,S=n.points[J+1].usrCoords,w=n.points[J+2].usrCoords,D=n.points[J+3].usrCoords,k=(1-C)*(1-C)*(S[1]-P[1])+2*(1-C)*C*(w[1]-S[1])+C*C*(D[1]-w[1]),I=(1-C)*(1-C)*(S[2]-P[2])+2*(1-C)*C*(w[2]-S[2])+C*C*(D[2]-w[2]),k/=U=Math.sqrt(k*k+I*I),I/=U,Z=[1,(d=s.coords.usrCoords)[1]+k,d[2]+I]),d[1]-Z[1])}],o),s.addChild(p),p.glider=s):n.type===x.Z.OBJECT_TYPE_TURTLE?(p=t.create("line",[function(){var d=Math.floor(s.position);for(h=0;h<n.objects.length;h++)if((l=n.objects[h]).type===x.Z.OBJECT_TYPE_CURVE){if(d<l.numberPoints)break;d-=l.numberPoints}return d===l.numberPoints-1&&d--,d<0?1:l.Y(d)*l.X(d+1)-l.X(d)*l.Y(d+1)},function(){var d=Math.floor(s.position);for(h=0;h<n.objects.length;h++)if((l=n.objects[h]).type===x.Z.OBJECT_TYPE_CURVE){if(d<l.numberPoints)break;d-=l.numberPoints}return d===l.numberPoints-1&&d--,d<0?0:l.Y(d+1)-l.Y(d)},function(){var d=Math.floor(s.position);for(h=0;h<n.objects.length;h++)if((l=n.objects[h]).type===x.Z.OBJECT_TYPE_CURVE){if(d<l.numberPoints)break;d-=l.numberPoints}return d===l.numberPoints-1&&d--,d<0?0:l.X(d)-l.X(d+1)}],o),s.addChild(p),p.glider=s):n.elementClass!==x.Z.OBJECT_CLASS_CIRCLE&&n.type!==x.Z.OBJECT_TYPE_CONIC||(p=t.create("line",[function(){return B.Z.matVecMult(n.quadraticform,s.coords.usrCoords)[0]},function(){return B.Z.matVecMult(n.quadraticform,s.coords.usrCoords)[1]},function(){return B.Z.matVecMult(n.quadraticform,s.coords.usrCoords)[2]}],o),s.addChild(p),p.glider=s),!a.Z.exists(p))throw new Error("JSXGraph: Couldn't create tangent with the given parents.");return p.elType="tangent",p.type=x.Z.OBJECT_TYPE_TANGENT,p.setParents(e),p},u.Z.createRadicalAxis=function(t,e,o){var s,n,h;if(e.length!==2||e[0].elementClass!==x.Z.OBJECT_CLASS_CIRCLE||e[1].elementClass!==x.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent type: [circle,circle]`);return n=t.select(e[0]),h=t.select(e[1]),(s=t.create("line",[function(){var l=n.stdform,p=h.stdform;return B.Z.matVecMult(B.Z.transpose([l.slice(0,3),p.slice(0,3)]),[p[3],-l[3]])}],o)).elType="radicalaxis",s.setParents([n.id,h.id]),n.addChild(s),h.addChild(s),s},u.Z.createPolarLine=function(t,e,o){var s,n,h,l,p,d,Z;if(e.length>1&&(l=e[0].type===x.Z.OBJECT_TYPE_CONIC||e[0].elementClass===x.Z.OBJECT_CLASS_CIRCLE,p=e[1].type===x.Z.OBJECT_TYPE_CONIC||e[1].elementClass===x.Z.OBJECT_CLASS_CIRCLE,d=a.Z.isPoint(e[0]),Z=a.Z.isPoint(e[1])),e.length!==2||!(l&&Z||d&&p))throw new Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent type: [conic|circle,point], [point,conic|circle]`);return Z?(n=t.select(e[0]),h=t.select(e[1])):(n=t.select(e[1]),h=t.select(e[0])),(s=t.create("tangent",[n,h],o)).elType="polarline",s},u.Z.registerElement("tangent",u.Z.createTangent),u.Z.registerElement("polar",u.Z.createTangent),u.Z.registerElement("radicalaxis",u.Z.createRadicalAxis),u.Z.registerElement("polarline",u.Z.createPolarLine),u.Z.Line,u.Z.Group=function(t,e,o,s,n){var h,l,p,d;for(this.board=t,this.objects={},h=this.board.numObjects,this.board.numObjects+=1,e!==""&&a.Z.exists(e)?this.id=e:this.id=this.board.id+"Group"+h,this.board.groups[this.id]=this,this.type=x.Z.OBJECT_TYPE_POINT,this.elementClass=x.Z.OBJECT_CLASS_POINT,o!==""&&a.Z.exists(o)?this.name=o:this.name="group_"+this.board.generateName(this),delete this.type,this.coords={},this.needsRegularUpdate=n.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],l=a.Z.isArray(s)?s:Array.prototype.slice.call(arguments,3),p=0;p<l.length;p++)d=this.board.select(l[p]),!a.Z.evaluate(d.visProp.fixed)&&a.Z.exists(d.coords)&&this.addPoint(d);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},u.Z.extend(u.Z.Group.prototype,{ungroup:function(){var t,e,o;for(t in this.objects)this.objects.hasOwnProperty(t)&&(e=this.objects[t].point,a.Z.isArray(e.groups)&&(o=a.Z.indexOf(e.groups,this.id))>=0&&delete e.groups[o]);return this.objects={},this},addParents:function(t){var e,o,s;for(o=(s=a.Z.isArray(t)?t:arguments).length,e=0;e<o;++e)a.Z.isId(this.board,s[e])?this.parents.push(s[e]):a.Z.exists(s[e].id)&&this.parents.push(s[e].id);this.parents=a.Z.uniqueArray(this.parents)},setParents:function(t){return this.parents=[],this.addParents(t),this},getParents:function(){return a.Z.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(t){var e;t!==""&&a.Z.exists(this.objects[t])&&(e=this.objects[t].point,this.coords[e.id]={usrCoords:e.coords.usrCoords.slice(0)})},update:function(){var t,e,o,s,n,h,l,p,d,Z,C=null;if(!this.needsUpdate)return this;if((t=this._update_find_drag_type()).action==="nothing")return this._updateCoordsCache(t.id),this;if(C=this.objects[t.id].point,t.action==="translation")d=[C.coords.usrCoords[1]-this.coords[t.id].usrCoords[1],C.coords.usrCoords[2]-this.coords[t.id].usrCoords[2]];else if(t.action==="rotation"||t.action==="scaling"){if(o=t.action==="rotation"?"rotationCenter":"scaleCenter",a.Z.isPoint(this[o]))Z=this[o].coords.usrCoords.slice(1);else if(this[o]==="centroid")Z=this._update_centroid_center();else if(a.Z.isArray(this[o]))Z=this[o];else{if(!a.Z.isFunction(this[o]))return this;Z=this[o]()}if(t.action==="rotation")p=g.Z.rad(this.coords[t.id].usrCoords.slice(1),Z,this.objects[t.id].point),(d=this.board.create("transform",[p,Z[0],Z[1]],{type:"rotate"})).update();else{if(t.action!=="scaling")return this;if(n=g.Z.distance(this.coords[t.id].usrCoords.slice(1),Z),Math.abs(n)<B.Z.eps)return this;n=g.Z.distance(C.coords.usrCoords.slice(1),Z)/n,h=this.scaleDirections[t.id].indexOf("x")>=0?n:1,l=this.scaleDirections[t.id].indexOf("y")>=0?n:1,(d=this.board.create("transform",[1,0,0,Z[0]*(1-h),h,0,Z[1]*(1-l),0,l],{type:"generic"})).update()}}for(e in this._update_apply_transformation(t,d),this.needsUpdate=!1,this.objects)if(this.objects.hasOwnProperty(e))for(s in this.objects[e].descendants)this.objects[e].descendants.hasOwnProperty(s)&&(this.objects[e].descendants.needsUpdate=this.objects[e].descendants.needsRegularUpdate||this.board.needsFullUpdate);for(e in this.board.updateElements(t),this.objects)this.objects.hasOwnProperty(e)&&this._updateCoordsCache(e);return this},_update_find_drag_type:function(){var t,e,o,s="nothing",n=[];for(t in this.objects)this.objects.hasOwnProperty(t)&&(e=this.objects[t].point).coords.distance(x.Z.COORDS_BY_USER,this.coords[t])>B.Z.eps&&n.push(e.id);return n.length===0?{action:s,id:"",changed:n}:(o=n[0],e=this.objects[o].point,n.length>1?s="translation":a.Z.isInArray(this.rotationPoints,e)&&a.Z.exists(this.rotationCenter)?s="rotation":a.Z.isInArray(this.scalePoints,e)&&a.Z.exists(this.scaleCenter)?s="scaling":a.Z.isInArray(this.translationPoints,e)&&(s="translation"),{action:s,id:o,changed:n})},_update_centroid_center:function(){var t,e,o;for(o in t=[0,0],e=0,this.coords)this.coords.hasOwnProperty(o)&&(t[0]+=this.coords[o].usrCoords[1],t[1]+=this.coords[o].usrCoords[2],++e);return e>0&&(t[0]/=e,t[1]/=e),t},_update_apply_transformation:function(t,e){var o,s;for(o in this.objects)this.objects.hasOwnProperty(o)&&(a.Z.exists(this.board.objects[o])?(s=this.objects[o].point).id!==t.id?t.action==="translation"?a.Z.isInArray(t.changed,s.id)||s.coords.setCoordinates(x.Z.COORDS_BY_USER,[this.coords[o].usrCoords[1]+e[0],this.coords[o].usrCoords[2]+e[1]]):t.action!=="rotation"&&t.action!=="scaling"||e.applyOnce([s]):t.action!=="rotation"&&t.action!=="scaling"||s.coords.setCoordinates(x.Z.COORDS_BY_USER,B.Z.matVecMult(e.matrix,this.coords[s.id].usrCoords)):delete this.objects[o])},addPoint:function(t){return this.objects[t.id]={point:this.board.select(t)},this._updateCoordsCache(t.id),this.translationPoints.push(t),t.groups.push(this.id),t.groups=a.Z.uniqueArray(t.groups),this},addPoints:function(t){var e;for(e=0;e<t.length;e++)this.addPoint(t[e]);return this},addGroup:function(t){var e;for(e in t.objects)t.objects.hasOwnProperty(e)&&this.addPoint(t.objects[e].point);return this},removePoint:function(t){return delete this.objects[t.id],this},setRotationCenter:function(t){return this.rotationCenter=t,this},setRotationPoints:function(t){return this._setActionPoints("rotation",t)},addRotationPoint:function(t){return this._addActionPoint("rotation",t)},removeRotationPoint:function(t){return this._removeActionPoint("rotation",t)},setTranslationPoints:function(t){return this._setActionPoints("translation",t)},addTranslationPoint:function(t){return this._addActionPoint("translation",t)},removeTranslationPoint:function(t){return this._removeActionPoint("translation",t)},setScaleCenter:function(t){return this.scaleCenter=t,this},setScalePoints:function(t,e){var o,s,n;for(n=(o=a.Z.isArray(t)?t:arguments).length,s=0;s<n;++s)this.scaleDirections[this.board.select(o[s]).id]=e||"xy";return this._setActionPoints("scale",t)},addScalePoint:function(t,e){return this._addActionPoint("scale",t),this.scaleDirections[this.board.select(t).id]=e||"xy",this},removeScalePoint:function(t){return this._removeActionPoint("scale",t)},_setActionPoints:function(t,e){var o,s,n;for(n=(o=a.Z.isArray(e)?e:arguments).length,this[t+"Points"]=[],s=0;s<n;++s)this._addActionPoint(t,o[s]);return this},_addActionPoint:function(t,e){return this[t+"Points"].push(this.board.select(e)),this},_removeActionPoint:function(t,e){var o=this[t+"Points"].indexOf(this.board.select(e));return o>-1&&this[t+"Points"].splice(o,1),this},setProperty:function(){u.Z.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var t;for(t in this.objects)this.objects.hasOwnProperty(t)&&this.objects[t].point.setAttribute.apply(this.objects[t].point,arguments);return this}}),u.Z.createGroup=function(t,e,o){var s=a.Z.copyAttributes(o,t.options,"group"),n=new u.Z.Group(t,s.id,s.name,e,s);return n.elType="group",n.setParents(e),n},u.Z.registerElement("group",u.Z.createGroup),u.Z.Group,u.Z.Circle=function(t,e,o,s,n){this.constructor(t,n,x.Z.OBJECT_TYPE_CIRCLE,x.Z.OBJECT_CLASS_CIRCLE),this.method=e,this.midpoint=this.board.select(o),this.center=this.board.select(o),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],e==="twoPoints"?(this.point2=t.select(s),this.radius=this.Radius()):e==="pointRadius"?(this.gxtterm=s,this.updateRadius=a.Z.createFunction(s,this.board,null,!0),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])):e==="pointLine"?(this.line=t.select(s),this.radius=this.line.point1.coords.distance(x.Z.COORDS_BY_USER,this.line.point2.coords)):e==="pointCircle"&&(this.circle=t.select(s),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),a.Z.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),e==="pointRadius"?this.notifyParents(s):e==="pointLine"?this.line.addChild(this):e==="pointCircle"?this.circle.addChild(this):e==="twoPoints"&&(a.Z.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=a.Z.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",radius:"Radius",center:"center",line:"line",point2:"point2"})},u.Z.Circle.prototype=new Gt.Z,u.Z.extend(u.Z.Circle.prototype,{hasPoint:function(t,e){var o,s,n,h,l,p=this.center.coords.usrCoords,d=new b.Z(x.Z.COORDS_BY_SCREEN,[t,e],this.board),Z=this.Radius();return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(s=this.board._inputDevice,o=a.Z.evaluate(this.visProp.precision[s])):o=this.board.options.precision.hasPoint,n=p[1]-d.usrCoords[1],h=p[2]-d.usrCoords[2],l=Math.sqrt(n*n+h*h),o+=.5*a.Z.evaluate(this.visProp.strokewidth),o/=Math.sqrt(this.board.unitX*this.board.unitY),a.Z.evaluate(this.visProp.hasinnerpoints)?l<Z+o:Math.abs(l-Z)<o},generatePolynomial:function(t){var e=this.center.symbolic.x,o=this.center.symbolic.y,s=t.symbolic.x,n=t.symbolic.y,h=this.generateRadiusSquared();return h===""?[]:["(("+s+")-("+e+"))^2 + (("+n+")-("+o+"))^2 - ("+h+")"]},generateRadiusSquared:function(){var t,e,o,s,n="";return this.method==="twoPoints"?(t=this.center.symbolic.x,e=this.center.symbolic.y,n="(("+(o=this.point2.symbolic.x)+")-("+t+"))^2 + (("+(s=this.point2.symbolic.y)+")-("+e+"))^2"):this.method==="pointRadius"?a.Z.isNumber(this.radius)&&(n=(this.radius*this.radius).toString()):this.method==="pointLine"?(o=this.line.point1.symbolic.x,s=this.line.point1.symbolic.y,n="(("+o+")-("+this.line.point2.symbolic.x+"))^2 + (("+s+")-("+this.line.point2.symbolic.y+"))^2"):this.method==="pointCircle"&&(n=this.circle.Radius()),n},update:function(){var t,e,o,s,n,h;if(this.needsUpdate)for(a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this.method==="pointLine"?this.radius=this.line.point1.coords.distance(x.Z.COORDS_BY_USER,this.line.point2.coords):this.method==="pointCircle"?this.radius=this.circle.Radius():this.method==="pointRadius"&&(this.radius=this.updateRadius()),this.updateStdform(),this.updateQuadraticform(),o=this.center.coords.usrCoords[0],t=this.center.coords.usrCoords[1]/o,e=this.center.coords.usrCoords[2]/o,o/=o,s=this.Radius(),n=.551915024494,this.numberPoints=13,this.dataX=[t+s,t+s,t+s*n,t,t-s*n,t-s,t-s,t-s,t-s*n,t,t+s*n,t+s,t+s],this.dataY=[e,e+s*n,e+s,e+s,e+s,e+s*n,e,e-s*n,e-s,e-s,e-s,e-s*n,e],this.bezierDegree=3,h=0;h<this.numberPoints;h++)this.points[h]=new b.Z(x.Z.COORDS_BY_USER,[this.dataX[h],this.dataY[h]],this.board);return this},updateQuadraticform:function(){var t=this.center,e=t.X(),o=t.Y(),s=this.Radius();this.quadraticform=[[e*e+o*o-s*s,-e,-o],[-e,1,0],[-o,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=a.Z.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},notifyParents:function(t){a.Z.isString(t)&&ht.Z.findDependencies(this,t,this.board)},setRadius:function(t){return this.updateRadius=a.Z.createFunction(t,this.board,null,!0),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(t){return a.Z.exists(t)?(this.setRadius(t),this.Radius()):this.method==="twoPoints"?a.Z.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||a.Z.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):this.method==="pointLine"||this.method==="pointCircle"?this.radius:this.method==="pointRadius"?this.updateRadius():NaN},getRadius:function(){return u.Z.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var t,e,o=this.Radius(),s=this.center.coords.usrCoords,n=.7071067811865;switch(a.Z.evaluate(this.visProp.label.position)){case"lft":t=s[1]-o,e=s[2];break;case"llft":t=s[1]-n*o,e=s[2]-n*o;break;case"rt":t=s[1]+o,e=s[2];break;case"lrt":t=s[1]+n*o,e=s[2]-n*o;break;case"urt":t=s[1]+n*o,e=s[2]+n*o;break;case"top":t=s[1],e=s[2]+o;break;case"bot":t=s[1],e=s[2]-o;break;default:t=s[1]-n*o,e=s[2]+n*o}return new b.Z(x.Z.COORDS_BY_USER,[t,e],this.board)},cloneToBackground:function(){var t,e=this.Radius(),o={id:this.id+"T"+this.numTraces,elementClass:x.Z.OBJECT_CLASS_CIRCLE,center:{coords:this.center.coords},Radius:function(){return e},getRadius:function(){return e},board:this.board,visProp:a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return o.visProp.layer=this.board.options.layer.trace,this.numTraces++,a.Z.clearVisPropOld(o),o.visPropCalc={visible:a.Z.evaluate(o.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(o),this.board.renderer.enhancedRendering=t,this.traces[o.id]=o.rendNode,this},addTransform:function(t){var e,o=a.Z.isArray(t)?t:[t],s=o.length;for(e=0;e<s;e++)this.center.transformations.push(o[e]),this.method==="twoPoints"&&this.point2.transformations.push(o[e]);return this},snapToGrid:function(){var t=a.Z.evaluate(this.visProp.snaptogrid);return this.center.handleSnapToGrid(t,!0),this.method==="twoPoints"&&this.point2.handleSnapToGrid(t,!0),this},snapToPoints:function(){var t=a.Z.evaluate(this.visProp.snaptopoints);return this.center.handleSnapToPoints(t),this.method==="twoPoints"&&this.point2.handleSnapToPoints(t),this},X:function(t){return this.Radius()*Math.cos(2*t*Math.PI)+this.center.coords.usrCoords[1]},Y:function(t){return this.Radius()*Math.sin(2*t*Math.PI)+this.center.coords.usrCoords[2]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var t=this.Radius();return t*t*Math.PI},bounds:function(){var t=this.center.coords.usrCoords,e=this.Radius();return[t[1]-e,t[2]+e,t[1]+e,t[2]-e]},getParents:function(){return this.parents.length===1?this.parents.concat(this.radius):this.parents}}),u.Z.createCircle=function(t,e,o){var s,n,h,l,p,d=["center","point2"];if(n=[],p=t.select(e[0]),a.Z.isObject(p)&&p.elementClass===x.Z.OBJECT_CLASS_CIRCLE&&a.Z.isTransformationOrArray(e[1]))return l=a.Z.copyAttributes(o,t.options,"circle"),(s=u.Z.createEllipse(t,[p.center,p.center,function(){return 2*p.Radius()}],l)).addTransform(e[1]),s;for(h=0;h<e.length;h++)if(a.Z.isPointType(t,e[h])){if((n=n.concat(a.Z.providePoints(t,[e[h]],o,"circle",[d[h]])))[n.length-1]===!1)throw new Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else n.push(e[h]);if(l=a.Z.copyAttributes(o,t.options,"circle"),n.length===2&&a.Z.isPoint(n[0])&&a.Z.isPoint(n[1]))s=new u.Z.Circle(t,"twoPoints",n[0],n[1],l);else if((a.Z.isNumber(n[0])||a.Z.isFunction(n[0])||a.Z.isString(n[0]))&&a.Z.isPoint(n[1]))s=new u.Z.Circle(t,"pointRadius",n[1],n[0],l);else if((a.Z.isNumber(n[1])||a.Z.isFunction(n[1])||a.Z.isString(n[1]))&&a.Z.isPoint(n[0]))s=new u.Z.Circle(t,"pointRadius",n[0],n[1],l);else if(n[0].elementClass===x.Z.OBJECT_CLASS_CIRCLE&&a.Z.isPoint(n[1]))s=new u.Z.Circle(t,"pointCircle",n[1],n[0],l);else if(n[1].elementClass===x.Z.OBJECT_CLASS_CIRCLE&&a.Z.isPoint(n[0]))s=new u.Z.Circle(t,"pointCircle",n[0],n[1],l);else if(n[0].elementClass===x.Z.OBJECT_CLASS_LINE&&a.Z.isPoint(n[1]))s=new u.Z.Circle(t,"pointLine",n[1],n[0],l);else if(n[1].elementClass===x.Z.OBJECT_CLASS_LINE&&a.Z.isPoint(n[0]))s=new u.Z.Circle(t,"pointLine",n[0],n[1],l);else{if(!(e.length===3&&a.Z.isPoint(n[0])&&a.Z.isPoint(n[1])&&a.Z.isPoint(n[2])))throw new Error("JSXGraph: Can't create circle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]`);if(!u.Z.elements.circumcircle)throw new Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");s=u.Z.elements.circumcircle(t,n,l)}for(s.isDraggable=!0,s.setParents(n),s.elType="circle",h=0;h<n.length;h++)a.Z.isPoint(n[h])&&s.inherits.push(n[h]);return s},u.Z.registerElement("circle",u.Z.createCircle);const pe=u.Z.Circle;u.Z.createEllipse=function(t,e,o){var s,n,h,l,p,d,Z,C=[],P=a.Z.copyAttributes(o,t.options,"conic","foci"),S=a.Z.copyAttributes(o,t.options,"conic","center"),w=a.Z.copyAttributes(o,t.options,"conic");for(d=0;d<2;d++)if(e[d].length>1)C[d]=t.create("point",e[d],P);else if(a.Z.isPoint(e[d]))C[d]=t.select(e[d]);else if(a.Z.isFunction(e[d])&&a.Z.isPoint(e[d]()))C[d]=e[d]();else{if(!a.Z.isString(e[d]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);C[d]=t.select(e[d])}if(a.Z.isNumber(e[2]))p=a.Z.createFunction(e[2],t);else if(a.Z.isFunction(e[2])&&a.Z.isNumber(e[2]()))p=e[2];else{if(a.Z.isPoint(e[2]))l=t.select(e[2]);else if(e[2].length>1)l=t.create("point",e[2],P);else if(a.Z.isFunction(e[2])&&a.Z.isPoint(e[2]()))l=e[2]();else{if(!a.Z.isString(e[2]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);l=t.select(e[2])}p=function(){return l.Dist(C[0])+l.Dist(C[1])}}for(a.Z.exists(e[4])||(e[4]=2*Math.PI),a.Z.exists(e[3])||(e[3]=0),h=t.create("point",[function(){return .5*(C[0].X()+C[1].X())},function(){return .5*(C[0].Y()+C[1].Y())}],S),(n=t.create("curve",[function(D){return 0},function(D){return 0},e[3],e[4]],w)).majorAxis=p,Z=n.hasPoint,s=function(D,k){var I,U,J,z,V,W,$,nt,et;k||(U=(I=p())*I,J=C[0].X(),z=C[0].Y(),$=J-(V=C[1].X()),nt=z-(W=C[1].Y()),et=(U-J*J-z*z+V*V+W*W)/(2*I),n.quadraticform=[[et*et-V*V-W*W,et*$/I+V,et*nt/I+W],[et*$/I+V,$*$/U-1,$*nt/U],[et*nt/I+W,$*nt/U,nt*nt/U-1]])},n.X=function(D,k){var I=p(),U=C[1].Dist(C[0]),J=.5*(U*U-I*I)/(U*Math.cos(D)-I),z=Math.atan2(C[1].Y()-C[0].Y(),C[1].X()-C[0].X());return k||s(0,k),C[0].X()+Math.cos(z+D)*J},n.Y=function(D,k){var I=p(),U=C[1].Dist(C[0]),J=.5*(U*U-I*I)/(U*Math.cos(D)-I),z=Math.atan2(C[1].Y()-C[0].Y(),C[1].X()-C[0].X());return C[0].Y()+Math.sin(z+D)*J},n.midpoint=n.center=h,n.type=x.Z.OBJECT_TYPE_CONIC,n.subs={center:n.center},n.inherits.push(n.center,C[0],C[1]),a.Z.isPoint(l)&&n.inherits.push(l),n.hasPoint=function(D,k){var I,U,J,z;return a.Z.evaluate(this.visProp.hasinnerpoints)?(I=C[0].coords,U=C[1].coords,J=this.majorAxis(),(z=new b.Z(x.Z.COORDS_BY_SCREEN,[D,k],this.board)).distance(x.Z.COORDS_BY_USER,I)+z.distance(x.Z.COORDS_BY_USER,U)<=J):Z.apply(this,arguments)},h.addChild(n),d=0;d<2;d++)a.Z.isPoint(C[d])&&C[d].addChild(n);return a.Z.isPoint(l)&&l.addChild(n),n.setParents(e),n},u.Z.createHyperbola=function(t,e,o){var s,n,h,l,p,d,Z=[],C=a.Z.copyAttributes(o,t.options,"conic","foci"),P=a.Z.copyAttributes(o,t.options,"conic","center"),S=a.Z.copyAttributes(o,t.options,"conic");for(d=0;d<2;d++)if(e[d].length>1)Z[d]=t.create("point",e[d],C);else if(a.Z.isPoint(e[d]))Z[d]=t.select(e[d]);else if(a.Z.isFunction(e[d])&&a.Z.isPoint(e[d]()))Z[d]=e[d]();else{if(!a.Z.isString(e[d]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);Z[d]=t.select(e[d])}if(a.Z.isNumber(e[2]))p=a.Z.createFunction(e[2],t);else if(a.Z.isFunction(e[2])&&a.Z.isNumber(e[2]()))p=e[2];else{if(a.Z.isPoint(e[2]))l=t.select(e[2]);else if(e[2].length>1)l=t.create("point",e[2],C);else if(a.Z.isFunction(e[2])&&a.Z.isPoint(e[2]()))l=e[2]();else{if(!a.Z.isString(e[2]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point,point], [point,point,number|function]`);l=t.select(e[2])}p=function(){return l.Dist(Z[0])-l.Dist(Z[1])}}for(a.Z.exists(e[4])||(e[4]=1.0001*Math.PI),a.Z.exists(e[3])||(e[3]=-1.0001*Math.PI),h=t.create("point",[function(){return .5*(Z[0].X()+Z[1].X())},function(){return .5*(Z[0].Y()+Z[1].Y())}],P),(n=t.create("curve",[function(w){return 0},function(w){return 0},e[3],e[4]],S)).majorAxis=p,s=function(w,D){var k,I,U,J,z,V,W,$,nt;D||(I=(k=p())*k,U=Z[0].X(),J=Z[0].Y(),W=U-(z=Z[1].X()),$=J-(V=Z[1].Y()),nt=(I-U*U-J*J+z*z+V*V)/(2*k),n.quadraticform=[[nt*nt-z*z-V*V,nt*W/k+z,nt*$/k+V],[nt*W/k+z,W*W/I-1,W*$/I],[nt*$/k+V,W*$/I,$*$/I-1]])},n.X=function(w,D){var k=p(),I=Z[1].Dist(Z[0]),U=.5*(I*I-k*k)/(I*Math.cos(w)+k),J=Math.atan2(Z[1].Y()-Z[0].Y(),Z[1].X()-Z[0].X());return D||s(0,D),Z[0].X()+Math.cos(J+w)*U},n.Y=function(w,D){var k=p(),I=Z[1].Dist(Z[0]),U=.5*(I*I-k*k)/(I*Math.cos(w)+k),J=Math.atan2(Z[1].Y()-Z[0].Y(),Z[1].X()-Z[0].X());return Z[0].Y()+Math.sin(J+w)*U},n.midpoint=n.center=h,n.subs={center:n.center},n.inherits.push(n.center,Z[0],Z[1]),a.Z.isPoint(l)&&n.inherits.push(l),n.type=x.Z.OBJECT_TYPE_CONIC,h.addChild(n),d=0;d<2;d++)a.Z.isPoint(Z[d])&&Z[d].addChild(n);return a.Z.isPoint(l)&&l.addChild(n),n.setParents(e),n},u.Z.createParabola=function(t,e,o){var s,n,h,l,p=e[0],d=e[1],Z=a.Z.copyAttributes(o,t.options,"conic","foci"),C=a.Z.copyAttributes(o,t.options,"conic","center"),P=a.Z.copyAttributes(o,t.options,"conic");if(e[0].length>1)p=t.create("point",e[0],Z);else if(a.Z.isPoint(e[0]))p=t.select(e[0]);else if(a.Z.isFunction(e[0])&&a.Z.isPoint(e[0]()))p=e[0]();else{if(!a.Z.isString(e[0]))throw new Error("JSXGraph: Can't create Parabola with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,line]`);p=t.select(e[0])}return a.Z.isArray(d)&&d.length===2&&(l=a.Z.copyAttributes(o,t.options,"conic","line"),d=t.create("line",d,l)),a.Z.exists(e[3])||(e[3]=2*Math.PI),a.Z.exists(e[2])||(e[2]=0),h=t.create("point",[function(){return g.Z.projectPointToLine(p,d,t).usrCoords}],C),(n=t.create("curve",[function(S){return 0},function(S){return 0},e[2],e[3]],P)).midpoint=n.center=h,n.subs={center:n.center},n.inherits.push(n.center),s=function(S,w){var D,k,I,U,J,z;w||(D=d.stdform[1],k=d.stdform[2],I=d.stdform[0],U=D*D+k*k,J=p.X(),z=p.Y(),n.quadraticform=[[I*I-U*(J*J+z*z),I*D+U*J,I*k+U*z],[I*D+U*J,-k*k,D*k],[I*k+U*z,D*k,-D*D]])},n.X=function(S,w){var D,k=d.getAngle(),I=g.Z.distPointLine(p.coords.usrCoords,d.stdform),U=d.point1.coords.usrCoords,J=d.point2.coords.usrCoords,z=p.coords.usrCoords;return U[0]===0?U=[1,J[1]+d.stdform[2],J[2]-d.stdform[1]]:J[0]===0&&(J=[1,U[1]+d.stdform[2],U[2]-d.stdform[1]]),D=((J[1]-U[1])*(z[2]-U[2])-(J[2]-U[2])*(z[1]-U[1])>=0?1:-1)*I/(1-Math.sin(S)),w||s(0,w),p.X()+Math.cos(S+k)*D},n.Y=function(S,w){var D,k=d.getAngle(),I=g.Z.distPointLine(p.coords.usrCoords,d.stdform),U=d.point1.coords.usrCoords,J=d.point2.coords.usrCoords,z=p.coords.usrCoords;return U[0]===0?U=[1,J[1]+d.stdform[2],J[2]-d.stdform[1]]:J[0]===0&&(J=[1,U[1]+d.stdform[2],U[2]-d.stdform[1]]),D=((J[1]-U[1])*(z[2]-U[2])-(J[2]-U[2])*(z[1]-U[1])>=0?1:-1)*I/(1-Math.sin(S)),p.Y()+Math.sin(S+k)*D},n.type=x.Z.OBJECT_TYPE_CONIC,h.addChild(n),a.Z.isPoint(p)&&(p.addChild(n),n.inherits.push(p)),d.addChild(n),n.setParents(e),n},u.Z.createConic=function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U=[[1,0,0],[0,1,0],[0,0,1]],J=[[1,0,0],[0,1,0],[0,0,1]],z=[],V=[],W=a.Z.copyAttributes(o,t.options,"conic","point"),$=a.Z.copyAttributes(o,t.options,"conic","center"),nt=a.Z.copyAttributes(o,t.options,"conic");if(e.length===5)I=!0;else{if(e.length!==6)throw new Error("JSXGraph: Can't create generic Conic with "+e.length+" parameters.");I=!1}if(I)for(D=0;D<5;D++)if(e[D].length>1)z[D]=t.create("point",e[D],W);else if(a.Z.isPoint(e[D]))z[D]=t.select(e[D]);else if(a.Z.isFunction(e[D])&&a.Z.isPoint(e[D]()))z[D]=e[D]();else{if(!a.Z.isString(e[D]))throw new Error("JSXGraph: Can't create Conic section with parent types '"+typeof e[D]+`'.
Possible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]`);z[D]=t.select(e[D])}else(k=[[0,0,0],[0,0,0],[0,0,0]])[0][0]=a.Z.isFunction(e[2])?function(){return e[2]()}:function(){return e[2]},k[0][1]=a.Z.isFunction(e[4])?function(){return e[4]()}:function(){return e[4]},k[0][2]=a.Z.isFunction(e[5])?function(){return e[5]()}:function(){return e[5]},k[1][1]=a.Z.isFunction(e[0])?function(){return e[0]()}:function(){return e[0]},k[1][2]=a.Z.isFunction(e[3])?function(){return e[3]()}:function(){return e[3]},k[2][2]=a.Z.isFunction(e[1])?function(){return e[1]()}:function(){return e[1]};if(p=function(et){var lt,ot;for(lt=0;lt<3;lt++)for(ot=lt;ot<3;ot++)et[lt][ot]+=et[ot][lt];for(lt=0;lt<3;lt++)for(ot=0;ot<lt;ot++)et[lt][ot]=et[ot][lt];return et},l=function(et,lt){var ot,gt,vt=[[0,0,0],[0,0,0],[0,0,0]];for(ot=0;ot<3;ot++)for(gt=0;gt<3;gt++)vt[ot][gt]=et[ot]*lt[gt];return p(vt)},h=function(et,lt,ot){var gt,vt,Tt,Rt,kt,Ft=[[0,0,0],[0,0,0],[0,0,0]];for(kt=B.Z.matVecMult(lt,ot),Tt=B.Z.innerProduct(ot,kt),kt=B.Z.matVecMult(et,ot),Rt=B.Z.innerProduct(ot,kt),gt=0;gt<3;gt++)for(vt=0;vt<3;vt++)Ft[gt][vt]=Tt*et[gt][vt]-Rt*lt[gt][vt];return Ft},n=t.create("curve",[function(et){return 0},function(et){return 0},0,2*Math.PI],nt),s=function(et,lt){var ot,gt,vt,Tt;if(!lt){if(I){for(ot=0;ot<5;ot++)V[ot]=z[ot].coords.usrCoords;S=l(B.Z.crossProduct(V[0],V[1]),B.Z.crossProduct(V[2],V[3])),w=l(B.Z.crossProduct(V[0],V[2]),B.Z.crossProduct(V[1],V[3])),J=h(S,w,V[4])}else for(ot=0;ot<3;ot++)for(gt=ot;gt<3;gt++)J[ot][gt]=k[ot][gt](),gt>ot&&(J[gt][ot]=J[ot][gt]);for(n.quadraticform=J,(d=c.Z.Jacobi(J))[0][0][0]<0&&(d[0][0][0]*=-1,d[0][1][1]*=-1,d[0][2][2]*=-1),ot=0;ot<3;ot++){for(vt=0,gt=0;gt<3;gt++)vt+=d[1][gt][ot]*d[1][gt][ot];vt=Math.sqrt(vt)}U=d[1],P=Math.sqrt(Math.abs(d[0][0][0])),Z=Math.sqrt(Math.abs(d[0][1][1])),C=Math.sqrt(Math.abs(d[0][2][2]))}return d[0][1][1]<=0&&d[0][2][2]<=0?Tt=B.Z.matVecMult(U,[1/P,Math.cos(et)/Z,Math.sin(et)/C]):d[0][1][1]<=0&&d[0][2][2]>0?Tt=B.Z.matVecMult(U,[Math.cos(et)/P,1/Z,Math.sin(et)/C]):d[0][2][2]<0&&(Tt=B.Z.matVecMult(U,[Math.sin(et)/P,Math.cos(et)/Z,1/C])),a.Z.exists(Tt)?(Tt[1]/=Tt[0],Tt[2]/=Tt[0],Tt[0]=1):Tt=[1,NaN,NaN],Tt},n.X=function(et,lt){return s(et,lt)[1]},n.Y=function(et,lt){return s(et,lt)[2]},n.midpoint=t.create("point",[function(){var et=n.quadraticform;return[et[1][1]*et[2][2]-et[1][2]*et[1][2],et[1][2]*et[0][2]-et[2][2]*et[0][1],et[0][1]*et[1][2]-et[1][1]*et[0][2]]}],$),n.type=x.Z.OBJECT_TYPE_CONIC,n.center=n.midpoint,n.subs={center:n.center},n.inherits.push(n.center),n.inherits=n.inherits.concat(z),I){for(D=0;D<5;D++)a.Z.isPoint(z[D])&&z[D].addChild(n);n.setParents(e)}return n.addChild(n.center),n},u.Z.registerElement("ellipse",u.Z.createEllipse),u.Z.registerElement("hyperbola",u.Z.createHyperbola),u.Z.registerElement("parabola",u.Z.createParabola),u.Z.registerElement("conic",u.Z.createConic),u.Z.Polygon=function(t,e,o){this.constructor(t,o,x.Z.OBJECT_TYPE_POLYGON,x.Z.OBJECT_CLASS_AREA);var s,n,h,l,p,d=a.Z.copyAttributes(o,t.options,"polygon","borders");for(this.withLines=o.withlines,this.attr_line=d,this.vertices=[],s=0;s<e.length;s++)this.vertices[s]=this.board.select(e[s]),this.vertices[s]._is_new&&(delete this.vertices[s]._is_new,this.vertices[s]._is_new_pol=!0);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(h=this.vertices.length-1,l=0;l<h;l++)s=(l+1)%h,d.id=d.ids&&d.ids[s],d.name=d.names&&d.names[s],d.strokecolor=a.Z.isArray(d.colors)&&d.colors[s%d.colors.length]||d.strokecolor,d.visible=a.Z.exists(o.borders.visible)?o.borders.visible:o.visible,d.strokecolor===!1&&(d.strokecolor="none"),(n=t.create("segment",[this.vertices[s],this.vertices[s+1]],d)).dump=!1,this.borders[s]=n,n.parentPolygon=this;for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),s=0;s<this.vertices.length-1;s++)p=this.board.select(this.vertices[s]),a.Z.exists(p._is_new_pol)?(this.addChild(p),delete p._is_new_pol):p.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=u.Z.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",Length:"Perimeter",boundingBox:"boundingBox",bounds:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints"})},u.Z.Polygon.prototype=new Gt.Z,u.Z.extend(u.Z.Polygon.prototype,{pnpoly:function(t,e,o){return g.Z.pnpoly(t,e,this.vertices,o)},hasPoint:function(t,e){var o,s;if(a.Z.evaluate(this.visProp.hasinnerpoints)&&this.pnpoly(t,e))return!0;for(s=this.borders.length,o=0;o<s;o++)if(this.borders[o].hasPoint(t,e))return!0;return!1},updateRenderer:function(){var t,e;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(e=this.vertices.length,this.isReal=!0,t=0;t<e;++t)if(!this.vertices[t].isReal){this.isReal=!1;break}this.isReal||this.updateVisibility(!1)}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var t,e,o,s,n;if(this.vertices.length===0)return new b.Z(x.Z.COORDS_BY_USER,[1,0,0],this.board);for(o=t=this.vertices[0].X(),s=e=this.vertices[0].Y(),n=0;n<this.vertices.length;n++)this.vertices[n].X()<t&&(t=this.vertices[n].X()),this.vertices[n].X()>o&&(o=this.vertices[n].X()),this.vertices[n].Y()>e&&(e=this.vertices[n].Y()),this.vertices[n].Y()<s&&(s=this.vertices[n].Y());return new b.Z(x.Z.COORDS_BY_USER,[.5*(t+o),.5*(e+s)],this.board)},getLabelAnchor:u.Z.shortcut(u.Z.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var t,e={};return e.id=this.id+"T"+this.numTraces,this.numTraces++,e.vertices=this.vertices,e.visProp=a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0),e.visProp.layer=this.board.options.layer.trace,e.board=this.board,a.Z.clearVisPropOld(e),e.visPropCalc={visible:a.Z.evaluate(e.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(e),this.board.renderer.enhancedRendering=t,this.traces[e.id]=e.rendNode,this},hideElement:function(t){var e;if(u.Z.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!t)for(e=0;e<this.borders.length;e++)this.borders[e].hideElement();this.hasLabel&&a.Z.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(t){var e;if(u.Z.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!t)for(e=0;e<this.borders.length;e++)this.borders[e].showElement().updateRenderer();return a.Z.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(g.Z.signedPolygon(this.vertices,!0))},Perimeter:function(){var t,e=this.vertices.length,o=0;for(t=1;t<e;++t)o+=this.vertices[t].Dist(this.vertices[t-1]);return o},boundingBox:function(){var t,e,o=[0,0,0,0],s=this.vertices.length-1;if(s===0)return o;for(o[0]=this.vertices[0].X(),o[2]=o[0],o[1]=this.vertices[0].Y(),o[3]=o[1],t=1;t<s;++t)(e=this.vertices[t].X())<o[0]?o[0]=e:e>o[2]&&(o[2]=e),(e=this.vertices[t].Y())>o[1]?o[1]=e:e<o[3]&&(o[3]=e);return o},bounds:function(){return this.boundingBox()},remove:function(){var t;for(t=0;t<this.borders.length;t++)this.board.removeObject(this.borders[t]);Gt.Z.prototype.remove.call(this)},findPoint:function(t){var e;if(!a.Z.isPoint(t))return-1;for(e=0;e<this.vertices.length;e++)if(this.vertices[e].id===t.id)return e;return-1},addPoints:function(t){var e,o=Array.prototype.slice.call(arguments);return e=this.elType==="polygonalchain"?this.vertices.length-1:this.vertices.length-2,this.insertPoints.apply(this,[e].concat(o))},insertPoints:function(t,e){var o,s,n,h,l;if(arguments.length===0)return this;if(n=this.vertices.length-1,this.elType==="polygon"&&n--,t<-1||t>n)return this;for(s=arguments.length-1,o=1;o<s+1;o++)(l=a.Z.providePoints(this.board,[arguments[o]],{},"polygon",["vertices"])[0])._is_new&&(this.addChild(l),delete l._is_new),this.vertices.splice(t+o,0,l);if(this.withLines)for(h=t+1,this.elType==="polygon"?t<0?(this.vertices[this.vertices.length-1]=this.vertices[0],this.borders[this.borders.length-1].point2=this.vertices[this.vertices.length-1]):this.borders[t].point2=this.vertices[h]:t>=0&&(t<this.borders.length?this.borders[t].point2=this.vertices[h]:h=t),o=h;o<h+s;o++)this.borders.splice(o,0,this.board.create("segment",[this.vertices[o],this.vertices[o+1]],this.attr_line));return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},removePoints:function(t){var e,o,s,n,h=[],l=[],p=[],d=[];for(this.elType==="polygon"&&(n=this.vertices.pop()),e=0;e<arguments.length;e++)s=arguments[e],a.Z.isPoint(s)&&(s=this.findPoint(s)),a.Z.isNumber(s)&&s>-1&&s<this.vertices.length&&a.Z.indexOf(p,s)===-1&&p.push(s);if(p.length===0)return this.elType==="polygon"&&this.vertices.push(n),this;for(e=0;e<p.length;e++)this.vertices[p[e]].removeChild(this);for(p=p.sort(),h=this.vertices.slice(),l=this.borders.slice(),this.withLines&&d.push([p[p.length-1]]),e=p.length-1;e>-1;e--)h[p[e]]=-1,this.withLines&&p.length>1&&p[e]-1>p[e-1]&&(d[d.length-1][1]=p[e],d.push([p[e-1]]));for(this.withLines&&(d[d.length-1][1]=p[0]),this.vertices=[],e=0;e<h.length;e++)a.Z.isPoint(h[e])&&this.vertices.push(h[e]);if(this.elType==="polygon"&&this.vertices.length>1&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(e=0;e<d.length;e++){for(o=d[e][1]-1;o<d[e][0]+1;o++)o<0?this.elType==="polygon"&&(this.board.removeObject(this.borders[l.length-1]),l[l.length-1]=-1):o<l.length&&(this.board.removeObject(this.borders[o]),l[o]=-1);d[e][1]!==0&&d[e][0]!==h.length-1&&(l[d[e][0]-1]=this.board.create("segment",[h[d[e][1]-1],h[d[e][0]+1]],this.attr_line))}for(this.borders=[],e=0;e<l.length;e++)l[e]!==-1&&this.borders.push(l[e]);this.elType==="polygon"&&this.vertices.length>2&&(d[0][1]===this.vertices.length-1||d[d.length-1][1]===0)&&this.borders.push(this.board.create("segment",[this.vertices[this.vertices.length-2],this.vertices[0]],this.attr_line))}return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var t,e=Gt.Z.prototype.getAttributes.call(this);if(this.withLines)for(e.lines=e.lines||{},e.lines.ids=[],e.lines.colors=[],t=0;t<this.borders.length;t++)e.lines.ids.push(this.borders[t].id),e.lines.colors.push(this.borders[t].visProp.strokecolor);return e},snapToGrid:function(){var t,e;for(e=!!a.Z.evaluate(this.visProp.snaptogrid),t=0;t<this.vertices.length;t++)this.vertices[t].handleSnapToGrid(e,!0)},setPositionDirectly:function(t,e,o){var s,n,h,l=new b.Z(t,e,this.board),p=new b.Z(t,o,this.board);for(h=this.vertices.length-1,n=0;n<h;n++)if(!this.vertices[n].draggable())return this;return s=m.Z.subtract(l.usrCoords,p.usrCoords),this.board.create("transform",s.slice(1),{type:"translate"}).applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(t){var e,o,s,n,h,l,p,d=u.Z.Math.Geometry.sortVertices(this.vertices),Z=u.Z.Math.Geometry.sortVertices(t.vertices),C=d.length-1,P=Z.length-1,S=[],w=function(D,k,I){return(k[1]-D[1])*(I[2]-D[2])-(k[2]-D[2])*(I[1]-D[1])>=0};for(s=0;s<P;s++)S.push(Z[s]);for(s=0;s<C;s++)for(o=S.slice(0),S=[],h=o[(e=o.length)-1],n=0;n<e;n++)l=o[n],w(d[s],d[s+1],l)?(w(d[s],d[s+1],h)||((p=u.Z.Math.Geometry.meetSegmentSegment(h,l,d[s],d[s+1]))[0][1]/=p[0][0],p[0][2]/=p[0][0],p[0][0]=1,S.push(p[0])),S.push(l)):w(d[s],d[s+1],h)&&((p=u.Z.Math.Geometry.meetSegmentSegment(h,l,d[s],d[s+1]))[0][1]/=p[0][0],p[0][2]/=p[0][0],p[0][0]=1,S.push(p[0])),h=l;return S},intersect:function(t){return this.sutherlandHodgman(t)}}),u.Z.createPolygon=function(t,e,o){var s,n,h,l,p,d,Z=[],C=!1;if(a.Z.copyAttributes(o,t.options,"polygon"),(l=t.select(e[0]))===null&&(l=e[0]),a.Z.isObject(l)&&l.type===x.Z.OBJECT_TYPE_POLYGON&&a.Z.isTransformationOrArray(e[1]))for(C=!0,h=l.vertices.length-1,d=a.Z.copyAttributes(o,t.options,"polygon","vertices"),n=0;n<h;n++)d.withlabel&&(d.name=l.vertices[n].name===""?"":l.vertices[n].name+"'"),Z.push(t.create("point",[l.vertices[n],e[1]],d));else if((Z=a.Z.providePoints(t,e,o,"polygon",["vertices"]))===!1)throw new Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(p=a.Z.copyAttributes(o,t.options,"polygon"),(s=new u.Z.Polygon(t,Z,p)).isDraggable=!0,C)for(s.prepareUpdate().update().updateVisibility().updateRenderer(),h=l.vertices.length-1,n=0;n<h;n++)Z[n].prepareUpdate().update().updateVisibility().updateRenderer();return s},u.Z.createRegularPolygon=function(t,e,o){var s,n,h,l,p,d,Z,C=[];if(h=e[(p=e.length)-1],a.Z.isNumber(h)&&(e.length!==3||h<3))throw new Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(a.Z.isNumber(t.select(h))?(p--,d=!1):(h=p,d=!0),(C=a.Z.providePoints(t,e.slice(0,p),o,"regularpolygon",["vertices"]))===!1)throw new Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(Z=a.Z.copyAttributes(o,t.options,"regularpolygon","vertices"),n=2;n<h;n++)l=t.create("transform",[Math.PI*(2-(h-2)/h),C[n-1]],{type:"rotate"}),d?(C[n].addTransform(C[n-2],l),C[n].fullUpdate()):(a.Z.isArray(Z.ids)&&Z.ids.length>=h-2&&(Z.id=Z.ids[n-2]),C[n]=t.create("point",[C[n-2],l],Z),C[n].type=x.Z.OBJECT_TYPE_CAS,C[n].isDraggable=!0,C[n].visProp.fixed=!1);return Z=a.Z.copyAttributes(o,t.options,"regularpolygon"),(s=t.create("polygon",C,Z)).elType="regularpolygon",s},u.Z.createPolygonalChain=function(t,e,o){var s,n;return s=a.Z.copyAttributes(o,t.options,"polygonalchain"),(n=t.create("polygon",e,s)).elType="polygonalchain",n.vertices.pop(),t.removeObject(n.borders[n.borders.length-1]),n.borders.pop(),n},u.Z.registerElement("polygon",u.Z.createPolygon),u.Z.registerElement("regularpolygon",u.Z.createRegularPolygon),u.Z.registerElement("polygonalchain",u.Z.createPolygonalChain);const ge=u.Z.Polygon;u.Z.Curve=function(t,e,o){this.constructor(t,o,x.Z.OBJECT_TYPE_CURVE,x.Z.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=a.Z.evaluate(this.visProp.numberpointshigh),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,a.Z.exists(e[0])?this.varname=e[0]:this.varname="x",this.xterm=e[1],this.yterm=e[2],this.generateTerm(this.varname,this.xterm,this.yterm,e[3],e[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),a.Z.isString(this.xterm)&&this.notifyParents(this.xterm),a.Z.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=a.Z.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo"})},u.Z.Curve.prototype=new Gt.Z,u.Z.extend(u.Z.Curve.prototype,{minX:function(){return a.Z.evaluate(this.visProp.curvetype)==="polar"?0:new b.Z(x.Z.COORDS_BY_SCREEN,[.1*-this.board.canvasWidth,0],this.board,!1).usrCoords[1]},maxX:function(){return a.Z.evaluate(this.visProp.curvetype)==="polar"?2*Math.PI:new b.Z(x.Z.COORDS_BY_SCREEN,[1.1*this.board.canvasWidth,0],this.board,!1).usrCoords[1]},X:function(t){return NaN},Y:function(t){return NaN},Z:function(t){return 1},hasPoint:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U,J,z=[],V=a.Z.evaluate(this.visProp.numberpointslow),W=(this.maxX()-this.minX())/V,$=1/0;if(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(D=this.board._inputDevice,w=a.Z.evaluate(this.visProp.precision[D])):w=this.board.options.precision.hasPoint,t=(n=new b.Z(x.Z.COORDS_BY_SCREEN,[t,e],this.board,!1)).usrCoords[1],e=n.usrCoords[2],this.bezierDegree===1&&a.Z.evaluate(this.visProp.hasinnerpoints)&&g.Z.windingNumber([1,t,e],this.points,!0)!==0)return!0;if(w+=.5*a.Z.evaluate(this.visProp.strokewidth),w*=w,k=this.board.unitX*this.board.unitX,I=this.board.unitY*this.board.unitY,J=this.minX(),this.maxX(),a.Z.exists(this._visibleArea)&&(J=this._visibleArea[0],W=(this._visibleArea[1]-J)/V),(U=a.Z.evaluate(this.visProp.curvetype))==="parameter"||U==="polar")for(this.transformations.length>0&&(this.updateTransformMatrix(),l=B.Z.inverse(this.transformMat),t=(p=B.Z.matVecMult(l,[1,t,e]))[1],e=p[2]),d=0,s=J;d<V;d++){if(($=(t-(Z=this.X(s,!0)))*(t-Z)*k+(e-(C=this.Y(s,!0)))*(e-C)*I)<=w)return!0;s+=W}else if(U==="plot"||U==="functiongraph"){for((!a.Z.exists(o)||o<0)&&(o=0),a.Z.exists(this.qdt)&&a.Z.evaluate(this.visProp.useqdt)&&this.bezierDegree!==3?h=(P=(S=this.qdt.query(new b.Z(x.Z.COORDS_BY_USER,[t,e],this.board))).points).length:(P=this.points,h=this.numberPoints-1),d=o;d<h;d++)if(this.bezierDegree===3?z=g.Z.projectCoordsToBeziersegment([1,t,e],this,d):S?(P[d].prev&&(z=g.Z.projectCoordsToSegment([1,t,e],P[d].prev.usrCoords,P[d].usrCoords)),P[d].next&&P[d+1]!==P[d].next&&(z=g.Z.projectCoordsToSegment([1,t,e],P[d].usrCoords,P[d].next.usrCoords))):z=g.Z.projectCoordsToSegment([1,t,e],P[d].usrCoords,P[d+1].usrCoords),z[1]>=0&&z[1]<=1&&(t-z[0][1])*(t-z[0][1])*k+(e-z[0][2])*(e-z[0][2])*I<=w)return!0;return!1}return $<w},allocatePoints:function(){var t,e;if(e=this.numberPoints,this.points.length<this.numberPoints)for(t=this.points.length;t<e;t++)this.points[t]=new b.Z(x.Z.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(a.Z.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=f.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateDataArray:function(){},updateCurve:function(){var t,e,o,s,n,h,l=this.visProp.plotversion,p=!1;if(this.updateTransformMatrix(),this.updateDataArray(),e=this.minX(),o=this.maxX(),a.Z.exists(this.dataX))for(this.numberPoints=this.dataX.length,t=this.numberPoints,this.allocatePoints(),h=0;h<t;h++)s=h,a.Z.exists(this.dataY)?(n=h,this.points[h].setCoordinates(x.Z.COORDS_BY_USER,[this.dataX[h],this.dataY[h]],!1)):(n=this.X(s),this.points[h].setCoordinates(x.Z.COORDS_BY_USER,[this.dataX[h],this.Y(n,p)],!1)),this.points[h]._t=h,p=!0;else if(a.Z.evaluate(this.visProp.doadvancedplot)?l===1||a.Z.evaluate(this.visProp.doadvancedplotold)?f.updateParametricCurveOld(this,e,o):l===2?f.updateParametricCurve_v2(this,e,o):l===3?f.updateParametricCurve_v3(this,e,o):l===4?f.updateParametricCurve_v4(this,e,o):f.updateParametricCurve_v2(this,e,o):(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.numberPoints=a.Z.evaluate(this.visProp.numberpointshigh):this.numberPoints=a.Z.evaluate(this.visProp.numberpointslow),this.allocatePoints(),f.updateParametricCurveNaive(this,e,o,this.numberPoints)),t=this.numberPoints,a.Z.evaluate(this.visProp.useqdt)&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new O(this.board.getBoundingBox()),h=0;h<this.points.length;h++)this.qdt.insert(this.points[h]),h>0&&(this.points[h].prev=this.points[h-1]),h<t-1&&(this.points[h].next=this.points[h+1]);for(a.Z.evaluate(this.visProp.curvetype)!=="plot"&&a.Z.evaluate(this.visProp.rdpsmoothing)&&(this.points=c.Z.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),t=this.numberPoints,h=0;h<t;h++)this.updateTransform(this.points[h]);return this},updateTransformMatrix:function(){var t,e,o=this.transformations.length;for(this.transformMat=[[1,0,0],[0,1,0],[0,0,1]],e=0;e<o;e++)(t=this.transformations[e]).update(),this.transformMat=B.Z.matMatMult(t.matrix,this.transformMat);return this},updateTransform:function(t){var e;return this.transformations.length>0&&(e=B.Z.matVecMult(this.transformMat,t.usrCoords),t.setCoordinates(x.Z.COORDS_BY_USER,e,!1,!0)),t},addTransform:function(t){var e,o=a.Z.isArray(t)?t:[t],s=o.length;for(e=0;e<s;e++)this.transformations.push(o[e]);return this},interpolationFunctionFromArray:function(t){var e="data"+t,o=this;return function(s,n){var h,l,p,d,Z=o[e],C=Z.length,P=[];if(isNaN(s))return NaN;if(s<0)return a.Z.isFunction(Z[0])?Z[0]():Z[0];if(o.bezierDegree===3){if(s>=(C-1)/3)return a.Z.isFunction(Z[Z.length-1])?Z[Z.length-1]():Z[Z.length-1];for(h=3*Math.floor(s),d=1-(p=s%1),l=0;l<4;l++)a.Z.isFunction(Z[h+l])?P[l]=Z[h+l]():P[l]=Z[h+l];return d*d*(d*P[0]+3*p*P[1])+(3*d*P[2]+p*P[3])*p*p}if((h=s>C-2?C-2:parseInt(Math.floor(s),10))===s)return a.Z.isFunction(Z[h])?Z[h]():Z[h];for(l=0;l<2;l++)a.Z.isFunction(Z[h+l])?P[l]=Z[h+l]():P[l]=Z[h+l];return P[0]+(P[1]-P[0])*(s-h)}},generateTerm:function(t,e,o,s,n){var h,l;a.Z.isArray(e)?(this.dataX=e,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=a.Z.createFunction(e,this.board,t),a.Z.isString(e)?this.visProp.curvetype="functiongraph":(a.Z.isFunction(e)||a.Z.isNumber(e))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0),a.Z.isArray(o)?(this.dataY=o,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):this.Y=a.Z.createFunction(o,this.board,t),a.Z.isFunction(e)&&a.Z.isArray(o)&&(h=a.Z.createFunction(o[0],this.board,""),l=a.Z.createFunction(o[1],this.board,""),this.X=function(p){return e(p)*Math.cos(p)+h()},this.X.deps=h.deps,this.Y=function(p){return e(p)*Math.sin(p)+l()},this.Y.deps=l.deps,this.visProp.curvetype="polar"),a.Z.exists(s)&&(this.minX=a.Z.createFunction(s,this.board,"")),a.Z.exists(n)&&(this.maxX=a.Z.createFunction(n,this.board,"")),this.addParentsFromJCFunctions([this.X,this.Y,this.minX,this.maxX])},notifyParents:function(t){var e,o,s,n=!1;for(e in s={xterm:1,yterm:1})if(s.hasOwnProperty(e)&&this.hasOwnProperty(e)&&this[e].origin)for(o in n=!0,this[e].origin.deps)this[e].origin.deps.hasOwnProperty(o)&&this[e].origin.deps[o].addChild(this);n||ht.Z.findDependencies(this,t,this.board)},getLabelAnchor:function(){var t,e,o,s=.05*this.board.canvasWidth,n=.05*this.board.canvasHeight,h=.95*this.board.canvasWidth,l=.95*this.board.canvasHeight;switch(a.Z.evaluate(this.visProp.label.position)){case"ulft":e=s,o=n;break;case"llft":e=s,o=l;break;case"rt":e=h,o=.5*l;break;case"lrt":e=h,o=l;break;case"urt":e=h,o=n;break;case"top":e=.5*h,o=n;break;case"bot":e=.5*h,o=l;break;default:e=s,o=.5*l}return t=new b.Z(x.Z.COORDS_BY_SCREEN,[e,o],this.board,!1),g.Z.projectCoordsToCurve(t.usrCoords[1],t.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var t,e={id:this.id+"T"+this.numTraces,elementClass:x.Z.OBJECT_CLASS_CURVE,points:this.points.slice(0),bezierDegree:this.bezierDegree,numberPoints:this.numberPoints,board:this.board,visProp:a.Z.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return e.visProp.layer=this.board.options.layer.trace,e.visProp.curvetype=this.visProp.curvetype,this.numTraces++,a.Z.clearVisPropOld(e),e.visPropCalc={visible:a.Z.evaluate(e.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(e),this.board.renderer.enhancedRendering=t,this.traces[e.id]=e.rendNode,this},bounds:function(){var t,e,o,s=1/0,n=-1/0,h=1/0,l=-1/0,p=this.points.length;if(this.bezierDegree===3){for(t=0;t<p;t++)this.points[t].X=a.Z.bind(function(){return this.usrCoords[1]},this.points[t]),this.points[t].Y=a.Z.bind(function(){return this.usrCoords[2]},this.points[t]);return o=(e=c.Z.bezier(this.points))[3](),s=c.Z.fminbr(function(d){return e[0](d)},[0,o]),n=c.Z.fminbr(function(d){return-e[0](d)},[0,o]),h=c.Z.fminbr(function(d){return e[1](d)},[0,o]),l=c.Z.fminbr(function(d){return-e[1](d)},[0,o]),s=e[0](s),n=e[0](n),h=e[1](h),[s,l=e[1](l),n,h]}for(t=0;t<p;t++)s>this.points[t].usrCoords[1]&&(s=this.points[t].usrCoords[1]),n<this.points[t].usrCoords[1]&&(n=this.points[t].usrCoords[1]),h>this.points[t].usrCoords[2]&&(h=this.points[t].usrCoords[2]),l<this.points[t].usrCoords[2]&&(l=this.points[t].usrCoords[2]);return[s,l,n,h]},getParents:function(){var t=[this.xterm,this.yterm,this.minX(),this.maxX()];return this.parents.length!==0&&(t=this.parents),t},moveTo:function(t){var e,o=[];return this.points.length>0&&!a.Z.evaluate(this.visProp.fixed)&&(e=this.points[0],o=t.length===3?[t[0]-e.usrCoords[0],t[1]-e.usrCoords[1],t[2]-e.usrCoords[2]]:[t[0]-e.usrCoords[1],t[1]-e.usrCoords[2]],this.setPosition(x.Z.COORDS_BY_USER,o)),this},getTransformationSource:function(){var t,e;return a.Z.exists(this._transformationSource)&&(e=this._transformationSource).elementClass===x.Z.OBJECT_CLASS_CURVE&&(t=!0),[t,e]},pnpoly:function(t,e,o){var s,n,h,l,p,d,Z=this.points,C=!1;for(o===x.Z.COORDS_BY_USER?(l=(d=new b.Z(x.Z.COORDS_BY_USER,[t,e],this.board)).scrCoords[1],p=d.scrCoords[2]):(l=t,p=e),s=0,n=(h=this.points.length)-2;s<h-1;n=s++)Z[s].scrCoords[2]>p!=Z[n].scrCoords[2]>p&&l<(Z[n].scrCoords[1]-Z[s].scrCoords[1])*(p-Z[s].scrCoords[2])/(Z[n].scrCoords[2]-Z[s].scrCoords[2])+Z[s].scrCoords[1]&&(C=!C);return C}}),u.Z.createCurve=function(t,e,o){var s,n,h=a.Z.copyAttributes(o,t.options,"curve");return s=t.select(e[0],!0),a.Z.isTransformationOrArray(e[1])&&a.Z.isObject(s)&&(s.type===x.Z.OBJECT_TYPE_CURVE||s.type===x.Z.OBJECT_TYPE_ANGLE||s.type===x.Z.OBJECT_TYPE_ARC||s.type===x.Z.OBJECT_TYPE_CONIC||s.type===x.Z.OBJECT_TYPE_SECTOR)?(s.type===x.Z.OBJECT_TYPE_SECTOR?h=a.Z.copyAttributes(o,t.options,"sector"):s.type===x.Z.OBJECT_TYPE_ARC?h=a.Z.copyAttributes(o,t.options,"arc"):s.type===x.Z.OBJECT_TYPE_ANGLE?(a.Z.exists(o.withLabel)||(o.withLabel=!1),h=a.Z.copyAttributes(o,t.options,"angle")):h=a.Z.copyAttributes(o,t.options,"curve"),h=a.Z.copyAttributes(h,t.options,"curve"),(n=new u.Z.Curve(t,["x",[],[]],h)).updateDataArray=function(){var l,p=s.numberPoints;for(this.bezierDegree=s.bezierDegree,this.dataX=[],this.dataY=[],l=0;l<p;l++)this.dataX.push(s.points[l].usrCoords[1]),this.dataY.push(s.points[l].usrCoords[2]);return this},n.addTransform(e[1]),s.addChild(n),n.setParents([s]),n._transformationSource=s,n):(h=a.Z.copyAttributes(o,t.options,"curve"),new u.Z.Curve(t,["x"].concat(e),h))},u.Z.registerElement("curve",u.Z.createCurve),u.Z.createFunctiongraph=function(t,e,o){var s,n=["x","x"].concat(e);return(s=a.Z.copyAttributes(o,t.options,"curve")).curvetype="functiongraph",new u.Z.Curve(t,n,s)},u.Z.registerElement("functiongraph",u.Z.createFunctiongraph),u.Z.registerElement("plot",u.Z.createFunctiongraph),u.Z.createSpline=function(t,e,o){var s,n,h;return n=function(){var l,p=[],d=[];return[function(Z,C){var P,S,w;if(!C){if(p=[],d=[],e.length===2&&a.Z.isArray(e[0])&&a.Z.isArray(e[1])&&e[0].length===e[1].length)for(P=0;P<e[0].length;P++)a.Z.isFunction(e[0][P])?p.push(e[0][P]()):p.push(e[0][P]),a.Z.isFunction(e[1][P])?d.push(e[1][P]()):d.push(e[1][P]);else for(P=0;P<e.length;P++)if(a.Z.isPoint(e[P]))p.push(e[P].X()),d.push(e[P].Y());else if(a.Z.isArray(e[P])&&e[P].length===2)for(S=0;S<e.length;S++)a.Z.isFunction(e[S][0])?p.push(e[S][0]()):p.push(e[S][0]),a.Z.isFunction(e[S][1])?d.push(e[S][1]()):d.push(e[S][1]);else a.Z.isFunction(e[P])&&e[P]().length===2&&(w=e[P](),p.push(w[0]),d.push(w[1]));l=c.Z.splineDef(p,d)}return c.Z.splineEval(Z,p,d,l)},function(){return p[0]},function(){return p[p.length-1]}]},(o=a.Z.copyAttributes(o,t.options,"curve")).curvetype="functiongraph",h=n(),(s=new u.Z.Curve(t,["x","x",h[0],h[1],h[2]],o)).setParents(e),s.elType="spline",s},u.Z.registerElement("spline",u.Z.createSpline),u.Z.createCardinalSpline=function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w=`
Possible parent types: [points:array, tau:number|function, type:string]`;if(!a.Z.exists(e[0])||!a.Z.isArray(e[0]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+w);if(!a.Z.exists(e[1])||!a.Z.isNumber(e[1])&&!a.Z.isFunction(e[1]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+w);if(!a.Z.exists(e[2])||!a.Z.isString(e[2]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 3 'type' has to be string 'uniform' or 'centripetal'"+w);if(o=a.Z.copyAttributes(o,t.options,"curve"),(o=a.Z.copyAttributes(o,t.options,"cardinalspline")).curvetype="parameter",d=e[0],Z=[],!o.isarrayofcoordinates&&d.length===2&&a.Z.isArray(d[0])&&a.Z.isArray(d[1])&&d[0].length===d[1].length)for(C=0;C<d[0].length;C++)Z[C]=[],a.Z.isFunction(d[0][C])?Z[C].push(d[0][C]()):Z[C].push(d[0][C]),a.Z.isFunction(d[1][C])?Z[C].push(d[1][C]()):Z[C].push(d[1][C]);else for(C=0;C<d.length;C++)a.Z.isString(d[C])?Z.push(t.select(d[C])):a.Z.isPoint(d[C])?Z.push(d[C]):a.Z.isArray(d[C])&&d[C].length===2?(Z[C]=[],a.Z.isFunction(d[C][0])?Z[C].push(d[C][0]()):Z[C].push(d[C][0]),a.Z.isFunction(d[C][1])?Z[C].push(d[C][1]()):Z[C].push(d[C][1])):a.Z.isFunction(d[C])&&d[C]().length===2&&Z.push(e[C]());if(o.createpoints===!0)h=a.Z.providePoints(t,Z,o,"cardinalspline",["points"]);else for(h=[],n=function(D){return{X:function(){return Z[D][0]},Y:function(){return Z[D][1]},Dist:function(k){var I=this.X()-k.X(),U=this.Y()-k.Y();return Math.sqrt(I*I+U*U)}}},C=0;C<Z.length;C++)a.Z.isPoint(Z[C])?h.push(Z[C]):h.push(n(C));for(l=e[1],p=e[2],S=["x"].concat(c.Z.CardinalSpline(h,l,p)),s=new u.Z.Curve(t,S,o),P=h.length,s.setParents(h),C=0;C<P;C++)d=h[C],a.Z.isPoint(d)&&(a.Z.exists(d._is_new)?(s.addChild(d),delete d._is_new):d.addChild(s));return s.elType="cardinalspline",s},u.Z.registerElement("cardinalspline",u.Z.createCardinalSpline),u.Z.createMetapostSpline=function(t,e,o){var s,n,h,l,p,d,Z,C,P=`
Possible parent types: [points:array, controls:object`;if(!a.Z.exists(e[0])||!a.Z.isArray(e[0]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+P);if(!a.Z.exists(e[1])||!a.Z.isObject(e[1]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+P);if(o=a.Z.copyAttributes(o,t.options,"curve"),(o=a.Z.copyAttributes(o,t.options,"metapostspline")).curvetype="parameter",p=e[0],d=[],!o.isarrayofcoordinates&&p.length===2&&a.Z.isArray(p[0])&&a.Z.isArray(p[1])&&p[0].length===p[1].length)for(Z=0;Z<p[0].length;Z++)d[Z]=[],a.Z.isFunction(p[0][Z])?d[Z].push(p[0][Z]()):d[Z].push(p[0][Z]),a.Z.isFunction(p[1][Z])?d[Z].push(p[1][Z]()):d[Z].push(p[1][Z]);else for(Z=0;Z<p.length;Z++)a.Z.isString(p[Z])?d.push(t.select(p[Z])):a.Z.isPoint(p[Z])?d.push(p[Z]):a.Z.isArray(p[Z])&&p[Z].length===2?(d[Z]=[],a.Z.isFunction(p[Z][0])?d[Z].push(p[Z][0]()):d[Z].push(p[Z][0]),a.Z.isFunction(p[Z][1])?d[Z].push(p[Z][1]()):d[Z].push(p[Z][1])):a.Z.isFunction(p[Z])&&p[Z]().length===2&&d.push(e[Z]());if(o.createpoints===!0)h=a.Z.providePoints(t,d,o,"metapostspline",["points"]);else for(h=[],n=function(S){return{X:function(){return d[S][0]},Y:function(){return d[S][1]}}},Z=0;Z<d.length;Z++)a.Z.isPoint(d[Z])?h.push(d[Z]):h.push(n);for(l=e[1],(s=new u.Z.Curve(t,["t",[],[],0,p.length-1],o)).updateDataArray=function(){var S,w,D=h.length,k=[];for(w=0;w<D;w++)k.push([h[w].X(),h[w].Y()]);S=u.Z.Math.Metapost.curve(k,l),this.dataX=S[0],this.dataY=S[1]},s.bezierDegree=3,C=h.length,s.setParents(h),Z=0;Z<C;Z++)a.Z.isPoint(h[Z])&&h[Z].addChild(s);return s.elType="metapostspline",s},u.Z.registerElement("metapostspline",u.Z.createMetapostSpline),u.Z.createRiemannsum=function(t,e,o){var s,n,h,l,p,d;if((d=a.Z.copyAttributes(o,t.options,"riemannsum")).curvetype="plot",h=e[0],s=a.Z.createFunction(e[1],t,""),!a.Z.exists(s))throw new Error(`JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.
Possible parent types: [function,n:number|function,type,start:number|function,end:number|function]`);if(n=a.Z.createFunction(e[2],t,"",!1),!a.Z.exists(n))throw new Error(`JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.
Possible parent types: [function,n:number|function,type,start:number|function,end:number|function]`);return l=[[0],[0]].concat(e.slice(3)),(p=t.create("curve",l,d)).sum=0,p.Value=function(){return this.sum},p.updateDataArray=function(){var Z=c.Z.riemann(h,s(),n(),this.minX(),this.maxX());this.dataX=Z[0],this.dataY=Z[1],this.sum=Z[2]},p.addParentsFromJCFunctions([s,n]),p},u.Z.registerElement("riemannsum",u.Z.createRiemannsum),u.Z.createTracecurve=function(t,e,o){var s,n,h,l;if(e.length!==2)throw new Error(`JSXGraph: Can't create trace curve with given parent'
Possible parent types: [glider, point]`);if(n=t.select(e[0]),h=t.select(e[1]),n.type!==x.Z.OBJECT_TYPE_GLIDER||!a.Z.isPoint(h))throw new Error("JSXGraph: Can't create trace curve with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [glider, point]`);return(l=a.Z.copyAttributes(o,t.options,"tracecurve")).curvetype="plot",(s=t.create("curve",[[0],[0]],l)).updateDataArray=function(){var p,d,Z,C,P,S,w,D,k,I=l.numberpoints,U=n.position,J=n.slideObject,z=J.minX();for(d=(J.maxX()-z)/I,this.dataX=[],this.dataY=[],J.elementClass!==x.Z.OBJECT_CLASS_CURVE&&I++,p=0;p<I;p++){for(C in Z=z+p*d,S=J.X(Z)/J.Z(Z),w=J.Y(Z)/J.Z(Z),n.setPositionDirectly(x.Z.COORDS_BY_USER,[S,w]),D=!1,this.board.objects)if(this.board.objects.hasOwnProperty(C)&&((P=this.board.objects[C])===n&&(D=!0),D&&P.needsRegularUpdate&&(k=P.visProp.trace,P.visProp.trace=!1,P.needsUpdate=!0,P.update(!0),P.visProp.trace=k,P===h)))break;this.dataX[p]=h.X(),this.dataY[p]=h.Y()}for(C in n.position=U,D=!1,this.board.objects)if(this.board.objects.hasOwnProperty(C)&&((P=this.board.objects[C])===n&&(D=!0),D&&P.needsRegularUpdate&&(k=P.visProp.trace,P.visProp.trace=!1,P.needsUpdate=!0,P.update(!0),P.visProp.trace=k,P===h)))break},s},u.Z.registerElement("tracecurve",u.Z.createTracecurve),u.Z.createStepfunction=function(t,e,o){var s,n;if(e.length!==2)throw new Error(`JSXGraph: Can't create step function with given parent'
Possible parent types: [array, array|function]`);return n=a.Z.copyAttributes(o,t.options,"stepfunction"),(s=t.create("curve",e,n)).updateDataArray=function(){var h,l=0,p=this.xterm.length;if(this.dataX=[],this.dataY=[],p!==0)for(this.dataX[l]=this.xterm[0],this.dataY[l]=this.yterm[0],++l,h=1;h<p;++h)this.dataX[l]=this.xterm[h],this.dataY[l]=this.dataY[l-1],++l,this.dataX[l]=this.xterm[h],this.dataY[l]=this.yterm[h],++l},s},u.Z.registerElement("stepfunction",u.Z.createStepfunction),u.Z.createDerivative=function(t,e,o){var s,n,h,l,p;if(e.length!==1&&e[0].class!==x.Z.OBJECT_CLASS_CURVE)throw new Error(`JSXGraph: Can't create derivative curve with given parent'
Possible parent types: [curve]`);return p=a.Z.copyAttributes(o,t.options,"curve"),n=e[0],h=c.Z.D(n.X),l=c.Z.D(n.Y),(s=t.create("curve",[function(d){return n.X(d)},function(d){return l(d)/h(d)},n.minX(),n.maxX()],p)).setParents(n),s},u.Z.registerElement("derivative",u.Z.createDerivative),u.Z.createCurveIntersection=function(t,e,o){var s;if(e.length!==2)throw new Error(`JSXGraph: Can't create curve intersection with given parent'
Possible parent types: [array, array|function]`);return(s=t.create("curve",[[],[]],o)).updateDataArray=function(){var n=u.Z.Math.Clip.intersection(e[0],e[1],this.board);this.dataX=n[0],this.dataY=n[1]},s},u.Z.createCurveUnion=function(t,e,o){var s;if(e.length!==2)throw new Error(`JSXGraph: Can't create curve union with given parent'
Possible parent types: [array, array|function]`);return(s=t.create("curve",[[],[]],o)).updateDataArray=function(){var n=u.Z.Math.Clip.union(e[0],e[1],this.board);this.dataX=n[0],this.dataY=n[1]},s},u.Z.createCurveDifference=function(t,e,o){var s;if(e.length!==2)throw new Error(`JSXGraph: Can't create curve difference with given parent'
Possible parent types: [array, array|function]`);return(s=t.create("curve",[[],[]],o)).updateDataArray=function(){var n=u.Z.Math.Clip.difference(e[0],e[1],this.board);this.dataX=n[0],this.dataY=n[1]},s},u.Z.registerElement("curvedifference",u.Z.createCurveDifference),u.Z.registerElement("curveintersection",u.Z.createCurveIntersection),u.Z.registerElement("curveunion",u.Z.createCurveUnion),u.Z.createBoxPlot=function(t,e,o){var s,n,h,l=a.Z.copyAttributes(o,t.options,"boxplot");if(e.length!==3)throw new Error(`JSXGraph: Can't create box plot with given parent'
Possible parent types: [array, number|function, number|function] containing quantiles, axis, width`);if(e[0].length<5)throw new Error(`JSXGraph: Can't create box plot with given parent[0]'
parent[0] has to conatin at least 5 quantiles.`);for(s=t.create("curve",[[],[]],l),h=e[0].length,s.Q=[],n=0;n<h;n++)s.Q[n]=a.Z.createFunction(e[0][n],t,null,!0);return s.x=a.Z.createFunction(e[1],t,null,!0),s.w=a.Z.createFunction(e[2],t,null,!0),s.updateDataArray=function(){var p,d,Z,C,P,S,w,D,k;w=a.Z.evaluate(this.visProp.smallwidth),D=a.Z.evaluate(this.visProp.dir),Z=(k=this.x())-.5*this.w(),C=k-.5*this.w()*w,P=k+.5*this.w(),p=[k,C,S=k+.5*this.w()*w,k,k,Z,Z,P,P,k,NaN,Z,P,NaN,k,k,C,S,k],d=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],D==="vertical"?(this.dataX=p,this.dataY=d):(this.dataX=d,this.dataY=p)},s.addParentsFromJCFunctions([s.Q,s.x,s.w]),s},u.Z.registerElement("boxplot",u.Z.createBoxPlot),u.Z.Curve,u.Z.createArc=function(t,e,o){var s,n,h;if((h=a.Z.providePoints(t,e,o,"arc",["center","radiusPoint","anglePoint"]))===!1||h.length<3)throw new Error("JSXGraph: Can't create Arc with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point,point], [arc, transformation]`);return n=a.Z.copyAttributes(o,t.options,"arc"),(s=t.create("curve",[[0],[0]],n)).elType="arc",s.setParents(h),s.type=x.Z.OBJECT_TYPE_ARC,s.center=h[0],s.radiuspoint=h[1],s.point2=s.radiuspoint,s.anglepoint=h[2],s.point3=s.anglepoint,a.Z.exists(s.center._is_new)?(s.addChild(s.center),delete s.center._is_new):s.center.addChild(s),a.Z.exists(s.radiuspoint._is_new)?(s.addChild(s.radiuspoint),delete s.radiuspoint._is_new):s.radiuspoint.addChild(s),a.Z.exists(s.anglepoint._is_new)?(s.addChild(s.anglepoint),delete s.anglepoint._is_new):s.anglepoint.addChild(s),s.useDirection=n.usedirection,s.updateDataArray=function(){var l,p,d,Z,C,P=1,S=this.radiuspoint,w=this.center,D=this.anglepoint,k=a.Z.evaluate(this.visProp.selection);p=g.Z.rad(S,w,D),(k==="minor"&&p>Math.PI||k==="major"&&p<Math.PI)&&(P=-1),this.useDirection&&(d=h[1].coords.usrCoords,Z=h[3].coords.usrCoords,C=h[2].coords.usrCoords,(d[1]-C[1])*(d[2]-Z[2])-(d[2]-C[2])*(d[1]-Z[1])<0?(this.radiuspoint=h[1],this.anglepoint=h[2]):(this.radiuspoint=h[2],this.anglepoint=h[1])),S=S.coords.usrCoords,w=w.coords.usrCoords,D=D.coords.usrCoords,l=g.Z.bezierArc(S,w,D,!1,P),this.dataX=l[0],this.dataY=l[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},s.Radius=function(){return this.radiuspoint.Dist(this.center)},s.getRadius=function(){return u.Z.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},s.Value=function(){return this.Radius()*g.Z.rad(this.radiuspoint,this.center,this.anglepoint)},s.hasPoint=function(l,p){var d,Z,C,P,S,w,D,k=this.Radius();return a.Z.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(l,p):(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(D=this.board._inputDevice,w=a.Z.evaluate(this.visProp.precision[D])):w=this.board.options.precision.hasPoint,w/=Math.min(this.board.unitX,this.board.unitY),Z=new b.Z(x.Z.COORDS_BY_SCREEN,[l,p],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),P=B.Z.inverse(this.transformMat),S=B.Z.matVecMult(P,Z.usrCoords),Z=new b.Z(x.Z.COORDS_BY_USER,S,this.board)),d=this.center.coords.distance(x.Z.COORDS_BY_USER,Z),(C=Math.abs(d-k)<w)&&(C=g.Z.coordsOnArc(this,Z)),C)},s.hasPointSector=function(l,p){var d=new b.Z(x.Z.COORDS_BY_SCREEN,[l,p],this.board),Z=this.Radius(),C=this.center.coords.distance(x.Z.COORDS_BY_USER,d)<Z;return C&&(C=g.Z.coordsOnArc(this,d)),C},s.getTextAnchor=function(){return this.center.coords},s.getLabelAnchor=function(){var l,p,d,Z,C,P=g.Z.rad(this.radiuspoint,this.center,this.anglepoint),S=10/this.board.unitX,w=10/this.board.unitY,D=this.point2.coords.usrCoords,k=this.center.coords.usrCoords,I=D[1]-k[1],U=D[2]-k[2],J=a.Z.evaluate(this.visProp.selection),z=this.label?this.label.visProp:this.visProp.label;return(J==="minor"&&P>Math.PI||J==="major"&&P<Math.PI)&&(P=-(2*Math.PI-P)),d=(l=new b.Z(x.Z.COORDS_BY_USER,[k[1]+Math.cos(.5*P)*I-Math.sin(.5*P)*U,k[2]+Math.sin(.5*P)*I+Math.cos(.5*P)*U],this.board)).usrCoords[1]-k[1],Z=l.usrCoords[2]-k[2],d=d*((C=Math.sqrt(d*d+Z*Z))+S)/C,Z=Z*(C+w)/C,p=[k[1]+d,k[2]+Z],z.position=g.Z.calcLabelQuadrant(g.Z.rad([1,0],[0,0],p)),new b.Z(x.Z.COORDS_BY_USER,p,this.board)},s.updateQuadraticform=pe.prototype.updateQuadraticform,s.updateStdform=pe.prototype.updateStdform,s.methodMap=u.Z.deepCopy(s.methodMap,{getRadius:"getRadius",radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value"}),s.prepareUpdate().update(),s},u.Z.registerElement("arc",u.Z.createArc),u.Z.createSemicircle=function(t,e,o){var s,n,h,l;if((l=a.Z.providePoints(t,e,o,"point"))===!1||l.length!==2)throw new Error("JSXGraph: Can't create Semicircle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point]`);return h=a.Z.copyAttributes(o,t.options,"semicircle","center"),(n=t.create("midpoint",l,h)).dump=!1,h=a.Z.copyAttributes(o,t.options,"semicircle"),(s=t.create("arc",[n,l[1],l[0]],h)).elType="semicircle",s.setParents([l[0].id,l[1].id]),s.subs={midpoint:n},s.inherits.push(n),s.midpoint=s.center=n,s},u.Z.registerElement("semicircle",u.Z.createSemicircle),u.Z.createCircumcircleArc=function(t,e,o){var s,n,h,l;if((l=a.Z.providePoints(t,e,o,"point"))===!1||l.length!==3)throw new Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point,point]`);return h=a.Z.copyAttributes(o,t.options,"circumcirclearc","center"),(n=t.create("circumcenter",l,h)).dump=!1,(h=a.Z.copyAttributes(o,t.options,"circumcirclearc")).usedirection=!0,(s=t.create("arc",[n,l[0],l[2],l[1]],h)).elType="circumcirclearc",s.setParents([l[0].id,l[1].id,l[2].id]),s.subs={center:n},s.inherits.push(n),s.center=n,s},u.Z.registerElement("circumcirclearc",u.Z.createCircumcircleArc),u.Z.createMinorArc=function(t,e,o){return o.selection="minor",u.Z.createArc(t,e,o)},u.Z.registerElement("minorarc",u.Z.createMinorArc),u.Z.createMajorArc=function(t,e,o){return o.selection="major",u.Z.createArc(t,e,o)},u.Z.registerElement("majorarc",u.Z.createMajorArc),u.Z.createSector=function(t,e,o){var s,n,h,l,p,d,Z="invalid";if(e[0].elementClass===x.Z.OBJECT_CLASS_LINE&&e[1].elementClass===x.Z.OBJECT_CLASS_LINE&&(a.Z.isArray(e[2])||a.Z.isNumber(e[2]))&&(a.Z.isArray(e[3])||a.Z.isNumber(e[3]))&&(a.Z.isNumber(e[4])||a.Z.isFunction(e[4])||a.Z.isString(e[4])))Z="2lines";else{if((d=a.Z.providePoints(t,e,o,"sector",["center","radiusPoint","anglePoint"]))===!1)throw new Error("JSXGraph: Can't create Sector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");Z="3points"}if(n=a.Z.copyAttributes(o,t.options,"sector"),(s=t.create("curve",[[0],[0]],n)).type=x.Z.OBJECT_TYPE_SECTOR,s.elType="sector",s.autoRadius=function(){var C=20/s.board.unitX,P=1/0,S=50/s.board.unitX;return a.Z.isPoint(s.center)&&(P=.3333*s.center.Dist(s.point2)),Math.max(C,Math.min(P,S))},Z==="2lines")s.Radius=function(){var C=a.Z.evaluate(e[4]);return C==="auto"?this.autoRadius():C},s.line1=t.select(e[0]),s.line2=t.select(e[1]),s.line1.addChild(s),s.line2.addChild(s),s.setParents(e),s.point1={visProp:{}},s.point2={visProp:{}},s.point3={visProp:{}},l=g.Z.meetLineLine(s.line1.stdform,s.line2.stdform,0,t),a.Z.isArray(e[2])?(e[2].length===2&&(e[2]=[1].concat(e[2])),p=g.Z.projectPointToLine({coords:{usrCoords:e[2]}},s.line1,t),p=m.Z.subtract(p.usrCoords,l.usrCoords),s.direction1=B.Z.innerProduct(p,[0,s.line1.stdform[2],-s.line1.stdform[1]],3)>=0?1:-1):s.direction1=e[2]>=0?1:-1,a.Z.isArray(e[3])?(e[3].length===2&&(e[3]=[1].concat(e[3])),p=g.Z.projectPointToLine({coords:{usrCoords:e[3]}},s.line2,t),p=m.Z.subtract(p.usrCoords,l.usrCoords),s.direction2=B.Z.innerProduct(p,[0,s.line2.stdform[2],-s.line2.stdform[1]],3)>=0?1:-1):s.direction2=e[3]>=0?1:-1,s.updateDataArray=function(){var C,P,S,w,D,k,I=[0,0,0];if(P=this.line1,S=this.line2,I=B.Z.crossProduct(P.stdform,S.stdform),Math.abs(I[0])>B.Z.eps*B.Z.eps&&(I[1]/=I[0],I[2]/=I[0],I[0]/=I[0]),C=this.direction1*this.Radius(),w=m.Z.add(I,[0,C*P.stdform[2],-C*P.stdform[1]]),C=this.direction2*this.Radius(),D=m.Z.add(I,[0,C*S.stdform[2],-C*S.stdform[1]]),this.point2.coords=new b.Z(x.Z.COORDS_BY_USER,w,s.board),this.point1.coords=new b.Z(x.Z.COORDS_BY_USER,I,s.board),this.point3.coords=new b.Z(x.Z.COORDS_BY_USER,D,s.board),Math.abs(w[0])<B.Z.eps||Math.abs(I[0])<B.Z.eps||Math.abs(D[0])<B.Z.eps)return this.dataX=[NaN],void(this.dataY=[NaN]);k=g.Z.bezierArc(w,I,D,!0,1),this.dataX=k[0],this.dataY=k[1],this.bezierDegree=3},s.methodMap=u.Z.deepCopy(s.methodMap,{radius:"Radius",getRadius:"Radius",setRadius:"setRadius"});else if(Z==="3points"){for(s.point1=d[0],s.point2=d[1],s.point3=d[2],h=0;h<3;h++)a.Z.exists(d[h]._is_new)?(s.addChild(d[h]),delete d[h]._is_new):d[h].addChild(s);s.useDirection=o.usedirection,s.setParents(d),a.Z.exists(d[3])&&(s.point4=d[3],s.point4.addChild(s)),s.methodMap=u.Z.deepCopy(s.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",radius:"Radius",getRadius:"Radius",setRadius:"setRadius"}),s.updateDataArray=function(){var C,P,S,w,D,k=this.point2,I=this.point1,U=this.point3,J=1,z=a.Z.evaluate(this.visProp.selection);if(!k.isReal||!I.isReal||!U.isReal)return this.dataX=[NaN],void(this.dataY=[NaN]);D=g.Z.rad(k,I,U),(z==="minor"&&D>Math.PI||z==="major"&&D<Math.PI)&&(J=-1),this.useDirection&&a.Z.exists(this.point4)&&(P=this.point2.coords.usrCoords,S=this.point4.coords.usrCoords,w=this.point3.coords.usrCoords,(P[1]-w[1])*(P[2]-S[2])-(P[2]-w[2])*(P[1]-S[1])>=0&&(U=this.point2,k=this.point3)),k=k.coords.usrCoords,I=I.coords.usrCoords,U=U.coords.usrCoords,C=g.Z.bezierArc(k,I,U,!0,J),this.dataX=C[0],this.dataY=C[1],this.bezierDegree=3},s.Radius=function(){return this.point2.Dist(this.point1)},(n=a.Z.copyAttributes(o,t.options,"sector","arc")).withLabel=!1,n.name+="_arc",s.arc=t.create("arc",[s.point1,s.point2,s.point3],n),s.addChild(s.arc)}return s.center=s.point1,s.radiuspoint=s.point2,s.anglepoint=s.point3,s.hasPointCurve=function(C,P){var S,w,D,k,I,U,J=new b.Z(x.Z.COORDS_BY_SCREEN,[C,P],this.board),z=this.Radius(),V=this.center.coords.distance(x.Z.COORDS_BY_USER,J),W=a.Z.evaluate(this.visProp.selection);return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(I=this.board._inputDevice,k=a.Z.evaluate(this.visProp.precision[I])):k=this.board.options.precision.hasPoint,k/=Math.min(this.board.unitX,this.board.unitY),(U=Math.abs(V-z)<k)&&(S=g.Z.rad(this.point2,this.center,J.usrCoords.slice(1)),w=0,D=g.Z.rad(this.point2,this.center,this.point3),(W==="minor"&&D>Math.PI||W==="major"&&D<Math.PI)&&(w=D,D=2*Math.PI),(S<w||S>D)&&(U=!1)),U},s.hasPointSector=function(C,P){var S,w,D,k=new b.Z(x.Z.COORDS_BY_SCREEN,[C,P],this.board),I=this.Radius(),U=this.point1.coords.distance(x.Z.COORDS_BY_USER,k)<I,J=a.Z.evaluate(this.visProp.selection);return U&&(S=g.Z.rad(this.radiuspoint,this.center,k.usrCoords.slice(1)),w=0,D=g.Z.rad(this.radiuspoint,this.center,this.anglepoint),(J==="minor"&&D>Math.PI||J==="major"&&D<Math.PI)&&(w=D,D=2*Math.PI),(S<w||S>D)&&(U=!1)),U},s.hasPoint=function(C,P){return a.Z.evaluate(this.visProp.highlightonsector)||a.Z.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(C,P):this.hasPointCurve(C,P)},s.getTextAnchor=function(){return this.point1.coords},s.getLabelAnchor=function(){var C,P,S,w,D,k=g.Z.rad(this.point2,this.point1,this.point3),I=13/this.board.unitX,U=13/this.board.unitY,J=this.point2.coords.usrCoords,z=this.point1.coords.usrCoords,V=J[1]-z[1],W=J[2]-z[2],$=a.Z.evaluate(this.visProp.selection),nt=this.label?this.label.visProp:this.visProp.label;return($==="minor"&&k>Math.PI||$==="major"&&k<Math.PI)&&(k=-(2*Math.PI-k)),S=(C=new b.Z(x.Z.COORDS_BY_USER,[z[1]+Math.cos(.5*k)*V-Math.sin(.5*k)*W,z[2]+Math.sin(.5*k)*V+Math.cos(.5*k)*W],this.board)).usrCoords[1]-z[1],w=C.usrCoords[2]-z[2],S=S*((D=Math.sqrt(S*S+w*w))+I)/D,w=w*(D+U)/D,P=[z[1]+S,z[2]+w],nt.position=g.Z.calcLabelQuadrant(g.Z.rad([1,0],[0,0],P)),new b.Z(x.Z.COORDS_BY_USER,P,this.board)},s.setRadius=function(C){s.Radius=function(){var P=a.Z.evaluate(C);return P==="auto"?this.autoRadius():P}},s.getRadius=function(){return u.Z.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},Z==="3points"&&(s.setPositionDirectly=function(C,P,S){var w,D=new b.Z(C,P,this.board),k=new b.Z(C,S,this.board);return s.point1.draggable()&&s.point2.draggable()&&s.point3.draggable()?(w=m.Z.subtract(D.usrCoords,k.usrCoords),this.board.create("transform",w.slice(1),{type:"translate"}).applyOnce([s.point1,s.point2,s.point3]),this):this}),s.prepareUpdate().update(),s},u.Z.registerElement("sector",u.Z.createSector),u.Z.createCircumcircleSector=function(t,e,o){var s,n,h,l;if((l=a.Z.providePoints(t,e,o,"point"))===!1)throw new Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");return(n=t.create("circumcenter",l.slice(0,3),h)).dump=!1,h=a.Z.copyAttributes(o,t.options,"circumcirclesector"),(s=t.create("sector",[n,l[0],l[2],l[1]],h)).elType="circumcirclesector",s.setParents(l),s.center=n,s.subs={center:n},s},u.Z.registerElement("circumcirclesector",u.Z.createCircumcircleSector),u.Z.createMinorSector=function(t,e,o){return o.selection="minor",u.Z.createSector(t,e,o)},u.Z.registerElement("minorsector",u.Z.createMinorSector),u.Z.createMajorSector=function(t,e,o){return o.selection="major",u.Z.createSector(t,e,o)},u.Z.registerElement("majorsector",u.Z.createMajorSector),u.Z.createAngle=function(t,e,o){var s,n,h,l,p,d,Z="invalid";if(e[0].elementClass===x.Z.OBJECT_CLASS_LINE&&e[1].elementClass===x.Z.OBJECT_CLASS_LINE&&(a.Z.isArray(e[2])||a.Z.isNumber(e[2]))&&(a.Z.isArray(e[3])||a.Z.isNumber(e[3])))Z="2lines";else{if((d=a.Z.providePoints(t,e,o,"point"))===!1)throw new Error("JSXGraph: Can't create angle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");Z="3points"}if(h=a.Z.copyAttributes(o,t.options,"angle"),a.Z.exists(h.name)&&h.name!==""||(h.name=t.generateName({type:x.Z.OBJECT_TYPE_ANGLE})),n=a.Z.exists(h.radius)?h.radius:0,Z==="2lines"?(e.push(n),(s=t.create("sector",e,h)).updateDataArraySector=s.updateDataArray,s.setAngle=function(C){},s.free=function(C){}):((s=t.create("sector",[d[1],d[0],d[2]],h)).arc.visProp.priv=!0,s.point=s.point2=s.radiuspoint=d[0],s.pointsquare=s.point3=s.anglepoint=d[2],s.Radius=function(){var C=a.Z.evaluate(n);return C==="auto"?s.autoRadius():C},s.updateDataArraySector=function(){var C,P,S=this.point2,w=this.point1,D=this.point3,k=this.Radius(),I=w.Dist(S),U=1,J=a.Z.evaluate(this.visProp.selection);P=g.Z.rad(S,w,D),(J==="minor"&&P>Math.PI||J==="major"&&P<Math.PI)&&(U=-1),S=S.coords.usrCoords,w=w.coords.usrCoords,D=D.coords.usrCoords,S=[1,w[1]+(S[1]-w[1])*k/I,w[2]+(S[2]-w[2])*k/I],D=[1,w[1]+(D[1]-w[1])*k/I,w[2]+(D[2]-w[2])*k/I],C=g.Z.bezierArc(S,w,D,!0,U),this.dataX=C[0],this.dataY=C[1],this.bezierDegree=3},s.setAngle=function(C){var P,S,w,D=this.anglepoint,k=this.radiuspoint;return D.draggable()&&(P=this.board.create("transform",[C,this.center],{type:"rotate"}),D.addTransform(k,P),P.update(),D.moveTo(B.Z.matVecMult(P.matrix,k.coords.usrCoords)),w=a.Z.isFunction(C)?function(){return 2*Math.PI-C()}:function(){return 2*Math.PI-C},S=this.board.create("transform",[w,this.center],{type:"rotate"}),D.coords.on("update",function(){S.update(),k.moveTo(B.Z.matVecMult(S.matrix,D.coords.usrCoords))}),D.setParents(k)),this},s.free=function(){var C=this.anglepoint;return C.transformations.length>0&&(C.transformations.pop(),C.isDraggable=!0,C.parents=[],C.coords.off("update")),this},s.setParents(d)),a.Z.exists(s.visProp.text)&&s.label.setText(a.Z.evaluate(s.visProp.text)),s.elType="angle",s.type=x.Z.OBJECT_TYPE_ANGLE,s.subs={},s.updateDataArraySquare=function(){var C,P,S,w,D,k,I,U,J=this.Radius();Z==="2lines"&&this.updateDataArraySector(),C=this.point2,P=this.point1,S=this.point3,C=C.coords.usrCoords,P=P.coords.usrCoords,S=S.coords.usrCoords,w=g.Z.distance(C,P,3),D=g.Z.distance(S,P,3),C=[1,P[1]+(C[1]-P[1])*J/w,P[2]+(C[2]-P[2])*J/w],S=[1,P[1]+(S[1]-P[1])*J/D,P[2]+(S[2]-P[2])*J/D],k=B.Z.crossProduct(S,P),I=[-C[1]*k[1]-C[2]*k[2],C[0]*k[1],C[0]*k[2]],k=B.Z.crossProduct(C,P),U=[-S[1]*k[1]-S[2]*k[2],S[0]*k[1],S[0]*k[2]],(k=B.Z.crossProduct(I,U))[1]/=k[0],k[2]/=k[0],this.dataX=[P[1],C[1],k[1],S[1],P[1]],this.dataY=[P[2],C[2],k[2],S[2],P[2]],this.bezierDegree=1},s.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},s.updateDataArray=function(){var C=a.Z.evaluate(this.visProp.type),P=g.Z.trueAngle(this.point2,this.point1,this.point3),S=a.Z.evaluate(this.visProp.selection);(S==="minor"&&P>180||S==="major"&&P<180)&&(P=360-P),Math.abs(P-90)<a.Z.evaluate(this.visProp.orthosensitivity)+B.Z.eps&&(C=a.Z.evaluate(this.visProp.orthotype)),C==="none"?this.updateDataArrayNone():C==="square"?this.updateDataArraySquare():C==="sector"?this.updateDataArraySector():C==="sectordot"&&(this.updateDataArraySector(),this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||C!=="sectordot"&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},l=a.Z.copyAttributes(o,t.options,"angle","dot"),s.dot=t.create("point",[function(){var C,P,S,w,D,k,I,U,J;return a.Z.exists(s.dot)&&!s.dot.visProp.visible?[0,0]:(C=s.point2.coords.usrCoords,P=s.point1.coords.usrCoords,S=s.Radius(),w=g.Z.distance(C,P,3),D=g.Z.rad(s.point2,s.point1,s.point3),((J=a.Z.evaluate(s.visProp.selection))==="minor"&&D>Math.PI||J==="major"&&D<Math.PI)&&(D=-(2*Math.PI-D)),D*=.5,k=Math.cos(D),I=Math.sin(D),C=[1,P[1]+(C[1]-P[1])*S/w,P[2]+(C[2]-P[2])*S/w],U=[[1,0,0],[P[1]-.5*P[1]*k+.5*P[2]*I,.5*k,.5*-I],[P[2]-.5*P[1]*I-.5*P[2]*k,.5*I,.5*k]],B.Z.matVecMult(U,C))}],l),s.dot.dump=!1,s.subs.dot=s.dot,Z==="2lines")for(p=0;p<2;p++)t.select(e[p]).addChild(s.dot);else for(p=0;p<3;p++)t.select(d[p]).addChild(s.dot);return s.getLabelAnchor=function(){var C,P,S,w,D,k,I,U,J,z=12,V=a.Z.evaluate(s.visProp.selection),W=this.label?this.label.visProp:this.visProp.label;return a.Z.exists(this.label.visProp.fontSize)&&(z=a.Z.evaluate(this.label.visProp.fontSize)),z/=this.board.unitX,P=s.point2.coords.usrCoords,S=s.point1.coords.usrCoords,w=s.Radius(),D=g.Z.distance(P,S,3),k=g.Z.rad(s.point2,s.point1,s.point3),(V==="minor"&&k>Math.PI||V==="major"&&k<Math.PI)&&(k=-(2*Math.PI-k)),k*=.5,I=Math.cos(k),U=Math.sin(k),P=[1,S[1]+(P[1]-S[1])*w/D,S[2]+(P[2]-S[2])*w/D],J=[[1,0,0],[S[1]-.5*S[1]*I+.5*S[2]*U,.5*I,.5*-U],[S[2]-.5*S[1]*U-.5*S[2]*I,.5*U,.5*I]],(C=B.Z.matVecMult(J,P))[1]/=C[0],C[2]/=C[0],C[0]/=C[0],D=g.Z.distance(C,S,3),C=[C[0],S[1]+(C[1]-S[1])*(w+z)/D,S[2]+(C[2]-S[2])*(w+z)/D],W.position=g.Z.calcLabelQuadrant(g.Z.rad([1,0],[0,0],C)),new b.Z(x.Z.COORDS_BY_USER,C,this.board)},s.Value=function(){return g.Z.rad(this.point2,this.point1,this.point3)},s.methodMap=a.Z.deepCopy(s.methodMap,{Value:"Value",setAngle:"setAngle",free:"free"}),s},u.Z.registerElement("angle",u.Z.createAngle),u.Z.createNonreflexAngle=function(t,e,o){var s;return o.selection="minor",(s=u.Z.createAngle(t,e,o)).Value=function(){var n=g.Z.rad(this.point2,this.point1,this.point3);return n<Math.PI?n:2*Math.PI-n},s},u.Z.registerElement("nonreflexangle",u.Z.createNonreflexAngle),u.Z.createReflexAngle=function(t,e,o){var s;return o.selection="major",(s=u.Z.createAngle(t,e,o)).Value=function(){var n=g.Z.rad(this.point2,this.point1,this.point3);return n>=Math.PI?n:2*Math.PI-n},s},u.Z.registerElement("reflexangle",u.Z.createReflexAngle),u.Z.createOrthogonalProjection=function(t,e,o){var s,n,h,l;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),a.Z.isPointType(t,e[0])&&e[1].elementClass===x.Z.OBJECT_CLASS_LINE)n=a.Z.providePoints(t,[e[0]],o,"point")[0],s=e[1];else{if(!a.Z.isPointType(t,e[1])||e[0].elementClass!==x.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,line]`);n=a.Z.providePoints(t,[e[1]],o,"point")[0],s=e[0]}return l=a.Z.copyAttributes(o,t.options,"orthogonalprojection"),h=t.create("point",[function(){return g.Z.projectPointToLine(n,s,t)}],l),a.Z.exists(n._is_new)?(h.addChild(n),delete n._is_new):n.addChild(h),s.addChild(h),h.elType="orthogonalprojection",h.setParents([n.id,h.id]),h.update(),h.generatePolynomial=function(){var p=s.point1.symbolic.x,d=s.point1.symbolic.y,Z=s.point2.symbolic.x,C=s.point2.symbolic.y,P=n.symbolic.x,S=n.symbolic.y,w=h.symbolic.x,D=h.symbolic.y;return["("+d+")*("+w+")-("+d+")*("+Z+")+("+D+")*("+Z+")-("+p+")*("+D+")+("+p+")*("+C+")-("+w+")*("+C+")","("+S+")*("+d+")-("+S+")*("+C+")-("+D+")*("+d+")+("+D+")*("+C+")+("+P+")*("+p+")-("+P+")*("+Z+")-("+w+")*("+p+")+("+w+")*("+Z+")"]},h},u.Z.createPerpendicular=function(t,e,o){var s,n,h,l;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),a.Z.isPointType(t,e[0])&&e[1].elementClass===x.Z.OBJECT_CLASS_LINE)n=e[1],s=a.Z.providePoints(t,[e[0]],o,"point")[0];else{if(!a.Z.isPointType(t,e[1])||e[0].elementClass!==x.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [line,point]`);n=e[0],s=a.Z.providePoints(t,[e[1]],o,"point")[0]}return l=a.Z.copyAttributes(o,t.options,"perpendicular"),(h=u.Z.createLine(t,[function(){return n.stdform[2]*s.X()-n.stdform[1]*s.Y()},function(){return-n.stdform[2]*s.Z()},function(){return n.stdform[1]*s.Z()}],l)).elType="perpendicular",h.setParents([n.id,s.id]),a.Z.exists(s._is_new)?(h.addChild(s),delete s._is_new):s.addChild(h),n.addChild(h),h},u.Z.createPerpendicularPoint=function(t,e,o){var s,n,h;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),a.Z.isPointType(t,e[0])&&e[1].elementClass===x.Z.OBJECT_CLASS_LINE)n=a.Z.providePoints(t,[e[0]],o,"point")[0],s=e[1];else{if(!a.Z.isPointType(t,e[1])||e[0].elementClass!==x.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,line]`);n=a.Z.providePoints(t,[e[1]],o,"point")[0],s=e[0]}return h=t.create("point",[function(){return g.Z.perpendicular(s,n,t)[0]}],o),a.Z.exists(n._is_new)?(h.addChild(n),delete n._is_new):n.addChild(h),s.addChild(h),h.elType="perpendicularpoint",h.setParents([n.id,s.id]),h.update(),h.generatePolynomial=function(){var l=s.point1.symbolic.x,p=s.point1.symbolic.y,d=s.point2.symbolic.x,Z=s.point2.symbolic.y,C=n.symbolic.x,P=n.symbolic.y,S=h.symbolic.x,w=h.symbolic.y;return["("+p+")*("+S+")-("+p+")*("+d+")+("+w+")*("+d+")-("+l+")*("+w+")+("+l+")*("+Z+")-("+S+")*("+Z+")","("+P+")*("+p+")-("+P+")*("+Z+")-("+w+")*("+p+")+("+w+")*("+Z+")+("+C+")*("+l+")-("+C+")*("+d+")-("+S+")*("+l+")+("+S+")*("+d+")"]},h},u.Z.createPerpendicularSegment=function(t,e,o){var s,n,h,l,p;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),a.Z.isPointType(t,e[0])&&e[1].elementClass===x.Z.OBJECT_CLASS_LINE)n=e[1],s=a.Z.providePoints(t,[e[0]],o,"point")[0];else{if(!a.Z.isPointType(t,e[1])||e[0].elementClass!==x.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [line,point]`);n=e[0],s=a.Z.providePoints(t,[e[1]],o,"point")[0]}return p=a.Z.copyAttributes(o,t.options,"perpendicularsegment","point"),(l=u.Z.createPerpendicularPoint(t,[n,s],p)).dump=!1,a.Z.exists(o.layer)||(o.layer=t.options.layer.line),p=a.Z.copyAttributes(o,t.options,"perpendicularsegment"),(h=u.Z.createLine(t,[function(){return g.Z.perpendicular(n,s,t)[1]?[l,s]:[s,l]}],p)).point=l,a.Z.exists(s._is_new)?(h.addChild(s),delete s._is_new):s.addChild(h),n.addChild(h),h.elType="perpendicularsegment",h.setParents([s.id,n.id]),h.subs={point:l},h.inherits.push(l),h},u.Z.createMidpoint=function(t,e,o){var s,n,h,l,p;for(l=0;l<e.length;++l)e[l]=t.select(e[l]);if(e.length===2&&a.Z.isPointType(t,e[0])&&a.Z.isPointType(t,e[1]))e=a.Z.providePoints(t,e,o,"point"),s=e[0],n=e[1];else{if(e.length!==1||e[0].elementClass!==x.Z.OBJECT_CLASS_LINE)throw new Error(`JSXGraph: Can't create midpoint.
Possible parent types: [point,point], [line]`);s=e[0].point1,n=e[0].point2}return p=a.Z.copyAttributes(o,t.options,"midpoint"),h=t.create("point",[function(){var d=s.coords.usrCoords[1]+n.coords.usrCoords[1];return isNaN(d)||Math.abs(s.coords.usrCoords[0])<B.Z.eps||Math.abs(n.coords.usrCoords[0])<B.Z.eps?NaN:.5*d},function(){var d=s.coords.usrCoords[2]+n.coords.usrCoords[2];return isNaN(d)||Math.abs(s.coords.usrCoords[0])<B.Z.eps||Math.abs(n.coords.usrCoords[0])<B.Z.eps?NaN:.5*d}],p),a.Z.exists(s._is_new)?(h.addChild(s),delete s._is_new):s.addChild(h),a.Z.exists(n._is_new)?(h.addChild(n),delete n._is_new):n.addChild(h),h.elType="midpoint",h.setParents([s.id,n.id]),h.prepareUpdate().update(),h.generatePolynomial=function(){var d=s.symbolic.x,Z=s.symbolic.y,C=n.symbolic.x,P=n.symbolic.y,S=h.symbolic.x,w=h.symbolic.y;return["("+Z+")*("+S+")-("+Z+")*("+C+")+("+w+")*("+C+")-("+d+")*("+w+")+("+d+")*("+P+")-("+S+")*("+P+")","("+d+")^2 - 2*("+d+")*("+S+")+("+Z+")^2-2*("+Z+")*("+w+")-("+C+")^2+2*("+C+")*("+S+")-("+P+")^2+2*("+P+")*("+w+")"]},h},u.Z.createParallelPoint=function(t,e,o){var s,n,h,l,p;for(p=0;p<e.length;++p)e[p]=t.select(e[p]);if(e.length===3&&a.Z.isPointType(t,e[0])&&a.Z.isPointType(t,e[1])&&a.Z.isPointType(t,e[2]))e=a.Z.providePoints(t,e,o,"point"),s=e[0],n=e[1],h=e[2];else if(a.Z.isPointType(t,e[0])&&e[1].elementClass===x.Z.OBJECT_CLASS_LINE)h=a.Z.providePoints(t,[e[0]],o,"point")[0],s=e[1].point1,n=e[1].point2;else{if(!a.Z.isPointType(t,e[1])||e[0].elementClass!==x.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create parallel point with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [line,point], [point,point,point]`);h=a.Z.providePoints(t,[e[1]],o,"point")[0],s=e[0].point1,n=e[0].point2}return l=t.create("point",[function(){return h.coords.usrCoords[1]+n.coords.usrCoords[1]-s.coords.usrCoords[1]},function(){return h.coords.usrCoords[2]+n.coords.usrCoords[2]-s.coords.usrCoords[2]}],o),a.Z.exists(s._is_new)?(l.addChild(s),delete s._is_new):s.addChild(l),a.Z.exists(n._is_new)?(l.addChild(n),delete n._is_new):n.addChild(l),a.Z.exists(h._is_new)?(l.addChild(h),delete h._is_new):h.addChild(l),l.elType="parallelpoint",l.setParents([s.id,n.id,h.id]),l.prepareUpdate().update(),l.generatePolynomial=function(){var d=s.symbolic.x,Z=s.symbolic.y,C=n.symbolic.x,P=n.symbolic.y,S=h.symbolic.x,w=h.symbolic.y,D=l.symbolic.x,k=l.symbolic.y;return["("+P+")*("+D+")-("+P+")*("+S+")-("+Z+")*("+D+")+("+Z+")*("+S+")-("+k+")*("+C+")+("+k+")*("+d+")+("+w+")*("+C+")-("+w+")*("+d+")","("+k+")*("+d+")-("+k+")*("+S+")-("+P+")*("+d+")+("+P+")*("+S+")-("+D+")*("+Z+")+("+D+")*("+w+")+("+C+")*("+Z+")-("+C+")*("+w+")"]},l},u.Z.createParallel=function(t,e,o){var s,n,h,l,p,d,Z=1;for(p=0;p<e.length;++p)e[p]=t.select(e[p]);return s=null,e.length===3?(s=(e=a.Z.providePoints(t,e,o,"point"))[2],Z=0):a.Z.isPointType(t,e[0])?(s=a.Z.providePoints(t,[e[0]],o,"point")[0],l=function(){return e[1].stdform}):a.Z.isPointType(t,e[1])&&(s=a.Z.providePoints(t,[e[1]],o,"point")[0],l=function(){return e[0].stdform}),a.Z.exists(o.layer)||(o.layer=t.options.layer.line),d=a.Z.copyAttributes(o,t.options,"parallel","point"),(n=Z===1?t.create("point",[function(){return B.Z.crossProduct([1,0,0],l())}],d):t.create("parallelpoint",e,d)).isDraggable=!0,d=a.Z.copyAttributes(o,t.options,"parallel"),(h=t.create("line",[s,n],d)).elType="parallel",h.subs={point:n},h.inherits.push(n),h.setParents([e[0].id,e[1].id]),e.length===3&&h.addParents(e[2].id),h.point=n,h},u.Z.createArrowParallel=function(t,e,o){var s;try{return o.firstArrow=!1,o.lastArrow=!0,(s=u.Z.createParallel(t,e,o).setAttribute({straightFirst:!1,straightLast:!1})).elType="arrowparallel",s}catch{throw new Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [line,point], [point,point,point]`)}},u.Z.createNormal=function(t,e,o){var s,n,h,l,p,d,Z,C,P;for(l=0;l<e.length;++l)e[l]=t.select(e[l]);if(e.length===1)s=e[0],n=s.slideObject;else{if(e.length!==2)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);if(a.Z.isPointType(t,e[0]))s=a.Z.providePoints(t,[e[0]],o,"point")[0],n=e[1];else{if(!a.Z.isPointType(t,e[1]))throw new Error("JSXGraph: Can't create normal with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);n=e[0],s=a.Z.providePoints(t,[e[1]],o,"point")[0]}}if(Z=a.Z.copyAttributes(o,t.options,"normal"),n.elementClass===x.Z.OBJECT_CLASS_LINE)P=a.Z.copyAttributes(o,t.options,"normal","point"),C=t.create("point",[function(){var S=B.Z.crossProduct([1,0,0],n.stdform);return[S[0],-S[2],S[1]]}],P),C.isDraggable=!0,(h=t.create("line",[s,C],Z)).point=C,h.subs={point:C},h.inherits.push(C);else if(n.elementClass===x.Z.OBJECT_CLASS_CIRCLE)h=t.create("line",[n.midpoint,s],Z);else if(n.elementClass===x.Z.OBJECT_CLASS_CURVE)a.Z.evaluate(n.visProp.curvetype)!=="plot"?(p=n.X,d=n.Y,h=t.create("line",[function(){return-s.X()*c.Z.D(p)(s.position)-s.Y()*c.Z.D(d)(s.position)},function(){return c.Z.D(p)(s.position)},function(){return c.Z.D(d)(s.position)}],Z)):h=t.create("line",[function(){var S,w,D,k,I,U,J,z,V,W,$=Math.floor(s.position),nt=s.position-$;if(n.bezierdegree===1)$===n.numberPoints-1&&($-=1,nt=1);else{if(n.bezierDegree!==3)return 0;$=3*Math.floor(s.position*(n.numberPoints-1)/3),D=(s.position*(n.numberPoints-1)-$)/3,$>=n.numberPoints-1&&($=n.numberPoints-4,D=1)}return $<0?1:n.bezierDegree===1?(n.Y($)+nt*(n.Y($+1)-n.Y($)))*(n.Y($)-n.Y($+1))-(n.X($)+nt*(n.X($+1)-n.X($)))*(n.X($+1)-n.X($)):(k=n.points[$].usrCoords,I=n.points[$+1].usrCoords,U=n.points[$+2].usrCoords,J=n.points[$+3].usrCoords,z=(1-D)*(1-D)*(I[1]-k[1])+2*(1-D)*D*(U[1]-I[1])+D*D*(J[1]-U[1]),V=(1-D)*(1-D)*(I[2]-k[2])+2*(1-D)*D*(U[2]-I[2])+D*D*(J[2]-U[2]),z/=W=Math.sqrt(z*z+V*V),V/=W,w=[1,(S=s.coords.usrCoords)[1]-V,S[2]+z],S[2]*w[1]-S[1]*w[2])},function(){var S,w,D,k,I,U,J,z,V,W=Math.floor(s.position);if(n.bezierdegree===1)W===n.numberPoints-1&&(W-=1);else{if(n.bezierDegree!==3)return 0;W=3*Math.floor(s.position*(n.numberPoints-1)/3),w=(s.position*(n.numberPoints-1)-W)/3,W>=n.numberPoints-1&&(W=n.numberPoints-4,w=1)}return W<0?0:n.bezierDegree===1?n.X(W+1)-n.X(W):(D=n.points[W].usrCoords,k=n.points[W+1].usrCoords,I=n.points[W+2].usrCoords,U=n.points[W+3].usrCoords,J=(1-w)*(1-w)*(k[1]-D[1])+2*(1-w)*w*(I[1]-k[1])+w*w*(U[1]-I[1]),z=(1-w)*(1-w)*(k[2]-D[2])+2*(1-w)*w*(I[2]-k[2])+w*w*(U[2]-I[2]),J/=V=Math.sqrt(J*J+z*z),z/=V,[1,(S=s.coords.usrCoords)[1]-z,S[2]+J][2]-S[2])},function(){var S,w,D,k,I,U,J,z,V,W,$=Math.floor(s.position);if(n.bezierdegree===1)$===n.numberPoints-1&&($-=1);else{if(n.bezierDegree!==3)return 0;$=3*Math.floor(s.position*(n.numberPoints-1)/3),D=(s.position*(n.numberPoints-1)-$)/3,$>=n.numberPoints-1&&($=n.numberPoints-4,D=1)}return $<0?0:n.bezierDegree===1?n.Y($+1)-n.Y($):(k=n.points[$].usrCoords,I=n.points[$+1].usrCoords,U=n.points[$+2].usrCoords,J=n.points[$+3].usrCoords,z=(1-D)*(1-D)*(I[1]-k[1])+2*(1-D)*D*(U[1]-I[1])+D*D*(J[1]-U[1]),V=(1-D)*(1-D)*(I[2]-k[2])+2*(1-D)*D*(U[2]-I[2])+D*D*(J[2]-U[2]),z/=W=Math.sqrt(z*z+V*V),V/=W,w=[1,(S=s.coords.usrCoords)[1]-V,S[2]+z],S[1]-w[1])}],Z);else{if(n.type!==x.Z.OBJECT_TYPE_TURTLE)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,line], [point,circle], [glider]`);h=t.create("line",[function(){var S,w,D=Math.floor(s.position),k=s.position-D;for(w=0;w<n.objects.length;w++)if((S=n.objects[w]).type===x.Z.OBJECT_TYPE_CURVE){if(D<S.numberPoints)break;D-=S.numberPoints}return D===S.numberPoints-1&&(D-=1,k=1),D<0?1:(S.Y(D)+k*(S.Y(D+1)-S.Y(D)))*(S.Y(D)-S.Y(D+1))-(S.X(D)+k*(S.X(D+1)-S.X(D)))*(S.X(D+1)-S.X(D))},function(){var S,w,D=Math.floor(s.position);for(w=0;w<n.objects.length;w++)if((S=n.objects[w]).type===x.Z.OBJECT_TYPE_CURVE){if(D<S.numberPoints)break;D-=S.numberPoints}return D===S.numberPoints-1&&(D-=1),D<0?0:S.X(D+1)-S.X(D)},function(){var S,w,D=Math.floor(s.position);for(w=0;w<n.objects.length;w++)if((S=n.objects[w]).type===x.Z.OBJECT_TYPE_CURVE){if(D<S.numberPoints)break;D-=S.numberPoints}return D===S.numberPoints-1&&(D-=1),D<0?0:S.Y(D+1)-S.Y(D)}],Z)}return h.elType="normal",h.setParents(e),a.Z.exists(s._is_new)?(h.addChild(s),delete s._is_new):s.addChild(h),n.addChild(h),h},u.Z.createBisector=function(t,e,o){var s,n,h,l;if(e=a.Z.providePoints(t,e,o,"point"),a.Z.isPoint(e[0])&&a.Z.isPoint(e[1])&&a.Z.isPoint(e[2])){for((l=a.Z.copyAttributes(o,t.options,"bisector","point")).snapToGrid=!1,(s=t.create("point",[function(){return g.Z.angleBisector(e[0],e[1],e[2],t)}],l)).dump=!1,h=0;h<3;h++)a.Z.exists(e[h]._is_new)?(s.addChild(e[h]),delete e[h]._is_new):e[h].addChild(s);return a.Z.exists(o.layer)||(o.layer=t.options.layer.line),l=a.Z.copyAttributes(o,t.options,"bisector"),(n=u.Z.createLine(t,[e[1],s],l)).point=s,n.elType="bisector",n.setParents(e),n.subs={point:s},n.inherits.push(s),n}throw new Error("JSXGraph: Can't create angle bisector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point,point]`)},u.Z.createAngularBisectorsOfTwoLines=function(t,e,o){var s,n,h,l,p=t.select(e[0]),d=t.select(e[1]);if(p.elementClass!==x.Z.OBJECT_CLASS_LINE||d.elementClass!==x.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [line,line]`);return a.Z.exists(o.layer)||(o.layer=t.options.layer.line),h=a.Z.copyAttributes(o,t.options,"bisectorlines","line1"),s=t.create("line",[function(){var Z=Math.sqrt(p.stdform[1]*p.stdform[1]+p.stdform[2]*p.stdform[2]),C=Math.sqrt(d.stdform[1]*d.stdform[1]+d.stdform[2]*d.stdform[2]);return p.stdform[0]/Z-d.stdform[0]/C},function(){var Z=Math.sqrt(p.stdform[1]*p.stdform[1]+p.stdform[2]*p.stdform[2]),C=Math.sqrt(d.stdform[1]*d.stdform[1]+d.stdform[2]*d.stdform[2]);return p.stdform[1]/Z-d.stdform[1]/C},function(){var Z=Math.sqrt(p.stdform[1]*p.stdform[1]+p.stdform[2]*p.stdform[2]),C=Math.sqrt(d.stdform[1]*d.stdform[1]+d.stdform[2]*d.stdform[2]);return p.stdform[2]/Z-d.stdform[2]/C}],h),a.Z.exists(o.layer)||(o.layer=t.options.layer.line),h=a.Z.copyAttributes(o,t.options,"bisectorlines","line2"),n=t.create("line",[function(){var Z=Math.sqrt(p.stdform[1]*p.stdform[1]+p.stdform[2]*p.stdform[2]),C=Math.sqrt(d.stdform[1]*d.stdform[1]+d.stdform[2]*d.stdform[2]);return p.stdform[0]/Z+d.stdform[0]/C},function(){var Z=Math.sqrt(p.stdform[1]*p.stdform[1]+p.stdform[2]*p.stdform[2]),C=Math.sqrt(d.stdform[1]*d.stdform[1]+d.stdform[2]*d.stdform[2]);return p.stdform[1]/Z+d.stdform[1]/C},function(){var Z=Math.sqrt(p.stdform[1]*p.stdform[1]+p.stdform[2]*p.stdform[2]),C=Math.sqrt(d.stdform[1]*d.stdform[1]+d.stdform[2]*d.stdform[2]);return p.stdform[2]/Z+d.stdform[2]/C}],h),l=new Dt({line1:s,line2:n}),s.dump=!1,n.dump=!1,l.elType="bisectorlines",l.setParents([p.id,d.id]),l.subs={line1:s,line2:n},l},u.Z.createCircumcenter=function(t,e,o){var s,n,h,l,p;if(e=a.Z.providePoints(t,e,o,"point"),a.Z.isPoint(e[0])&&a.Z.isPoint(e[1])&&a.Z.isPoint(e[2])){for(h=e[0],l=e[1],p=e[2],s=u.Z.createPoint(t,[function(){return g.Z.circumcenter(h,l,p,t)}],o),n=0;n<3;n++)a.Z.exists(e[n]._is_new)?(s.addChild(e[n]),delete e[n]._is_new):e[n].addChild(s);return s.elType="circumcenter",s.setParents(e),s.generatePolynomial=function(){var d=h.symbolic.x,Z=h.symbolic.y,C=l.symbolic.x,P=l.symbolic.y,S=p.symbolic.x,w=p.symbolic.y,D=s.symbolic.x,k=s.symbolic.y;return[["((",D,")-(",d,"))^2+((",k,")-(",Z,"))^2-((",D,")-(",C,"))^2-((",k,")-(",P,"))^2"].join(""),["((",D,")-(",d,"))^2+((",k,")-(",Z,"))^2-((",D,")-(",S,"))^2-((",k,")-(",w,"))^2"].join("")]},s}throw new Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point,point]`)},u.Z.createIncenter=function(t,e,o){var s,n,h,l,p;if(!((e=a.Z.providePoints(t,e,o,"point")).length>=3&&a.Z.isPoint(e[0])&&a.Z.isPoint(e[1])&&a.Z.isPoint(e[2])))throw new Error("JSXGraph: Can't create incenter with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point,point]`);for(n=e[0],h=e[1],l=e[2],s=t.create("point",[function(){var d,Z,C;return d=Math.sqrt((h.X()-l.X())*(h.X()-l.X())+(h.Y()-l.Y())*(h.Y()-l.Y())),Z=Math.sqrt((n.X()-l.X())*(n.X()-l.X())+(n.Y()-l.Y())*(n.Y()-l.Y())),C=Math.sqrt((h.X()-n.X())*(h.X()-n.X())+(h.Y()-n.Y())*(h.Y()-n.Y())),new b.Z(x.Z.COORDS_BY_USER,[(d*n.X()+Z*h.X()+C*l.X())/(d+Z+C),(d*n.Y()+Z*h.Y()+C*l.Y())/(d+Z+C)],t)}],o),p=0;p<3;p++)a.Z.exists(e[p]._is_new)?(s.addChild(e[p]),delete e[p]._is_new):e[p].addChild(s);return s.elType="incenter",s.setParents(e),s},u.Z.createCircumcircle=function(t,e,o){var s,n,h,l;if((e=a.Z.providePoints(t,e,o,"point"))===!1)throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point,point]`);try{for(h=a.Z.copyAttributes(o,t.options,"circumcircle","center"),(s=u.Z.createCircumcenter(t,e,h)).dump=!1,a.Z.exists(o.layer)||(o.layer=t.options.layer.circle),h=a.Z.copyAttributes(o,t.options,"circumcircle"),(n=u.Z.createCircle(t,[s,e[0]],h)).elType="circumcircle",n.setParents(e),n.subs={center:s},n.inherits.push(n),l=0;l<3;l++)a.Z.exists(e[l]._is_new)?(n.addChild(e[l]),delete e[l]._is_new):e[l].addChild(n)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point,point]`)}return n},u.Z.createIncircle=function(t,e,o){var s,n,h,l;if((e=a.Z.providePoints(t,e,o,"point"))===!1)throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point,point]`);try{for(l=a.Z.copyAttributes(o,t.options,"incircle","center"),(n=u.Z.createIncenter(t,e,l)).dump=!1,a.Z.exists(o.layer)||(o.layer=t.options.layer.circle),l=a.Z.copyAttributes(o,t.options,"incircle"),(h=u.Z.createCircle(t,[n,function(){var p=Math.sqrt((e[1].X()-e[2].X())*(e[1].X()-e[2].X())+(e[1].Y()-e[2].Y())*(e[1].Y()-e[2].Y())),d=Math.sqrt((e[0].X()-e[2].X())*(e[0].X()-e[2].X())+(e[0].Y()-e[2].Y())*(e[0].Y()-e[2].Y())),Z=Math.sqrt((e[1].X()-e[0].X())*(e[1].X()-e[0].X())+(e[1].Y()-e[0].Y())*(e[1].Y()-e[0].Y())),C=(p+d+Z)/2;return Math.sqrt((C-p)*(C-d)*(C-Z)/C)}],l)).elType="incircle",h.setParents(e),s=0;s<3;s++)a.Z.exists(e[s]._is_new)?(h.addChild(e[s]),delete e[s]._is_new):e[s].addChild(h);h.center=n,h.subs={center:h.center},h.inherits.push(n)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+`'.
Possible parent types: [point,point,point]`)}return h},u.Z.createReflection=function(t,e,o){var s,n,h,l,p,d,Z,C,P=`
Possible parent types: [point|line|curve|polygon|circle|arc|sector, line]`;for(d=0;d<e.length;++d)e[d]=t.select(e[d]);if(Z=a.Z.copyAttributes(o,t.options,"reflection"),a.Z.isPoint(e[0]))n=a.Z.providePoints(t,[e[0]],C)[0];else{if(e[0].elementClass!==x.Z.OBJECT_CLASS_CURVE&&e[0].elementClass!==x.Z.OBJECT_CLASS_LINE&&e[0].type!==x.Z.OBJECT_TYPE_POLYGON&&e[0].elementClass!==x.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflection element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+P);n=e[0]}if(e[1].elementClass!==x.Z.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+P);if(s=e[1],p=u.Z.createTransform(t,[s],{type:"reflect"}),a.Z.isPoint(n))h=u.Z.createPoint(t,[n,p],Z);else if(n.elementClass===x.Z.OBJECT_CLASS_CURVE)h=u.Z.createCurve(t,[n,p],Z);else if(n.elementClass===x.Z.OBJECT_CLASS_LINE)h=u.Z.createLine(t,[n,p],Z);else if(n.type===x.Z.OBJECT_TYPE_POLYGON)h=u.Z.createPolygon(t,[n,p],Z);else{if(n.elementClass!==x.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+P);Z.type.toLowerCase()==="euclidean"?(C=a.Z.copyAttributes(o,t.options,"reflection","center"),(l=u.Z.createPoint(t,[n.center,p],C)).prepareUpdate().update().updateVisibility(a.Z.evaluate(l.visProp.visible)).updateRenderer(),h=u.Z.createCircle(t,[l,function(){return n.Radius()}],Z)):h=u.Z.createCircle(t,[n,p],Z)}return a.Z.exists(n._is_new)&&(h.addChild(n),delete n._is_new),s.addChild(h),h.elType="reflection",h.addParents(s),h.prepareUpdate().update(),a.Z.isPoint(h)&&(h.generatePolynomial=function(){var S=s.point1.symbolic.x,w=s.point1.symbolic.y,D=s.point2.symbolic.x,k=s.point2.symbolic.y,I=n.symbolic.x,U=n.symbolic.y,J=h.symbolic.x,z=h.symbolic.y;return[["((",z,")-(",U,"))*((",w,")-(",k,"))+((",S,")-(",D,"))*((",J,")-(",I,"))"].join(""),["((",J,")-(",S,"))^2+((",z,")-(",w,"))^2-((",I,")-(",S,"))^2-((",U,")-(",w,"))^2"].join("")]}),h},u.Z.createMirrorElement=function(t,e,o){var s,n,h,l,p,d,Z,C,P=`
Possible parent types: [point|line|curve|polygon|circle|arc|sector, point]`;for(n=0;n<e.length;++n)e[n]=t.select(e[n]);if(Z=a.Z.copyAttributes(o,t.options,"mirrorelement"),a.Z.isPoint(e[0]))s=a.Z.providePoints(t,[e[0]],Z)[0];else{if(e[0].elementClass!==x.Z.OBJECT_CLASS_CURVE&&e[0].elementClass!==x.Z.OBJECT_CLASS_LINE&&e[0].type!==x.Z.OBJECT_TYPE_POLYGON&&e[0].elementClass!==x.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+P);s=e[0]}if(!a.Z.isPoint(e[1]))throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+P);if(C=a.Z.copyAttributes(o,t.options,"mirrorelement","point"),h=a.Z.providePoints(t,[e[1]],C)[0],d=u.Z.createTransform(t,[Math.PI,h],{type:"rotate"}),a.Z.isPoint(s))l=u.Z.createPoint(t,[s,d],Z);else if(s.elementClass===x.Z.OBJECT_CLASS_CURVE)l=u.Z.createCurve(t,[s,d],Z);else if(s.elementClass===x.Z.OBJECT_CLASS_LINE)l=u.Z.createLine(t,[s,d],Z);else if(s.type===x.Z.OBJECT_TYPE_POLYGON)l=u.Z.createPolygon(t,[s,d],Z);else{if(s.elementClass!==x.Z.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+P);Z.type.toLowerCase()==="euclidean"?(C=a.Z.copyAttributes(o,t.options,"mirrorelement","center"),(p=u.Z.createPoint(t,[s.center,d],C)).prepareUpdate().update().updateVisibility(a.Z.evaluate(p.visProp.visible)).updateRenderer(),l=u.Z.createCircle(t,[p,function(){return s.Radius()}],Z)):l=u.Z.createCircle(t,[s,d],Z)}return a.Z.exists(s._is_new)&&(l.addChild(s),delete s._is_new),h.addChild(l),l.elType="mirrorelement",l.addParents(h),l.prepareUpdate().update(),l},u.Z.createMirrorPoint=function(t,e,o){var s=u.Z.createMirrorElement(t,e,o);return s.elType="mirrorpoint",s},u.Z.createIntegral=function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U=null;if(a.Z.isArray(e[0])&&e[1].elementClass===x.Z.OBJECT_CLASS_CURVE)s=e[0],n=e[1];else{if(!a.Z.isArray(e[1])||e[0].elementClass!==x.Z.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create integral with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [[number|function,number|function],curve]`);s=e[1],n=e[0]}return(h=a.Z.copyAttributes(o,t.options,"integral")).withLabel=!1,I=t.create("curve",[[0],[0]],h),l=s[0],p=s[1],a.Z.isFunction(l)?(Z=function(){return n.Y(d())},l=(d=l)()):(d=l,Z=n.Y(l)),a.Z.isFunction(p)?(P=function(){return n.Y(C())},p=(C=p)()):(C=p,P=n.Y(p)),h=a.Z.copyAttributes(o,t.options,"integral","curveLeft"),S=t.create("glider",[d,Z,n],h),a.Z.isFunction(d)&&S.hideElement(),h=a.Z.copyAttributes(o,t.options,"integral","baseLeft"),w=t.create("point",[function(){return a.Z.evaluate(I.visProp.axis)==="y"?0:S.X()},function(){return a.Z.evaluate(I.visProp.axis)==="y"?S.Y():0}],h),h=a.Z.copyAttributes(o,t.options,"integral","curveRight"),D=t.create("glider",[C,P,n],h),a.Z.isFunction(C)&&D.hideElement(),h=a.Z.copyAttributes(o,t.options,"integral","baseRight"),k=t.create("point",[function(){return a.Z.evaluate(I.visProp.axis)==="y"?0:D.X()},function(){return a.Z.evaluate(I.visProp.axis)==="y"?D.Y():0}],h),(h=a.Z.copyAttributes(o,t.options,"integral")).withlabel!==!1&&h.axis!=="y"&&(h=a.Z.copyAttributes(o,t.options,"integral","label"),h=a.Z.copyAttributes(h,t.options,"label"),(U=t.create("text",[function(){var J=new b.Z(x.Z.COORDS_BY_SCREEN,[a.Z.evaluate(this.visProp.offset[0])+this.board.origin.scrCoords[1],0],this.board,!1),z=this.board.getBoundingBox(),V=.1*(z[2]-z[0]),W=D.X();return W<z[0]?W=z[0]+V:W>z[2]&&(W=z[2]-V),W+J.usrCoords[1]},function(){var J=new b.Z(x.Z.COORDS_BY_SCREEN,[0,a.Z.evaluate(this.visProp.offset[1])+this.board.origin.scrCoords[2]],this.board,!1),z=this.board.getBoundingBox(),V=.1*(z[1]-z[3]),W=D.Y();return W>z[1]?W=z[1]-V:W<z[3]&&(W=z[3]+V),W+J.usrCoords[2]},function(){var J=c.Z.NewtonCotes([w.X(),k.X()],n.Y);return"&int; = "+a.Z.toFixed(J,4)}],h)).dump=!1,S.addChild(U),D.addChild(U)),S.dump=!1,w.dump=!1,D.dump=!1,k.dump=!1,I.elType="integral",I.setParents([n.id,s]),I.subs={curveLeft:S,baseLeft:w,curveRight:D,baseRight:k},I.inherits.push(S,w,D,k),h.withLabel&&(I.subs.label=U,I.inherits.push(U)),I.Value=function(){return c.Z.I([w.X(),k.X()],n.Y)},I.updateDataArray=function(){var J,z,V,W,$,nt,et,lt,ot;if(a.Z.evaluate(this.visProp.axis)==="y"){for(S.Y()<D.Y()?(nt=S.X(),lt=S.Y(),et=D.X(),ot=D.Y()):(nt=D.X(),lt=D.Y(),et=S.X(),ot=S.Y()),W=Math.min(nt,et),$=Math.max(nt,et),J=[0,nt],z=[lt,lt],V=0;V<n.numberPoints;V++)lt<=n.points[V].usrCoords[2]&&W<=n.points[V].usrCoords[1]&&n.points[V].usrCoords[2]<=ot&&n.points[V].usrCoords[1]<=$&&(J.push(n.points[V].usrCoords[1]),z.push(n.points[V].usrCoords[2]));J.push(et),z.push(ot),J.push(0),z.push(ot),J.push(0),z.push(lt)}else{for(w.X()<k.X()?(W=w.X(),$=k.X()):(W=k.X(),$=w.X()),J=[W,W],z=[0,n.Y(W)],V=0;V<n.numberPoints;V++)W<=n.points[V].usrCoords[1]&&n.points[V].usrCoords[1]<=$&&(J.push(n.points[V].usrCoords[1]),z.push(n.points[V].usrCoords[2]));J.push($),z.push(n.Y($)),J.push($),z.push(0),J.push(W),z.push(0)}this.dataX=J,this.dataY=z},S.addChild(I),D.addChild(I),w.addChild(I),k.addChild(I),I.baseLeft=w,I.baseRight=k,I.curveLeft=S,I.curveRight=D,I.methodMap=u.Z.deepCopy(I.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),I.label=U,I},u.Z.createGrid=function(t,e,o){var s,n;return n=a.Z.copyAttributes(o,t.options,"grid"),(s=t.create("curve",[[null],[null]],n)).elType="grid",s.type=x.Z.OBJECT_TYPE_GRID,s.updateDataArray=function(){var h,l,p,d,Z,C=a.Z.evaluate(this.visProp.gridx),P=a.Z.evaluate(this.visProp.gridy);for(d=a.Z.isArray(this.visProp.topleft)?new b.Z(a.Z.evaluate(this.visProp.tltype)||x.Z.COORDS_BY_USER,this.visProp.topleft,t):new b.Z(x.Z.COORDS_BY_SCREEN,[0,0],t),Z=a.Z.isArray(this.visProp.bottomright)?new b.Z(a.Z.evaluate(this.visProp.brtype)||x.Z.COORDS_BY_USER,this.visProp.bottomright,t):new b.Z(x.Z.COORDS_BY_SCREEN,[t.canvasWidth,t.canvasHeight],t),t.options.grid.hasGrid=!0,s.dataX=[],s.dataY=[],h=Math.floor(d.usrCoords[2]/P)*P,l=Math.ceil(Z.usrCoords[2]/P)*P,d.usrCoords[2]<Z.usrCoords[2]&&(h=Math.ceil(Z.usrCoords[2]/P)*P,l=Math.floor(d.usrCoords[2]/P)*P),p=h;p>l-P;p-=P)s.dataX.push(d.usrCoords[1],Z.usrCoords[1],NaN),s.dataY.push(p,p,NaN);for(h=Math.ceil(d.usrCoords[1]/C)*C,l=Math.floor(Z.usrCoords[1]/C)*C,d.usrCoords[1]>Z.usrCoords[1]&&(h=Math.floor(Z.usrCoords[1]/C)*C,l=Math.ceil(d.usrCoords[1]/C)*C),p=h;p<l+C;p+=C)s.dataX.push(p,p,NaN),s.dataY.push(d.usrCoords[2],Z.usrCoords[2],NaN)},s.hasPoint=function(){return!1},t.grids.push(s),s},u.Z.createInequality=function(t,e,o){var s,n,h;if(h=a.Z.copyAttributes(o,t.options,"inequality"),e[0].elementClass===x.Z.OBJECT_CLASS_LINE)(n=t.create("curve",[[],[]],h)).hasPoint=function(){return!1},n.updateDataArray=function(){var l,p,d,Z=t.getBoundingBox(),C=h.inverse?-1:1,P=1.5*Math.max(Z[2]-Z[0],Z[1]-Z[3]),S={coords:{usrCoords:[1,(Z[0]+Z[2])/2,h.inverse?Z[1]:Z[3]]}},w=e[0].stdform.slice(1),D=w;d=1.5*Math.max(g.Z.perpendicular(e[0],S,t)[0].distance(x.Z.COORDS_BY_USER,S.coords),P),d*=C,S={coords:{usrCoords:[1,(Z[0]+Z[2])/2,(Z[1]+Z[3])/2]}},l=[1,(S=Math.abs(B.Z.innerProduct(S.coords.usrCoords,e[0].stdform,3))>=B.Z.eps?g.Z.perpendicular(e[0],S,t)[0].usrCoords:S.coords.usrCoords)[1]+w[1]*P,S[2]-w[0]*P],p=[1,S[1]-D[1]*P,S[2]+D[0]*P],this.dataX=[l[1],l[1]+w[0]*d,p[1]+D[0]*d,p[1],l[1]],this.dataY=[l[2],l[2]+w[1]*d,p[2]+D[1]*d,p[2],l[2]]};else if(e[0].elementClass===x.Z.OBJECT_CLASS_CURVE&&e[0].visProp.curvetype==="functiongraph")(n=t.create("curve",[[],[]],h)).updateDataArray=function(){var l,p,d,Z,C,P,S,w,D,k=this.board.getBoundingBox(),I=[],U=e[0].minX(),J=e[0].maxX(),z=.3*(k[1]-k[3]);if(l=a.Z.evaluate(this.visProp.inverse)?1:3,this.dataX=[],this.dataY=[],(Z=e[0].points.length)!==0)for(k[1]+=z,k[3]-=z,d=-1;d<Z-1;){for(C=d+1,p=Z;C<Z;C++)if(e[0].points[C].isReal()){p=C;break}if(p>=Z)break;for(C=p,d=Z-1;C<Z-1;C++)if(!e[0].points[C+1].isReal()){d=C;break}for(w=e[0].points[p].usrCoords[1],D=e[0].points[d].usrCoords[1],P=k[0]<U?U:k[0],S=k[2]>J?J:k[2],P=p===0?P:Math.max(P,w),S=d===Z-1?S:Math.min(S,D),S=d===Z-1?J:D,(I=[]).push([1,P=p===0?U:w,k[l]]),I.push([1,P,e[0].points[p].usrCoords[2]]),C=p;C<=d;C++)I.push(e[0].points[C].usrCoords);for(I.push([1,S,e[0].points[d].usrCoords[2]]),I.push([1,S,k[l]]),I.push(I[0]),C=0;C<I.length;C++)this.dataX.push(I[C][1]),this.dataY.push(I[C][2]);d<Z-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},n.hasPoint=function(){return!1};else if(s=a.Z.createFunction(e[0]),n.addParentsFromJCFunctions([s]),!a.Z.exists(s))throw new Error(`JSXGraph: Can't create area with the given parents.
Possible parent types: [line], [function]`);return n.addParents(e[0]),n},u.Z.registerElement("arrowparallel",u.Z.createArrowParallel),u.Z.registerElement("bisector",u.Z.createBisector),u.Z.registerElement("bisectorlines",u.Z.createAngularBisectorsOfTwoLines),u.Z.registerElement("msector",u.Z.createMsector),u.Z.registerElement("circumcircle",u.Z.createCircumcircle),u.Z.registerElement("circumcirclemidpoint",u.Z.createCircumcenter),u.Z.registerElement("circumcenter",u.Z.createCircumcenter),u.Z.registerElement("incenter",u.Z.createIncenter),u.Z.registerElement("incircle",u.Z.createIncircle),u.Z.registerElement("integral",u.Z.createIntegral),u.Z.registerElement("midpoint",u.Z.createMidpoint),u.Z.registerElement("mirrorelement",u.Z.createMirrorElement),u.Z.registerElement("mirrorpoint",u.Z.createMirrorPoint),u.Z.registerElement("normal",u.Z.createNormal),u.Z.registerElement("orthogonalprojection",u.Z.createOrthogonalProjection),u.Z.registerElement("parallel",u.Z.createParallel),u.Z.registerElement("parallelpoint",u.Z.createParallelPoint),u.Z.registerElement("perpendicular",u.Z.createPerpendicular),u.Z.registerElement("perpendicularpoint",u.Z.createPerpendicularPoint),u.Z.registerElement("perpendicularsegment",u.Z.createPerpendicularSegment),u.Z.registerElement("reflection",u.Z.createReflection),u.Z.registerElement("grid",u.Z.createGrid),u.Z.registerElement("inequality",u.Z.createInequality),u.Z.createLocus=function(t,e,o){var s,n;if(!a.Z.isArray(e)||e.length!==1||!a.Z.isPoint(e[0]))throw new Error(`JSXGraph: Can't create locus with parent of type other than point.
Possible parent types: [point]`);return n=e[0],(s=t.create("curve",[[null],[null]],o)).dontCallServer=!1,s.elType="locus",s.setParents([n.id]),s.updateDataArray=function(){var h,l,p;s.board.mode>0||(h=tt.generatePolynomials(t,n,!0).join("|"))!==s.spe&&(s.spe=h,l=function(d,Z,C,P){var S;s.dataX=d,s.dataY=Z,s.eq=C,s.ctime=P,s.generatePolynomial=(S=C,function(w){var D,k="("+w.symbolic.x+")",I="("+w.symbolic.y+")",U=[];for(D=0;D<S.length;D++)U[D]=S[D].replace(/\*\*/g,"^").replace(/x/g,k).replace(/y/g,I);return U})},l((p=tt.geometricLocusByGroebnerBase(t,n,l)).datax,p.datay,p.polynomial,p.exectime))},s},u.Z.registerElement("locus",u.Z.createLocus),__webpack_require__(573),u.Z.Image=function(t,e,o,s,n){this.constructor(t,o,x.Z.OBJECT_TYPE_IMAGE,x.Z.OBJECT_CLASS_OTHER),this.element=this.board.select(o.anchor),this.coordsConstructor(e),this.W=a.Z.createFunction(n[0],this.board,""),this.H=a.Z.createFunction(n[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*t.unitX),Math.abs(this.usrSize[1]*t.unitY)],this.url=s,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=u.Z.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},u.Z.Image.prototype=new Gt.Z,a.Z.copyPrototypeMethods(u.Z.Image,oe.Z,"coordsConstructor"),u.Z.extend(u.Z.Image.prototype,{hasPoint:function(t,e){var o,s,n,h,l,p,d,Z,C,P=this.transformations.length;return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(h=this.board._inputDevice,l=a.Z.evaluate(this.visProp.precision[h])):l=this.board.options.precision.hasPoint,P===0?(o=t-this.coords.scrCoords[1],s=this.coords.scrCoords[2]-e,o>=-(n=l)&&o-this.size[0]<=n&&s>=-n&&s-this.size[1]<=n):(d=[(p=(p=new b.Z(x.Z.COORDS_BY_SCREEN,[t,e],this.board)).usrCoords)[0]-this.span[0][0],p[1]-this.span[0][1],p[2]-this.span[0][2]],0<=(Z=(C=B.Z.innerProduct)(d,this.span[1]))&&Z<=C(this.span[1],this.span[1])&&0<=(Z=C(d,this.span[2]))&&Z<=C(this.span[2],this.span[2]))},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateSize(),this.updateSpan(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var t,e,o=this.transformations.length,s=[];if(o===0)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(s[0]=[this.Z(),this.X(),this.Y()],s[1]=[this.Z(),this.X()+this.W(),this.Y()],s[2]=[this.Z(),this.X(),this.Y()+this.H()],t=0;t<o;t++)for(e=0;e<3;e++)s[e]=B.Z.matVecMult(this.transformations[t].matrix,s[e]);for(e=0;e<3;e++)s[e][1]/=s[e][0],s[e][2]/=s[e][0],s[e][0]/=s[e][0];for(e=1;e<3;e++)s[e][0]-=s[0][0],s[e][1]-=s[0][1],s[e][2]-=s[0][2];this.span=s}return this},addTransform:function(t){var e;if(a.Z.isArray(t))for(e=0;e<t.length;e++)this.transformations.push(t[e]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return this.parents.length!==0&&(t=this.parents),t},setSize:function(t,e){return this.W=a.Z.createFunction(t,this.board,""),this.H=a.Z.createFunction(e,this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),u.Z.createImage=function(t,e,o){var s,n,h=e[0],l=e[1],p=e[2];if(s=a.Z.copyAttributes(o,t.options,"image"),!(n=oe.Z.create(u.Z.Image,t,l,s,h,p)))throw new Error("JSXGraph: Can't create image with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [x,y], [z,x,y], [element,transformation]`);return s.rotate!==0&&n.addRotation(s.rotate),n},u.Z.registerElement("image",u.Z.createImage),u.Z.Image,u.Z.createSlider=function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U,J,z,V,W,$,nt;return z=(nt=a.Z.copyAttributes(o,t.options,"slider")).withticks,J=nt.withlabel,V=nt.snapwidth,nt=a.Z.copyAttributes(o,t.options,"slider","point1"),Z=t.create("point",e[0],nt),nt=a.Z.copyAttributes(o,t.options,"slider","point2"),C=t.create("point",e[1],nt),nt=a.Z.copyAttributes(o,t.options,"slider","baseline"),(S=t.create("segment",[Z,C],nt)).updateStdform(),s=Z.coords.usrCoords.slice(1),n=C.coords.usrCoords.slice(1),h=e[2][0],l=e[2][1],p=e[2][2],d=p-h,$=(W=a.Z.evaluate(V))===-1?l:Math.round(l/W)*W,I=s[0]+(n[0]-s[0])*($-h)/(p-h),U=s[1]+(n[1]-s[1])*($-h)/(p-h),(nt=a.Z.copyAttributes(o,t.options,"slider")).withLabel=!1,(P=t.create("glider",[I,U,S],nt)).setAttribute({snapwidth:V}),nt=a.Z.copyAttributes(o,t.options,"slider","highline"),w=t.create("segment",[Z,P],nt),P.Value=function(){var et=this._smax-this._smin,lt=a.Z.evaluate(this.visProp.snapwidth);return lt===-1?this.position*et+this._smin:Math.round((this.position*et+this._smin)/lt)*lt},P.methodMap=a.Z.deepCopy(P.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin"}),P._smax=p,P._smin=h,P.setMax=function(et){return this._smax=et,this},P.setValue=function(et){var lt=this._smax-this._smin;return Math.abs(lt)>B.Z.eps?this.position=(et-this._smin)/lt:this.position=0,this.position=Math.max(0,Math.min(1,this.position)),this},P.setMin=function(et){return this._smin=et,this},J&&(nt=a.Z.copyAttributes(o,t.options,"slider","label"),k=t.create("text",[function(){return .05*(C.X()-Z.X())+C.X()},function(){return .05*(C.Y()-Z.Y())+C.Y()},function(){var et,lt=a.Z.evaluate(P.visProp.digits),ot=a.Z.evaluate(P.visProp.suffixlabel),gt=a.Z.evaluate(P.visProp.unitlabel),vt=a.Z.evaluate(P.visProp.postlabel);return lt===2&&a.Z.evaluate(P.visProp.precision)!==2&&(lt=a.Z.evaluate(P.visProp.precision)),et=ot!==null?ot:P.name&&P.name!==""?P.name+" = ":"",et+=a.Z.toFixed(P.Value(),lt),gt!==null&&(et+=gt),vt!==null&&(et+=vt),et}],nt),P.label=k,P.visProp.withlabel=!0,P.hasLabel=!0),P.point1=Z,P.point2=C,P.baseline=S,P.highline=w,z&&(nt=a.Z.copyAttributes(o,t.options,"slider","ticks"),a.Z.exists(nt.generatelabeltext)||(nt.generateLabelText=function(et,lt,ot){var gt=P.point1.Dist(P.point2),vt=P._smin,Tt=P._smax,Rt=this.getDistanceFromZero(lt,et)*(Tt-vt)/gt+vt;return gt<B.Z.eps||Math.abs(Rt)<B.Z.eps?"0":this.formatLabelText(Rt)}),D=t.create("ticks",[P.baseline,P.point1.Dist(Z)/2,function(et){var lt=P.point1.Dist(P.point2),ot=P.point1.coords.distance(x.Z.COORDS_BY_USER,et);return lt<B.Z.eps?0:ot/lt*d+h}],nt),P.ticks=D),P.remove=function(){J&&t.removeObject(k),t.removeObject(w),t.removeObject(S),t.removeObject(C),t.removeObject(Z),_e.prototype.remove.call(P)},Z.dump=!1,C.dump=!1,S.dump=!1,w.dump=!1,J&&(k.dump=!1),P.elType="slider",P.parents=e,P.subs={point1:Z,point2:C,baseLine:S,highLine:w},P.inherits.push(Z,C,S,w),z&&(D.dump=!1,P.subs.ticks=D,P.inherits.push(D)),P.getParents=function(){return[this.point1.coords.usrCoords.slice(1),this.point2.coords.usrCoords.slice(1),[this._smin,this.position*(this._smax-this._smin)+this._smin,this._smax]]},P.baseline.on("up",function(et){var lt,ot;a.Z.evaluate(P.visProp.moveonup)&&!a.Z.evaluate(P.visProp.fixed)&&(lt=S.board.getMousePosition(et,0),ot=new b.Z(x.Z.COORDS_BY_SCREEN,lt,this.board),P.moveTo([ot.usrCoords[1],ot.usrCoords[2]]),P.triggerEventHandlers(["drag"],[et]))}),P.prepareUpdate().update(),t.isSuspendedUpdate||(P.updateVisibility().updateRenderer(),P.baseline.updateVisibility().updateRenderer(),P.highline.updateVisibility().updateRenderer(),z&&P.ticks.updateVisibility().updateRenderer()),P},u.Z.registerElement("slider",u.Z.createSlider),u.Z.createTapemeasure=function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w;return s=e[0],n=e[1],h=a.Z.copyAttributes(o,t.options,"tapemeasure","point1"),C=t.create("point",s,h),h=a.Z.copyAttributes(o,t.options,"tapemeasure","point2"),P=t.create("point",n,h),C.setAttribute({ignoredSnapToPoints:[P]}),P.setAttribute({ignoredSnapToPoints:[C]}),h=a.Z.copyAttributes(o,t.options,"tapemeasure"),l=h.withticks,p=h.withlabel,(d=h.digits)===2&&h.precision!==2&&(d=h.precision),p&&(h.withlabel=!0),Z=t.create("segment",[C,P],h),p&&(S=o.name&&o.name!==""?o.name+" = ":"",Z.label.setText(function(){return S+a.Z.toFixed(C.Dist(P),d)})),l&&(h=a.Z.copyAttributes(o,t.options,"tapemeasure","ticks"),w=t.create("ticks",[Z,.1],h),Z.inherits.push(w)),Z.remove=function(){l&&Z.removeTicks(w),t.removeObject(P),t.removeObject(C),Gt.Z.prototype.remove.call(this)},Z.Value=function(){return C.Dist(P)},C.dump=!1,P.dump=!1,Z.elType="tapemeasure",Z.getParents=function(){return[[C.X(),C.Y()],[P.X(),P.Y()]]},Z.subs={point1:C,point2:P},l&&(w.dump=!1),Z.methodMap=u.Z.deepCopy(Z.methodMap,{Value:"Value"}),Z.prepareUpdate().update(),t.isSuspendedUpdate||(Z.updateVisibility().updateRenderer(),Z.point1.updateVisibility().updateRenderer(),Z.point2.updateVisibility().updateRenderer()),Z},u.Z.registerElement("tapemeasure",u.Z.createTapemeasure),u.Z.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},u.Z.extend(u.Z.DataSource.prototype,{loadFromArray:function(t,e,o){var s,n,h;if(a.Z.isArray(e)&&(this.columnHeaders=e,e=!1),a.Z.isArray(o)&&(this.rowHeaders=o,o=!1),this.data=[],e&&(this.columnHeaders=[]),o&&(this.rowHeaders=[]),a.Z.exists(t)){for(this.data=[],s=0;s<t.length;s++)for(this.data[s]=[],n=0;n<t[s].length;n++)h=t[s][n],parseFloat(h).toString()===h?this.data[s][n]=parseFloat(h):this.data[s][n]=h!=="-"?h:NaN;if(e&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),o)for(this.rowHeaders=[],s=0;s<this.data.length;s++)this.rowHeaders.push(this.data[s][0]),this.data[s]=this.data[s].slice(1)}return this},loadFromTable:function(t,e,o){var s,n,h,l,p;if(a.Z.isArray(e)&&(this.columnHeaders=e,e=!1),a.Z.isArray(o)&&(this.rowHeaders=o,o=!1),this.data=[],e&&(this.columnHeaders=[]),o&&(this.rowHeaders=[]),t=document.getElementById(t),a.Z.exists(t)){for(s=t.getElementsByTagName("tr"),this.data=[],n=0;n<s.length;n++)for(l=s[n].getElementsByTagName("td"),this.data[n]=[],h=0;h<l.length;h++)p=l[h].innerHTML,parseFloat(p).toString()===p?this.data[n][h]=parseFloat(p):this.data[n][h]=p!=="-"?p:NaN;if(e&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),o)for(this.rowHeaders=[],n=0;n<this.data.length;n++)this.rowHeaders.push(this.data[n][0]),this.data[n]=this.data[n].slice(1)}return this},addColumn:function(t,e,o){throw new Error("not implemented")},addRow:function(t,e,o){throw new Error("not implemented")},getColumn:function(t){var e,o=[];if(a.Z.isString(t)){for(e=0;e<this.columnHeaders.length;e++)if(t===this.columnHeaders[e]){t=e;break}}for(e=0;e<this.data.length;e++)this.data[e].length>t&&(o[e]=parseFloat(this.data[e][t]));return o},getRow:function(t){var e,o;if(a.Z.isString(t)){for(o=0;o<this.rowHeaders.length;o++)if(t===this.rowHeaders[o]){t=o;break}}for(e=[],o=0;o<this.data[t].length;o++)e[o]=this.data[t][o];return e}});const Ce=u.Z.DataSource;u.Z.Chart=function(t,e,o){var s,n,h,l,p,d;if(this.constructor(t,o),!a.Z.isArray(e)||e.length===0)throw new Error("JSXGraph: Can't create a chart without data");if(this.elements=[],a.Z.isNumber(e[0]))for(n=e,s=[],h=0;h<n.length;h++)s[h]=h+1;else if(e.length===1&&a.Z.isArray(e[0]))for(n=e[0],s=[],d=a.Z.evaluate(n).length,h=0;h<d;h++)s[h]=h+1;else e.length===2&&(d=Math.min(e[0].length,e[1].length),s=e[0].slice(0,d),n=e[1].slice(0,d));if(a.Z.isArray(n)&&n.length===0)throw new Error("JSXGraph: Can't create charts without data.");for(p=o.chartstyle.replace(/ /g,"").split(","),h=0;h<p.length;h++){switch(p[h]){case"bar":l=this.drawBar(t,s,n,o);break;case"line":l=this.drawLine(t,s,n,o);break;case"fit":l=this.drawFit(t,s,n,o);break;case"spline":l=this.drawSpline(t,s,n,o);break;case"pie":l=this.drawPie(t,n,o);break;case"point":l=this.drawPoints(t,s,n,o);break;case"radar":l=this.drawRadar(t,e,o)}this.elements.push(l)}return this.id=this.board.setId(this,"Chart"),this.elements},u.Z.Chart.prototype=new Gt.Z,u.Z.extend(u.Z.Chart.prototype,{drawLine:function(t,e,o,s){return s.fillcolor="none",s.highlightfillcolor="none",t.create("curve",[e,o],s)},drawSpline:function(t,e,o,s){return s.fillColor="none",s.highlightfillcolor="none",t.create("spline",[e,o],s)},drawFit:function(t,e,o,s){var n=s.degree;return n=Math.max(parseInt(n,10),1)||1,s.fillcolor="none",s.highlightfillcolor="none",t.create("functiongraph",[c.Z.regressionPolynomial(n,e,o)],s)},drawBar:function(t,e,o,s){var n,h,l,p,d,Z,C,P,S,w,D=[],k=[],I=function(J,z){return function(){return e[J]()-z*l}},U={fixed:!0,withLabel:!1,visible:!1,name:""};if((S=a.Z.copyAttributes(s,t.options,"chart"))&&S.width)l=S.width;else{if(e.length<=1)l=1;else for(l=e[1]-e[0],n=1;n<e.length-1;n++)l=e[n+1]-e[n]<l?e[n+1]-e[n]:l;l*=.8}for(w=a.Z.copyAttributes(s,t.options,"chart","label"),n=0;n<e.length;n++)a.Z.isFunction(e[n])?(p=I(n,-.5),d=I(n,0),Z=I(n,.5)):(p=e[n]-.5*l,d=e[n],Z=e[n]+.5*l),C=a.Z.isFunction(o[n])?o[n]():o[n],C=o[n],S.dir==="horizontal"?(k[0]=t.create("point",[0,p],U),k[1]=t.create("point",[C,p],U),k[2]=t.create("point",[C,Z],U),k[3]=t.create("point",[0,Z],U),a.Z.exists(S.labels)&&a.Z.exists(S.labels[n])&&(w.anchorY="middle",(h=t.create("text",[C,d,S.labels[n]],w)).visProp.anchorx=function(J){return function(){return J.X()>=0?"left":"right"}}(h))):(k[0]=t.create("point",[p,0],U),k[1]=t.create("point",[p,C],U),k[2]=t.create("point",[Z,C],U),k[3]=t.create("point",[Z,0],U),a.Z.exists(S.labels)&&a.Z.exists(S.labels[n])&&(w.anchorX="middle",(h=t.create("text",[d,C,S.labels[n]],w)).visProp.anchory=function(J){return function(){return J.Y()>=0?"bottom":"top"}}(h))),a.Z.isArray(S.colors)&&(P=S.colors,S.fillcolor=P[n%P.length]),D[n]=t.create("polygon",k,S),a.Z.exists(S.labels)&&a.Z.exists(S.labels[n])&&(D[n].text=h);return D},drawPoints:function(t,e,o,s){var n,h=[],l=s.infoboxarray;for(s.fixed=!0,s.name="",n=0;n<e.length;n++)s.infoboxtext=!!l&&l[n%l.length],h[n]=t.create("point",[e[n],o[n]],s);return h},drawPie:function(t,e,o){var s,n,h=[],l=[],p=(m.Z.sum(e),o.colors),d=o.highlightcolors,Z=o.labels,C=o.radius||4,P=C,S=o.center||[0,0],w=S[0],D=S[1],k=function(V,W,$){return function(){var nt,et,lt,ot=0;for(et=0;et<=V;et++)ot+=parseFloat(a.Z.evaluate(e[et]));for(nt=ot,et=V+1;et<e.length;et++)nt+=parseFloat(a.Z.evaluate(e[et]));return lt=nt!==0?2*Math.PI*ot/nt:0,P()*Math[W](lt)+$}},I=function(V,W){var $=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],nt=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];a.Z.exists(this.label)&&(this.label.rendNode.style.fontSize=W*a.Z.evaluate(this.label.visProp.fontsize)+"px",this.label.fullUpdate()),this.point2.coords=new b.Z(x.Z.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+$*V,this.point1.coords.usrCoords[2]+nt*V],this.board),this.fullUpdate()},U=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),I.call(this,1.1,2))},J=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),I.call(this,.9090909,1))},z={fixed:!0,withLabel:!1,visible:!1,name:""};if(!a.Z.isArray(Z))for(Z=[],s=0;s<e.length;s++)Z[s]="";for(a.Z.isFunction(C)||(P=function(){return C}),o.highlightonsector=o.highlightonsector||!1,o.straightfirst=!1,o.straightlast=!1,n=t.create("point",[w,D],z),h[0]=t.create("point",[function(){return P()+w},function(){return D}],z),s=0;s<e.length;s++)h[s+1]=t.create("point",[k(s,"cos",w),k(s,"sin",D)],z),o.name=Z[s],o.withlabel=o.name!=="",o.fillcolor=p&&p[s%p.length],o.labelcolor=p&&p[s%p.length],o.highlightfillcolor=d&&d[s%d.length],l[s]=t.create("sector",[n,h[s],h[s+1]],o),o.highlightonsector&&(l[s].hasPoint=l[s].hasPointSector),o.highlightbysize&&(l[s].highlight=U,l[s].noHighlight=J);return{sectors:l,points:h,midpoint:n}},drawRadar:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U,J,z,V,W,$,nt,et,lt,ot,gt,vt,Tt,Rt,kt,Ft,te,qt,Pt,yt,mt,bt,pt,At,zt,ft,wt,Ot,Lt=e.length,Wt=function(){var jt,It,Et,ee,Jt=a.Z.evaluate(this.visProp.label.offset).slice(0);return jt=this.point1.X(),It=this.point2.X(),Et=this.point1.Y(),ee=this.point2.Y(),It<jt&&(Jt[0]=-Jt[0]),ee<Et&&(Jt[1]=-Jt[1]),this.setLabelRelativeCoords(Jt),new b.Z(x.Z.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},Vt=function(jt,It){var Et,ee,Jt;return Et=t.create("transform",[-(U[It]-k[It]),0],{type:"translate"}),ee=t.create("transform",[W/(J[It]+I[It]-(U[It]-k[It])),1],{type:"scale"}),Et.melt(ee),Jt=t.create("transform",[jt],{type:"rotate"}),Et.melt(Jt),Et};if(Lt<=0)throw new Error("JSXGraph radar chart: no data");if(h=o.paramarray,!a.Z.exists(h))throw new Error("JSXGraph radar chart: need paramArray attribute");if((l=h.length)<=1)throw new Error("JSXGraph radar chart: need more than one param in paramArray");for(s=0;s<Lt;s++)if(l!==e[s].length)throw new Error("JSXGraph radar chart: use data length equal to number of params ("+e[s].length+" != "+l+")");for(p=[],d=[],n=0;n<l;n++)p[n]=e[0][n],d[n]=p[n];for(s=1;s<Lt;s++)for(n=0;n<l;n++)e[s][n]>p[n]&&(p[n]=e[s][n]),e[s][n]<d[n]&&(d[n]=e[s][n]);for(Z=[],C=[],s=0;s<Lt;s++)Z[s]="",C[s]=[];for(P=[],S=[],w=o.startshiftratio||0,D=o.endshiftratio||0,s=0;s<l;s++)P[s]=(p[s]-d[s])*w,S[s]=(p[s]-d[s])*D;if(k=o.startshiftarray||P,I=o.endshiftarray||S,U=o.startarray||d,a.Z.exists(o.start))for(s=0;s<l;s++)U[s]=o.start;if(J=o.endarray||p,a.Z.exists(o.end))for(s=0;s<l;s++)J[s]=o.end;if(k.length!==l)throw new Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(I.length!==l)throw new Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(U.length!==l)throw new Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(J.length!==l)throw new Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(z=o.labelarray||Z,V=o.colors,o.highlightcolors,W=o.radius||10,wt=o.strokewidth||1,a.Z.exists(o.highlightonsector)||(o.highlightonsector=!1),$={name:o.name,id:o.id,strokewidth:wt,polystrokewidth:o.polystrokewidth||wt,strokecolor:o.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:o.fillColor||"#FFFF88",fillopacity:o.fillOpacity||.4,highlightfillcolor:o.highlightFillColor||"#FF7400",highlightstrokecolor:o.highlightStrokeColor||"black",gradient:o.gradient||"none"},et=(nt=o.center||[0,0])[0],lt=nt[1],ot=t.create("point",[et,lt],{name:"",fixed:!0,withlabel:!1,visible:!1}),vt=gt=o.startangle||0,Tt=[],Rt=[],s=0;s<l;s++)for(vt+=2*Math.PI/l,Ft=W*Math.cos(vt)+et,te=W*Math.sin(vt)+lt,Tt[s]=t.create("point",[Ft,te],{name:"",fixed:!0,withlabel:!1,visible:!1}),Rt[s]=t.create("line",[ot,Tt[s]],{name:h[s],strokeColor:$.strokecolor,strokeWidth:$.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:$.highlightstrokecolor}),Rt[s].getLabelAnchor=Wt,kt=Vt(vt,s),n=0;n<e.length;n++)Ot=e[n][s],C[n][s]=t.create("point",[Ot,0],{name:"",fixed:!0,withlabel:!1,visible:!1}),C[n][s].addTransform(C[n][s],kt);for(qt=[],s=0;s<Lt;s++)for($.labelcolor=V&&V[s%V.length],$.strokecolor=V&&V[s%V.length],$.fillcolor=V&&V[s%V.length],qt[s]=t.create("polygon",C[s],{withLines:!0,withLabel:!1,fillColor:$.fillcolor,fillOpacity:$.fillopacity,highlightFillColor:$.highlightfillcolor}),n=0;n<l;n++)qt[s].borders[n].setAttribute("strokecolor:"+V[s%V.length]),qt[s].borders[n].setAttribute("strokewidth:"+$.polystrokewidth);switch(o.legendposition||"none"){case"right":yt=o.legendleftoffset||2,mt=o.legendtopoffset||1,this.legend=t.create("legend",[et+W+yt,lt+W-mt],{labels:z,colors:V});break;case"none":break;default:u.Z.debug("Unknown legend position")}if(Pt=[],o.showcircles){for(bt=[],s=0;s<6;s++)bt[s]=20*s;if(bt[0]="0",(At=(pt=o.circlelabelarray||bt).length)<2)throw new Error("JSXGraph radar chart: too less circles in circleLabelArray");for(zt=[],kt=Vt(gt+Math.PI/l,0),$.fillcolor="none",$.highlightfillcolor="none",$.strokecolor=o.strokecolor||"black",$.strokewidth=o.circlestrokewidth||.5,$.layer=0,ft=(J[0]-U[0])/(At-1),s=0;s<At;s++)zt[s]=t.create("point",[U[0]+s*ft,0],{name:pt[s],size:0,fixed:!0,withLabel:!0,visible:!0}),zt[s].addTransform(zt[s],kt),Pt[s]=t.create("circle",[ot,zt[s]],$)}return this.rendNode=qt[0].rendNode,{circles:Pt,lines:Rt,points:C,midpoint:ot,polygons:qt}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}}),u.Z.createChart=function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U,J,z=[],V=N.Z.isBrowser?t.document.getElementById(e[0]):null;if(e.length===1&&a.Z.isString(e[0])){if(a.Z.exists(V)){if(P=a.Z.copyAttributes(o,t.options,"chart"),s=(V=new Ce().loadFromTable(e[0],P.withheaders,P.withheaders)).data,p=V.columnHeaders,n=V.rowHeaders,S=P.width,w=P.name,D=P.strokecolor,k=P.fillcolor,I=P.highlightstrokecolor,U=P.highlightfillcolor,t.suspendUpdate(),J=s.length,C=[],P.rows&&a.Z.isArray(P.rows)){for(h=0;h<J;h++)for(l=0;l<P.rows.length;l++)if(P.rows[l]===h||P.withheaders&&P.rows[l]===n[h]){C.push(s[h]);break}}else C=s;for(J=C.length,h=0;h<J;h++){if(Z=[],P.chartstyle&&P.chartstyle.indexOf("bar")!==-1){for(d=S||.8,Z.push(1-d/2+(h+.5)*d/J),l=1;l<C[h].length;l++)Z.push(Z[l-1]+1);P.width=d/J}w&&w.length===J?P.name=w[h]:P.withheaders&&(P.name=p[h]),D&&D.length===J?P.strokecolor=D[h]:P.strokecolor=_t.Z.hsv2rgb((h+1)/J*360,.9,.6),k&&k.length===J?P.fillcolor=k[h]:P.fillcolor=_t.Z.hsv2rgb((h+1)/J*360,.9,1),I&&I.length===J?P.highlightstrokecolor=I[h]:P.highlightstrokecolor=_t.Z.hsv2rgb((h+1)/J*360,.9,1),U&&U.length===J?P.highlightfillcolor=U[h]:P.highlightfillcolor=_t.Z.hsv2rgb((h+1)/J*360,.9,.6),P.chartstyle&&P.chartstyle.indexOf("bar")!==-1?z.push(new u.Z.Chart(t,[Z,C[h]],P)):z.push(new u.Z.Chart(t,[C[h]],P))}t.unsuspendUpdate()}return z}return P=a.Z.copyAttributes(o,t.options,"chart"),new u.Z.Chart(t,e,P)},u.Z.registerElement("chart",u.Z.createChart),u.Z.Legend=function(t,e,o){var s;if(this.constructor(),s=a.Z.copyAttributes(o,t.options,"legend"),this.board=t,this.coords=new b.Z(x.Z.COORDS_BY_USER,e,this.board),this.myAtts={},this.label_array=s.labelarray||s.labels,this.color_array=s.colorarray||s.colors,this.lines=[],this.myAtts.strokewidth=s.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.style=s.legendstyle||s.style,this.style!=="vertical")throw new Error("JSXGraph: Unknown legend style: "+this.style);this.drawVerticalLegend(t,s)},u.Z.Legend.prototype=new Gt.Z,u.Z.Legend.prototype.drawVerticalLegend=function(t,e){var o,s=e.linelength||1,n=(e.rowheight||20)/this.board.unitY,h=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new b.Z(x.Z.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(o=0;o<this.label_array.length;o++)this.myAtts.name=this.label_array[o],this.myAtts.strokecolor=this.color_array[o%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[o%this.color_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[o%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[o]=t.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-o*n],[this.coords.usrCoords[1]+s,this.coords.usrCoords[2]-o*n]],this.myAtts),this.lines[o].getLabelAnchor=h,this.lines[o].prepareUpdate().update().updateVisibility(a.Z.evaluate(this.lines[o].visProp.visible)).updateRenderer()},u.Z.createLegend=function(t,e,o){var s=[0,0];if(!a.Z.exists(e)||e.length!==2)throw new Error("JSXGraph: Legend element needs two numbers as parameters");return s=e,new u.Z.Legend(t,s,o)},u.Z.registerElement("legend",u.Z.createLegend),u.Z.Chart,u.Z.Legend,u.Z.Transformation=function(t,e,o){this.elementClass=x.Z.OBJECT_CLASS_OTHER,this.type=x.Z.OBJECT_TYPE_TRANSFORMATION,this.matrix=[[1,0,0],[0,1,0],[0,0,1]],this.board=t,this.isNumericMatrix=!1,this.setMatrix(t,e,o),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt"}},u.Z.Transformation.prototype={},u.Z.extend(u.Z.Transformation.prototype,{update:function(){return this},setMatrix:function(t,e,o){var s;for(this.isNumericMatrix=!0,s=0;s<o.length;s++)if(typeof o[s]!="number"){this.isNumericMatrix=!1;break}if(e==="translate"){if(o.length!==2)throw new Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=a.Z.createEvalFunction(t,o,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if(e==="scale"){if(o.length!==2)throw new Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=a.Z.createEvalFunction(t,o,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if(e==="reflect")o.length<4&&(o[0]=t.select(o[0])),o.length===2&&(o[1]=t.select(o[1])),o.length===4&&(this.evalParam=a.Z.createEvalFunction(t,o,4)),this.update=function(){var n,h,l,p,d,Z,C,P;o.length===1?C=o[0].stdform:o.length===2?C=B.Z.crossProduct(o[1].coords.usrCoords,o[0].coords.usrCoords):o.length===4&&(C=B.Z.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),n=C[1],h=C[2],Z=(P=[-(l=C[0])*n,-l*h,n*n+h*h])[2],p=P[0]/P[2],d=P[1]/P[2],n=-C[2],h=C[1],this.matrix[1][1]=(n*n-h*h)/Z,this.matrix[1][2]=2*n*h/Z,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=p*(1-this.matrix[1][1])-d*this.matrix[1][2],this.matrix[2][0]=d*(1-this.matrix[2][2])-p*this.matrix[2][1]};else if(e==="rotate")o.length===3?this.evalParam=a.Z.createEvalFunction(t,o,3):o.length>0&&o.length<=2&&(this.evalParam=a.Z.createEvalFunction(t,o,1),o.length!==2||a.Z.isArray(o[1])||(o[1]=t.select(o[1]))),this.update=function(){var n,h,l=this.evalParam(0),p=Math.cos(l),d=Math.sin(l);this.matrix[1][1]=p,this.matrix[1][2]=-d,this.matrix[2][1]=d,this.matrix[2][2]=p,o.length>1&&(o.length===3?(n=this.evalParam(1),h=this.evalParam(2)):a.Z.isArray(o[1])?(n=o[1][0],h=o[1][1]):(n=o[1].X(),h=o[1].Y()),this.matrix[1][0]=n*(1-p)+h*d,this.matrix[2][0]=h*(1-p)-n*d)};else if(e==="shear"){if(o.length!==2)throw new Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=a.Z.createEvalFunction(t,o,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if(e==="generic"){if(o.length!==9)throw new Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=a.Z.createEvalFunction(t,o,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}},apply:function(t,e){return this.update(),a.Z.exists(e)?B.Z.matVecMult(this.matrix,t.initialCoords.usrCoords):B.Z.matVecMult(this.matrix,t.coords.usrCoords)},applyOnce:function(t){var e,o,s;for(a.Z.isArray(t)||(t=[t]),o=t.length,s=0;s<o;s++)this.update(),e=B.Z.matVecMult(this.matrix,t[s].coords.usrCoords),t[s].coords.setCoordinates(x.Z.COORDS_BY_USER,e)},bindTo:function(t){var e,o;if(a.Z.isArray(t))for(o=t.length,e=0;e<o;e++)t[e].transformations.push(this);else t.transformations.push(this)},setProperty:function(t){u.Z.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(t){},melt:function(t){var e,o,s,n,h,l,p=[];for(o=t.matrix.length,s=this.matrix[0].length,e=0;e<o;e++)p[e]=[];for(this.update(),t.update(),e=0;e<o;e++)for(l=0;l<s;l++){for(h=0,n=0;n<o;n++)h+=t.matrix[e][n]*this.matrix[n][l];p[e][l]=h}return this.update=function(){var d=this.matrix.length,Z=this.matrix[0].length;for(e=0;e<d;e++)for(l=0;l<Z;l++)this.matrix[e][l]=p[e][l]},this},getParents:function(){var t=[[].concat.apply([],this.matrix)];return this.parents.length!==0&&(t=this.parents),t}}),u.Z.createTransform=function(t,e,o){return new u.Z.Transformation(t,o.type,e)},u.Z.registerElement("transform",u.Z.createTransform),u.Z.Transformation,u.Z.Turtle=function(t,e,o){var s,n,h;return this.constructor(t,o,x.Z.OBJECT_TYPE_TURTLE,x.Z.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=t,this.visProp.curveType="plot",this._attributes=a.Z.copyAttributes(this.visProp,t.options,"turtle"),delete this._attributes.id,s=0,n=0,h=90,e.length!==0&&(e.length===3?(s=e[0],n=e[1],h=e[2]):e.length===2?a.Z.isArray(e[0])?(s=e[0][0],n=e[0][1],h=e[1]):(s=e[0],n=e[1]):(s=e[0][0],n=e[0][1])),this.init(s,n,h),this.methodMap=a.Z.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",penDown:"penDown",pd:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",penSize:"setPenSize",penColor:"setPenColor",getPenColor:"getPenColor",getHighlightPenColor:"getHighlightPenColor",getPenSize:"getPenSize",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this},u.Z.Turtle.prototype=new Gt.Z,u.Z.extend(u.Z.Turtle.prototype,{init:function(t,e,o){var s={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/Math.sqrt(this.board.unitX*this.board.unitX+this.board.unitY*this.board.unitY),this.pos=[t,e],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,s),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],s),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-o),this.board.update()},forward:function(t){if(t===0)return this;var e,o=t*Math.cos(this.dir*Math.PI/180),s=t*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||((e=this.board.create("transform",[o,s],{type:"translate"})).applyOnce(this.turtle),e.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=o,this.pos[1]+=s,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(t){return this.forward(-t)},right:function(t){return this.dir-=t,this.dir%=360,this.turtleIsHidden||this.board.create("transform",[-t*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2),this.board.update(),this},left:function(t){return this.right(-t)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var t,e;for(t=0;t<this.objects.length;t++)(e=this.objects[t]).type===x.Z.OBJECT_TYPE_CURVE&&(this.board.removeObject(e),this.objects.splice(t,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){var t,e,o=this.objects.length;for(t=0;t<o;t++)e=this.objects[t],this.board.removeObject(e);return this.init(0,0,90),this},setPos:function(t,e){return a.Z.isArray(t)?this.pos=t:this.pos=[t,e],this.turtleIsHidden||(this.turtle.setPositionDirectly(x.Z.COORDS_BY_USER,[t,e]),this.turtle2.setPositionDirectly(x.Z.COORDS_BY_USER,[t,e+this.arrowLen]),this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",t)),this.objects.push(this.curve),this},setPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",t)),this.objects.push(this.curve),this},getPenAttribute:function(t){var e,o=this.objects.length;return e=o===4?0:o-1,a.Z.evaluate(this.objects[e].visProp[t])},getPenSize:function(){return this.getPenAttribute("strokewidth")},getPenColor:function(){return this.getPenAttribute("strokecolor")},getHighlightPenColor:function(){return this.getPenAttribute("highlightstrokecolor")},setHighlightPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",t)),this.objects.push(this.curve),this},setAttribute:function(t){var e,o,s,n=this.objects.length;for(e=0;e<n;e++)(o=this.objects[e]).type===x.Z.OBJECT_TYPE_CURVE&&o.setAttribute(t);return s=this.visProp.id,this.visProp=a.Z.deepCopy(this.curve.visProp),this.visProp.id=s,this._attributes=a.Z.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(t,e){return this._attributes[t.toLowerCase()]=e,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var t=this.stack.pop();return this.pos[0]=t[0],this.pos[1]=t[1],this.dir=t[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(t){var e,o,s,n,h;return a.Z.isArray(t)?(e=this.pos[0],o=this.pos[1],s=t[0],n=t[1],h=Math.atan2(n-o,s-e),this.right(this.dir-180*h/Math.PI)):a.Z.isNumber(t)&&this.right(this.dir-t),this},moveTo:function(t){var e,o,s;return a.Z.isArray(t)&&(e=t[0]-this.pos[0],o=t[1]-this.pos[1],this.turtleIsHidden||((s=this.board.create("transform",[e,o],{type:"translate"})).applyOnce(this.turtle),s.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=t[0],this.pos[1]=t[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(t){return this.forward(t)},bk:function(t){return this.back(t)},lt:function(t){return this.left(t)},rt:function(t){return this.right(t)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(t,e){var o,s,n,h,l=this.objects.length;for(o=0,s=0;o<l;o++)if((n=this.objects[o]).elementClass===x.Z.OBJECT_CLASS_CURVE){if(s<=t&&t<s+n.numberPoints)return h=t-s,n[e](h);s+=n.numberPoints}return this[e]()},X:function(t){return a.Z.exists(t)?this.evalAt(t,"X"):this.pos[0]},Y:function(t){return a.Z.exists(t)?this.evalAt(t,"Y"):this.pos[1]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){var t,e=this.objects.length,o=0;for(t=0;t<e;t++)this.objects[t].elementClass===x.Z.OBJECT_CLASS_CURVE&&(o+=this.objects[t].numberPoints);return o},hasPoint:function(t,e){var o,s;for(o=0;o<this.objects.length;o++)if((s=this.objects[o]).type===x.Z.OBJECT_TYPE_CURVE&&s.hasPoint(t,e))return!0;return!1}}),u.Z.createTurtle=function(t,e,o){var s;return e=e||[],s=a.Z.copyAttributes(o,t.options,"turtle"),new u.Z.Turtle(t,e,s)},u.Z.registerElement("turtle",u.Z.createTurtle),u.Z.Turtle,u.Z.Ticks=function(t,e,o){if(this.constructor(t.board,o,x.Z.OBJECT_TYPE_TICKS,x.Z.OBJECT_CLASS_OTHER),this.line=t,this.board=this.line.board,this.ticksFunction=null,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],a.Z.isFunction(e))throw this.ticksFunction=e,new Error("Function arguments are no longer supported.");a.Z.isArray(e)?this.fixedTicks=e:((Math.abs(e)<B.Z.eps||e<0)&&(e=o.defaultdistance),this.ticksFunction=this.makeTicksFunction(e),this.equidistant=!0),this.minTicksDistance=o.minticksdistance,this.ticks=[],this.ticksDelta=1,this.labels=[],this.labelData=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")},u.Z.Ticks.prototype=new Gt.Z,u.Z.extend(u.Z.Ticks.prototype,{makeTicksFunction:function(t){return function(){var e,o,s;return a.Z.evaluate(this.visProp.insertticks)?((s=(o=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"ticksdistance")).upper-o.lower)<=6*(e=Math.pow(10,Math.floor(Math.log(.6*s)/Math.LN10)))&&(e*=.5),e):t}},hasPoint:function(t,e){var o,s,n,h,l=this.ticks&&this.ticks.length||0;if(a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(h=this.board._inputDevice,n=a.Z.evaluate(this.visProp.precision[h])):n=this.board.options.precision.hasPoint,n+=.5*a.Z.evaluate(this.visProp.strokewidth),!a.Z.evaluate(this.line.visProp.scalable)||this.line.elementClass===x.Z.OBJECT_CLASS_CURVE||this.line.stdform[1]!==0&&this.line.stdform[2]!==0&&this.line.type!==x.Z.OBJECT_TYPE_AXIS)return!1;for(o=0;o<l;o++)if((s=this.ticks[o])[2]&&!(this.line.stdform[1]===0&&Math.abs(s[0][0]-this.line.point1.coords.scrCoords[1])<B.Z.eps||this.line.stdform[2]===0&&Math.abs(s[1][0]-this.line.point1.coords.scrCoords[2])<B.Z.eps)&&(Math.abs(s[0][0]-s[0][1])>=1||Math.abs(s[1][0]-s[1][1])>=1)){if(this.line.stdform[1]===0){if(Math.abs(e-.5*(s[1][0]+s[1][1]))<2*n&&s[0][0]-n<t&&t<s[0][1]+n)return!0}else if(this.line.stdform[2]===0&&Math.abs(t-.5*(s[0][0]+s[0][1]))<2*n&&s[1][0]-n<e&&e<s[1][1]+n)return!0}return!1},setPositionDirectly:function(t,e,o){var s,n,h=new b.Z(t,e,this.board),l=new b.Z(t,o,this.board),p=this.board.getBoundingBox();return this.line.type===x.Z.OBJECT_TYPE_AXIS&&a.Z.evaluate(this.line.visProp.scalable)?(Math.abs(this.line.stdform[1])<B.Z.eps&&Math.abs(h.usrCoords[1]*l.usrCoords[1])>B.Z.eps?(s=l.usrCoords[1]/h.usrCoords[1],p[0]*=s,p[2]*=s,this.board.setBoundingBox(p,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<B.Z.eps&&Math.abs(h.usrCoords[2]*l.usrCoords[2])>B.Z.eps&&(n=l.usrCoords[2]/h.usrCoords[2],p[3]*=n,p[1]*=n,this.board.setBoundingBox(p,this.board.keepaspectratio,"update")),this):this},calculateTicksCoordinates:function(){var t,e,o,s;if(!(this.line.elementClass===x.Z.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<B.Z.eps&&Math.abs(this.dy)<B.Z.eps)))return t=this.getZeroCoordinates(),e=this.line.elementClass===x.Z.OBJECT_CLASS_LINE?this.getLowerAndUpperBounds(t):{lower:this.line.minX(),upper:this.line.maxX()},a.Z.evaluate(this.visProp.type)==="polar"&&(s=this.board.getBoundingBox(),o=Math.max(Math.sqrt(s[0]*s[0]+s[1]*s[1]),Math.sqrt(s[2]*s[2]+s[3]*s[3])),e.upper=o),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(t,e):this.generateFixedTicks(t,e),this},setTicksSizeVariables:function(t){var e,o,s,n,h=.5*a.Z.evaluate(this.visProp.majorheight),l=.5*a.Z.evaluate(this.visProp.minorheight);a.Z.exists(t)?(o=this.line.minX(),s=this.line.maxX(),(n=this.line.points.length)<2?(this.dxMaj=0,this.dyMaj=0):B.Z.relDif(t,o)<B.Z.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):B.Z.relDif(t,s)<B.Z.eps?(this.dxMaj=this.line.points[n-2].usrCoords[2]-this.line.points[n-1].usrCoords[2],this.dyMaj=this.line.points[n-1].usrCoords[1]-this.line.points[n-2].usrCoords[1]):(this.dxMaj=-c.Z.D(this.line.Y)(t),this.dyMaj=c.Z.D(this.line.X)(t))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,e=Math.sqrt(this.dxMaj*this.dxMaj*this.board.unitX*this.board.unitX+this.dyMaj*this.dyMaj*this.board.unitY*this.board.unitY),this.dxMaj*=h/e*this.board.unitX,this.dyMaj*=h/e*this.board.unitY,this.dxMin*=l/e*this.board.unitX,this.dyMin*=l/e*this.board.unitY,this.minStyle=a.Z.evaluate(this.visProp.minorheight)<0?"infinite":"finite",this.majStyle=a.Z.evaluate(this.visProp.majorheight)<0?"infinite":"finite"},getZeroCoordinates:function(){var t,e,o,s,n,h,l,p,d=a.Z.evaluate(this.visProp.anchor);return this.line.elementClass===x.Z.OBJECT_CLASS_LINE?this.line.type===x.Z.OBJECT_TYPE_AXIS?g.Z.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(o=this.line.point1.coords.usrCoords[0],t=this.line.point1.coords.usrCoords[1],e=this.line.point1.coords.usrCoords[2],h=this.line.point2.coords.usrCoords[0],s=this.line.point2.coords.usrCoords[1],n=this.line.point2.coords.usrCoords[2],d==="right"?this.line.point2.coords:d==="middle"?new b.Z(x.Z.COORDS_BY_USER,[.5*(o+h),.5*(t+s),.5*(e+n)],this.board):a.Z.isNumber(d)?new b.Z(x.Z.COORDS_BY_USER,[o+(h-o)*d,t+(s-t)*d,e+(n-e)*d],this.board):this.line.point1.coords):(l=this.line.minX(),p=this.line.maxX(),d==="right"?p:d==="middle"?.5*(l+p):a.Z.isNumber(d)?l*(1-d)+p*d:l)},getLowerAndUpperBounds:function(t,e){var o,s,n,h,l,p,d,Z,C,P,S=a.Z.evaluate(this.line.visProp.straightfirst),w=a.Z.evaluate(this.line.visProp.straightlast),D=a.Z.evaluate(this.visProp.includeboundaries);return this.line.elementClass===x.Z.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(l=new b.Z(x.Z.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),p=new b.Z(x.Z.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),d=Math.abs(l.usrCoords[0])>=B.Z.eps&&l.scrCoords[1]>=0&&l.scrCoords[1]<=this.board.canvasWidth&&l.scrCoords[2]>=0&&l.scrCoords[2]<=this.board.canvasHeight,Z=Math.abs(p.usrCoords[0])>=B.Z.eps&&p.scrCoords[1]>=0&&p.scrCoords[1]<=this.board.canvasWidth&&p.scrCoords[2]>=0&&p.scrCoords[2]<=this.board.canvasHeight,a.Z.exists(e)||e==="tickdistance"?g.Z.calcStraight(this.line,l,p,a.Z.evaluate(this.line.visProp.margin)):g.Z.calcLineDelimitingPoints(this.line,l,p),n=a.Z.evaluate(this.line.visProp.firstarrow),h=a.Z.evaluate(this.line.visProp.lastarrow),(n||h)&&(this.board.renderer.getPositionArrowHead(this.line,l,p,a.Z.evaluate(this.line.visProp.strokewidth)),n&&l.setCoordinates(x.Z.COORDS_BY_SCREEN,[l.scrCoords[1],l.scrCoords[2]]),h&&p.setCoordinates(x.Z.COORDS_BY_SCREEN,[p.scrCoords[1],p.scrCoords[2]])),(C=this.getDistanceFromZero(t,l))<(P=this.getDistanceFromZero(t,p))?(o=C,S||!d||D||(o+=B.Z.eps),s=P,w||!Z||D||(s-=B.Z.eps)):P<C?(o=P,w||!Z||D||(o+=B.Z.eps),s=C,S||!d||D||(s-=B.Z.eps)):(o=0,s=0),{lower:o,upper:s})},getDistanceFromZero:function(t,e){var o,s,n,h,l;return o=this.line.point1.coords,s=this.line.point2.coords,l=t.distance(x.Z.COORDS_BY_USER,e),n=[s.usrCoords[0]-o.usrCoords[0],s.usrCoords[1]-o.usrCoords[1],s.usrCoords[2]-o.usrCoords[2]],h=[e.usrCoords[0]-t.usrCoords[0],e.usrCoords[1]-t.usrCoords[1],e.usrCoords[2]-t.usrCoords[2]],B.Z.innerProduct(n,h,3)<0&&(l*=-1),l},generateEquidistantTicks:function(t,e){var o,s,n=B.Z.eps,h=this.equidistant?this.ticksFunction(1):this.ticksDelta,l=a.Z.evaluate(this.visProp.insertticks),p=a.Z.evaluate(this.visProp.minorticks);if(this.line.elementClass===x.Z.OBJECT_CLASS_LINE&&(s=this.getXandYdeltas()),h*=a.Z.evaluate(this.visProp.scale),l&&this.minTicksDistance>B.Z.eps?(h=this.adjustTickDistance(h,t,s),h/=p+1):l||(h/=p+1),this.ticksDelta=h,!(h<B.Z.eps)){for(o=0,a.Z.evaluate(this.visProp.drawzero)||(o=h);o<=e.upper+n&&(o>=e.lower-n&&this.processTickPosition(t,o,h,s),o+=h,!(e.upper-o>1e4*h)););for(o=-h;o>=e.lower-n&&(o<=e.upper+n&&this.processTickPosition(t,o,h,s),!((o-=h)-e.lower>1e4*h)););}},adjustTickDistance:function(t,e,o){var s,n,h,l=1,p=a.Z.evaluate(this.visProp.minorticks);if(this.line.elementClass===x.Z.OBJECT_CLASS_CURVE)return t;if(this.getLowerAndUpperBounds(e,"ticksdistance"),s=e.usrCoords[1]+o.x*t,n=e.usrCoords[2]+o.y*t,h=e.distance(x.Z.COORDS_BY_SCREEN,new b.Z(x.Z.COORDS_BY_USER,[s,n],this.board)),t===0)return 0;for(;h/(p+1)<this.minTicksDistance;)t*=l===1?2:5,l*=-1,s=e.usrCoords[1]+o.x*t,n=e.usrCoords[2]+o.y*t,h=e.distance(x.Z.COORDS_BY_SCREEN,new b.Z(x.Z.COORDS_BY_USER,[s,n],this.board));return t},processTickPosition:function(t,e,o,s){var n,h,l,p,d,Z=a.Z.evaluate(this.visProp.ticksperlabel),C=null;this.line.elementClass===x.Z.OBJECT_CLASS_LINE?(n=t.usrCoords[1]+e*s.x,h=t.usrCoords[2]+e*s.y):(n=this.line.X(t+e),h=this.line.Y(t+e)),l=new b.Z(x.Z.COORDS_BY_USER,[n,h],this.board),this.line.elementClass===x.Z.OBJECT_CLASS_CURVE&&(C=t+e,this.setTicksSizeVariables(C)),l.major=Math.round(e/o)%(a.Z.evaluate(this.visProp.minorticks)+1)==0,Z||(Z=a.Z.evaluate(this.visProp.minorticks)+1),d=Math.round(e/o)%Z==0,(p=this.createTickPath(l,l.major)).length===3&&(this.ticks.push(p),d&&a.Z.evaluate(this.visProp.drawlabels)?this.labelsData.push(this.generateLabelData(this.generateLabelText(l,t,C),l,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(t,e){var o,s,n,h,l,p,d,Z,C=B.Z.eps,P=a.Z.isArray(this.visProp.labels),S=a.Z.evaluate(this.visProp.drawlabels);for(this.line.elementClass===x.Z.OBJECT_CLASS_LINE&&(Z=this.getXandYdeltas()),n=0;n<this.fixedTicks.length;n++)this.line.elementClass===x.Z.OBJECT_CLASS_LINE?(d=this.fixedTicks[n],l=t.usrCoords[1]+d*Z.x,p=t.usrCoords[2]+d*Z.y):(d=t+this.fixedTicks[n],l=this.line.X(d),p=this.line.Y(d)),o=new b.Z(x.Z.COORDS_BY_USER,[l,p],this.board),this.line.elementClass===x.Z.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(d),(h=this.createTickPath(o,!0)).length===3&&d>=e.lower-C&&d<=e.upper+C&&(this.ticks.push(h),S&&(P||a.Z.exists(this.visProp.labels[n]))?(s=P?a.Z.evaluate(this.visProp.labels[n]):d,this.labelsData.push(this.generateLabelData(this.generateLabelText(o,t,s),o,n))):this.labelsData.push(null))},getXandYdeltas:function(){var t,e,o=this.line.point1.Dist(this.line.point2);return this.line.type===x.Z.OBJECT_TYPE_AXIS?(t=this.line.point1.coords.usrCoords,e=this.line.point2.coords.usrCoords,(t[1]>e[1]||Math.abs(t[1]-e[1])<B.Z.eps&&t[2]>e[2])&&(t=this.line.point2.coords.usrCoords,e=this.line.point1.coords.usrCoords)):(t=this.line.point1.coords.usrCoords,e=this.line.point2.coords.usrCoords),{x:(e[1]-t[1])/o,y:(e[2]-t[2])/o}},_isInsideCanvas:function(t,e,o){var s=this.board.canvasWidth,n=this.board.canvasHeight;return o===void 0&&(o=0),t[0]>=o&&t[0]<=s-o&&e[0]>=o&&e[0]<=n-o||t[1]>=o&&t[1]<=s-o&&e[1]>=o&&e[1]<=n-o},createTickPath:function(t,e){var o,s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U,J,z=[-2e6,-2e6],V=[-2e6,-2e6];if(o=t.scrCoords,e?(h=this.dxMaj,l=this.dyMaj,C=this.majStyle,I=a.Z.evaluate(this.visProp.majortickendings[0])>0,U=a.Z.evaluate(this.visProp.majortickendings[1])>0):(h=this.dxMin,l=this.dyMin,C=this.minStyle,I=a.Z.evaluate(this.visProp.tickendings[0])>0,U=a.Z.evaluate(this.visProp.tickendings[1])>0),s=[-l*o[1]-h*o[2],l,h],e&&a.Z.evaluate(this.visProp.type)==="polar"){if(w=this.board.getBoundingBox(),k=(D=2*Math.PI)/180,o=t.usrCoords,(S=Math.sqrt(o[1]*o[1]+o[2]*o[2]))<Math.max(Math.sqrt(w[0]*w[0]+w[1]*w[1]),Math.sqrt(w[2]*w[2]+w[3]*w[3]))){for(z=[],V=[],P=0;P<=D;P+=k)z.push(this.board.origin.scrCoords[1]+S*Math.cos(P)*this.board.unitX),V.push(this.board.origin.scrCoords[2]+S*Math.sin(P)*this.board.unitY);return[z,V,e]}}else{if(C==="infinite"){if(a.Z.evaluate(this.visProp.ignoreinfinitetickendings)&&(I=U=!0),n=g.Z.meetLineBoard(s,this.board),I&&U)z[0]=n[0].scrCoords[1],z[1]=n[1].scrCoords[1],V[0]=n[0].scrCoords[2],V[1]=n[1].scrCoords[2];else if((J=[B.Z.innerProduct(n[0].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0],B.Z.innerProduct(n[1].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0]])[0]<J[1]&&(n.reverse(),J.reverse()),I){if(J[0]<0)return[];J[1]<0?(z[0]=n[0].scrCoords[1],V[0]=n[0].scrCoords[2],z[1]=o[1],V[1]=o[2]):(z[0]=n[0].scrCoords[1],V[0]=n[0].scrCoords[2],z[1]=n[1].scrCoords[1],V[1]=n[1].scrCoords[2])}else if(U){if(J[1]>0)return[];J[0]>0?(z[0]=o[1],V[0]=o[2],z[1]=n[1].scrCoords[1],V[1]=n[1].scrCoords[2]):(z[0]=n[0].scrCoords[1],V[0]=n[0].scrCoords[2],z[1]=n[1].scrCoords[1],V[1]=n[1].scrCoords[2])}}else Z=a.Z.evaluate(this.visProp.face)===">"?Math.PI/4:a.Z.evaluate(this.visProp.face)==="<"?-Math.PI/4:0,p=Math.cos(Z)*h-Math.sin(Z)*l,d=Math.sin(Z)*h+Math.cos(Z)*l,z[0]=o[1]+p*I,V[0]=o[2]-d*I,z[1]=o[1],V[1]=o[2],Z=-Z,p=Math.cos(Z)*h-Math.sin(Z)*l,d=Math.sin(Z)*h+Math.cos(Z)*l,z[2]=o[1]-p*U,V[2]=o[2]+d*U;if(this._isInsideCanvas(z,V))return[z,V,e]}return[]},formatLabelText:function(t){var e,o,s=a.Z.evaluate(this.visProp.scalesymbol);return a.Z.isNumber(t)?(((e=(Math.round(1e11*t)/1e11).toString()).length>a.Z.evaluate(this.visProp.maxlabellength)||e.indexOf("e")!==-1)&&(o=a.Z.evaluate(this.visProp.digits),a.Z.evaluate(this.visProp.precision)!==3&&o===3&&(o=a.Z.evaluate(this.visProp.precision)),e=t.toExponential(o).toString()),a.Z.evaluate(this.visProp.beautifulscientificticklabels)&&(e=this.beautifyScientificNotationLabel(e)),e.indexOf(".")>-1&&e.indexOf("e")===-1&&(e=(e=e.replace(/0+$/,"")).replace(/\.$/,""))):e=t.toString(),s.length>0&&(e==="1"?e=s:e==="-1"?e="-"+s:e!=="0"&&(e+=s)),a.Z.evaluate(this.visProp.useunicodeminus)&&(e=e.replace(/-/g,"−")),e},beautifyScientificNotationLabel:function(t){return t.indexOf("e")===-1?t:(parseFloat(t.substring(0,t.indexOf("e")))+t.substring(t.indexOf("e"))).replace(/e(.*)$/g,function(e,o){var s="•10";return s+=o.replace(/-/g,"⁻").replace(/\+/g,"").replace(/0/g,"⁰").replace(/1/g,"¹").replace(/2/g,"²").replace(/3/g,"³").replace(/4/g,"⁴").replace(/5/g,"⁵").replace(/6/g,"⁶").replace(/7/g,"⁷").replace(/8/g,"⁸").replace(/9/g,"⁹")})},generateLabelText:function(t,e,o){var s;if(!a.Z.exists(o)){if(s=this.getDistanceFromZero(e,t),Math.abs(s)<B.Z.eps)return"0";o=s/a.Z.evaluate(this.visProp.scale)}return this.formatLabelText(o)},generateLabelData:function(t,e,o){var s,n,h,l;return l=a.Z.evaluate(this.visProp.label.fontsize),s=[e.scrCoords[1],e.scrCoords[1]],n=[e.scrCoords[2],e.scrCoords[2]],h=l===void 0?12:l,h*=.5,this._isInsideCanvas(s,n,h)?(s=a.Z.evaluate(this.visProp.label.offset[0]),n=a.Z.evaluate(this.visProp.label.offset[1]),{x:e.usrCoords[1]+s/this.board.unitX,y:e.usrCoords[2]+n/this.board.unitY,t,i:o}):null},update:function(){return this.needsUpdate&&this.board.canvasWidth!==0&&this.board.canvasHeight!==0&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateRendererLabels:function(){var t,e,o,s,n,h,l,p;for(o=this.labelsData.length,s=this.labels.length,t=0,e=0;t<o;t++)this.labelsData[t]!==null&&(l=this.labelsData[t],e<s?((h=this.labels[e]).setText(l.t),h.setCoords(l.x,l.y),e++):(this.labelCounter+=1,n={isLabel:!0,layer:this.board.options.layer.line,highlightStrokeColor:this.board.options.text.strokeColor,highlightStrokeWidth:this.board.options.text.strokeWidth,highlightStrokeOpacity:this.board.options.text.strokeOpacity,priv:this.visProp.priv},(n=a.Z.deepCopy(n,this.visProp.label)).id=this.id+l.i+"Label"+this.labelCounter,h=u.Z.createText(this.board,[l.x,l.y,l.t],n),this.addChild(h),h.setParents(this),h.isDraggable=!1,h.dump=!1,this.labels.push(h)),(p=a.Z.evaluate(this.visProp.label.visible))==="inherit"&&(p=this.visPropCalc.visible),h.prepareUpdate().updateVisibility(p).updateRenderer(),h.distanceX=a.Z.evaluate(this.visProp.label.offset[0]),h.distanceY=a.Z.evaluate(this.visProp.label.offset[1]));for(e=o=e;e<s;e++)this.board.renderer.display(this.labels[e],!1),this.labels[e].visProp.visible=this.labels[e].visPropCalc.visible=!1;return this},hideElement:function(){var t;for(u.Z.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),t=0;t<this.labels.length;t++)a.Z.exists(this.labels[t])&&this.labels[t].hideElement();return this},showElement:function(){var t;for(u.Z.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),t=0;t<this.labels.length;t++)a.Z.exists(this.labels[t])&&this.labels[t].showElement();return this}}),u.Z.createTicks=function(t,e,o){var s,n,h=a.Z.copyAttributes(o,t.options,"ticks");if(n=e.length<2?h.ticksdistance:e[1],e[0].elementClass!==x.Z.OBJECT_CLASS_LINE&&e[0].elementClass!==x.Z.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create Ticks with parent types '"+typeof e[0]+"'.");return s=new u.Z.Ticks(e[0],n,h),a.Z.isFunction(h.generatelabelvalue)&&(s.generateLabelText=h.generatelabelvalue),a.Z.isFunction(h.generatelabeltext)&&(s.generateLabelText=h.generatelabeltext),s.setParents(e[0]),s.isDraggable=!0,s.fullUpdate(e[0].visPropCalc.visible),s},u.Z.createHatchmark=function(t,e,o){var s,n,h,l,p,d=[],Z=a.Z.copyAttributes(o,t.options,"hatch");if(e[0].elementClass!==x.Z.OBJECT_CLASS_LINE&&e[0].elementClass!==x.Z.OBJECT_CLASS_CURVE||typeof e[1]!="number")throw new Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof e[0]+"' and '"+typeof e[1]+" and ''"+typeof e[2]+"'.");for(h=.5*-(((s=e[1])-1)*(l=Z.ticksdistance)),n=0;n<s;n++)d[n]=h+n*l;return(p=t.create("ticks",[e[0],d],Z)).elType="hatch",e[0].inherits.push(p),p},u.Z.registerElement("ticks",u.Z.createTicks),u.Z.registerElement("hash",u.Z.createHatchmark),u.Z.registerElement("hatch",u.Z.createHatchmark),u.Z.Ticks,u.Z.CA=function(t,e,o){this.node=t,this.createNode=e,this.parser=o},u.Z.extend(u.Z.CA.prototype,{findMapNode:function(t,e){var o,s,n;if(e.value==="op_assign"&&e.children[0].value===t)return e.children[1];if(e.children){for(s=e.children.length,o=0;o<s;++o)if((n=this.findMapNode(t,e.children[o]))!==null)return n}return null},setMath:function(t){var e,o;if((t.type!="node_op"||t.value!="op_add"&&t.value!="op_sub"&&t.value!="op_mul"&&t.value!="op_div"&&t.value!="op_neg"&&t.value!="op_execfun"&&t.value!="op_exp")&&t.type!="node_var"&&t.type!="node_const"||(t.isMath=!0),t.children)for(o=t.children.length,e=0;e<o;++e)this.setMath(t.children[e])},deriveElementary:function(t,e){var o,s=t.children[0].value,n=t.children[1];switch(s){case"abs":o=this.createNode("node_op","op_div",n[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0]))]));break;case"sqrt":o=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(t.type,t.value,a.Z.deepCopy(t.children[0]),a.Z.deepCopy(t.children[1]))));break;case"sin":o=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),a.Z.deepCopy(n));break;case"cos":o=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),a.Z.deepCopy(n)));break;case"tan":o=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),a.Z.deepCopy(n)),this.createNode("node_const",2)));break;case"cot":o=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),a.Z.deepCopy(n)),this.createNode("node_const",2))));break;case"exp":o=this.createNode(t.type,t.value,a.Z.deepCopy(t.children[0]),a.Z.deepCopy(t.children[1]));break;case"pow":o=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",a.Z.deepCopy(t.children[0]),a.Z.deepCopy(t.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[1][0],e),this.createNode("node_op","op_div",a.Z.deepCopy(t.children[1][1]),a.Z.deepCopy(t.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1][1],e),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[a.Z.deepCopy(t.children[1][0])]))));break;case"log":case"ln":o=this.createNode("node_op","op_div",this.createNode("node_const",1),a.Z.deepCopy(n[0]));break;case"log2":case"lb":case"ld":o=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),a.Z.deepCopy(n[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":o=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),a.Z.deepCopy(n[0])),this.createNode("node_const",.43429448190325176));break;case"asin":o=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])))]));break;case"acos":o=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])))])));break;case"atan":o=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0]))));break;case"acot":o=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])))));break;case"sinh":o=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[a.Z.deepCopy(n[0])]);break;case"cosh":o=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[a.Z.deepCopy(n[0])]);break;case"tanh":o=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[a.Z.deepCopy(n[0])]),this.createNode("node_const",2)));break;case"asinh":o=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"acosh":o=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"atanh":o=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",a.Z.deepCopy(n[0]),a.Z.deepCopy(n[0]))));break;default:throw o=this.createNode("node_const",0),console.log('Derivative of "'+s+'" not yet implemented'),new Error("Error("+this.line+"): ")}return o},derivative:function(t,e){var o;switch(t.type){case"node_op":switch(t.value){case"op_execfun":o=t.children[0].value=="pow"?this.deriveElementary(t,e):t.children[1].length===0?this.createNode("node_const",0):this.createNode("node_op","op_mul",this.deriveElementary(t,e),this.derivative(t.children[1][0],e));break;case"op_div":o=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(t.children[0],e),a.Z.deepCopy(t.children[1])),this.createNode("node_op","op_mul",a.Z.deepCopy(t.children[0]),this.derivative(t.children[1],e))),this.createNode("node_op","op_mul",a.Z.deepCopy(t.children[1]),a.Z.deepCopy(t.children[1])));break;case"op_mul":o=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",a.Z.deepCopy(t.children[0]),this.derivative(t.children[1],e)),this.createNode("node_op","op_mul",this.derivative(t.children[0],e),a.Z.deepCopy(t.children[1])));break;case"op_neg":o=this.createNode("node_op","op_neg",this.derivative(t.children[0],e));break;case"op_add":case"op_sub":o=this.createNode("node_op",t.value,this.derivative(t.children[0],e),this.derivative(t.children[1],e));break;case"op_exp":o=this.createNode("node_op","op_mul",a.Z.deepCopy(t),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[0],e),this.createNode("node_op","op_div",a.Z.deepCopy(t.children[1]),a.Z.deepCopy(t.children[0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1],e),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[a.Z.deepCopy(t.children[0])]))))}break;case"node_var":o=t.value===e?this.createNode("node_const",1):this.createNode("node_const",0);break;case"node_const":o=this.createNode("node_const",0)}return o},expandDerivatives:function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w;if(!t)return 0;for(this.line=t.line,this.col=t.col,s=t.children.length,n=0;n<s;++n)if(t.children[n]&&t.children[n].type)t.children[n]=this.expandDerivatives(t.children[n],t,o);else if(a.Z.isArray(t.children[n]))for(h=0;h<t.children[n].length;++h)t.children[n][h]&&t.children[n][h].type&&(t.children[n][h]=this.expandDerivatives(t.children[n][h],t,o));if(t.type==="node_op"&&t.value==="op_execfun"&&t.children[0]&&t.children[0].value==="D"){if(t.children[1][0].type=="node_var"?(C=t.children[1][0].value,S=(l=this.findMapNode(C,o)).children[0],P=t.children[1].length>=2?t.children[1][1].value:l.children[0][0],p=l.children[1]):(p=t.children[1][0],S=["x"],P=t.children[1].length>=2?t.children[1][1].value:"x"),Z=p,(w=t.children[1].length>=3?t.children[1][2].value:1)>=1)for(;w>=1;)Z=this.derivative(Z,P),Z=this.removeTrivialNodes(Z),w--;d=e.type=="node_op"&&e.value=="op_assign"?this.createNode("node_op","op_map",S,Z):Z,this.setMath(d),t.type=d.type,t.value=d.value,t.children[0]=d.children[0],t.children[1]=d.children[1]}return t},removeTrivialNodes:function(t){var e,o,s,n,h;if(a.Z.isArray(t))for(o=t.length,e=0;e<o;++e)t[e]=this.removeTrivialNodes(t[e]);if(t.type!="node_op"||!t.children)return t;for(o=t.children.length,e=0;e<o;++e){this.mayNotBeSimplified=!1;do t.children[e]=this.removeTrivialNodes(t.children[e]);while(this.mayNotBeSimplified)}switch(t.value){case"op_map":if(s=t.children[0],(n=t.children[1]).type=="node_var"){for(e=0;e<s.length;++e)if(s[e]==n.value){n.isMath=!0;break}}break;case"op_add":if(s=t.children[0],n=t.children[1],s.type=="node_const"&&s.value===0)return n;if(n.type=="node_const"&&n.value===0)return s;if(s.type=="node_const"&&n.type=="node_const")return s.value+=n.value,s;break;case"op_mul":if(s=t.children[0],n=t.children[1],s.type=="node_const"&&s.value==1)return n;if(n.type=="node_const"&&n.value==1||s.type=="node_const"&&s.value===0)return s;if(n.type=="node_const"&&n.value===0||n.type=="node_const"&&n.value===0)return n;if(s.type=="node_op"&&s.value=="op_neg"&&n.type=="node_op"&&n.value=="op_neg")return t.children=[s.children[0],n.children[0]],this.mayNotBeSimplified=!0,t;if(s.value=="op_neg"&&n.value!="op_neg")return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",s.children[0],n)],this.mayNotBeSimplified=!0,t;if(s.value!="op_neg"&&n.value=="op_neg")return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",s,n.children[0])],this.mayNotBeSimplified=!0,t;if(s.value=="op_div"&&s.children[0].type=="node_const"&&s.children[0].value==1)return t.type="node_op",t.value="op_div",t.children=[n,s.children[1]],this.mayNotBeSimplified=!0,t;if(n.value=="op_div"&&n.children[0].type=="node_const"&&n.children[0].value==1)return t.type="node_op",t.value="op_div",t.children=[s,n.children[1]],this.mayNotBeSimplified=!0,t;if(s.type!="node_const"&&n.type=="node_const")return t.children=[n,s],this.mayNotBeSimplified=!0,t;if(s.type!="node_const"&&n.type=="node_op"&&n.value=="op_neg"&&n.children[0].type=="node_const")return t.children=[n,s],this.mayNotBeSimplified=!0,t;if(s.type=="node_op"&&s.value!="op_execfun"&&(n.type=="node_var"||n.type=="node_op"&&n.value=="op_execfun"))return t.children=[n,s],this.mayNotBeSimplified=!0,t;if(s.type!="node_op"&&n.type=="node_op"&&n.value=="op_neg"&&n.children[0].type=="node_var")return t.children=[n,s],this.mayNotBeSimplified=!0,t;if(s.type!="node_const"&&n.type=="node_op"&&(n.value=="op_mul"||n.value=="op_div")&&n.children[0].type=="node_const")return h=n.children[0],n.children[0]=s,t.children=[h,n],this.mayNotBeSimplified=!0,t;if(n.type!="node_const"&&s.type=="node_op"&&s.value=="op_mul"&&s.children[0].type=="node_const")return t.children=[s.children[0],this.createNode("node_op","op_mul",s.children[1],n)],this.mayNotBeSimplified=!0,t;if(s.type=="node_const"&&n.type=="node_const")return s.value*=n.value,s;if(s.type=="node_const"&&n.type=="node_op"&&(n.value=="op_mul"||n.value=="op_div")&&n.children[0].type=="node_const")return n.children[0].value*=s.value,n;if(s.hash=this.parser.compile(s),n.hash=this.parser.compile(n),s.hash===n.hash)return t.value="op_exp",t.children[1]=this.createNode("node_const",2),t;if(s.type=="node_const"&&n.type=="node_op"&&(n.value=="op_mul"||n.value=="op_div")&&n.children[0].type=="node_const")return n.children[0].value*=s.value,n;if(n.type=="node_op"&&n.value=="op_exp"&&(s.hash||(s.hash=this.parser.compile(s)),n.children[0].hash||(n.children[0].hash=this.parser.compile(n.children[0])),s.hash===n.children[0].hash))return n.children[1]=this.createNode("node_op","op_add",n.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,n;if(s.type=="node_op"&&s.value=="op_exp"&&n.type=="node_op"&&n.value=="op_exp"&&(s.children[0].hash=this.parser.compile(s.children[0]),n.children[0].hash=this.parser.compile(n.children[0]),s.children[0].hash===n.children[0].hash))return s.children[1]=this.createNode("node_op","op_add",s.children[1],n.children[1]),this.mayNotBeSimplified=!0,s;break;case"op_sub":if(s=t.children[0],n=t.children[1],s.type=="node_const"&&s.value===0)return t.value="op_neg",t.children[0]=n,t;if(n.type=="node_const"&&n.value===0)return s;if(s.type=="node_const"&&n.type=="node_const"&&s.value==n.value)return this.createNode("node_const",0);if(s.type=="node_var"&&n.type=="node_var"&&s.value==n.value)return this.createNode("node_const",0);if(s.type=="node_const"&&n.type=="node_const")return s.value-=n.value,s;if(s.type=="node_op"&&s.value=="op_mul"&&n.type=="node_op"&&n.value=="op_mul"&&(s.children[1].hash=this.parser.compile(s.children[1]),n.children[1].hash=this.parser.compile(n.children[1]),s.children[1].hash===n.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",s.children[0],n.children[0]),s.children[1]],this.mayNotBeSimplified=!0,t;if(s.type=="node_op"&&s.value=="op_mul"&&(s.children[1].hash=this.parser.compile(s.children[1]),n.hash=this.parser.compile(n),s.children[1].hash===n.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",s.children[0],this.createNode("node_const",1)),n],this.mayNotBeSimplified=!0,t;if(n.type=="node_op"&&n.value=="op_mul"&&(n.children[1].hash=this.parser.compile(n.children[1]),s.hash=this.parser.compile(s),n.children[1].hash===s.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),n.children[0]),s],this.mayNotBeSimplified=!0,t;break;case"op_neg":if((s=t.children[0]).type=="node_const"&&s.value===0)return s;if(s.type=="node_op"&&s.value=="op_neg")return s.children[0];break;case"op_div":if(s=t.children[0],n=t.children[1],s.type=="node_const"&&n.type=="node_const"&&s.value==n.value&&s.value!==0)return s.value=1,s;if(s.type=="node_const"&&s.value===0&&n.type=="node_const"&&n.value!==0)return s.value=0,s;if(s.type=="node_const"&&s.value===0&&(n.type=="node_op"||n.type=="node_var"))return t.type="node_const",t.value=0,t;if(s.type=="node_var"&&n.type=="node_var"&&s.value==n.value)return this.createNode("node_const",1);if(s.type=="node_const"&&s.value!==0&&n.type=="node_const"&&n.value===0)return s.value>0?s.value=1/0:s.value=-1/0,s;if(s.type=="node_op"&&s.value=="op_neg"&&n.type=="node_op"&&n.value=="op_neg")return t.children=[s.children[0],n.children[0]],this.mayNotBeSimplified=!0,t;if(s.value=="op_neg"&&n.value!="op_neg")return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",s.children[0],n)],this.mayNotBeSimplified=!0,t;if(s.value!="op_neg"&&n.value=="op_neg")return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",s,n.children[0])],this.mayNotBeSimplified=!0,t;if(s.type=="node_op"&&s.value=="op_exp"&&(n.hash||(n.hash=this.parser.compile(n)),s.children[0].hash||(s.children[0].hash=this.parser.compile(s.children[0])),n.hash===s.children[0].hash))return s.children[1]=this.createNode("node_op","op_sub",s.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,s;if(n.type!="node_const"&&s.type=="node_op"&&s.value=="op_mul"&&s.children[0].type=="node_const")return t.value="op_mul",t.children=[s.children[0],this.createNode("node_op","op_div",s.children[1],n)],this.mayNotBeSimplified=!0,t;if(s.type=="node_op"&&s.value=="op_exp"&&n.type=="node_op"&&n.value=="op_exp"&&(s.children[0].hash=this.parser.compile(s.children[0]),n.children[0].hash=this.parser.compile(n.children[0]),s.children[0].hash===n.children[0].hash))return s.children[1]=this.createNode("node_op","op_sub",s.children[1],n.children[1]),this.mayNotBeSimplified=!0,s;break;case"op_exp":if(s=t.children[0],(n=t.children[1]).type=="node_const"&&n.value===0)return n.value=1,n;if(n.type=="node_const"&&n.value==1||s.type=="node_const"&&s.value==1||s.type=="node_const"&&s.value===0&&n.type=="node_const"&&n.value!==0)return s;if(s.type=="node_op"&&s.value=="op_exp")return t.children=[s.children[0],this.createNode("node_op","op_mul",s.children[1],n)],t}switch(t.value){case"op_add":if(s=t.children[0],n=t.children[1],s.type=="node_const"&&n.type=="node_const"&&s.value==n.value)return s.value+=n.value,s;if(s.type=="node_var"&&n.type=="node_var"&&s.value==n.value)return t.children[0]=this.createNode("node_const",2),t.value="op_mul",t;if(s.type=="node_op"&&s.value=="op_neg")return t.value="op_sub",t.children[0]=n,t.children[1]=s.children[0],this.mayNotBeSimplified=!0,t;if(n.type=="node_op"&&n.value=="op_neg")return t.value="op_sub",t.children[1]=n.children[0],this.mayNotBeSimplified=!0,t;if(s.type=="node_op"&&s.value=="op_mul"&&n.type=="node_op"&&n.value=="op_mul"&&(s.children[1].hash=this.parser.compile(s.children[1]),n.children[1].hash=this.parser.compile(n.children[1]),s.children[1].hash===n.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",s.children[0],n.children[0]),s.children[1]],this.mayNotBeSimplified=!0,t;if(s.type=="node_op"&&s.value=="op_mul"&&(s.children[1].hash=this.parser.compile(s.children[1]),n.hash=this.parser.compile(n),s.children[1].hash===n.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",s.children[0],this.createNode("node_const",1)),n],this.mayNotBeSimplified=!0,t;if(n.type=="node_op"&&n.value=="op_mul"&&(n.children[1].hash=this.parser.compile(n.children[1]),s.hash=this.parser.compile(s),n.children[1].hash===s.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),n.children[0]),s],this.mayNotBeSimplified=!0,t;break;case"op_sub":if(s=t.children[0],(n=t.children[1]).type=="node_op"&&n.value=="op_neg")return t.value="op_add",t.children[1]=n.children[0],this.mayNotBeSimplified=!0,t;break;case"op_execfun":return this.simplifyElementary(t)}return t},simplifyElementary:function(t){var e=t.children[0].value,o=t.children[1];if(o.length==0)return t;switch(e){case"sin":case"tan":if(o[0].type=="node_const"&&o[0].value===0||o[0].type=="node_var"&&o[0].value=="PI"||o[0].type=="node_op"&&o[0].value=="op_mul"&&o[0].children[0].type=="node_const"&&o[0].children[0].value%1==0&&o[0].children[1].type=="node_var"&&o[0].children[1].value=="PI")return t.type="node_const",t.value=0,t;break;case"cos":if(o[0].type=="node_const"&&o[0].value===0)return t.type="node_const",t.value=1,t;if(o[0].type=="node_var"&&o[0].value=="PI")return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_const",1)],t;break;case"exp":if(o[0].type=="node_const"&&o[0].value===0)return t.type="node_const",t.value=1,t;break;case"pow":if(o[1].type=="node_const"&&o[1].value===0)return t.type="node_const",t.value=1,t}return t}}),u.Z.CA,u.Z.Dump={addMarkers:function(t,e,o){var s,n,h;for(s in a.Z.isArray(e)||(e=[e]),a.Z.isArray(o)||(o=[o]),n=Math.min(e.length,o.length),e.length=n,o.length=n,t.objects)if(t.objects.hasOwnProperty(s))for(h=0;h<n;h++)t.objects[s][e[h]]=o[h]},deleteMarkers:function(t,e){var o,s,n;for(o in a.Z.isArray(e)||(e=[e]),s=e.length,e.length=s,t.objects)if(t.objects.hasOwnProperty(o))for(n=0;n<s;n++)delete t.objects[o][e[n]]},str:function(t){return typeof t=="string"&&t.substr(0,7)!=="function"&&(t='"'+t+'"'),t},minimizeObject:function(t,e){var o,s,n,h={},l=a.Z.deepCopy(t),p=[];for(n=1;n<arguments.length;n++)p.push(arguments[n]);for(h=a.Z.deepCopy(h,u.Z.Options.elements,!0),n=p.length;n>0;n--)h=a.Z.deepCopy(h,p[n-1],!0);for(o in h)h.hasOwnProperty(o)&&(s=o.toLowerCase(),typeof h[o]!="object"&&h[o]===l[s]&&delete l[s]);return l},prepareAttributes:function(t,e){var o,s;for(s in o=this.minimizeObject(e.getAttributes(),u.Z.Options[e.elType]),e.subs)e.subs.hasOwnProperty(s)&&(o[s]=this.minimizeObject(e.subs[s].getAttributes(),u.Z.Options[e.elType][s],u.Z.Options[e.subs[s].elType]),o[s].id=e.subs[s].id,o[s].name=e.subs[s].name);return o.id=e.id,o.name=e.name,o},setBoundingBox:function(t,e,o){return t.push({obj:o,method:"setBoundingBox",params:[e.getBoundingBox(),e.keepaspectratio]}),t},dump:function(t){var e,o,s,n,h=[],l=[],p=t.objectsList.length;for(this.addMarkers(t,"dumped",!1),e=0;e<p;e++)if(s={},!(o=t.objectsList[e]).dumped&&o.dump){for(s.type=o.getType(),s.parents=o.getParents().slice(),s.type==="point"&&s.parents[0]===1&&(s.parents=s.parents.slice(1)),n=0;n<s.parents.length;n++)a.Z.isString(s.parents[n])&&s.parents[n][0]!=="'"&&s.parents[n][0]!=='"'?s.parents[n]='"'+s.parents[n]+'"':a.Z.isArray(s.parents[n])&&(s.parents[n]="["+s.parents[n].toString()+"]");s.attributes=this.prepareAttributes(t,o),s.type==="glider"&&o.onPolygon&&h.push({obj:o.id,prop:"onPolygon",val:!0}),l.push(s)}return this.deleteMarkers(t,"dumped"),{elements:l,props:h,methods:[]}},arrayToParamStr:function(t,e){var o,s=[];for(o=0;o<t.length;o++)s.push(e.call(this,t[o]));return s.join(", ")},toJCAN:function(t){var e,o,s;switch(typeof t){case"object":if(t){if(o=[],a.Z.isArray(t)){for(e=0;e<t.length;e++)o.push(this.toJCAN(t[e]));return"["+o.join(",")+"]"}for(s in t)t.hasOwnProperty(s)&&o.push(s+": "+this.toJCAN(t[s]));return"<<"+o.join(", ")+">> "}return"null";case"string":return"'"+t.replace(/\\/g,"\\\\").replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return t.toString();case"null":return"null"}},toJessie:function(t){var e,o,s,n=this.dump(t),h=[];for(n.methods=this.setBoundingBox(n.methods,t,"$board"),o=n.elements,e=0;e<o.length;e++)o[e].attributes.name.length>0&&h.push("// "+o[e].attributes.name),h.push("s"+e+" = "+o[e].type+"("+o[e].parents.join(", ")+") "+this.toJCAN(o[e].attributes).replace(/\n/,"\\n")+";"),o[e].type==="axis"&&(s=o[e].attributes.id,t.objects[s].defaultTicks===null&&h.push("s"+e+".removeAllTicks();")),h.push("");for(e=0;e<n.methods.length;e++)h.push(n.methods[e].obj+"."+n.methods[e].method+"("+this.arrayToParamStr(n.methods[e].params,this.toJCAN)+");"),h.push("");for(e=0;e<n.props.length;e++)h.push(n.props[e].obj+"."+n.props[e].prop+" = "+this.toJCAN(n.props[e].val)+";"),h.push("");return h.join(`
`)},toJavaScript:function(t){var e,o,s,n=this.dump(t),h=[];for(n.methods=this.setBoundingBox(n.methods,t,"board"),o=n.elements,e=0;e<o.length;e++)h.push('board.create("'+o[e].type+'", ['+o[e].parents.join(", ")+"], "+a.Z.toJSON(o[e].attributes)+");"),o[e].type==="axis"&&(s=o[e].attributes.id,t.objects[s].defaultTicks===null&&h.push('board.objects["'+s+'"].removeTicks(board.objects["'+s+'"].defaultTicks);'));for(e=0;e<n.methods.length;e++)h.push(n.methods[e].obj+"."+n.methods[e].method+"("+this.arrayToParamStr(n.methods[e].params,a.Z.toJSON)+");"),h.push("");for(e=0;e<n.props.length;e++)h.push(n.props[e].obj+"."+n.props[e].prop+" = "+a.Z.toJSON(n.props[e].val)+";"),h.push("");return h.join(`
`)}},u.Z.Dump,u.Z.createComb=function(t,e,o){var s,n,h,l,p;if(e.length!==2)throw p=e.map(function(d){return"'"+typeof d+"'"}),new Error("JSXGraph: Can't create comb with parent types "+p.join(", ")+`.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);if(a.Z.isArray(e[0])&&e[0].length>1)l=a.Z.copyAttributes(o,t.options,"comb","point1"),s=t.create("point",e[0],l);else if(a.Z.isString(e[0])||a.Z.isPoint(e[0]))s=t.select(e[0]);else if(a.Z.isFunction(e[0])&&a.Z.isPoint(e[0]()))s=e[0]();else{if(!(a.Z.isFunction(e[0])&&e[0]().length&&e[0]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);l=a.Z.copyAttributes(o,t.options,"comb","point1"),s=u.Z.createPoint(t,e[0](),l)}if(a.Z.isArray(e[1])&&e[1].length>1)l=a.Z.copyAttributes(o,t.options,"comb","point2"),n=t.create("point",e[1],l);else if(a.Z.isString(e[1])||a.Z.isPoint(e[1]))n=t.select(e[1]);else if(a.Z.isFunction(e[1])&&a.Z.isPoint(e[1]()))n=e[1]();else{if(!(a.Z.isFunction(e[1])&&e[1]().length&&e[1]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [point,point], [[x1,y1],[x2,y2]]`);l=a.Z.copyAttributes(o,t.options,"comb","point2"),n=u.Z.createPoint(t,e[1](),l)}return l=a.Z.copyAttributes(o,t.options,"comb"),a.Z.merge(l,a.Z.copyAttributes(o,t.options,"comb","curve")),(h=t.create("curve",[[0],[0]],l)).updateDataArray=function(){var d,Z,C,P,S,w,D,k,I,U,J=0,z=s.Dist(n),V=s,W=n;for(k=a.Z.evaluate(h.visProp.frequency),I=-a.Z.evaluate(h.visProp.angle),U=a.Z.evaluate(h.visProp.width),a.Z.evaluate(h.visProp.reverse)&&(V=n,W=s,I=-I),d=Math.cos(I),Z=Math.sin(I),C=(W.X()-V.X())/z,P=(W.Y()-V.Y())/z,d*=U/Math.abs(Z),Z*=U/Math.abs(Z),this.dataX=[],this.dataY=[];J<z;)S=V.X()+C*J,w=V.Y()+P*J,Z*=D=Math.min(d,z-J)/Math.abs(d),d*=D,this.dataX.push(S),this.dataY.push(w),this.dataX.push(S+C*d+P*Z),this.dataY.push(w-C*Z+P*d),this.dataX.push(NaN),this.dataY.push(NaN),J+=k},h},u.Z.registerElement("comb",u.Z.createComb);var ye=function(){ge.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Pe=function(){return this.tangent.getSlope()};u.Z.createSlopeTriangle=function(t,e,o){var s,n,h,l,p,d,Z,C,P,S=!1;if(e.length===1&&e[0].type===x.Z.OBJECT_TYPE_TANGENT)n=e[0],h=n.glider;else if(e.length===1&&e[0].type===x.Z.OBJECT_TYPE_GLIDER)h=e[0],P=a.Z.copyAttributes(o,t.options,"slopetriangle","tangent"),n=t.create("tangent",[h],P),S=!0;else{if(e.length!==2||e[0].elementClass!==x.Z.OBJECT_CLASS_LINE||!a.Z.isPoint(e[1]))throw new Error("JSXGraph: Can't create slope triangle with parent types '"+typeof e[0]+"'.");n=e[0],h=e[1]}return P=a.Z.copyAttributes(o,t.options,"slopetriangle","basepoint"),Z=t.create("point",[function(){return[h.X()+1,h.Y()]}],P),P=a.Z.copyAttributes(o,t.options,"slopetriangle","baseline"),d=t.create("line",[h,Z],P),P=a.Z.copyAttributes(o,t.options,"slopetriangle","glider"),l=t.create("glider",[h.X()+1,h.Y(),d],P),P=a.Z.copyAttributes(o,t.options,"slopetriangle","toppoint"),p=t.create("point",[function(){return[l.X(),l.Y()+(l.X()-h.X())*n.getSlope()]}],P),(P=a.Z.copyAttributes(o,t.options,"slopetriangle")).borders=a.Z.copyAttributes(P.borders,t.options,"slopetriangle","borders"),(s=t.create("polygon",[h,l,p],P)).Value=Pe,s.tangent=n,s._isPrivateTangent=S,s.borders[2].setArrow(!1,!1),P=a.Z.copyAttributes(o,t.options,"slopetriangle","label"),(C=t.create("text",[function(){return l.X()+.1},function(){return .5*(l.Y()+p.Y())},function(){return""}],P))._setText(function(){return a.Z.toFixed(s.Value(),a.Z.evaluate(C.visProp.digits))}),C.fullUpdate(),s.glider=l,s.basepoint=Z,s.baseline=d,s.toppoint=p,s.label=C,s.subs={glider:l,basePoint:Z,baseLine:d,topPoint:p,label:C},s.inherits.push(l,Z,d,p,C),s.methodMap=u.Z.deepCopy(s.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value"}),s.remove=ye,s},u.Z.registerElement("slopetriangle",u.Z.createSlopeTriangle);var Ee=function(){this._value=this.rendNodeCheckbox.checked,this.board.update()};u.Z.createCheckbox=function(t,e,o){var s,n,h=a.Z.copyAttributes(o,t.options,"checkbox");return n=[e[0],e[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],(s=t.create("text",n,h)).type=a.Z.OBJECT_TYPE_CHECKBOX,s.rendNodeCheckbox=s.rendNode.childNodes[0].childNodes[0],s.rendNodeLabel=s.rendNode.childNodes[0].childNodes[1],s.rendNodeTag=s.rendNodeCheckbox,s.rendNodeTag.disabled=!!h.disabled,s.rendNodeCheckbox.id=s.rendNode.id+"_checkbox",s.rendNodeLabel.id=s.rendNode.id+"_label",s.rendNodeLabel.setAttribute("for",s.rendNodeCheckbox.id),s.setText(e[2]),s.visPropOld.fontsize="0px",t.renderer.updateTextStyle(s,!1),s.rendNodeCheckbox.checked=h.checked,s._value=h.checked,s.Value=function(){return this._value},s.update=function(){return this.needsUpdate&&(u.Z.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},N.Z.addEvent(s.rendNodeCheckbox,"change",Ee,s),s},u.Z.registerElement("checkbox",u.Z.createCheckbox);var Re=function(t){this._value=this.rendNodeInput.value,this.board.update()};u.Z.createInput=function(t,e,o){var s,n,h=a.Z.copyAttributes(o,t.options,"input");return n=[e[0],e[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><span></span><input type="text" maxlength="'+h.maxlength+'" style="width:100%"/></span>'],(s=t.create("text",n,h)).type=a.Z.OBJECT_TYPE_INPUT,s.rendNodeLabel=s.rendNode.childNodes[0].childNodes[0],s.rendNodeInput=s.rendNode.childNodes[0].childNodes[1],s.rendNodeInput.value=e[2],s.rendNodeTag=s.rendNodeInput,s.rendNodeTag.disabled=!!h.disabled,s.rendNodeLabel.id=s.rendNode.id+"_label",s.rendNodeInput.id=s.rendNode.id+"_input",s.setText(e[3]),s._value=e[2],s.update=function(){return this.needsUpdate&&(u.Z.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},s.Value=function(){return this._value},s.set=function(l){return this._value=l,this.rendNodeInput.value=l,this},N.Z.addEvent(s.rendNodeInput,"input",Re,s),N.Z.addEvent(s.rendNodeInput,"mousedown",function(l){a.Z.exists(l.stopPropagation)&&l.stopPropagation()},s),N.Z.addEvent(s.rendNodeInput,"touchstart",function(l){a.Z.exists(l.stopPropagation)&&l.stopPropagation()},s),N.Z.addEvent(s.rendNodeInput,"pointerdown",function(l){a.Z.exists(l.stopPropagation)&&l.stopPropagation()},s),s.visPropOld.fontsize="0px",t.renderer.updateTextStyle(s,!1),s},u.Z.registerElement("input",u.Z.createInput);var Ae=function(){this._handler&&this._handler(),this.board.update()};u.Z.createButton=function(t,e,o){var s,n,h=a.Z.copyAttributes(o,t.options,"button");return n=[e[0],e[1],'<button type="button" style="width:100%;"></button>'],(s=t.create("text",n,h)).type=a.Z.OBJECT_TYPE_BUTTON,s.rendNodeButton=s.rendNode.childNodes[0],s.rendNodeButton.id=s.rendNode.id+"_button",s.rendNodeTag=s.rendNodeButton,s.rendNodeTag.disabled=!!h.disabled,s.setText(e[2]),s.visPropOld.fontsize="0px",t.renderer.updateTextStyle(s,!1),e[3]&&(a.Z.isString(e[3])?(s._jc=new u.Z.JessieCode,s._jc.use(t),s._handler=function(){s._jc.parse(e[3])}):s._handler=e[3]),N.Z.addEvent(s.rendNodeButton,"click",Ae,s),N.Z.addEvent(s.rendNodeButton,"mousedown",function(l){a.Z.exists(l.stopPropagation)&&l.stopPropagation()},s),N.Z.addEvent(s.rendNodeButton,"touchstart",function(l){a.Z.exists(l.stopPropagation)&&l.stopPropagation()},s),N.Z.addEvent(s.rendNodeButton,"pointerdown",function(l){a.Z.exists(l.stopPropagation)&&l.stopPropagation()},s),s},u.Z.registerElement("button",u.Z.createButton),u.Z.ForeignObject=function(t,e,o,s,n){this.constructor(t,o,x.Z.OBJECT_TYPE_FOREIGNOBJECT,x.Z.OBJECT_CLASS_OTHER),this.element=this.board.select(o.anchor),this.coordsConstructor(e),this._useUserSize=!1,this.size=[1,1],a.Z.exists(n)&&n.length>0&&(this._useUserSize=!0,this.W=a.Z.createFunction(n[0],this.board,""),this.H=a.Z.createFunction(n[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()]),this.content=s,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=u.Z.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},u.Z.ForeignObject.prototype=new Gt.Z,a.Z.copyPrototypeMethods(u.Z.ForeignObject,oe.Z,"coordsConstructor"),u.Z.extend(u.Z.ForeignObject.prototype,{hasPoint:function(t,e){var o,s,n,h,l,p,d,Z,C,P=this.transformations.length;return a.Z.isObject(a.Z.evaluate(this.visProp.precision))?(h=this.board._inputDevice,l=a.Z.evaluate(this.visProp.precision[h])):l=this.board.options.precision.hasPoint,P===0?(o=t-this.coords.scrCoords[1],s=this.coords.scrCoords[2]-e,o>=-(n=l)&&o-this.size[0]<=n&&s>=-n&&s-this.size[1]<=n):(d=[(p=(p=new b.Z(x.Z.COORDS_BY_SCREEN,[t,e],this.board)).usrCoords)[0]-this.span[0][0],p[1]-this.span[0][1],p[2]-this.span[0][2]],0<=(Z=(C=B.Z.innerProduct)(d,this.span[1]))&&Z<=C(this.span[1],this.span[1])&&0<=(Z=C(d,this.span[2]))&&Z<=C(this.span[2],this.span[2]))},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateSize(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var t=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(t=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[t.width,t.height]),this},updateSpan:function(){var t,e,o=this.transformations.length,s=[];if(o===0)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(s[0]=[this.Z(),this.X(),this.Y()],s[1]=[this.Z(),this.X()+this.W(),this.Y()],s[2]=[this.Z(),this.X(),this.Y()+this.H()],t=0;t<o;t++)for(e=0;e<3;e++)s[e]=B.Z.matVecMult(this.transformations[t].matrix,s[e]);for(e=0;e<3;e++)s[e][1]/=s[e][0],s[e][2]/=s[e][0],s[e][0]/=s[e][0];for(e=1;e<3;e++)s[e][0]-=s[0][0],s[e][1]-=s[0][1],s[e][2]-=s[0][2];this.span=s}return this},addTransform:function(t){var e;if(a.Z.isArray(t))for(e=0;e<t.length;e++)this.transformations.push(t[e]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return this.parents.length!==0&&(t=this.parents),t},setSize:function(t,e){return this.W=a.Z.createFunction(t,this.board,""),this.H=a.Z.createFunction(e,this.board,""),this._useUserSize=!0,this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),u.Z.createForeignObject=function(t,e,o){var s,n,h=e[0],l=e[1],p=[];if(e.length>=2&&(p=e[2]),s=a.Z.copyAttributes(o,t.options,"foreignobject"),!(n=oe.Z.create(u.Z.ForeignObject,t,l,s,h,p)))throw new Error("JSXGraph: Can't create foreignObject with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]`);return n},u.Z.registerElement("foreignobject",u.Z.createForeignObject),u.Z.registerElement("fo",u.Z.createForeignObject),u.Z.ForeignObject,u.Z.extend(it.Z,{axes3d:{axesPosition:"center",xAxis:{visible:!0,point2:{name:"x"}},yAxis:{visible:!0,point2:{name:"y"}},zAxis:{visible:!0,point2:{name:"z"}},xPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},yPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},zPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},xPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},yPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},zPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},xPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1}},axis3d:{highlight:!1,strokecolor:"black",strokeWidth:1,tabindex:null,point1:{visible:!1,name:""},point2:{visible:!1,name:"",label:{visible:!0}}},curve3d:{highlight:!1,tabindex:-1,strokeWidth:1,numberPointsHigh:200},mesh3d:{strokeWidth:1,strokeColor:"#9a9a9a",strokeOpacity:.6,highlight:!1,fillColor:"#9a9a9a",fillOpacity:.1,tabindex:null,visible:"inherit"},line3d:{strokeWidth:1,strokeColor:"black",fixed:!0,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",point:{visible:!1,name:""},point1:{visible:!1,name:""},point2:{visible:!1,name:""}},plane3d:{strokeWidth:0,strokeColor:"black",strokeOpacity:1,highlight:!1,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",gradientAngle:Math.PI,fillColor:"#a7a7a7",fillOpacity:.6,point:{visible:!1,name:"",fixed:!0}},point3d:{infoboxDigits:"auto",strokeWidth:0,gradient:"radial",gradientSecondColor:"#555555",fillColor:"yellow",highlightStrokeColor:"#555555"},surface3d:{highlight:!1,tabindex:-1,strokeWidth:1,stepsU:30,stepsV:30},view3d:{needsRegularUpdate:!0}}),u.Z.Options,u.Z.View3D=function(t,e,o){this.constructor(t,o,x.Z.OBJECT_TYPE_VIEW3D,x.Z.OBJECT_CLASS_3D),this.objects={},this.objectsList=[],this.elementsByName={},this.defaultAxes=null,this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.llftCorner=e[0],this.size=e[1],this.bbox3D=e[2],this.r=-1,this.timeoutAzimuth=null,this.id=this.board.setId(this,"V"),this.board.finalizeAdding(this),this.elType="view3d",this.methodMap=a.Z.deepCopy(this.methodMap,{})},u.Z.View3D.prototype=new Gt.Z,u.Z.extend(u.Z.View3D.prototype,{create:function(t,e,o){var s=[];return t.indexOf("3d")>0&&s.push(this),this.board.create(t,s.concat(e),o)},select:function(t,e){var o,s,n,h,l=t;if(l===null)return l;if(a.Z.isString(l)&&l!=="")a.Z.exists(this.objects[l])?l=this.objects[l]:a.Z.exists(this.elementsByName[l])&&(l=this.elementsByName[l]);else if(!e&&(a.Z.isFunction(l)||a.Z.isObject(l)&&!a.Z.isFunction(l.setAttribute))){for(s={},h=(o=a.Z.filterElements(this.objectsList,l)).length,n=0;n<h;n++)s[o[n].id]=o[n];l=new Dt(s)}else a.Z.isObject(l)&&a.Z.exists(l.id)&&!a.Z.exists(this.objects[l.id])&&(l=null);return l},update:function(){var t,e,o,s,n;return a.Z.exists(this.el_slide)&&a.Z.exists(this.az_slide)&&this.needsUpdate?(t=this.el_slide.Value(),e=this.r,o=this.az_slide.Value(),s=e*Math.sin(t),n=[[1,0,0],[0,1,0],[0,0,1]],this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.matrix3D[1][1]=e*Math.cos(o),this.matrix3D[1][2]=-e*Math.sin(o),this.matrix3D[2][1]=s*Math.sin(o),this.matrix3D[2][2]=s*Math.cos(o),this.matrix3D[2][3]=Math.cos(t),n[1][1]=this.size[0]/(this.bbox3D[0][1]-this.bbox3D[0][0]),n[2][2]=this.size[1]/(this.bbox3D[1][1]-this.bbox3D[1][0]),n[1][0]=this.llftCorner[0]-n[1][1]*this.bbox3D[0][0],n[2][0]=this.llftCorner[1]-n[2][2]*this.bbox3D[1][0],this.matrix3D=B.Z.matMatMult(n,this.matrix3D),this):this},updateRenderer:function(){return this.needsUpdate=!1,this},project3DTo2D:function(t,e,o){var s;return s=arguments.length===3?[1,t,e,o]:t.length===3?[1].concat(t):t,B.Z.matVecMult(this.matrix3D,s)},project2DTo3DPlane:function(t,e,o){var s,n,h,l,p=e.slice(1),d=[1,0,0,0];o=o||[1,0,0,0],l=B.Z.norm(p,3),h=B.Z.innerProduct(o.slice(1),p,3)/l,(s=this.matrix3D.slice(0,3)).push([0].concat(p)),n=t.coords.usrCoords.concat([h]);try{s[2][3]===1&&(s[2][1]=s[2][2]=.001*B.Z.eps),d=B.Z.Numerics.Gauss(s,n)}catch{d=[0,NaN,NaN,NaN]}return d},project3DToCube:function(t){var e=this.bbox3D;return t[1]<e[0][0]&&(t[1]=e[0][0]),t[1]>e[0][1]&&(t[1]=e[0][1]),t[2]<e[1][0]&&(t[2]=e[1][0]),t[2]>e[1][1]&&(t[2]=e[1][1]),t[3]<e[2][0]&&(t[3]=e[2][0]),t[3]>e[2][1]&&(t[3]=e[2][1]),t},intersectionLineCube:function(t,e,o){var s,n,h,l;for(s=o,n=0;n<3;n++)e[n]!==0&&(h=(this.bbox3D[n][0]-t[n])/e[n],l=(this.bbox3D[n][1]-t[n])/e[n],s=o<0?Math.max(s,Math.min(h,l)):Math.min(s,Math.max(h,l)));return s},isInCube:function(t){return t[0]>this.bbox3D[0][0]-B.Z.eps&&t[0]<this.bbox3D[0][1]+B.Z.eps&&t[1]>this.bbox3D[1][0]-B.Z.eps&&t[1]<this.bbox3D[1][1]+B.Z.eps&&t[2]>this.bbox3D[2][0]-B.Z.eps&&t[2]<this.bbox3D[2][1]+B.Z.eps},intersectionPlanePlane:function(t,e,o){var s,n,h,l,p=[[],[]];return o=o||e.d,s=B.Z.Geometry.meet3Planes(t.normal,t.d,e.normal,o,B.Z.crossProduct(t.normal,e.normal),0),n=B.Z.Geometry.meetPlanePlane(t.vec1,t.vec2,e.vec1,e.vec2),h=this.intersectionLineCube(s,n,1/0),l=B.Z.axpy(h,n,s),this.isInCube(l)&&(p[0]=l),h=this.intersectionLineCube(s,n,-1/0),l=B.Z.axpy(h,n,s),this.isInCube(l)&&(p[1]=l),p},getMesh:function(t,e,o){var s,n,h,l,p,d,Z,C=[0,0,0],P=e[2],S=o[2],w=[],D=[];for(d=(a.Z.evaluate(e[1])-a.Z.evaluate(e[0]))/P,Z=(a.Z.evaluate(o[1])-a.Z.evaluate(o[0]))/S,s=0;s<=P;s++){for(h=e[0]+d*s,n=0;n<=S;n++)l=o[0]+Z*n,C=a.Z.isFunction(t)?t(h,l):[t[0](h,l),t[1](h,l),t[2](h,l)],p=this.project3DTo2D(C),w.push(p[1]),D.push(p[2]);w.push(NaN),D.push(NaN)}for(n=0;n<=S;n++){for(l=o[0]+Z*n,s=0;s<=P;s++)h=e[0]+d*s,C=a.Z.isFunction(t)?t(h,l):[t[0](h,l),t[1](h,l),t[2](h,l)],p=this.project3DTo2D(C),w.push(p[1]),D.push(p[2]);w.push(NaN),D.push(NaN)}return[w,D]},animateAzimuth:function(){var t=this.az_slide._smin,e=this.az_slide._smax-t,o=this.az_slide.Value()+.1;this.az_slide.position=(o-t)/e,this.az_slide.position>1&&(this.az_slide.position=0),this.board.update(),this.timeoutAzimuth=setTimeout(function(){this.animateAzimuth()}.bind(this),200)},stopAzimuth:function(){clearTimeout(this.timeoutAzimuth),this.timeoutAzimuth=null}}),u.Z.createView3D=function(t,e,o){var s,n,h,l,p,d,Z=e[0],C=e[1];return n=a.Z.copyAttributes(o,t.options,"view3d"),(s=new u.Z.View3D(t,e,n)).defaultAxes=s.create("axes3d",e,o),h=Z[0],l=Z[1],p=C[0],d=C[1],s.az_slide=t.create("slider",[[h-1,l-2],[h+p+1,l-2],[0,1,2*Math.PI]],{style:6,name:"az",point1:{frozen:!0},point2:{frozen:!0}}),s.el_slide=t.create("slider",[[h-1,l],[h-1,l+d],[0,.3,Math.PI/2]],{style:6,name:"el",point1:{frozen:!0},point2:{frozen:!0}}),s.board.highlightInfobox=function(P,S,w){var D,k,I,U,J=w.board,z=null;for(k=0;k<w.parents.length&&!(z=J.objects[w.parents[k]]).is3D;k++);if(z){if(U=[1,0,0,z.coords[3]],I=s.project2DTo3DPlane(z.element2D,[1,0,0,1],U),!s.isInCube(I))return void s.board.highlightCustomInfobox("",z);(D=a.Z.evaluate(z.visProp.infoboxdigits))==="auto"?s.board.highlightCustomInfobox("("+a.Z.autoDigits(z.X())+" | "+a.Z.autoDigits(z.Y())+" | "+a.Z.autoDigits(z.Z())+")",z):s.board.highlightCustomInfobox("("+a.Z.toFixed(z.X(),D)+" | "+a.Z.toFixed(z.Y(),D)+" | "+a.Z.toFixed(z.Z(),D)+")",z)}else s.board.highlightCustomInfobox("("+P+", "+S+")",w)},s.board.update(),s},u.Z.registerElement("view3d",u.Z.createView3D),u.Z.View3D,u.Z.GeometryElement3D=function(t,e){this.elType=e,this.id=this.board.setId(this,e),this.view=t,this.element2D=null,this.is3D=!0,this.view.objects[this.id]=this,this.view.objectsList.push(this),this.name!==""&&(this.view.elementsByName[this.name]=this)},u.Z.GeometryElement3D,u.Z.createAxes3D=function(t,e,o){var s,n,h,l,p,d,Z,C,P,S,w,D,k,I,U,J,z,V=e[0],W=["x","y","z"],$="Axis",nt=["Rear","Front"],et=[0,0,0],lt=[0,0,0],ot={};if(a.Z.exists(V.bbox3D))for(s=0;s<W.length;s++)et[s]=V.bbox3D[s][0],lt[s]=V.bbox3D[s][1];else for(s=0;s<W.length;s++)et[s]=e[1][s],lt[s]=e[2][1];for(Z=(d=a.Z.copyAttributes(o,t.options,"axes3d")).axesposition,s=0;s<W.length;s++)U=(C=W[s])+$,Z==="center"?(P=[0,0,0],(S=[0,0,0])[s]=lt[s],ot[U]=V.create("axis3d",[P,S],d[U.toLowerCase()])):(U+="Border",P=et.slice(),S=lt.slice(),s===2?(P[1]=lt[1],S[0]=et[0]):(P[s]=lt[s],S[2]=et[2]),S[s]=lt[s],d[U.toLowerCase()].lastArrow=!1,ot[U]=V.create("axis3d",[P,S],d[U.toLowerCase()]),z={visible:!0,minorTicks:0,tickEndings:[0,1],drawLabels:!1},s===2&&(z.tickEndings=[1,0]),ot[U+"Ticks"]=V.create("ticks",[ot[U],1],z));for(ot.O=V.create("intersection",[ot[W[0]+$],ot[W[1]+$]],{name:"",visible:!1,withLabel:!1}),s=0;s<W.length;s++)for(l=(s+1)%3,p=(s+2)%3,C=W[s],n=0;n<nt.length;n++)(P=[0,0,0])[s]=n===0?et[s]:lt[s],D=[0,0,0],(w=[0,0,0])[l]=1,D[p]=1,k=[et[l],lt[l]],I=[et[p],lt[p]],U=C+"Plane"+nt[n],d=a.Z.copyAttributes(o,t.options,"axes3d",U),ot[U]=V.create("plane3d",[P,w,D,k,I],d),ot[U].elType="axisplane3d";for(s=0;s<W.length;s++)for(C=W[s],n=0;n<nt.length;n++)for(h=1;h<=2;h++)U=C+"Plane"+nt[n]+W[l=(s+h)%3].toUpperCase()+"Axis",J=C+"Plane"+nt[n],(P=[0,0,0])[s]=(S=[0,0,0])[s]=n===0?et[s]:lt[s],P[l]=et[l],S[l]=lt[l],d=a.Z.copyAttributes(o,t.options,"axes3d",U),ot[U]=V.create("axis3d",[P,S],d),ot[J].addChild(ot[U]),ot[J].element2D.inherits.push(ot[U]);return ot},u.Z.registerElement("axes3d",u.Z.createAxes3D),u.Z.createAxis3D=function(t,e,o){var s,n,h,l,p,d,Z=e[0],C=e[1],P=e[2];return s=a.Z.copyAttributes(o.point1,t.options,"axis3d","point1"),n=Z.create("point",[(l=C[0],p=C[1],d=C[2],function(){return Z.project3DTo2D(l,p,d)[1]}),function(S,w,D){return function(){return Z.project3DTo2D(S,w,D)[2]}}(C[0],C[1],C[2])],s),s=a.Z.copyAttributes(o.point2,t.options,"axis3d","point2"),h=Z.create("point",[function(S,w,D){return function(){return Z.project3DTo2D(S,w,D)[1]}}(P[0],P[1],P[2]),function(S,w,D){return function(){return Z.project3DTo2D(S,w,D)[2]}}(P[0],P[1],P[2])],s),s=a.Z.copyAttributes(o,t.options,"axis3d"),Z.create("arrow",[n,h],s)},u.Z.registerElement("axis3d",u.Z.createAxis3D),u.Z.createMesh3D=function(t,e,o){var s,n=e[0],h=e[1],l=e[2],p=e[3],d=e[4],Z=e[5];return(s=n.create("curve",[[],[]],o)).updateDataArray=function(){var C,P,S,w,D=p[0],k=p[1],I=Z[0],U=Z[1],J=[0,0,0],z=[0,0,0],V=[0,0,0];if(this.dataX=[],this.dataY=[],a.Z.isFunction(h))V=h().slice(1);else for(w=0;w<3;w++)V[w]=a.Z.evaluate(h[w]);for(w=0;w<3;w++)J[w]=a.Z.evaluate(l[w]),z[w]=a.Z.evaluate(d[w]);for(C=u.Z.Math.norm(J,3),P=u.Z.Math.norm(z,3),w=0;w<3;w++)J[w]/=C,z[w]/=P;S=n.getMesh([function(W,$){return V[0]+W*J[0]+$*z[0]},function(W,$){return V[1]+W*J[1]+$*z[1]},function(W,$){return V[2]+W*J[2]+$*z[2]}],[Math.ceil(D),Math.floor(k),(Math.ceil(k)-Math.floor(D))/1],[Math.ceil(I),Math.floor(U),(Math.ceil(U)-Math.floor(I))/1]),this.dataX=S[0],this.dataY=S[1]},s},u.Z.registerElement("mesh3d",u.Z.createMesh3D),u.Z.Point3D=function(t,e,o,s){this.constructor(t.board,s,x.Z.OBJECT_TYPE_POINT3D,x.Z.OBJECT_CLASS_3D),this.constructor3D(t,"point3d"),this.id=this.view.board.setId(this,"P3D"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.F=e,this.slide=o,this.X=function(){return this.coords[1]},this.Y=function(){return this.coords[2]},this.Z=function(){return this.coords[3]},this._params=null,this._c2d=null,this.methodMap=a.Z.deepCopy(this.methodMap,{})},u.Z.Point3D.prototype=new u.Z.GeometryElement,a.Z.copyPrototypeMethods(u.Z.Point3D,u.Z.GeometryElement3D,"constructor3D"),u.Z.extend(u.Z.Point3D.prototype,{updateCoords:function(){var t;if(a.Z.isFunction(this.F))this.coords=[1].concat(a.Z.evaluate(this.F));else for(this.coords[0]=1,t=0;t<3;t++)a.Z.isFunction(this.F[t])&&(this.coords[t+1]=a.Z.evaluate(this.F[t]));return this},initCoords:function(){var t;if(a.Z.isFunction(this.F))this.coords=[1].concat(a.Z.evaluate(this.F));else for(this.coords[0]=1,t=0;t<3;t++)this.coords[t+1]=a.Z.evaluate(this.F[t]);return this},normalizeCoords:function(){return Math.abs(this.coords[0])>B.Z.eps&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(t,e){var o=this.coords;return this.coords.slice(),t.length===3?(o[0]=1,o[1]=t[0],o[2]=t[1],o[3]=t[2]):(o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[2],this.normalizeCoords()),this},update:function(t){var e,o;return this.element2D.draggable()&&g.Z.distance(this._c2d,this.element2D.coords.usrCoords)!==0?this.slide?this.projectCoords2Surface():(o=[1,0,0,this.coords[3]],(e=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],o))[0]!==0&&(this.coords=this.view.project3DToCube(e))):(this.updateCoords(),this.element2D.coords.setCoordinates(x.Z.COORDS_BY_USER,this.view.project3DTo2D([1,this.X(),this.Y(),this.Z()]))),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords2Surface:function(){var t,e,o,s=[0,0],n=this.slide,h=this;n!==null&&(o=function(l,p,d,Z){var C=[1,n.X(d[0],d[1]),n.Y(d[0],d[1]),n.Z(d[0],d[1])],P=h.view.project3DTo2D(C);return Z[0]=h.element2D.X()-P[1],Z[1]=h.element2D.Y()-P[2],Z[0]*Z[0]+Z[1]*Z[1]},a.Z.exists(this._params)&&(s=this._params.slice()),B.Z.Nlp.FindMinimum(o,2,2,s,5,1e-6,0,200),t=[1,n.X(s[0],s[1]),n.Y(s[0],s[1]),n.Z(s[0],s[1])],e=this.view.project3DTo2D(t),this._params=s,this.coords=t,this.element2D.coords.setCoordinates(x.Z.COORDS_BY_USER,e),this._c2d=e)},__evt__update3D:function(t){}}),u.Z.createPoint3D=function(t,e,o){var s,n,h,l,p,d=e[0];if(h=e.length>2&&a.Z.exists(e[e.length-1].is3D)?e.pop():null,e.length===2)n=e[1];else{if(e.length!==4)throw new Error("JSXGraph: Can't create point3d with parent types '"+typeof e[0]+"' and '"+typeof e[1]+`'.
Possible parent types: [[x,y,z]], [x,y,z]`);n=e.slice(1)}return s=a.Z.copyAttributes(o,t.options,"point3d"),(p=new u.Z.Point3D(d,n,h,s)).initCoords(),l=d.project3DTo2D(p.coords),s.name=p.name,p.element2D=d.create("point",l,s),p.addChild(p.element2D),p.inherits.push(p.element2D),p.element2D.setParents(p),p._c2d=p.element2D.coords.usrCoords.slice(),p},u.Z.registerElement("point3d",u.Z.createPoint3D),u.Z.Curve3D=function(t,e,o,s,n,h,l){this.constructor(t.board,l,x.Z.OBJECT_TYPE_CURVE3D,x.Z.OBJECT_CLASS_3D),this.constructor3D(t,"surface3d"),this.id=this.view.board.setId(this,"S3D"),this.board.finalizeAdding(this),this.F=e,this.X=o,this.Y=s,this.Z=n,this.F!==null&&(this.X=function(p){return this.F(p)[0]},this.Y=function(p){return this.F(p)[1]},this.Z=function(p){return this.F(p)[2]}),this.range=h,this.methodMap=a.Z.deepCopy(this.methodMap,{})},u.Z.Curve3D.prototype=new u.Z.GeometryElement,a.Z.copyPrototypeMethods(u.Z.Curve3D,u.Z.GeometryElement3D,"constructor3D"),u.Z.extend(u.Z.Curve3D.prototype,{updateDataArray:function(){var t,e,o,s,n,h,l,p,d=a.Z.evaluate(this.visProp.numberpointshigh),Z=[0,0,0];if(l=[],p=[],a.Z.isArray(this.X))for(d=this.X.length,h=0;h<d;h++)Z=[this.X[h],this.Y[h],this.Z[h]],n=this.view.project3DTo2D(Z),l.push(n[1]),p.push(n[2]);else for(t=a.Z.evaluate(this.range),e=a.Z.evaluate(t[0]),s=((o=a.Z.evaluate(t[1]))-e)/(d-1),h=e;h<=o;h+=s)Z=this.F!==null?this.F(h):[this.X(h),this.Y(h),this.Z(h)],n=this.view.project3DTo2D(Z),l.push(n[1]),p.push(n[2]);return{X:l,Y:p}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),u.Z.createCurve3D=function(t,e,o){var s,n,h,l,p,d,Z,C=e[0];return e.length===3?(s=e[1],p=e[2],n=null,h=null,l=null):(n=e[1],h=e[2],l=e[3],p=e[4],s=null),d=a.Z.copyAttributes(o,t.options,"curve3d"),(Z=new u.Z.Curve3D(C,s,n,h,l,p,d)).element2D=t.create("curve",[[],[]],d),Z.element2D.updateDataArray=function(){var P=Z.updateDataArray();this.dataX=P.X,this.dataY=P.Y},Z.addChild(Z.element2D),Z.inherits.push(Z.element2D),Z.element2D.setParents(Z),Z.element2D.prepareUpdate().update(),t.isSuspendedUpdate||Z.element2D.updateVisibility().updateRenderer(),Z},u.Z.registerElement("curve3d",u.Z.createCurve3D),u.Z.Line3D=function(t,e,o,s,n){this.constructor(t.board,n,x.Z.OBJECT_TYPE_LINE3D,x.Z.OBJECT_CLASS_3D),this.constructor3D(t,"line3d"),this.id=this.view.board.setId(this,"L3D"),this.board.finalizeAdding(this),this.point=e,this.direction=o,this.range=s||[-1/0,1/0],this.point1=null,this.point2=null,this.methodMap=a.Z.deepCopy(this.methodMap,{})},u.Z.Line3D.prototype=new u.Z.GeometryElement,a.Z.copyPrototypeMethods(u.Z.Line3D,u.Z.GeometryElement3D,"constructor3D"),u.Z.extend(u.Z.Line3D.prototype,{getPointCoords:function(t){var e,o,s,n=[];if(e=[this.point.X(),this.point.Y(),this.point.Z()],a.Z.isFunction(this.direction))n=this.direction();else for(o=1;o<4;o++)n.push(a.Z.evaluate(this.direction[o]));return s=a.Z.evaluate(t),Math.abs(s)===1/0&&(t=this.view.intersectionLineCube(e,n,s)),[e[0]+n[0]*s,e[1]+n[1]*s,e[2]+n[2]*s]},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),u.Z.createLine3D=function(t,e,o){var s,n,h,l,p,d,Z,C,P=e[0];return s=a.Z.copyAttributes(o,t.options,"line3d"),a.Z.isPoint3D(e[2])||e.length===3&&(a.Z.isArray(e[2])||a.Z.isFunction(e[2]))?(d=a.Z.providePoints3D(P,[e[1]],o,"line3d",["point1"])[0],Z=a.Z.providePoints3D(P,[e[2]],o,"line3d",["point2"])[0],l=function(){return[Z.X()-d.X(),Z.Y()-d.Y(),Z.Z()-d.Z()]},p=[0,1],C=new u.Z.Line3D(P,d,l,p,s)):(h=a.Z.providePoints3D(P,[e[1]],o,"line3d",["point"])[0],a.Z.isFunction(e[2])?l=e[2]:e[2].length===3?l=[1].concat(e[2]):e[2].length===4&&(l=e[2]),p=e[3],n=a.Z.providePoints3D(P,[[0,0,0],[0,0,0]],o,"line3d",["point1","point2"]),C=new u.Z.Line3D(P,h,l,p,s),n[0].F=function(){return C.getPointCoords(a.Z.evaluate(C.range[0]))},n[0].prepareUpdate().update(),d=n[0],n[1].F=function(){return C.getPointCoords(a.Z.evaluate(C.range[1]))},n[1].prepareUpdate().update(),Z=n[1]),C.element2D=P.create("segment",[d.element2D,Z.element2D],s),C.addChild(C.element2D),C.inherits.push(C.element2D),C.element2D.setParents(C),d.addChild(C),Z.addChild(C),C.point1=d,C.point2=Z,C.update(),C.element2D.prepareUpdate().update().updateRenderer(),C},u.Z.registerElement("line3d",u.Z.createLine3D),u.Z.Plane3D=function(t,e,o,s,n,h,l){this.constructor(t.board,l,x.Z.OBJECT_TYPE_PLANE3D,x.Z.OBJECT_CLASS_3D),this.constructor3D(t,"plane3d"),this.id=this.view.board.setId(this,"PL3D"),this.board.finalizeAdding(this),this.point=e,this.direction1=o,this.direction2=n,this.range1=s||[-1/0,1/0],this.range2=h||[-1/0,1/0],this.vec1=[0,0,0],this.vec2=[0,0,0],this.grid=null,this.normal=[0,0,0],this.d=0,this.updateNormal(),this.methodMap=a.Z.deepCopy(this.methodMap,{})},u.Z.Plane3D.prototype=new u.Z.GeometryElement,a.Z.copyPrototypeMethods(u.Z.Plane3D,u.Z.GeometryElement3D,"constructor3D"),u.Z.extend(u.Z.Plane3D.prototype,{updateNormal:function(){var t,e;for(t=0;t<3;t++)this.vec1[t]=a.Z.evaluate(this.direction1[t]),this.vec2[t]=a.Z.evaluate(this.direction2[t]);if(this.normal=B.Z.crossProduct(this.vec1,this.vec2),e=B.Z.norm(this.normal),Math.abs(e)>B.Z.eps)for(t=0;t<3;t++)this.normal[t]/=e;return this.d=B.Z.innerProduct(this.point.coords.slice(1),this.normal,3),this},updateDataArray:function(){var t,e,o,s,n,h,l,p,d,Z,C,P,S,w,D=["xPlaneRear","yPlaneRear","zPlaneRear"],k=[],I=[0,0,0],U=[0,0,0],J=[0,0,0],z=[0,0,0],V=this.view;if(this.dataX=[],this.dataY=[],this.updateNormal(),this.elType!=="axisplane3d"&&V.defaultAxes&&a.Z.evaluate(this.range1[0])===-1/0&&a.Z.evaluate(this.range1[1])===1/0&&a.Z.evaluate(this.range2[0])===-1/0&&a.Z.evaluate(this.range2[1])===1/0){for(Z=0;Z<D.length;Z++){if((z=V.intersectionPlanePlane(this,V.defaultAxes[D[Z]]))[0].length===3&&z[1].length===3){for(d=0;d<k.length&&!(g.Z.distance(z[0],k[d][0],3)<B.Z.eps&&g.Z.distance(z[1],k[d][1],3)<B.Z.eps||g.Z.distance(z[0],k[d][1],3)<B.Z.eps&&g.Z.distance(z[1],k[d][0],3)<B.Z.eps);d++);d===k.length&&k.push(z.slice())}if((z=[0,0,0])[Z]=V.bbox3D[Z][1],p=B.Z.innerProduct(z,V.defaultAxes[D[Z]].normal,3),(z=V.intersectionPlanePlane(this,V.defaultAxes[D[Z]],p))[0].length===3&&z[1].length===3){for(d=0;d<k.length&&!(g.Z.distance(z[0],k[d][0],3)<B.Z.eps&&g.Z.distance(z[1],k[d][1],3)<B.Z.eps||g.Z.distance(z[0],k[d][1],3)<B.Z.eps&&g.Z.distance(z[1],k[d][0],3)<B.Z.eps);d++);d===k.length&&k.push(z.slice())}}S=0,d=0;do{for((z=k[S][d]).length===3&&(n=V.project3DTo2D(z),this.dataX.push(n[1]),this.dataY.push(n[2])),d=(d+1)%2,z=k[S][d],w=S,Z=0;Z<k.length;Z++){if(Z!==S&&g.Z.distance(z,k[Z][0])<B.Z.eps){S=Z,d=0;break}if(Z!==S&&g.Z.distance(z,k[Z][1])<B.Z.eps){S=Z,d=1;break}}if(S===w){console.log("Error: update plane3d: did not find next",S);break}}while(S!==0);n=V.project3DTo2D(k[0][0]),this.dataX.push(n[1]),this.dataY.push(n[2])}else{for(t=a.Z.evaluate(this.range1[0]),e=a.Z.evaluate(this.range1[1]),o=a.Z.evaluate(this.range2[0]),s=a.Z.evaluate(this.range2[1]),J=this.point.coords.slice(1),I=this.vec1.slice(),U=this.vec2.slice(),h=B.Z.norm(I,3),l=B.Z.norm(U,3),d=0;d<3;d++)I[d]/=h,U[d]/=l;for(Z=0;Z<4;Z++){switch(Z){case 0:C=t,P=o;break;case 1:C=e,P=o;break;case 2:C=e,P=s;break;case 3:C=t,P=s}for(d=0;d<3;d++)z[d]=J[d]+C*I[d]+P*U[d];n=V.project3DTo2D(z),this.dataX.push(n[1]),this.dataY.push(n[2])}this.dataX.push(this.dataX[0]),this.dataY.push(this.dataY[0])}return{X:this.dataX,Y:this.dataY}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),u.Z.createPlane3D=function(t,e,o){var s,n,h,l,p=e[0],d=e[2],Z=e[3],C=e[4]||[-1/0,1/0],P=e[5]||[-1/0,1/0];return n=a.Z.providePoints3D(p,[e[1]],o,"plane3d",["point"])[0],s=a.Z.copyAttributes(o,t.options,"plane3d"),h=new u.Z.Plane3D(p,n,d,C,Z,P,s),n.addChild(h),h.element2D=p.create("curve",[[],[]],s),h.element2D.updateDataArray=function(){var S=h.updateDataArray();this.dataX=S.X,this.dataY=S.Y},h.addChild(h.element2D),h.inherits.push(h.element2D),h.element2D.setParents(h),s=a.Z.copyAttributes(o.mesh3d,t.options,"mesh3d"),Math.abs(h.range1[0])!==1/0&&Math.abs(h.range1[1])!==1/0&&Math.abs(h.range2[0])!==1/0&&Math.abs(h.range2[1])!==1/0&&(l=p.create("mesh3d",[function(){return n.coords},d,C,Z,P],s),h.grid=l,h.addChild(l),h.inherits.push(l),l.setParents(h)),h.element2D.prepareUpdate().update(),t.isSuspendedUpdate||h.element2D.updateVisibility().updateRenderer(),h},u.Z.registerElement("plane3d",u.Z.createPlane3D),u.Z.Surface3D=function(t,e,o,s,n,h,l,p){this.constructor(t.board,p,x.Z.OBJECT_TYPE_SURFACE3D,x.Z.OBJECT_CLASS_3D),this.constructor3D(t,"surface3d"),this.id=this.view.board.setId(this,"S3D"),this.board.finalizeAdding(this),this.F=e,this.X=o,this.Y=s,this.Z=n,this.F!==null&&(this.X=function(d,Z){return this.F(d,Z)[0]},this.Y=function(d,Z){return this.F(d,Z)[1]},this.Z=function(d,Z){return this.F(d,Z)[2]}),this.range_u=h,this.range_v=l,this.methodMap=a.Z.deepCopy(this.methodMap,{})},u.Z.Surface3D.prototype=new u.Z.GeometryElement,a.Z.copyPrototypeMethods(u.Z.Surface3D,u.Z.GeometryElement3D,"constructor3D"),u.Z.extend(u.Z.Surface3D.prototype,{updateDataArray:function(){var t,e,o=a.Z.evaluate(this.visProp.stepsu),s=a.Z.evaluate(this.visProp.stepsv),n=a.Z.evaluate(this.range_u),h=a.Z.evaluate(this.range_v);return t=this.F!==null?this.F:[this.X,this.Y,this.Z],{X:(e=this.view.getMesh(t,n.concat([o]),h.concat([s])))[0],Y:e[1]}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),u.Z.createParametricSurface3D=function(t,e,o){var s,n,h,l,p,d,Z,C,P=e[0];return e.length===4?(s=e[1],p=e[2],d=e[3],n=null,h=null,l=null):(n=e[1],h=e[2],l=e[3],p=e[4],d=e[5],s=null),Z=a.Z.copyAttributes(o,t.options,"surface3d"),(C=new u.Z.Surface3D(P,s,n,h,l,p,d,Z)).element2D=P.create("curve",[[],[]],Z),C.element2D.updateDataArray=function(){var S=C.updateDataArray();this.dataX=S.X,this.dataY=S.Y},C.addChild(C.element2D),C.inherits.push(C.element2D),C.element2D.setParents(C),C.element2D.prepareUpdate().update(),t.isSuspendedUpdate||C.element2D.updateVisibility().updateRenderer(),C},u.Z.registerElement("parametricsurface3d",u.Z.createParametricSurface3D),u.Z.createFunctiongraph3D=function(t,e,o){var s=e[0],n=e[1],h=e[2],l=e[3];return s.create("parametricsurface3d",[function(p,d){return p},function(p,d){return d},n,h,l],o)},u.Z.registerElement("functiongraph3d",u.Z.createFunctiongraph3D);const Oe=u.Z.COORDS_BY_SCREEN,De=u.Z.COORDS_BY_USER,Le=u.Z.Dump,ke=u.Z.JSXGraph,Be=u.Z.Math,Ie=u.Z.Options,Se=u.Z.boards,St=u.Z.elements,xt=u.Z.palette,Ge=u.Z.paletteWong,xe=u.Z.Board,Ht=u.Z.Chart,Ct=u.Z.Circle,Mt=u.Z.Complex,Ut=u.Z.Composition,Nt=u.Z.Coords,ct=u.Z.CoordsElement,Zt=u.Z.Curve,st=u.Z.GeometryElement,Ye=u.Z.Group,ze=u.Z.Image,He=u.Z.JessieCode,je=u.Z.Line,We=u.Z.Point,Qt=u.Z.Polygon,ue=u.Z.Text,we=u.Z.Ticks,Te=u.Z.Transformation,Ve=u.Z.Turtle,re=u.Z.View3D,Me=u.Z.LMS2rgb,de=u.Z.addEvent,ne=u.Z.autoDigits,Xe=u.Z.autoHighlight,be=u.Z.bind,ce=u.Z.capitalize,Ue=u.Z.clearVisPropOld,Ze=u.Z.clone,qe=u.Z.cloneAndCopy,fe=u.Z.cmpArrays,Fe=u.Z.coordsArrayToMatrix,ve=u.Z.copyAttributes,Qe=u.Z.createEvalFunction,ti=u.Z.createFunction,ei=u.Z.createHTMLSlider,ii=u.Z.debug,si=u.Z.debugInt,ri=u.Z.debugLine,oi=u.Z.debugWST,ni=u.Z.deepCopy,ai=u.Z.def,hi=u.Z.deprecated,li=u.Z.eliminateDuplicates,ci=u.Z.escapeHTML,ui=u.Z.evalSlider,di=u.Z.evaluate,pi=u.Z.filterElements,fi=u.Z.getBoardByContainerId,_i=u.Z.getCSSTransformMatrix,gi=u.Z.getCSSTransform,vi=u.Z.getDimensions,mi=u.Z.getOffset,bi=u.Z.getPosition,Zi=u.Z.getProp,Ci=u.Z.hex2rgb,yi=u.Z.hsv2rgb,Pi=u.Z.isAndroid,Ei=u.Z.isApple,Oi=u.Z.isArray,Si=u.Z.isInArray,xi=u.Z.isInObject,wi=u.Z.isMetroApp,Ti=u.Z.isMozilla,Mi=u.Z.isName,Ni=u.Z.isNode,Ri=u.Z.isNumber,Ai=u.Z.isObject,Di=u.Z.isPointType,Li=u.Z.isString,ki=u.Z.isTouchDevice,Bi=u.Z.isTransformationOrArray,Ii=u.Z.isWebWorker,Yi=u.Z.isWebkitAndroid,ji=u.Z.isWebkitApple,Xi=u.Z.keys,Ui=u.Z.merge,Fi=u.Z.normalizePointFace,Ji=u.Z.providePoints,Gi=u.Z.registerElement,zi=u.Z.registerReader,Hi=u.Z.removeAllEvents,Wi=u.Z.removeElementFromArray,Vi=u.Z.removeEvent,qi=u.Z.rgb2LMS,Ki=u.Z.rgb2bw,$i=u.Z.rgb2cb,Qi=u.Z.rgb2css,ts=u.Z.rgb2hex,es=u.Z.rgb2hsv,is=u.Z.rgbParser,ss=u.Z.rgba2rgbo,rs=u.Z.rgbo2rgba,os=u.Z.sanitizeHTML,ns=u.Z.shortcut,as=u.Z.str2Bool,hs=u.Z.supportsCanvas,ls=u.Z.supportsPointerEvents,cs=u.Z.supportsSVG,us=u.Z.supportsVML,ds=u.Z.swap,ps=u.Z.timedChunk,fs=u.Z.toFixed,_s=u.Z.toFullscreen,gs=u.Z.toJSON,vs=u.Z.trim,ms=u.Z.trimNumber,bs=u.Z.truncate,Zs=u.Z.unescapeHTML,Cs=u.Z.uniqueArray,ys=u.Z.useBlackWhiteOptions,Ps=u.Z.useStandardOptions,Es=u.Z.warn;N.Z.isBrowser?window.JXG=u.Z:N.Z.isWebWorker()&&(self.JXG=u.Z);const Os=u.Z})();var __webpack_exports__default=__webpack_exports__.ZP;const BoardContext=reactExports.createContext(),graph=_.memo(function u(N){let{name:x,id:a,SVs:X,children:B,actions:R,callAction:A}=useDoenetRenderer(N);const[O,c]=reactExports.useState(null),b=reactExports.useRef(null),m=reactExports.useRef(null),g=reactExports.useRef(null),f=reactExports.useRef(null),v=reactExports.useRef(!1),y=reactExports.useRef(!1),E=reactExports.useRef(!1);let T=reactExports.useRef(null),M=reactExports.useRef(null),L=X.showNavigation&&!X.fixAxes,Y=at=>{A({action:R.recordVisibilityChange,args:{isVisible:at}})};if(reactExports.useEffect(()=>{if(!X.haveGraphParent)return()=>{A({action:R.recordVisibilityChange,args:{isVisible:!1}})}},[]),reactExports.useEffect(()=>{if(X.haveGraphParent)return;let at=[X.xmin,X.ymax,X.xmax,X.ymin];m.current=at,__webpack_exports__default.Options.layer.numlayers=100,__webpack_exports__default.Options.navbar.highlightFillColor="var(--canvastext)",__webpack_exports__default.Options.navbar.strokeColor="var(--canvastext)";let tt=!1;Array.isArray(X.grid)&&(tt=!0,__webpack_exports__default.Options.grid.gridX=X.grid[0],__webpack_exports__default.Options.grid.gridY=X.grid[1]);let Q=window.JXG.JSXGraph.initBoard(a,{boundingbox:at,axis:!1,showCopyright:!1,showNavigation:!1,zoom:{wheel:!X.fixAxes},pan:{enabled:!X.fixAxes},grid:tt});Q.itemsRenderedLowQuality={},Q.on("boundingbox",()=>{if(!v.current){let dt=Q.getBoundingBox(),[ht,ut,_t,Dt]=dt,Bt=Math.abs(_t-ht),Xt=Math.abs(ut-Dt),$t=dt.map((se,ae)=>Math.abs(se-m.current[ae]));Math.max($t[0]/Bt,$t[1]/Xt,$t[2]/Bt,$t[3]/Xt)>1e-12&&(m.current=dt,A({action:R.changeAxisLimits,args:{xmin:ht,xmax:_t,ymin:Dt,ymax:ut}}))}}),c(Q),b.current={width:parseFloat(i(X.width)),aspectRatio:X.aspectRatio},X.displayXAxis&&H(Q),X.displayYAxis&&G(Q),y.current=!0,E.current=L;function it(dt){var ht;let ut=dt.target.id;if(ut==="")return!1;let _t=ut.replace(a+"_",""),Dt=Q.select(_t);(ht=Dt.triggerEventHandlers)==null||ht.call(Dt,["keyfocusout"],[dt])}Q.containerObj.addEventListener("focusout",it);function rt(dt){var ht;let ut=dt.target.id;if(ut==="")return!1;let _t=ut.replace(a+"_",""),Dt=Q.select(_t);(ht=Dt.triggerEventHandlers)==null||ht.call(Dt,["keydown"],[dt])}return Q.containerObj.addEventListener("keydown",rt),()=>{Q.off("boundingbox")}},[]),reactExports.useEffect(()=>{O&&L&&q()},[O]),X.haveGraphParent)return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("a",{name:a}),B]});const j={width:i(X.width),aspectRatio:String(X.aspectRatio),maxWidth:"100%"};let F={};if(X.hidden?j.display="none":X.displayMode==="inline"?F={display:"inline-block",verticalAlign:"middle"}:F={display:"flex",justifyContent:X.horizontalAlign},X.showBorder?j.border="2px solid var(--canvastext)":j.border="none",j.marginBottom="12px",j.marginTop="12px",j.backgroundColor="var(--canvas)",j.color="var(--canvastext)",!O)return jsxRuntimeExports.jsx(VisibilitySensor,{partialVisibility:!0,onChange:Y,children:jsxRuntimeExports.jsxs("div",{style:F,children:[jsxRuntimeExports.jsx("a",{name:a}),jsxRuntimeExports.jsx("div",{id:a,className:"jxgbox",style:j})]})});if(y.current)y.current=!1;else{Array.isArray(X.grid)?((__webpack_exports__default.Options.grid.gridX!==X.grid[0]||__webpack_exports__default.Options.grid.gridY!==X.grid[1])&&(__webpack_exports__default.Options.grid.gridX=X.grid[0],__webpack_exports__default.Options.grid.gridY=X.grid[1],O.grids.length>0&&(O.removeObject(O.grids[0]),O.grids=[])),O.grids.length===0&&O.create("grid",[],{gridX:X.grid[0],gridY:X.grid[1]})):O.grids.length>0&&(O.removeObject(O.grids[0]),O.grids=[]),X.grid==="dense"?(g.current&&(g.current.defaultTicks.setAttribute({majorHeight:-1}),g.current.defaultTicks.setAttribute({minorHeight:-1})),f.current&&(f.current.defaultTicks.setAttribute({majorHeight:-1}),f.current.defaultTicks.setAttribute({minorHeight:-1}))):X.grid==="medium"?(g.current&&(g.current.defaultTicks.setAttribute({majorHeight:-1}),g.current.defaultTicks.setAttribute({minorHeight:10})),f.current&&(f.current.defaultTicks.setAttribute({majorHeight:-1}),f.current.defaultTicks.setAttribute({minorHeight:10}))):(g.current&&(g.current.defaultTicks.setAttribute({majorHeight:12}),g.current.defaultTicks.setAttribute({minorHeight:10})),f.current&&(f.current.defaultTicks.setAttribute({majorHeight:12}),f.current.defaultTicks.setAttribute({minorHeight:10})));let at=X.displayXAxis?!g.current:!!g.current,tt=X.displayYAxis?!f.current:!!f.current;if(tt&&!at&&X.displayXAxis&&(O.removeObject(g.current),g.current=null),at&&!tt&&X.displayYAxis&&(O.removeObject(f.current),f.current=null),X.displayXAxis)if(g.current){let rt=!!X.xlabel;if(rt!==T.current&&(g.current.setAttribute({withlabel:rt}),T.current=rt),g.current.name=X.xlabel,g.current.defaultTicks.setAttribute({drawLabels:X.displayXAxisTickLabels}),g.current.hasLabel){let dt="rt",ht=[5,10],ut="right";X.xlabelPosition==="left"&&(dt="lft",ut="left",ht=[-5,10]),g.current.label.visProp.position=dt,g.current.label.visProp.anchorx=ut,g.current.label.visProp.offset=ht,g.current.label.needsUpdate=!0,g.current.label.fullUpdate()}}else H(O);else g.current&&(O.removeObject(g.current),g.current=null);if(X.displayYAxis)if(f.current){let rt=!!X.ylabel;if(rt!==M.current&&(f.current.setAttribute({withlabel:rt}),M.current=rt),f.current.name=X.ylabel,f.current.defaultTicks.setAttribute({drawLabels:X.displayYAxisTickLabels}),f.current.hasLabel){let dt="rt",ht=[-10,-5],ut="right";X.ylabelPosition==="bottom"&&(dt="lft",ht[1]=5),X.ylabelAlignment==="right"&&(ut="left",ht[0]=10),f.current.label.visProp.position=dt,f.current.label.visProp.offset=ht,f.current.label.visProp.anchorx=ut,f.current.label.needsUpdate=!0,f.current.label.fullUpdate()}}else G(O);else f.current&&(O.removeObject(f.current),f.current=null);L?E.current||(q(),E.current=!0):E.current&&(K(),E.current=!1);let Q={width:parseFloat(i(X.width)),aspectRatio:X.aspectRatio};(Q.width!==b.current.width||Q.aspectRatio!==b.current.aspectRatio)&&Number.isFinite(Q.width)&&Number.isFinite(Q.aspectRatio)&&(b.current=Q);let it=[X.xmin,X.ymax,X.xmax,X.ymin];it.some((rt,dt)=>rt!==m.current[dt])&&(v.current=!0,O.setBoundingBox(it),v.current=!1,O.fullUpdate(),O.updateQuality===O.BOARD_QUALITY_LOW&&(O.itemsRenderedLowQuality[a]=O),m.current=it)}return jsxRuntimeExports.jsx(VisibilitySensor,{partialVisibility:!0,onChange:Y,children:jsxRuntimeExports.jsxs("div",{style:F,children:[jsxRuntimeExports.jsx("a",{name:a}),jsxRuntimeExports.jsx("div",{id:a,className:"jxgbox",style:j}),jsxRuntimeExports.jsx(BoardContext.Provider,{value:O,children:B})]})});function G(at){let tt={highlight:!1,fixed:!0};if(X.ylabel){let Q="rt",it=[-10,-5],rt="right";X.ylabelPosition==="bottom"&&(Q="lft",it[1]=5),X.ylabelAlignment==="right"&&(rt="left",it[0]=10),tt.name=X.ylabel,tt.withLabel=!0,tt.label={position:Q,offset:it,anchorx:rt,strokeColor:"var(--canvastext)",highlight:!1},X.ylabelHasLatex&&(tt.label.useMathJax=!0)}if(M.current=!!X.ylabel,tt.strokeColor="var(--canvastext)",tt.highlight=!1,tt.ticks={ticksDistance:2,label:{offset:[12,-2],layer:2,strokeColor:"var(--canvastext)",highlightStrokeColor:"var(--canvastext)",highlightStrokeOpacity:1},strokeColor:"var(--canvastext)",strokeOpacity:.5,precision:4,drawLabels:X.displayYAxisTickLabels},X.yTickScaleFactor!==null){let Q=Context.fromAst(X.yTickScaleFactor),it=Q.evaluate_to_constant();if(it>0){let rt=Q.toString();tt.ticks.scale=it,tt.ticks.scaleSymbol=rt}}X.grid==="dense"?(tt.ticks.majorHeight=-1,tt.ticks.minorHeight=-1):X.grid==="medium"?(tt.ticks.majorHeight=-1,tt.ticks.minorHeight=10):(tt.ticks.majorHeight=12,tt.ticks.minorHeight=10),X.displayXAxis||(tt.ticks.drawZero=!0),at.suspendUpdate(),f.current=at.create("axis",[[0,0],[0,1]],tt),f.current.defaultTicks.ticksFunction=function(){var Q,it,rt;return it=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"ticksdistance"),rt=it.upper-it.lower,Q=Math.pow(10,Math.floor(Math.log(.2*rt)/Math.LN10)),rt<=6*Q&&(Q*=.5),Q},f.current.defaultTicks.generateEquidistantTicks=function(Q,it){var rt,dt=1e-6,ht,ut=this.equidistant?this.ticksFunction(1):this.ticksDelta,_t=4;if(this.visProp.minorticks=4,ht=this.getXandYdeltas(),ut*=this.visProp.scale,this.minTicksDistance>1e-6){ut=this.adjustTickDistance(ut,Q,ht);let Dt=10**Math.floor(Math.log10(ut))*this.visProp.scale;Math.abs(ut/Dt-2)<1e-14&&(_t=3,this.visProp.minorticks=3),ut/=_t+1}if(this.ticksDelta=ut,!(ut<1e-6)){for(rt=0,this.visProp.drawzero||(rt=ut);rt<=it.upper+dt&&(rt>=it.lower-dt&&this.processTickPosition(Q,rt,ut,ht),rt+=ut,!(it.upper-rt>ut*1e4)););for(rt=-ut;rt>=it.lower-dt&&(rt<=it.upper+dt&&this.processTickPosition(Q,rt,ut,ht),rt-=ut,!(rt-it.lower>ut*1e4)););}},at.unsuspendUpdate()}function H(at){let tt={highlight:!1,fixed:!0};if(X.xlabel){let Q="rt",it=[5,10],rt="right";X.xlabelPosition==="left"&&(Q="lft",rt="left",it=[-5,10]),tt.name=X.xlabel,tt.withLabel=!0,tt.label={position:Q,offset:it,anchorx:rt,strokeColor:"var(--canvastext)",highlight:!1},X.xlabelHasLatex&&(tt.label.useMathJax=!0)}if(T.current=!!X.xlabel,tt.ticks={ticksDistance:2,label:{offset:[-5,-15],layer:2,strokeColor:"var(--canvastext)",highlightStrokeColor:"var(--canvastext)",highlightStrokeOpacity:1},strokeColor:"var(--canvastext)",strokeOpacity:.5,precision:4,drawLabels:X.displayXAxisTickLabels},X.xTickScaleFactor!==null){let Q=Context.fromAst(X.xTickScaleFactor),it=Q.evaluate_to_constant();if(it>0){let rt=Q.toString();tt.ticks.scale=it,tt.ticks.scaleSymbol=rt}}tt.strokeColor="var(--canvastext)",tt.highlight=!1,X.grid==="dense"?(tt.ticks.majorHeight=-1,tt.ticks.minorHeight=-1):X.grid==="medium"?(tt.ticks.majorHeight=-1,tt.ticks.minorHeight=10):(tt.ticks.majorHeight=12,tt.ticks.minorHeight=10),X.displayYAxis||(tt.ticks.drawZero=!0),at.suspendUpdate(),g.current=at.create("axis",[[0,0],[1,0]],tt),g.current.defaultTicks.ticksFunction=function(){var Q,it,rt;return it=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"ticksdistance"),rt=it.upper-it.lower,Q=Math.pow(10,Math.floor(Math.log(.2*rt)/Math.LN10)),rt<=6*Q&&(Q*=.5),Q},g.current.defaultTicks.generateEquidistantTicks=function(Q,it){this.minTicksDistance=2*Math.max(2.5,Math.log10(Math.abs(it.lower)),Math.log10(Math.abs(it.upper)));var rt,dt=1e-6,ht,ut=this.equidistant?this.ticksFunction(1):this.ticksDelta,_t=4;if(this.visProp.minorticks=4,ht=this.getXandYdeltas(),ut*=this.visProp.scale,this.minTicksDistance>1e-6){ut=this.adjustTickDistance(ut,Q,ht);let Dt=10**Math.floor(Math.log10(ut))*this.visProp.scale;Math.abs(ut/Dt-2)<1e-14&&(_t=3,this.visProp.minorticks=3),ut/=_t+1}if(this.ticksDelta=ut,!(ut<1e-6)){for(rt=0,this.visProp.drawzero||(rt=ut);rt<=it.upper+dt&&(rt>=it.lower-dt&&this.processTickPosition(Q,rt,ut,ht),rt+=ut,!(it.upper-rt>ut*1e4)););for(rt=-ut;rt>=it.lower-dt&&(rt<=it.upper+dt&&this.processTickPosition(Q,rt,ut,ht),rt-=ut,!(rt-it.lower>ut*1e4)););}},at.unsuspendUpdate()}function q(){let at=document.querySelector("#"+cesc(a)+"_navigationbar"),tt=function(rt,dt,ht){var ut=function(){return ht.apply(O,arguments)};O["x_internal"+dt]=O["x_internal"+dt]||[],O["x_internal"+dt].push(ut),rt.addEventListener(dt,ut,!1)},Q=function(rt){rt||(rt=window.event),rt.stopPropagation?rt.stopPropagation():rt.cancelBubble=!0},it=function(rt,dt){var ht;ht=document.createElement("span"),at.appendChild(ht),ht.setAttribute("style","color: var(--canvastext); opacity: 0.7");let ut=document.createTextNode(rt);ht.appendChild(ut),ht.style.paddingLeft="7px",ht.style.paddingRight="7px",ht.classList!==void 0&&ht.classList.add("JXG_navigation_button"),tt(ht,"click",function(_t){return dt.bind(O)(),!1}),tt(ht,"mouseup",Q),tt(ht,"mousedown",Q),tt(ht,"touchend",Q),tt(ht,"touchstart",Q)};O.attr.showzoom&&(it("–",O.zoomOut),it("o",O.zoom100),it("+",O.zoomIn)),it("←",O.clickLeftArrow),it("↓",O.clickUpArrow),it("↑",O.clickDownArrow),it("→",O.clickRightArrow)}function K(){for(let at=7;at>=1;at--)document.querySelector("#"+cesc(a)+"_navigationbar > :first-child").remove();O.internalclick=[],O.internalmousedown=[],O.internalmouseup=[],O.internaltouchend=[],O.internaltouchstart=[]}});let tempCounter=0;const BASE_LAYER_OFFSET=tempCounter++,IMAGE_LAYER_OFFSET=tempCounter++,LINE_LAYER_OFFSET=tempCounter++,VERTEX_LAYER_OFFSET=tempCounter++,CONTROL_POINT_LAYER_OFFSET=tempCounter++,POINT_LAYER_OFFSET=tempCounter++,TEXT_LAYER_OFFSET=tempCounter++;export{BASE_LAYER_OFFSET,BoardContext,CONTROL_POINT_LAYER_OFFSET,IMAGE_LAYER_OFFSET,LINE_LAYER_OFFSET,POINT_LAYER_OFFSET,TEXT_LAYER_OFFSET,VERTEX_LAYER_OFFSET,graph as default};
